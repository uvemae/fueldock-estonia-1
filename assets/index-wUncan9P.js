function rf(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in i)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function na(i){const e=Object.create(null);for(const n of i.split(","))e[n]=1;return n=>n in e}const Ve={},Pn=[],oi=()=>{},Cu=()=>!1,Er=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),sa=i=>i.startsWith("onUpdate:"),Et=Object.assign,ra=(i,e)=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)},of=Object.prototype.hasOwnProperty,Be=(i,e)=>of.call(i,e),ve=Array.isArray,En=i=>ks(i)==="[object Map]",$n=i=>ks(i)==="[object Set]",Pl=i=>ks(i)==="[object Date]",Pe=i=>typeof i=="function",at=i=>typeof i=="string",ui=i=>typeof i=="symbol",Ge=i=>i!==null&&typeof i=="object",Mu=i=>(Ge(i)||Pe(i))&&Pe(i.then)&&Pe(i.catch),Iu=Object.prototype.toString,ks=i=>Iu.call(i),af=i=>ks(i).slice(8,-1),Ru=i=>ks(i)==="[object Object]",oa=i=>at(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,os=na(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),xr=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},lf=/-\w/g,Ci=xr(i=>i.replace(lf,e=>e.slice(1).toUpperCase())),uf=/\B([A-Z])/g,Di=xr(i=>i.replace(uf,"-$1").toLowerCase()),Du=xr(i=>i.charAt(0).toUpperCase()+i.slice(1)),ho=xr(i=>i?`on${Du(i)}`:""),Oi=(i,e)=>!Object.is(i,e),lr=(i,...e)=>{for(let n=0;n<i.length;n++)i[n](...e)},$u=(i,e,n,r=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:r,value:n})},fr=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let El;const Lr=()=>El||(El=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ts(i){if(ve(i)){const e={};for(let n=0;n<i.length;n++){const r=i[n],o=at(r)?ff(r):Ts(r);if(o)for(const a in o)e[a]=o[a]}return e}else if(at(i)||Ge(i))return i}const cf=/;(?![^(]*\))/g,df=/:([^]+)/,hf=/\/\*[^]*?\*\//g;function ff(i){const e={};return i.replace(hf,"").split(cf).forEach(n=>{if(n){const r=n.split(df);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function et(i){let e="";if(at(i))e=i;else if(ve(i))for(let n=0;n<i.length;n++){const r=et(i[n]);r&&(e+=r+" ")}else if(Ge(i))for(const n in i)i[n]&&(e+=n+" ");return e.trim()}const pf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=na(pf);function ju(i){return!!i||i===""}function vf(i,e){if(i.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<i.length;r++)n=nn(i[r],e[r]);return n}function nn(i,e){if(i===e)return!0;let n=Pl(i),r=Pl(e);if(n||r)return n&&r?i.getTime()===e.getTime():!1;if(n=ui(i),r=ui(e),n||r)return i===e;if(n=ve(i),r=ve(e),n||r)return n&&r?vf(i,e):!1;if(n=Ge(i),r=Ge(e),n||r){if(!n||!r)return!1;const o=Object.keys(i).length,a=Object.keys(e).length;if(o!==a)return!1;for(const u in i){const d=i.hasOwnProperty(u),h=e.hasOwnProperty(u);if(d&&!h||!d&&h||!nn(i[u],e[u]))return!1}}return String(i)===String(e)}function aa(i,e){return i.findIndex(n=>nn(n,e))}const Nu=i=>!!(i&&i.__v_isRef===!0),ne=i=>at(i)?i:i==null?"":ve(i)||Ge(i)&&(i.toString===Iu||!Pe(i.toString))?Nu(i)?ne(i.value):JSON.stringify(i,Uu,2):String(i),Uu=(i,e)=>Nu(e)?Uu(i,e.value):En(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],a)=>(n[fo(r,a)+" =>"]=o,n),{})}:$n(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>fo(n))}:ui(e)?fo(e):Ge(e)&&!ve(e)&&!Ru(e)?String(e):e,fo=(i,e="")=>{var n;return ui(i)?`Symbol(${(n=i.description)!=null?n:e})`:i};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ot;class _f{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ot,!e&&Ot&&(this.index=(Ot.scopes||(Ot.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ot;try{return Ot=this,e()}finally{Ot=n}}}on(){++this._on===1&&(this.prevScope=Ot,Ot=this)}off(){this._on>0&&--this._on===0&&(Ot=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function gf(){return Ot}let We;const po=new WeakSet;class Bu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ot&&Ot.active&&Ot.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,po.has(this)&&(po.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,xl(this),qu(this);const e=We,n=Xt;We=this,Xt=!0;try{return this.fn()}finally{Vu(this),We=e,Xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ca(e);this.deps=this.depsTail=void 0,xl(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?po.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Co(this)&&this.run()}get dirty(){return Co(this)}}let Fu=0,as,ls;function zu(i,e=!1){if(i.flags|=8,e){i.next=ls,ls=i;return}i.next=as,as=i}function la(){Fu++}function ua(){if(--Fu>0)return;if(ls){let e=ls;for(ls=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let i;for(;as;){let e=as;for(as=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){i||(i=r)}e=n}}if(i)throw i}function qu(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vu(i){let e,n=i.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),ca(r),yf(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}i.deps=e,i.depsTail=n}function Co(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function Hu(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===vs)||(i.globalVersion=vs,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!Co(i))))return;i.flags|=2;const e=i.dep,n=We,r=Xt;We=i,Xt=!0;try{qu(i);const o=i.fn(i._value);(e.version===0||Oi(o,i._value))&&(i.flags|=128,i._value=o,e.version++)}catch(o){throw e.version++,o}finally{We=n,Xt=r,Vu(i),i.flags&=-3}}function ca(i,e=!1){const{dep:n,prevSub:r,nextSub:o}=i;if(r&&(r.nextSub=o,i.prevSub=void 0),o&&(o.prevSub=r,i.nextSub=void 0),n.subs===i&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)ca(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function yf(i){const{prevDep:e,nextDep:n}=i;e&&(e.nextDep=n,i.prevDep=void 0),n&&(n.prevDep=e,i.nextDep=void 0)}let Xt=!0;const Zu=[];function wi(){Zu.push(Xt),Xt=!1}function Si(){const i=Zu.pop();Xt=i===void 0?!0:i}function xl(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let vs=0;class bf{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class da{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Xt||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new bf(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,Ku(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,vs++,this.notify(e)}notify(e){la();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ua()}}}function Ku(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ku(r)}const n=i.dep.subs;n!==i&&(i.prevSub=n,n&&(n.nextSub=i)),i.dep.subs=i}}const Mo=new WeakMap,tn=Symbol(""),Io=Symbol(""),_s=Symbol("");function _t(i,e,n){if(Xt&&We){let r=Mo.get(i);r||Mo.set(i,r=new Map);let o=r.get(n);o||(r.set(n,o=new da),o.map=r,o.key=n),o.track()}}function gi(i,e,n,r,o,a){const u=Mo.get(i);if(!u){vs++;return}const d=h=>{h&&h.trigger()};if(la(),e==="clear")u.forEach(d);else{const h=ve(i),p=h&&oa(n);if(h&&n==="length"){const v=Number(r);u.forEach((g,y)=>{(y==="length"||y===_s||!ui(y)&&y>=v)&&d(g)})}else switch((n!==void 0||u.has(void 0))&&d(u.get(n)),p&&d(u.get(_s)),e){case"add":h?p&&d(u.get("length")):(d(u.get(tn)),En(i)&&d(u.get(Io)));break;case"delete":h||(d(u.get(tn)),En(i)&&d(u.get(Io)));break;case"set":En(i)&&d(u.get(tn));break}}ua()}function vn(i){const e=Ue(i);return e===i?e:(_t(e,"iterate",_s),zt(i)?e:e.map(pt))}function Or(i){return _t(i=Ue(i),"iterate",_s),i}const wf={__proto__:null,[Symbol.iterator](){return mo(this,Symbol.iterator,pt)},concat(...i){return vn(this).concat(...i.map(e=>ve(e)?vn(e):e))},entries(){return mo(this,"entries",i=>(i[1]=pt(i[1]),i))},every(i,e){return mi(this,"every",i,e,void 0,arguments)},filter(i,e){return mi(this,"filter",i,e,n=>n.map(pt),arguments)},find(i,e){return mi(this,"find",i,e,pt,arguments)},findIndex(i,e){return mi(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return mi(this,"findLast",i,e,pt,arguments)},findLastIndex(i,e){return mi(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return mi(this,"forEach",i,e,void 0,arguments)},includes(...i){return vo(this,"includes",i)},indexOf(...i){return vo(this,"indexOf",i)},join(i){return vn(this).join(i)},lastIndexOf(...i){return vo(this,"lastIndexOf",i)},map(i,e){return mi(this,"map",i,e,void 0,arguments)},pop(){return ts(this,"pop")},push(...i){return ts(this,"push",i)},reduce(i,...e){return Ll(this,"reduce",i,e)},reduceRight(i,...e){return Ll(this,"reduceRight",i,e)},shift(){return ts(this,"shift")},some(i,e){return mi(this,"some",i,e,void 0,arguments)},splice(...i){return ts(this,"splice",i)},toReversed(){return vn(this).toReversed()},toSorted(i){return vn(this).toSorted(i)},toSpliced(...i){return vn(this).toSpliced(...i)},unshift(...i){return ts(this,"unshift",i)},values(){return mo(this,"values",pt)}};function mo(i,e,n){const r=Or(i),o=r[e]();return r!==i&&!zt(i)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=n(a.value)),a}),o}const Sf=Array.prototype;function mi(i,e,n,r,o,a){const u=Or(i),d=u!==i&&!zt(i),h=u[e];if(h!==Sf[e]){const g=h.apply(i,a);return d?pt(g):g}let p=n;u!==i&&(d?p=function(g,y){return n.call(this,pt(g),y,i)}:n.length>2&&(p=function(g,y){return n.call(this,g,y,i)}));const v=h.call(u,p,r);return d&&o?o(v):v}function Ll(i,e,n,r){const o=Or(i);let a=n;return o!==i&&(zt(i)?n.length>3&&(a=function(u,d,h){return n.call(this,u,d,h,i)}):a=function(u,d,h){return n.call(this,u,pt(d),h,i)}),o[e](a,...r)}function vo(i,e,n){const r=Ue(i);_t(r,"iterate",_s);const o=r[e](...n);return(o===-1||o===!1)&&ma(n[0])?(n[0]=Ue(n[0]),r[e](...n)):o}function ts(i,e,n=[]){wi(),la();const r=Ue(i)[e].apply(i,n);return ua(),Si(),r}const Af=na("__proto__,__v_isRef,__isVue"),Wu=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(ui));function kf(i){ui(i)||(i=String(i));const e=Ue(this);return _t(e,"has",i),e.hasOwnProperty(i)}class Gu{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Rf:Qu:a?Xu:Yu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=ve(e);if(!o){let h;if(u&&(h=wf[n]))return h;if(n==="hasOwnProperty")return kf}const d=Reflect.get(e,n,yt(e)?e:r);if((ui(n)?Wu.has(n):Af(n))||(o||_t(e,"get",n),a))return d;if(yt(d)){const h=u&&oa(n)?d:d.value;return o&&Ge(h)?Do(h):h}return Ge(d)?o?Do(d):fa(d):d}}class Ju extends Gu{constructor(e=!1){super(!1,e)}set(e,n,r,o){let a=e[n];if(!this._isShallow){const h=Mi(a);if(!zt(r)&&!Mi(r)&&(a=Ue(a),r=Ue(r)),!ve(e)&&yt(a)&&!yt(r))return h||(a.value=r),!0}const u=ve(e)&&oa(n)?Number(n)<e.length:Be(e,n),d=Reflect.set(e,n,r,yt(e)?e:o);return e===Ue(o)&&(u?Oi(r,a)&&gi(e,"set",n,r):gi(e,"add",n,r)),d}deleteProperty(e,n){const r=Be(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&gi(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!ui(n)||!Wu.has(n))&&_t(e,"has",n),r}ownKeys(e){return _t(e,"iterate",ve(e)?"length":tn),Reflect.ownKeys(e)}}class Tf extends Gu{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Pf=new Ju,Ef=new Tf,xf=new Ju(!0);const Ro=i=>i,Gs=i=>Reflect.getPrototypeOf(i);function Lf(i,e,n){return function(...r){const o=this.__v_raw,a=Ue(o),u=En(a),d=i==="entries"||i===Symbol.iterator&&u,h=i==="keys"&&u,p=o[i](...r),v=n?Ro:e?pr:pt;return!e&&_t(a,"iterate",h?Io:tn),{next(){const{value:g,done:y}=p.next();return y?{value:g,done:y}:{value:d?[v(g[0]),v(g[1])]:v(g),done:y}},[Symbol.iterator](){return this}}}}function Js(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function Of(i,e){const n={get(o){const a=this.__v_raw,u=Ue(a),d=Ue(o);i||(Oi(o,d)&&_t(u,"get",o),_t(u,"get",d));const{has:h}=Gs(u),p=e?Ro:i?pr:pt;if(h.call(u,o))return p(a.get(o));if(h.call(u,d))return p(a.get(d));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!i&&_t(Ue(o),"iterate",tn),o.size},has(o){const a=this.__v_raw,u=Ue(a),d=Ue(o);return i||(Oi(o,d)&&_t(u,"has",o),_t(u,"has",d)),o===d?a.has(o):a.has(o)||a.has(d)},forEach(o,a){const u=this,d=u.__v_raw,h=Ue(d),p=e?Ro:i?pr:pt;return!i&&_t(h,"iterate",tn),d.forEach((v,g)=>o.call(a,p(v),p(g),u))}};return Et(n,i?{add:Js("add"),set:Js("set"),delete:Js("delete"),clear:Js("clear")}:{add(o){!e&&!zt(o)&&!Mi(o)&&(o=Ue(o));const a=Ue(this);return Gs(a).has.call(a,o)||(a.add(o),gi(a,"add",o,o)),this},set(o,a){!e&&!zt(a)&&!Mi(a)&&(a=Ue(a));const u=Ue(this),{has:d,get:h}=Gs(u);let p=d.call(u,o);p||(o=Ue(o),p=d.call(u,o));const v=h.call(u,o);return u.set(o,a),p?Oi(a,v)&&gi(u,"set",o,a):gi(u,"add",o,a),this},delete(o){const a=Ue(this),{has:u,get:d}=Gs(a);let h=u.call(a,o);h||(o=Ue(o),h=u.call(a,o)),d&&d.call(a,o);const p=a.delete(o);return h&&gi(a,"delete",o,void 0),p},clear(){const o=Ue(this),a=o.size!==0,u=o.clear();return a&&gi(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Lf(o,i,e)}),n}function ha(i,e){const n=Of(i,e);return(r,o,a)=>o==="__v_isReactive"?!i:o==="__v_isReadonly"?i:o==="__v_raw"?r:Reflect.get(Be(n,o)&&o in r?n:r,o,a)}const Cf={get:ha(!1,!1)},Mf={get:ha(!1,!0)},If={get:ha(!0,!1)};const Yu=new WeakMap,Xu=new WeakMap,Qu=new WeakMap,Rf=new WeakMap;function Df(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $f(i){return i.__v_skip||!Object.isExtensible(i)?0:Df(af(i))}function fa(i){return Mi(i)?i:pa(i,!1,Pf,Cf,Yu)}function jf(i){return pa(i,!1,xf,Mf,Xu)}function Do(i){return pa(i,!0,Ef,If,Qu)}function pa(i,e,n,r,o){if(!Ge(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const a=$f(i);if(a===0)return i;const u=o.get(i);if(u)return u;const d=new Proxy(i,a===2?r:n);return o.set(i,d),d}function xn(i){return Mi(i)?xn(i.__v_raw):!!(i&&i.__v_isReactive)}function Mi(i){return!!(i&&i.__v_isReadonly)}function zt(i){return!!(i&&i.__v_isShallow)}function ma(i){return i?!!i.__v_raw:!1}function Ue(i){const e=i&&i.__v_raw;return e?Ue(e):i}function Nf(i){return!Be(i,"__v_skip")&&Object.isExtensible(i)&&$u(i,"__v_skip",!0),i}const pt=i=>Ge(i)?fa(i):i,pr=i=>Ge(i)?Do(i):i;function yt(i){return i?i.__v_isRef===!0:!1}function oe(i){return Uf(i,!1)}function Uf(i,e){return yt(i)?i:new Bf(i,e)}class Bf{constructor(e,n){this.dep=new da,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:pt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Mi(e);e=r?e:Ue(e),Oi(e,n)&&(this._rawValue=e,this._value=r?e:pt(e),this.dep.trigger())}}function Bt(i){return yt(i)?i.value:i}const Ff={get:(i,e,n)=>e==="__v_raw"?i:Bt(Reflect.get(i,e,n)),set:(i,e,n,r)=>{const o=i[e];return yt(o)&&!yt(n)?(o.value=n,!0):Reflect.set(i,e,n,r)}};function ec(i){return xn(i)?i:new Proxy(i,Ff)}class zf{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new da(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=vs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return zu(this,!0),!0}get value(){const e=this.dep.track();return Hu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qf(i,e,n=!1){let r,o;return Pe(i)?r=i:(r=i.get,o=i.set),new zf(r,o,n)}const Ys={},mr=new WeakMap;let Wi;function Vf(i,e=!1,n=Wi){if(n){let r=mr.get(n);r||mr.set(n,r=[]),r.push(i)}}function Hf(i,e,n=Ve){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:d,call:h}=n,p=q=>o?q:zt(q)||o===!1||o===0?yi(q,1):yi(q);let v,g,y,A,P=!1,O=!1;if(yt(i)?(g=()=>i.value,P=zt(i)):xn(i)?(g=()=>p(i),P=!0):ve(i)?(O=!0,P=i.some(q=>xn(q)||zt(q)),g=()=>i.map(q=>{if(yt(q))return q.value;if(xn(q))return p(q);if(Pe(q))return h?h(q,2):q()})):Pe(i)?e?g=h?()=>h(i,2):i:g=()=>{if(y){wi();try{y()}finally{Si()}}const q=Wi;Wi=v;try{return h?h(i,3,[A]):i(A)}finally{Wi=q}}:g=oi,e&&o){const q=g,re=o===!0?1/0:o;g=()=>yi(q(),re)}const T=gf(),U=()=>{v.stop(),T&&T.active&&ra(T.effects,v)};if(a&&e){const q=e;e=(...re)=>{q(...re),U()}}let I=O?new Array(i.length).fill(Ys):Ys;const C=q=>{if(!(!(v.flags&1)||!v.dirty&&!q))if(e){const re=v.run();if(o||P||(O?re.some((de,ge)=>Oi(de,I[ge])):Oi(re,I))){y&&y();const de=Wi;Wi=v;try{const ge=[re,I===Ys?void 0:O&&I[0]===Ys?[]:I,A];I=re,h?h(e,3,ge):e(...ge)}finally{Wi=de}}}else v.run()};return d&&d(C),v=new Bu(g),v.scheduler=u?()=>u(C,!1):C,A=q=>Vf(q,!1,v),y=v.onStop=()=>{const q=mr.get(v);if(q){if(h)h(q,4);else for(const re of q)re();mr.delete(v)}},e?r?C(!0):I=v.run():u?u(C.bind(null,!0),!0):v.run(),U.pause=v.pause.bind(v),U.resume=v.resume.bind(v),U.stop=U,U}function yi(i,e=1/0,n){if(e<=0||!Ge(i)||i.__v_skip||(n=n||new Map,(n.get(i)||0)>=e))return i;if(n.set(i,e),e--,yt(i))yi(i.value,e,n);else if(ve(i))for(let r=0;r<i.length;r++)yi(i[r],e,n);else if($n(i)||En(i))i.forEach(r=>{yi(r,e,n)});else if(Ru(i)){for(const r in i)yi(i[r],e,n);for(const r of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,r)&&yi(i[r],e,n)}return i}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ps(i,e,n,r){try{return r?i(...r):i()}catch(o){Cr(o,e,n)}}function ci(i,e,n,r){if(Pe(i)){const o=Ps(i,e,n,r);return o&&Mu(o)&&o.catch(a=>{Cr(a,e,n)}),o}if(ve(i)){const o=[];for(let a=0;a<i.length;a++)o.push(ci(i[a],e,n,r));return o}}function Cr(i,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||Ve;if(e){let d=e.parent;const h=e.proxy,p=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const v=d.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](i,h,p)===!1)return}d=d.parent}if(a){wi(),Ps(a,null,10,[i,h,p]),Si();return}}Zf(i,n,o,r,u)}function Zf(i,e,n,r=!0,o=!1){if(o)throw i;console.error(i)}const At=[];let si=-1;const Ln=[];let Ei=null,An=0;const tc=Promise.resolve();let vr=null;function ic(i){const e=vr||tc;return i?e.then(this?i.bind(this):i):e}function Kf(i){let e=si+1,n=At.length;for(;e<n;){const r=e+n>>>1,o=At[r],a=gs(o);a<i||a===i&&o.flags&2?e=r+1:n=r}return e}function va(i){if(!(i.flags&1)){const e=gs(i),n=At[At.length-1];!n||!(i.flags&2)&&e>=gs(n)?At.push(i):At.splice(Kf(e),0,i),i.flags|=1,nc()}}function nc(){vr||(vr=tc.then(rc))}function Wf(i){ve(i)?Ln.push(...i):Ei&&i.id===-1?Ei.splice(An+1,0,i):i.flags&1||(Ln.push(i),i.flags|=1),nc()}function Ol(i,e,n=si+1){for(;n<At.length;n++){const r=At[n];if(r&&r.flags&2){if(i&&r.id!==i.uid)continue;At.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sc(i){if(Ln.length){const e=[...new Set(Ln)].sort((n,r)=>gs(n)-gs(r));if(Ln.length=0,Ei){Ei.push(...e);return}for(Ei=e,An=0;An<Ei.length;An++){const n=Ei[An];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ei=null,An=0}}const gs=i=>i.id==null?i.flags&2?-1:1/0:i.id;function rc(i){try{for(si=0;si<At.length;si++){const e=At[si];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ps(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;si<At.length;si++){const e=At[si];e&&(e.flags&=-2)}si=-1,At.length=0,sc(),vr=null,(At.length||Ln.length)&&rc()}}let Ft=null,oc=null;function _r(i){const e=Ft;return Ft=i,oc=i&&i.type.__scopeId||null,e}function Gf(i,e=Ft,n){if(!e||i._n)return i;const r=(...o)=>{r._d&&Bl(-1);const a=_r(e);let u;try{u=i(...o)}finally{_r(a),r._d&&Bl(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function Ae(i,e){if(Ft===null)return i;const n=Dr(Ft),r=i.dirs||(i.dirs=[]);for(let o=0;o<e.length;o++){let[a,u,d,h=Ve]=e[o];a&&(Pe(a)&&(a={mounted:a,updated:a}),a.deep&&yi(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:d,modifiers:h}))}return i}function Vi(i,e,n,r){const o=i.dirs,a=e&&e.dirs;for(let u=0;u<o.length;u++){const d=o[u];a&&(d.oldValue=a[u].value);let h=d.dir[r];h&&(wi(),ci(h,n,8,[i.el,d,i,e]),Si())}}const Jf=Symbol("_vte"),Yf=i=>i.__isTeleport,Xf=Symbol("_leaveCb");function _a(i,e){i.shapeFlag&6&&i.component?(i.transition=e,_a(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function ac(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const gr=new WeakMap;function us(i,e,n,r,o=!1){if(ve(i)){i.forEach((P,O)=>us(P,e&&(ve(e)?e[O]:e),n,r,o));return}if(cs(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&us(i,e,n,r.component.subTree);return}const a=r.shapeFlag&4?Dr(r.component):r.el,u=o?null:a,{i:d,r:h}=i,p=e&&e.r,v=d.refs===Ve?d.refs={}:d.refs,g=d.setupState,y=Ue(g),A=g===Ve?Cu:P=>Be(y,P);if(p!=null&&p!==h){if(Cl(e),at(p))v[p]=null,A(p)&&(g[p]=null);else if(yt(p)){p.value=null;const P=e;P.k&&(v[P.k]=null)}}if(Pe(h))Ps(h,d,12,[u,v]);else{const P=at(h),O=yt(h);if(P||O){const T=()=>{if(i.f){const U=P?A(h)?g[h]:v[h]:h.value;if(o)ve(U)&&ra(U,a);else if(ve(U))U.includes(a)||U.push(a);else if(P)v[h]=[a],A(h)&&(g[h]=v[h]);else{const I=[a];h.value=I,i.k&&(v[i.k]=I)}}else P?(v[h]=u,A(h)&&(g[h]=u)):O&&(h.value=u,i.k&&(v[i.k]=u))};if(u){const U=()=>{T(),gr.delete(i)};U.id=-1,gr.set(i,U),Mt(U,n)}else Cl(i),T()}}}function Cl(i){const e=gr.get(i);e&&(e.flags|=8,gr.delete(i))}Lr().requestIdleCallback;Lr().cancelIdleCallback;const cs=i=>!!i.type.__asyncLoader,lc=i=>i.type.__isKeepAlive;function Qf(i,e){uc(i,"a",e)}function ep(i,e){uc(i,"da",e)}function uc(i,e,n=Tt){const r=i.__wdc||(i.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return i()});if(Mr(e,r,n),n){let o=n.parent;for(;o&&o.parent;)lc(o.parent.vnode)&&tp(r,e,n,o),o=o.parent}}function tp(i,e,n,r){const o=Mr(e,i,r,!0);cc(()=>{ra(r[e],o)},n)}function Mr(i,e,n=Tt,r=!1){if(n){const o=n[i]||(n[i]=[]),a=e.__weh||(e.__weh=(...u)=>{wi();const d=Es(n),h=ci(e,n,i,u);return d(),Si(),h});return r?o.unshift(a):o.push(a),a}}const Ai=i=>(e,n=Tt)=>{(!bs||i==="sp")&&Mr(i,(...r)=>e(...r),n)},ip=Ai("bm"),jn=Ai("m"),np=Ai("bu"),sp=Ai("u"),rp=Ai("bum"),cc=Ai("um"),op=Ai("sp"),ap=Ai("rtg"),lp=Ai("rtc");function up(i,e=Tt){Mr("ec",i,e)}const cp=Symbol.for("v-ndc");function ai(i,e,n,r){let o;const a=n,u=ve(i);if(u||at(i)){const d=u&&xn(i);let h=!1,p=!1;d&&(h=!zt(i),p=Mi(i),i=Or(i)),o=new Array(i.length);for(let v=0,g=i.length;v<g;v++)o[v]=e(h?p?pr(pt(i[v])):pt(i[v]):i[v],v,void 0,a)}else if(typeof i=="number"){o=new Array(i);for(let d=0;d<i;d++)o[d]=e(d+1,d,void 0,a)}else if(Ge(i))if(i[Symbol.iterator])o=Array.from(i,(d,h)=>e(d,h,void 0,a));else{const d=Object.keys(i);o=new Array(d.length);for(let h=0,p=d.length;h<p;h++){const v=d[h];o[h]=e(i[v],v,h,a)}}else o=[];return o}const $o=i=>i?Cc(i)?Dr(i):$o(i.parent):null,ds=Et(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>$o(i.parent),$root:i=>$o(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>hc(i),$forceUpdate:i=>i.f||(i.f=()=>{va(i.update)}),$nextTick:i=>i.n||(i.n=ic.bind(i.proxy)),$watch:i=>Mp.bind(i)}),_o=(i,e)=>i!==Ve&&!i.__isScriptSetup&&Be(i,e),dp={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:d,appContext:h}=i;let p;if(e[0]!=="$"){const A=u[e];if(A!==void 0)switch(A){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(_o(r,e))return u[e]=1,r[e];if(o!==Ve&&Be(o,e))return u[e]=2,o[e];if((p=i.propsOptions[0])&&Be(p,e))return u[e]=3,a[e];if(n!==Ve&&Be(n,e))return u[e]=4,n[e];jo&&(u[e]=0)}}const v=ds[e];let g,y;if(v)return e==="$attrs"&&_t(i.attrs,"get",""),v(i);if((g=d.__cssModules)&&(g=g[e]))return g;if(n!==Ve&&Be(n,e))return u[e]=4,n[e];if(y=h.config.globalProperties,Be(y,e))return y[e]},set({_:i},e,n){const{data:r,setupState:o,ctx:a}=i;return _o(o,e)?(o[e]=n,!0):r!==Ve&&Be(r,e)?(r[e]=n,!0):Be(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(a[e]=n,!0)},has({_:{data:i,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a,type:u}},d){let h,p;return!!(n[d]||i!==Ve&&d[0]!=="$"&&Be(i,d)||_o(e,d)||(h=a[0])&&Be(h,d)||Be(r,d)||Be(ds,d)||Be(o.config.globalProperties,d)||(p=u.__cssModules)&&p[d])},defineProperty(i,e,n){return n.get!=null?i._.accessCache[e]=0:Be(n,"value")&&this.set(i,e,n.value,null),Reflect.defineProperty(i,e,n)}};function Ml(i){return ve(i)?i.reduce((e,n)=>(e[n]=null,e),{}):i}let jo=!0;function hp(i){const e=hc(i),n=i.proxy,r=i.ctx;jo=!1,e.beforeCreate&&Il(e.beforeCreate,i,"bc");const{data:o,computed:a,methods:u,watch:d,provide:h,inject:p,created:v,beforeMount:g,mounted:y,beforeUpdate:A,updated:P,activated:O,deactivated:T,beforeDestroy:U,beforeUnmount:I,destroyed:C,unmounted:q,render:re,renderTracked:de,renderTriggered:ge,errorCaptured:Oe,serverPrefetch:Me,expose:J,inheritAttrs:$,components:B,directives:ye,filters:ie}=e;if(p&&fp(p,r,null),u)for(const ke in u){const Q=u[ke];Pe(Q)&&(r[ke]=Q.bind(n))}if(o){const ke=o.call(n,n);Ge(ke)&&(i.data=fa(ke))}if(jo=!0,a)for(const ke in a){const Q=a[ke],dt=Pe(Q)?Q.bind(n,n):Pe(Q.get)?Q.get.bind(n,n):oi,he=!Pe(Q)&&Pe(Q.set)?Q.set.bind(n):oi,Re=Pt({get:dt,set:he});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>Re.value,set:qe=>Re.value=qe})}if(d)for(const ke in d)dc(d[ke],r,n,ke);if(h){const ke=Pe(h)?h.call(n):h;Reflect.ownKeys(ke).forEach(Q=>{yp(Q,ke[Q])})}v&&Il(v,i,"c");function Z(ke,Q){ve(Q)?Q.forEach(dt=>ke(dt.bind(n))):Q&&ke(Q.bind(n))}if(Z(ip,g),Z(jn,y),Z(np,A),Z(sp,P),Z(Qf,O),Z(ep,T),Z(up,Oe),Z(lp,de),Z(ap,ge),Z(rp,I),Z(cc,q),Z(op,Me),ve(J))if(J.length){const ke=i.exposed||(i.exposed={});J.forEach(Q=>{Object.defineProperty(ke,Q,{get:()=>n[Q],set:dt=>n[Q]=dt,enumerable:!0})})}else i.exposed||(i.exposed={});re&&i.render===oi&&(i.render=re),$!=null&&(i.inheritAttrs=$),B&&(i.components=B),ye&&(i.directives=ye),Me&&ac(i)}function fp(i,e,n=oi){ve(i)&&(i=No(i));for(const r in i){const o=i[r];let a;Ge(o)?"default"in o?a=ur(o.from||r,o.default,!0):a=ur(o.from||r):a=ur(o),yt(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function Il(i,e,n){ci(ve(i)?i.map(r=>r.bind(e.proxy)):i.bind(e.proxy),e,n)}function dc(i,e,n,r){let o=r.includes(".")?Tc(n,r):()=>n[r];if(at(i)){const a=e[i];Pe(a)&&cr(o,a)}else if(Pe(i))cr(o,i.bind(n));else if(Ge(i))if(ve(i))i.forEach(a=>dc(a,e,n,r));else{const a=Pe(i.handler)?i.handler.bind(n):e[i.handler];Pe(a)&&cr(o,a,i)}}function hc(i){const e=i.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=i.appContext,d=a.get(e);let h;return d?h=d:!o.length&&!n&&!r?h=e:(h={},o.length&&o.forEach(p=>yr(h,p,u,!0)),yr(h,e,u)),Ge(e)&&a.set(e,h),h}function yr(i,e,n,r=!1){const{mixins:o,extends:a}=e;a&&yr(i,a,n,!0),o&&o.forEach(u=>yr(i,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const d=pp[u]||n&&n[u];i[u]=d?d(i[u],e[u]):e[u]}return i}const pp={data:Rl,props:Dl,emits:Dl,methods:ss,computed:ss,beforeCreate:wt,created:wt,beforeMount:wt,mounted:wt,beforeUpdate:wt,updated:wt,beforeDestroy:wt,beforeUnmount:wt,destroyed:wt,unmounted:wt,activated:wt,deactivated:wt,errorCaptured:wt,serverPrefetch:wt,components:ss,directives:ss,watch:vp,provide:Rl,inject:mp};function Rl(i,e){return e?i?function(){return Et(Pe(i)?i.call(this,this):i,Pe(e)?e.call(this,this):e)}:e:i}function mp(i,e){return ss(No(i),No(e))}function No(i){if(ve(i)){const e={};for(let n=0;n<i.length;n++)e[i[n]]=i[n];return e}return i}function wt(i,e){return i?[...new Set([].concat(i,e))]:e}function ss(i,e){return i?Et(Object.create(null),i,e):e}function Dl(i,e){return i?ve(i)&&ve(e)?[...new Set([...i,...e])]:Et(Object.create(null),Ml(i),Ml(e??{})):e}function vp(i,e){if(!i)return e;if(!e)return i;const n=Et(Object.create(null),i);for(const r in e)n[r]=wt(i[r],e[r]);return n}function fc(){return{app:null,config:{isNativeTag:Cu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _p=0;function gp(i,e){return function(r,o=null){Pe(r)||(r=Et({},r)),o!=null&&!Ge(o)&&(o=null);const a=fc(),u=new WeakSet,d=[];let h=!1;const p=a.app={_uid:_p++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:em,get config(){return a.config},set config(v){},use(v,...g){return u.has(v)||(v&&Pe(v.install)?(u.add(v),v.install(p,...g)):Pe(v)&&(u.add(v),v(p,...g))),p},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),p},component(v,g){return g?(a.components[v]=g,p):a.components[v]},directive(v,g){return g?(a.directives[v]=g,p):a.directives[v]},mount(v,g,y){if(!h){const A=p._ceVNode||li(r,o);return A.appContext=a,y===!0?y="svg":y===!1&&(y=void 0),i(A,v,y),h=!0,p._container=v,v.__vue_app__=p,Dr(A.component)}},onUnmount(v){d.push(v)},unmount(){h&&(ci(d,p._instance,16),i(null,p._container),delete p._container.__vue_app__)},provide(v,g){return a.provides[v]=g,p},runWithContext(v){const g=On;On=p;try{return v()}finally{On=g}}};return p}}let On=null;function yp(i,e){if(Tt){let n=Tt.provides;const r=Tt.parent&&Tt.parent.provides;r===n&&(n=Tt.provides=Object.create(r)),n[i]=e}}function ur(i,e,n=!1){const r=Wp();if(r||On){let o=On?On._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&i in o)return o[i];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}const pc={},mc=()=>Object.create(pc),vc=i=>Object.getPrototypeOf(i)===pc;function bp(i,e,n,r=!1){const o={},a=mc();i.propsDefaults=Object.create(null),_c(i,e,o,a);for(const u in i.propsOptions[0])u in o||(o[u]=void 0);n?i.props=r?o:jf(o):i.type.props?i.props=o:i.props=a,i.attrs=a}function wp(i,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=i,d=Ue(o),[h]=i.propsOptions;let p=!1;if((r||u>0)&&!(u&16)){if(u&8){const v=i.vnode.dynamicProps;for(let g=0;g<v.length;g++){let y=v[g];if(Ir(i.emitsOptions,y))continue;const A=e[y];if(h)if(Be(a,y))A!==a[y]&&(a[y]=A,p=!0);else{const P=Ci(y);o[P]=Uo(h,d,P,A,i,!1)}else A!==a[y]&&(a[y]=A,p=!0)}}}else{_c(i,e,o,a)&&(p=!0);let v;for(const g in d)(!e||!Be(e,g)&&((v=Di(g))===g||!Be(e,v)))&&(h?n&&(n[g]!==void 0||n[v]!==void 0)&&(o[g]=Uo(h,d,g,void 0,i,!0)):delete o[g]);if(a!==d)for(const g in a)(!e||!Be(e,g))&&(delete a[g],p=!0)}p&&gi(i.attrs,"set","")}function _c(i,e,n,r){const[o,a]=i.propsOptions;let u=!1,d;if(e)for(let h in e){if(os(h))continue;const p=e[h];let v;o&&Be(o,v=Ci(h))?!a||!a.includes(v)?n[v]=p:(d||(d={}))[v]=p:Ir(i.emitsOptions,h)||(!(h in r)||p!==r[h])&&(r[h]=p,u=!0)}if(a){const h=Ue(n),p=d||Ve;for(let v=0;v<a.length;v++){const g=a[v];n[g]=Uo(o,h,g,p[g],i,!Be(p,g))}}return u}function Uo(i,e,n,r,o,a){const u=i[n];if(u!=null){const d=Be(u,"default");if(d&&r===void 0){const h=u.default;if(u.type!==Function&&!u.skipFactory&&Pe(h)){const{propsDefaults:p}=o;if(n in p)r=p[n];else{const v=Es(o);r=p[n]=h.call(null,e),v()}}else r=h;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!d?r=!1:u[1]&&(r===""||r===Di(n))&&(r=!0))}return r}const Sp=new WeakMap;function gc(i,e,n=!1){const r=n?Sp:e.propsCache,o=r.get(i);if(o)return o;const a=i.props,u={},d=[];let h=!1;if(!Pe(i)){const v=g=>{h=!0;const[y,A]=gc(g,e,!0);Et(u,y),A&&d.push(...A)};!n&&e.mixins.length&&e.mixins.forEach(v),i.extends&&v(i.extends),i.mixins&&i.mixins.forEach(v)}if(!a&&!h)return Ge(i)&&r.set(i,Pn),Pn;if(ve(a))for(let v=0;v<a.length;v++){const g=Ci(a[v]);$l(g)&&(u[g]=Ve)}else if(a)for(const v in a){const g=Ci(v);if($l(g)){const y=a[v],A=u[g]=ve(y)||Pe(y)?{type:y}:Et({},y),P=A.type;let O=!1,T=!0;if(ve(P))for(let U=0;U<P.length;++U){const I=P[U],C=Pe(I)&&I.name;if(C==="Boolean"){O=!0;break}else C==="String"&&(T=!1)}else O=Pe(P)&&P.name==="Boolean";A[0]=O,A[1]=T,(O||Be(A,"default"))&&d.push(g)}}const p=[u,d];return Ge(i)&&r.set(i,p),p}function $l(i){return i[0]!=="$"&&!os(i)}const ga=i=>i==="_"||i==="_ctx"||i==="$stable",ya=i=>ve(i)?i.map(ri):[ri(i)],Ap=(i,e,n)=>{if(e._n)return e;const r=Gf((...o)=>ya(e(...o)),n);return r._c=!1,r},yc=(i,e,n)=>{const r=i._ctx;for(const o in i){if(ga(o))continue;const a=i[o];if(Pe(a))e[o]=Ap(o,a,r);else if(a!=null){const u=ya(a);e[o]=()=>u}}},bc=(i,e)=>{const n=ya(e);i.slots.default=()=>n},wc=(i,e,n)=>{for(const r in e)(n||!ga(r))&&(i[r]=e[r])},kp=(i,e,n)=>{const r=i.slots=mc();if(i.vnode.shapeFlag&32){const o=e._;o?(wc(r,e,n),n&&$u(r,"_",o,!0)):yc(e,r)}else e&&bc(i,e)},Tp=(i,e,n)=>{const{vnode:r,slots:o}=i;let a=!0,u=Ve;if(r.shapeFlag&32){const d=e._;d?n&&d===1?a=!1:wc(o,e,n):(a=!e.$stable,yc(e,o)),u=e}else e&&(bc(i,e),u={default:1});if(a)for(const d in o)!ga(d)&&u[d]==null&&delete o[d]},Mt=Bp;function Pp(i){return Ep(i)}function Ep(i,e){const n=Lr();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:d,createComment:h,setText:p,setElementText:v,parentNode:g,nextSibling:y,setScopeId:A=oi,insertStaticContent:P}=i,O=(b,k,R,H=null,F=null,N=null,Y=void 0,G=null,W=!!k.dynamicChildren)=>{if(b===k)return;b&&!is(b,k)&&(H=mt(b),qe(b,F,N,!0),b=null),k.patchFlag===-2&&(W=!1,k.dynamicChildren=null);const{type:V,ref:ae,shapeFlag:ee}=k;switch(V){case Rr:T(b,k,R,H);break;case Ii:U(b,k,R,H);break;case yo:b==null&&I(k,R,H,Y);break;case ot:B(b,k,R,H,F,N,Y,G,W);break;default:ee&1?re(b,k,R,H,F,N,Y,G,W):ee&6?ye(b,k,R,H,F,N,Y,G,W):(ee&64||ee&128)&&V.process(b,k,R,H,F,N,Y,G,W,Vt)}ae!=null&&F?us(ae,b&&b.ref,N,k||b,!k):ae==null&&b&&b.ref!=null&&us(b.ref,null,N,b,!0)},T=(b,k,R,H)=>{if(b==null)r(k.el=d(k.children),R,H);else{const F=k.el=b.el;k.children!==b.children&&p(F,k.children)}},U=(b,k,R,H)=>{b==null?r(k.el=h(k.children||""),R,H):k.el=b.el},I=(b,k,R,H)=>{[b.el,b.anchor]=P(b.children,k,R,H,b.el,b.anchor)},C=({el:b,anchor:k},R,H)=>{let F;for(;b&&b!==k;)F=y(b),r(b,R,H),b=F;r(k,R,H)},q=({el:b,anchor:k})=>{let R;for(;b&&b!==k;)R=y(b),o(b),b=R;o(k)},re=(b,k,R,H,F,N,Y,G,W)=>{k.type==="svg"?Y="svg":k.type==="math"&&(Y="mathml"),b==null?de(k,R,H,F,N,Y,G,W):Me(b,k,F,N,Y,G,W)},de=(b,k,R,H,F,N,Y,G)=>{let W,V;const{props:ae,shapeFlag:ee,transition:le,dirs:fe}=b;if(W=b.el=u(b.type,N,ae&&ae.is,ae),ee&8?v(W,b.children):ee&16&&Oe(b.children,W,null,H,F,go(b,N),Y,G),fe&&Vi(b,null,H,"created"),ge(W,b,b.scopeId,Y,H),ae){for(const Ne in ae)Ne!=="value"&&!os(Ne)&&a(W,Ne,null,ae[Ne],N,H);"value"in ae&&a(W,"value",null,ae.value,N),(V=ae.onVnodeBeforeMount)&&ni(V,H,b)}fe&&Vi(b,null,H,"beforeMount");const Ee=xp(F,le);Ee&&le.beforeEnter(W),r(W,k,R),((V=ae&&ae.onVnodeMounted)||Ee||fe)&&Mt(()=>{V&&ni(V,H,b),Ee&&le.enter(W),fe&&Vi(b,null,H,"mounted")},F)},ge=(b,k,R,H,F)=>{if(R&&A(b,R),H)for(let N=0;N<H.length;N++)A(b,H[N]);if(F){let N=F.subTree;if(k===N||Ec(N.type)&&(N.ssContent===k||N.ssFallback===k)){const Y=F.vnode;ge(b,Y,Y.scopeId,Y.slotScopeIds,F.parent)}}},Oe=(b,k,R,H,F,N,Y,G,W=0)=>{for(let V=W;V<b.length;V++){const ae=b[V]=G?xi(b[V]):ri(b[V]);O(null,ae,k,R,H,F,N,Y,G)}},Me=(b,k,R,H,F,N,Y)=>{const G=k.el=b.el;let{patchFlag:W,dynamicChildren:V,dirs:ae}=k;W|=b.patchFlag&16;const ee=b.props||Ve,le=k.props||Ve;let fe;if(R&&Hi(R,!1),(fe=le.onVnodeBeforeUpdate)&&ni(fe,R,k,b),ae&&Vi(k,b,R,"beforeUpdate"),R&&Hi(R,!0),(ee.innerHTML&&le.innerHTML==null||ee.textContent&&le.textContent==null)&&v(G,""),V?J(b.dynamicChildren,V,G,R,H,go(k,F),N):Y||Q(b,k,G,null,R,H,go(k,F),N,!1),W>0){if(W&16)$(G,ee,le,R,F);else if(W&2&&ee.class!==le.class&&a(G,"class",null,le.class,F),W&4&&a(G,"style",ee.style,le.style,F),W&8){const Ee=k.dynamicProps;for(let Ne=0;Ne<Ee.length;Ne++){const E=Ee[Ne],S=ee[E],D=le[E];(D!==S||E==="value")&&a(G,E,S,D,F,R)}}W&1&&b.children!==k.children&&v(G,k.children)}else!Y&&V==null&&$(G,ee,le,R,F);((fe=le.onVnodeUpdated)||ae)&&Mt(()=>{fe&&ni(fe,R,k,b),ae&&Vi(k,b,R,"updated")},H)},J=(b,k,R,H,F,N,Y)=>{for(let G=0;G<k.length;G++){const W=b[G],V=k[G],ae=W.el&&(W.type===ot||!is(W,V)||W.shapeFlag&198)?g(W.el):R;O(W,V,ae,null,H,F,N,Y,!0)}},$=(b,k,R,H,F)=>{if(k!==R){if(k!==Ve)for(const N in k)!os(N)&&!(N in R)&&a(b,N,k[N],null,F,H);for(const N in R){if(os(N))continue;const Y=R[N],G=k[N];Y!==G&&N!=="value"&&a(b,N,G,Y,F,H)}"value"in R&&a(b,"value",k.value,R.value,F)}},B=(b,k,R,H,F,N,Y,G,W)=>{const V=k.el=b?b.el:d(""),ae=k.anchor=b?b.anchor:d("");let{patchFlag:ee,dynamicChildren:le,slotScopeIds:fe}=k;fe&&(G=G?G.concat(fe):fe),b==null?(r(V,R,H),r(ae,R,H),Oe(k.children||[],R,ae,F,N,Y,G,W)):ee>0&&ee&64&&le&&b.dynamicChildren?(J(b.dynamicChildren,le,R,F,N,Y,G),(k.key!=null||F&&k===F.subTree)&&Sc(b,k,!0)):Q(b,k,R,ae,F,N,Y,G,W)},ye=(b,k,R,H,F,N,Y,G,W)=>{k.slotScopeIds=G,b==null?k.shapeFlag&512?F.ctx.activate(k,R,H,Y,W):ie(k,R,H,F,N,Y,W):j(b,k,W)},ie=(b,k,R,H,F,N,Y)=>{const G=b.component=Kp(b,H,F);if(lc(b)&&(G.ctx.renderer=Vt),Gp(G,!1,Y),G.asyncDep){if(F&&F.registerDep(G,Z,Y),!b.el){const W=G.subTree=li(Ii);U(null,W,k,R),b.placeholder=W.el}}else Z(G,b,k,R,F,N,Y)},j=(b,k,R)=>{const H=k.component=b.component;if(Np(b,k,R))if(H.asyncDep&&!H.asyncResolved){ke(H,k,R);return}else H.next=k,H.update();else k.el=b.el,H.vnode=k},Z=(b,k,R,H,F,N,Y)=>{const G=()=>{if(b.isMounted){let{next:ee,bu:le,u:fe,parent:Ee,vnode:Ne}=b;{const He=Ac(b);if(He){ee&&(ee.el=Ne.el,ke(b,ee,Y)),He.asyncDep.then(()=>{b.isUnmounted||G()});return}}let E=ee,S;Hi(b,!1),ee?(ee.el=Ne.el,ke(b,ee,Y)):ee=Ne,le&&lr(le),(S=ee.props&&ee.props.onVnodeBeforeUpdate)&&ni(S,Ee,ee,Ne),Hi(b,!0);const D=Nl(b),Te=b.subTree;b.subTree=D,O(Te,D,g(Te.el),mt(Te),b,F,N),ee.el=D.el,E===null&&Up(b,D.el),fe&&Mt(fe,F),(S=ee.props&&ee.props.onVnodeUpdated)&&Mt(()=>ni(S,Ee,ee,Ne),F)}else{let ee;const{el:le,props:fe}=k,{bm:Ee,m:Ne,parent:E,root:S,type:D}=b,Te=cs(k);Hi(b,!1),Ee&&lr(Ee),!Te&&(ee=fe&&fe.onVnodeBeforeMount)&&ni(ee,E,k),Hi(b,!0);{S.ce&&S.ce._def.shadowRoot!==!1&&S.ce._injectChildStyle(D);const He=b.subTree=Nl(b);O(null,He,R,H,b,F,N),k.el=He.el}if(Ne&&Mt(Ne,F),!Te&&(ee=fe&&fe.onVnodeMounted)){const He=k;Mt(()=>ni(ee,E,He),F)}(k.shapeFlag&256||E&&cs(E.vnode)&&E.vnode.shapeFlag&256)&&b.a&&Mt(b.a,F),b.isMounted=!0,k=R=H=null}};b.scope.on();const W=b.effect=new Bu(G);b.scope.off();const V=b.update=W.run.bind(W),ae=b.job=W.runIfDirty.bind(W);ae.i=b,ae.id=b.uid,W.scheduler=()=>va(ae),Hi(b,!0),V()},ke=(b,k,R)=>{k.component=b;const H=b.vnode.props;b.vnode=k,b.next=null,wp(b,k.props,H,R),Tp(b,k.children,R),wi(),Ol(b),Si()},Q=(b,k,R,H,F,N,Y,G,W=!1)=>{const V=b&&b.children,ae=b?b.shapeFlag:0,ee=k.children,{patchFlag:le,shapeFlag:fe}=k;if(le>0){if(le&128){he(V,ee,R,H,F,N,Y,G,W);return}else if(le&256){dt(V,ee,R,H,F,N,Y,G,W);return}}fe&8?(ae&16&&be(V,F,N),ee!==V&&v(R,ee)):ae&16?fe&16?he(V,ee,R,H,F,N,Y,G,W):be(V,F,N,!0):(ae&8&&v(R,""),fe&16&&Oe(ee,R,H,F,N,Y,G,W))},dt=(b,k,R,H,F,N,Y,G,W)=>{b=b||Pn,k=k||Pn;const V=b.length,ae=k.length,ee=Math.min(V,ae);let le;for(le=0;le<ee;le++){const fe=k[le]=W?xi(k[le]):ri(k[le]);O(b[le],fe,R,null,F,N,Y,G,W)}V>ae?be(b,F,N,!0,!1,ee):Oe(k,R,H,F,N,Y,G,W,ee)},he=(b,k,R,H,F,N,Y,G,W)=>{let V=0;const ae=k.length;let ee=b.length-1,le=ae-1;for(;V<=ee&&V<=le;){const fe=b[V],Ee=k[V]=W?xi(k[V]):ri(k[V]);if(is(fe,Ee))O(fe,Ee,R,null,F,N,Y,G,W);else break;V++}for(;V<=ee&&V<=le;){const fe=b[ee],Ee=k[le]=W?xi(k[le]):ri(k[le]);if(is(fe,Ee))O(fe,Ee,R,null,F,N,Y,G,W);else break;ee--,le--}if(V>ee){if(V<=le){const fe=le+1,Ee=fe<ae?k[fe].el:H;for(;V<=le;)O(null,k[V]=W?xi(k[V]):ri(k[V]),R,Ee,F,N,Y,G,W),V++}}else if(V>le)for(;V<=ee;)qe(b[V],F,N,!0),V++;else{const fe=V,Ee=V,Ne=new Map;for(V=Ee;V<=le;V++){const we=k[V]=W?xi(k[V]):ri(k[V]);we.key!=null&&Ne.set(we.key,V)}let E,S=0;const D=le-Ee+1;let Te=!1,He=0;const Ce=new Array(D);for(V=0;V<D;V++)Ce[V]=0;for(V=fe;V<=ee;V++){const we=b[V];if(S>=D){qe(we,F,N,!0);continue}let $e;if(we.key!=null)$e=Ne.get(we.key);else for(E=Ee;E<=le;E++)if(Ce[E-Ee]===0&&is(we,k[E])){$e=E;break}$e===void 0?qe(we,F,N,!0):(Ce[$e-Ee]=V+1,$e>=He?He=$e:Te=!0,O(we,k[$e],R,null,F,N,Y,G,W),S++)}const Je=Te?Lp(Ce):Pn;for(E=Je.length-1,V=D-1;V>=0;V--){const we=Ee+V,$e=k[we],Qe=k[we+1],vt=we+1<ae?Qe.el||Qe.placeholder:H;Ce[V]===0?O(null,$e,R,vt,F,N,Y,G,W):Te&&(E<0||V!==Je[E]?Re($e,R,vt,2):E--)}}},Re=(b,k,R,H,F=null)=>{const{el:N,type:Y,transition:G,children:W,shapeFlag:V}=b;if(V&6){Re(b.component.subTree,k,R,H);return}if(V&128){b.suspense.move(k,R,H);return}if(V&64){Y.move(b,k,R,Vt);return}if(Y===ot){r(N,k,R);for(let ee=0;ee<W.length;ee++)Re(W[ee],k,R,H);r(b.anchor,k,R);return}if(Y===yo){C(b,k,R);return}if(H!==2&&V&1&&G)if(H===0)G.beforeEnter(N),r(N,k,R),Mt(()=>G.enter(N),F);else{const{leave:ee,delayLeave:le,afterLeave:fe}=G,Ee=()=>{b.ctx.isUnmounted?o(N):r(N,k,R)},Ne=()=>{N._isLeaving&&N[Xf](!0),ee(N,()=>{Ee(),fe&&fe()})};le?le(N,Ee,Ne):Ne()}else r(N,k,R)},qe=(b,k,R,H=!1,F=!1)=>{const{type:N,props:Y,ref:G,children:W,dynamicChildren:V,shapeFlag:ae,patchFlag:ee,dirs:le,cacheIndex:fe}=b;if(ee===-2&&(F=!1),G!=null&&(wi(),us(G,null,R,b,!0),Si()),fe!=null&&(k.renderCache[fe]=void 0),ae&256){k.ctx.deactivate(b);return}const Ee=ae&1&&le,Ne=!cs(b);let E;if(Ne&&(E=Y&&Y.onVnodeBeforeUnmount)&&ni(E,k,b),ae&6)De(b.component,R,H);else{if(ae&128){b.suspense.unmount(R,H);return}Ee&&Vi(b,null,k,"beforeUnmount"),ae&64?b.type.remove(b,k,R,Vt,H):V&&!V.hasOnce&&(N!==ot||ee>0&&ee&64)?be(V,k,R,!1,!0):(N===ot&&ee&384||!F&&ae&16)&&be(W,k,R),H&&lt(b)}(Ne&&(E=Y&&Y.onVnodeUnmounted)||Ee)&&Mt(()=>{E&&ni(E,k,b),Ee&&Vi(b,null,k,"unmounted")},R)},lt=b=>{const{type:k,el:R,anchor:H,transition:F}=b;if(k===ot){Fe(R,H);return}if(k===yo){q(b);return}const N=()=>{o(R),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(b.shapeFlag&1&&F&&!F.persisted){const{leave:Y,delayLeave:G}=F,W=()=>Y(R,N);G?G(b.el,N,W):W()}else N()},Fe=(b,k)=>{let R;for(;b!==k;)R=y(b),o(b),b=R;o(k)},De=(b,k,R)=>{const{bum:H,scope:F,job:N,subTree:Y,um:G,m:W,a:V}=b;jl(W),jl(V),H&&lr(H),F.stop(),N&&(N.flags|=8,qe(Y,b,k,R)),G&&Mt(G,k),Mt(()=>{b.isUnmounted=!0},k)},be=(b,k,R,H=!1,F=!1,N=0)=>{for(let Y=N;Y<b.length;Y++)qe(b[Y],k,R,H,F)},mt=b=>{if(b.shapeFlag&6)return mt(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const k=y(b.anchor||b.el),R=k&&k[Jf];return R?y(R):k};let xt=!1;const Ni=(b,k,R)=>{b==null?k._vnode&&qe(k._vnode,null,null,!0):O(k._vnode||null,b,k,null,null,null,R),k._vnode=b,xt||(xt=!0,Ol(),sc(),xt=!1)},Vt={p:O,um:qe,m:Re,r:lt,mt:ie,mc:Oe,pc:Q,pbc:J,n:mt,o:i};return{render:Ni,hydrate:void 0,createApp:gp(Ni)}}function go({type:i,props:e},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Hi({effect:i,job:e},n){n?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function xp(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Sc(i,e,n=!1){const r=i.children,o=e.children;if(ve(r)&&ve(o))for(let a=0;a<r.length;a++){const u=r[a];let d=o[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[a]=xi(o[a]),d.el=u.el),!n&&d.patchFlag!==-2&&Sc(u,d)),d.type===Rr&&d.patchFlag!==-1&&(d.el=u.el),d.type===Ii&&!d.el&&(d.el=u.el)}}function Lp(i){const e=i.slice(),n=[0];let r,o,a,u,d;const h=i.length;for(r=0;r<h;r++){const p=i[r];if(p!==0){if(o=n[n.length-1],i[o]<p){e[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)d=a+u>>1,i[n[d]]<p?a=d+1:u=d;p<i[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function Ac(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ac(e)}function jl(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const Op=Symbol.for("v-scx"),Cp=()=>ur(Op);function cr(i,e,n){return kc(i,e,n)}function kc(i,e,n=Ve){const{immediate:r,deep:o,flush:a,once:u}=n,d=Et({},n),h=e&&r||!e&&a!=="post";let p;if(bs){if(a==="sync"){const A=Cp();p=A.__watcherHandles||(A.__watcherHandles=[])}else if(!h){const A=()=>{};return A.stop=oi,A.resume=oi,A.pause=oi,A}}const v=Tt;d.call=(A,P,O)=>ci(A,v,P,O);let g=!1;a==="post"?d.scheduler=A=>{Mt(A,v&&v.suspense)}:a!=="sync"&&(g=!0,d.scheduler=(A,P)=>{P?A():va(A)}),d.augmentJob=A=>{e&&(A.flags|=4),g&&(A.flags|=2,v&&(A.id=v.uid,A.i=v))};const y=Hf(i,e,d);return bs&&(p?p.push(y):h&&y()),y}function Mp(i,e,n){const r=this.proxy,o=at(i)?i.includes(".")?Tc(r,i):()=>r[i]:i.bind(r,r);let a;Pe(e)?a=e:(a=e.handler,n=e);const u=Es(this),d=kc(o,a.bind(r),n);return u(),d}function Tc(i,e){const n=e.split(".");return()=>{let r=i;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Ip=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${Ci(e)}Modifiers`]||i[`${Di(e)}Modifiers`];function Rp(i,e,...n){if(i.isUnmounted)return;const r=i.vnode.props||Ve;let o=n;const a=e.startsWith("update:"),u=a&&Ip(r,e.slice(7));u&&(u.trim&&(o=n.map(v=>at(v)?v.trim():v)),u.number&&(o=n.map(fr)));let d,h=r[d=ho(e)]||r[d=ho(Ci(e))];!h&&a&&(h=r[d=ho(Di(e))]),h&&ci(h,i,6,o);const p=r[d+"Once"];if(p){if(!i.emitted)i.emitted={};else if(i.emitted[d])return;i.emitted[d]=!0,ci(p,i,6,o)}}const Dp=new WeakMap;function Pc(i,e,n=!1){const r=n?Dp:e.emitsCache,o=r.get(i);if(o!==void 0)return o;const a=i.emits;let u={},d=!1;if(!Pe(i)){const h=p=>{const v=Pc(p,e,!0);v&&(d=!0,Et(u,v))};!n&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}return!a&&!d?(Ge(i)&&r.set(i,null),null):(ve(a)?a.forEach(h=>u[h]=null):Et(u,a),Ge(i)&&r.set(i,u),u)}function Ir(i,e){return!i||!Er(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(i,e[0].toLowerCase()+e.slice(1))||Be(i,Di(e))||Be(i,e))}function Nl(i){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:d,emit:h,render:p,renderCache:v,props:g,data:y,setupState:A,ctx:P,inheritAttrs:O}=i,T=_r(i);let U,I;try{if(n.shapeFlag&4){const q=o||r,re=q;U=ri(p.call(re,q,v,g,A,y,P)),I=d}else{const q=e;U=ri(q.length>1?q(g,{attrs:d,slots:u,emit:h}):q(g,null)),I=e.props?d:$p(d)}}catch(q){hs.length=0,Cr(q,i,1),U=li(Ii)}let C=U;if(I&&O!==!1){const q=Object.keys(I),{shapeFlag:re}=C;q.length&&re&7&&(a&&q.some(sa)&&(I=jp(I,a)),C=Mn(C,I,!1,!0))}return n.dirs&&(C=Mn(C,null,!1,!0),C.dirs=C.dirs?C.dirs.concat(n.dirs):n.dirs),n.transition&&_a(C,n.transition),U=C,_r(T),U}const $p=i=>{let e;for(const n in i)(n==="class"||n==="style"||Er(n))&&((e||(e={}))[n]=i[n]);return e},jp=(i,e)=>{const n={};for(const r in i)(!sa(r)||!(r.slice(9)in e))&&(n[r]=i[r]);return n};function Np(i,e,n){const{props:r,children:o,component:a}=i,{props:u,children:d,patchFlag:h}=e,p=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Ul(r,u,p):!!u;if(h&8){const v=e.dynamicProps;for(let g=0;g<v.length;g++){const y=v[g];if(u[y]!==r[y]&&!Ir(p,y))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:r===u?!1:r?u?Ul(r,u,p):!0:!!u;return!1}function Ul(i,e,n){const r=Object.keys(e);if(r.length!==Object.keys(i).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==i[a]&&!Ir(n,a))return!0}return!1}function Up({vnode:i,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===i&&(r.el=i.el),r===i)(i=e.vnode).el=n,e=e.parent;else break}}const Ec=i=>i.__isSuspense;function Bp(i,e){e&&e.pendingBranch?ve(i)?e.effects.push(...i):e.effects.push(i):Wf(i)}const ot=Symbol.for("v-fgt"),Rr=Symbol.for("v-txt"),Ii=Symbol.for("v-cmt"),yo=Symbol.for("v-stc"),hs=[];let Dt=null;function K(i=!1){hs.push(Dt=i?null:[])}function Fp(){hs.pop(),Dt=hs[hs.length-1]||null}let ys=1;function Bl(i,e=!1){ys+=i,i<0&&Dt&&e&&(Dt.hasOnce=!0)}function xc(i){return i.dynamicChildren=ys>0?Dt||Pn:null,Fp(),ys>0&&Dt&&Dt.push(i),i}function X(i,e,n,r,o,a){return xc(m(i,e,n,r,o,a,!0))}function Gi(i,e,n,r,o){return xc(li(i,e,n,r,o,!0))}function Lc(i){return i?i.__v_isVNode===!0:!1}function is(i,e){return i.type===e.type&&i.key===e.key}const Oc=({key:i})=>i??null,dr=({ref:i,ref_key:e,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?at(i)||yt(i)||Pe(i)?{i:Ft,r:i,k:e,f:!!n}:i:null);function m(i,e=null,n=null,r=0,o=null,a=i===ot?0:1,u=!1,d=!1){const h={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&Oc(e),ref:e&&dr(e),scopeId:oc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ft};return d?(ba(h,n),a&128&&i.normalize(h)):n&&(h.shapeFlag|=at(n)?8:16),ys>0&&!u&&Dt&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Dt.push(h),h}const li=zp;function zp(i,e=null,n=null,r=0,o=null,a=!1){if((!i||i===cp)&&(i=Ii),Lc(i)){const d=Mn(i,e,!0);return n&&ba(d,n),ys>0&&!a&&Dt&&(d.shapeFlag&6?Dt[Dt.indexOf(i)]=d:Dt.push(d)),d.patchFlag=-2,d}if(Qp(i)&&(i=i.__vccOpts),e){e=qp(e);let{class:d,style:h}=e;d&&!at(d)&&(e.class=et(d)),Ge(h)&&(ma(h)&&!ve(h)&&(h=Et({},h)),e.style=Ts(h))}const u=at(i)?1:Ec(i)?128:Yf(i)?64:Ge(i)?4:Pe(i)?2:0;return m(i,e,n,r,o,u,a,!0)}function qp(i){return i?ma(i)||vc(i)?Et({},i):i:null}function Mn(i,e,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:d,transition:h}=i,p=e?Vp(o||{},e):o,v={__v_isVNode:!0,__v_skip:!0,type:i.type,props:p,key:p&&Oc(p),ref:e&&e.ref?n&&a?ve(a)?a.concat(dr(e)):[a,dr(e)]:dr(e):a,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:d,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==ot?u===-1?16:u|16:u,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:h,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Mn(i.ssContent),ssFallback:i.ssFallback&&Mn(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return h&&r&&_a(v,h.clone(v)),v}function ze(i=" ",e=0){return li(Rr,null,i,e)}function me(i="",e=!1){return e?(K(),Gi(Ii,null,i)):li(Ii,null,i)}function ri(i){return i==null||typeof i=="boolean"?li(Ii):ve(i)?li(ot,null,i.slice()):Lc(i)?xi(i):li(Rr,null,String(i))}function xi(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Mn(i)}function ba(i,e){let n=0;const{shapeFlag:r}=i;if(e==null)e=null;else if(ve(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),ba(i,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!vc(e)?e._ctx=Ft:o===3&&Ft&&(Ft.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Ft},n=32):(e=String(e),r&64?(n=16,e=[ze(e)]):n=8);i.children=e,i.shapeFlag|=n}function Vp(...i){const e={};for(let n=0;n<i.length;n++){const r=i[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=et([e.class,r.class]));else if(o==="style")e.style=Ts([e.style,r.style]);else if(Er(o)){const a=e[o],u=r[o];u&&a!==u&&!(ve(a)&&a.includes(u))&&(e[o]=a?[].concat(a,u):u)}else o!==""&&(e[o]=r[o])}return e}function ni(i,e,n,r=null){ci(i,e,7,[n,r])}const Hp=fc();let Zp=0;function Kp(i,e,n){const r=i.type,o=(e?e.appContext:i.appContext)||Hp,a={uid:Zp++,vnode:i,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _f(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gc(r,o),emitsOptions:Pc(r,o),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:r.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Rp.bind(null,a),i.ce&&i.ce(a),a}let Tt=null;const Wp=()=>Tt||Ft;let br,Bo;{const i=Lr(),e=(n,r)=>{let o;return(o=i[n])||(o=i[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};br=e("__VUE_INSTANCE_SETTERS__",n=>Tt=n),Bo=e("__VUE_SSR_SETTERS__",n=>bs=n)}const Es=i=>{const e=Tt;return br(i),i.scope.on(),()=>{i.scope.off(),br(e)}},Fl=()=>{Tt&&Tt.scope.off(),br(null)};function Cc(i){return i.vnode.shapeFlag&4}let bs=!1;function Gp(i,e=!1,n=!1){e&&Bo(e);const{props:r,children:o}=i.vnode,a=Cc(i);bp(i,r,a,e),kp(i,o,n||e);const u=a?Jp(i,e):void 0;return e&&Bo(!1),u}function Jp(i,e){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,dp);const{setup:r}=n;if(r){wi();const o=i.setupContext=r.length>1?Xp(i):null,a=Es(i),u=Ps(r,i,0,[i.props,o]),d=Mu(u);if(Si(),a(),(d||i.sp)&&!cs(i)&&ac(i),d){if(u.then(Fl,Fl),e)return u.then(h=>{zl(i,h)}).catch(h=>{Cr(h,i,0)});i.asyncDep=u}else zl(i,u)}else Mc(i)}function zl(i,e,n){Pe(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Ge(e)&&(i.setupState=ec(e)),Mc(i)}function Mc(i,e,n){const r=i.type;i.render||(i.render=r.render||oi);{const o=Es(i);wi();try{hp(i)}finally{Si(),o()}}}const Yp={get(i,e){return _t(i,"get",""),i[e]}};function Xp(i){const e=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,Yp),slots:i.slots,emit:i.emit,expose:e}}function Dr(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(ec(Nf(i.exposed)),{get(e,n){if(n in e)return e[n];if(n in ds)return ds[n](i)},has(e,n){return n in e||n in ds}})):i.proxy}function Qp(i){return Pe(i)&&"__vccOpts"in i}const Pt=(i,e)=>qf(i,e,bs),em="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fo;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{Fo=ql.createPolicy("vue",{createHTML:i=>i})}catch{}const Ic=Fo?i=>Fo.createHTML(i):i=>i,tm="http://www.w3.org/2000/svg",im="http://www.w3.org/1998/Math/MathML",vi=typeof document<"u"?document:null,Vl=vi&&vi.createElement("template"),nm={insert:(i,e,n)=>{e.insertBefore(i,n||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,n,r)=>{const o=e==="svg"?vi.createElementNS(tm,i):e==="mathml"?vi.createElementNS(im,i):n?vi.createElement(i,{is:n}):vi.createElement(i);return i==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:i=>vi.createTextNode(i),createComment:i=>vi.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>vi.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,n,r,o,a){const u=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Vl.innerHTML=Ic(r==="svg"?`<svg>${i}</svg>`:r==="mathml"?`<math>${i}</math>`:i);const d=Vl.content;if(r==="svg"||r==="mathml"){const h=d.firstChild;for(;h.firstChild;)d.appendChild(h.firstChild);d.removeChild(h)}e.insertBefore(d,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},sm=Symbol("_vtc");function rm(i,e,n){const r=i[sm];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?i.removeAttribute("class"):n?i.setAttribute("class",e):i.className=e}const wr=Symbol("_vod"),Rc=Symbol("_vsh"),om={name:"show",beforeMount(i,{value:e},{transition:n}){i[wr]=i.style.display==="none"?"":i.style.display,n&&e?n.beforeEnter(i):ns(i,e)},mounted(i,{value:e},{transition:n}){n&&e&&n.enter(i)},updated(i,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(i),ns(i,!0),r.enter(i)):r.leave(i,()=>{ns(i,!1)}):ns(i,e))},beforeUnmount(i,{value:e}){ns(i,e)}};function ns(i,e){i.style.display=e?i[wr]:"none",i[Rc]=!e}const am=Symbol(""),lm=/(?:^|;)\s*display\s*:/;function um(i,e,n){const r=i.style,o=at(n);let a=!1;if(n&&!o){if(e)if(at(e))for(const u of e.split(";")){const d=u.slice(0,u.indexOf(":")).trim();n[d]==null&&hr(r,d,"")}else for(const u in e)n[u]==null&&hr(r,u,"");for(const u in n)u==="display"&&(a=!0),hr(r,u,n[u])}else if(o){if(e!==n){const u=r[am];u&&(n+=";"+u),r.cssText=n,a=lm.test(n)}}else e&&i.removeAttribute("style");wr in i&&(i[wr]=a?r.display:"",i[Rc]&&(r.display="none"))}const Hl=/\s*!important$/;function hr(i,e,n){if(ve(n))n.forEach(r=>hr(i,e,r));else if(n==null&&(n=""),e.startsWith("--"))i.setProperty(e,n);else{const r=cm(i,e);Hl.test(n)?i.setProperty(Di(r),n.replace(Hl,""),"important"):i[r]=n}}const Zl=["Webkit","Moz","ms"],bo={};function cm(i,e){const n=bo[e];if(n)return n;let r=Ci(e);if(r!=="filter"&&r in i)return bo[e]=r;r=Du(r);for(let o=0;o<Zl.length;o++){const a=Zl[o]+r;if(a in i)return bo[e]=a}return e}const Kl="http://www.w3.org/1999/xlink";function Wl(i,e,n,r,o,a=mf(e)){r&&e.startsWith("xlink:")?n==null?i.removeAttributeNS(Kl,e.slice(6,e.length)):i.setAttributeNS(Kl,e,n):n==null||a&&!ju(n)?i.removeAttribute(e):i.setAttribute(e,a?"":ui(n)?String(n):n)}function Gl(i,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(i[e]=e==="innerHTML"?Ic(n):n);return}const a=i.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?i.getAttribute("value")||"":i.value,h=n==null?i.type==="checkbox"?"on":"":String(n);(d!==h||!("_value"in i))&&(i.value=h),n==null&&i.removeAttribute(e),i._value=n;return}let u=!1;if(n===""||n==null){const d=typeof i[e];d==="boolean"?n=ju(n):n==null&&d==="string"?(n="",u=!0):d==="number"&&(n=0,u=!0)}try{i[e]=n}catch{}u&&i.removeAttribute(o||e)}function bi(i,e,n,r){i.addEventListener(e,n,r)}function dm(i,e,n,r){i.removeEventListener(e,n,r)}const Jl=Symbol("_vei");function hm(i,e,n,r,o=null){const a=i[Jl]||(i[Jl]={}),u=a[e];if(r&&u)u.value=r;else{const[d,h]=fm(e);if(r){const p=a[e]=vm(r,o);bi(i,d,p,h)}else u&&(dm(i,d,u,h),a[e]=void 0)}}const Yl=/(?:Once|Passive|Capture)$/;function fm(i){let e;if(Yl.test(i)){e={};let r;for(;r=i.match(Yl);)i=i.slice(0,i.length-r[0].length),e[r[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Di(i.slice(2)),e]}let wo=0;const pm=Promise.resolve(),mm=()=>wo||(pm.then(()=>wo=0),wo=Date.now());function vm(i,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ci(_m(r,n.value),e,5,[r])};return n.value=i,n.attached=mm(),n}function _m(i,e){if(ve(e)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Xl=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,gm=(i,e,n,r,o,a)=>{const u=o==="svg";e==="class"?rm(i,r,u):e==="style"?um(i,n,r):Er(e)?sa(e)||hm(i,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):ym(i,e,r,u))?(Gl(i,e,r),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Wl(i,e,r,u,a,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!at(r))?Gl(i,Ci(e),r,a,e):(e==="true-value"?i._trueValue=r:e==="false-value"&&(i._falseValue=r),Wl(i,e,r,u))};function ym(i,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in i&&Xl(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=i.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Xl(e)&&at(n)?!1:e in i}const Ri=i=>{const e=i.props["onUpdate:modelValue"]||!1;return ve(e)?n=>lr(e,n):e};function bm(i){i.target.composing=!0}function Ql(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qt=Symbol("_assign"),rt={created(i,{modifiers:{lazy:e,trim:n,number:r}},o){i[qt]=Ri(o);const a=r||o.props&&o.props.type==="number";bi(i,e?"change":"input",u=>{if(u.target.composing)return;let d=i.value;n&&(d=d.trim()),a&&(d=fr(d)),i[qt](d)}),n&&bi(i,"change",()=>{i.value=i.value.trim()}),e||(bi(i,"compositionstart",bm),bi(i,"compositionend",Ql),bi(i,"change",Ql))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(i[qt]=Ri(u),i.composing)return;const d=(a||i.type==="number")&&!/^0\d/.test(i.value)?fr(i.value):i.value,h=e??"";d!==h&&(document.activeElement===i&&i.type!=="range"&&(r&&e===n||o&&i.value.trim()===h)||(i.value=h))}},Ct={deep:!0,created(i,e,n){i[qt]=Ri(n),bi(i,"change",()=>{const r=i._modelValue,o=In(i),a=i.checked,u=i[qt];if(ve(r)){const d=aa(r,o),h=d!==-1;if(a&&!h)u(r.concat(o));else if(!a&&h){const p=[...r];p.splice(d,1),u(p)}}else if($n(r)){const d=new Set(r);a?d.add(o):d.delete(o),u(d)}else u(Dc(i,a))})},mounted:eu,beforeUpdate(i,e,n){i[qt]=Ri(n),eu(i,e,n)}};function eu(i,{value:e,oldValue:n},r){i._modelValue=e;let o;if(ve(e))o=aa(e,r.props.value)>-1;else if($n(e))o=e.has(r.props.value);else{if(e===n)return;o=nn(e,Dc(i,!0))}i.checked!==o&&(i.checked=o)}const Qi={created(i,{value:e},n){i.checked=nn(e,n.props.value),i[qt]=Ri(n),bi(i,"change",()=>{i[qt](In(i))})},beforeUpdate(i,{value:e,oldValue:n},r){i[qt]=Ri(r),e!==n&&(i.checked=nn(e,r.props.value))}},wm={deep:!0,created(i,{value:e,modifiers:{number:n}},r){const o=$n(e);bi(i,"change",()=>{const a=Array.prototype.filter.call(i.options,u=>u.selected).map(u=>n?fr(In(u)):In(u));i[qt](i.multiple?o?new Set(a):a:a[0]),i._assigning=!0,ic(()=>{i._assigning=!1})}),i[qt]=Ri(r)},mounted(i,{value:e}){tu(i,e)},beforeUpdate(i,e,n){i[qt]=Ri(n)},updated(i,{value:e}){i._assigning||tu(i,e)}};function tu(i,e){const n=i.multiple,r=ve(e);if(!(n&&!r&&!$n(e))){for(let o=0,a=i.options.length;o<a;o++){const u=i.options[o],d=In(u);if(n)if(r){const h=typeof d;h==="string"||h==="number"?u.selected=e.some(p=>String(p)===String(d)):u.selected=aa(e,d)>-1}else u.selected=e.has(d);else if(nn(In(u),e)){i.selectedIndex!==o&&(i.selectedIndex=o);return}}!n&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function In(i){return"_value"in i?i._value:i.value}function Dc(i,e){const n=e?"_trueValue":"_falseValue";return n in i?i[n]:e}const Sm=["ctrl","shift","alt","meta"],Am={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>Sm.some(n=>i[`${n}Key`]&&!e.includes(n))},$t=(i,e)=>{const n=i._withMods||(i._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<e.length;u++){const d=Am[e[u]];if(d&&d(o,e))return}return i(o,...a)})},km={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Tm=(i,e)=>{const n=i._withKeys||(i._withKeys={}),r=e.join(".");return n[r]||(n[r]=o=>{if(!("key"in o))return;const a=Di(o.key);if(e.some(u=>u===a||km[u]===a))return i(o)})},Pm=Et({patchProp:gm},nm);let iu;function Em(){return iu||(iu=Pp(Pm))}const xm=(...i)=>{const e=Em().createApp(...i),{mount:n}=e;return e.mount=r=>{const o=Om(r);if(!o)return;const a=e._component;!Pe(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,Lm(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function Lm(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Om(i){return at(i)?document.querySelector(i):i}const zo="/fueldock-estonia-1/pic/FuelDock-1_no_bg_s.png";var qo=function(i,e){return qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},qo(i,e)};function $c(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qo(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Sr=function(){return Sr=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Sr.apply(this,arguments)};function Nn(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function jc(i,e,n,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,n,r);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(a=(o<3?u(a):o>3?u(e,n,a):u(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Nc(i,e){return function(n,r){e(n,r,i)}}function Uc(i,e,n,r,o,a){function u(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var d=r.kind,h=d==="getter"?"get":d==="setter"?"set":"value",p=!e&&i?r.static?i:i.prototype:null,v=e||(p?Object.getOwnPropertyDescriptor(p,r.name):{}),g,y=!1,A=n.length-1;A>=0;A--){var P={};for(var O in r)P[O]=O==="access"?{}:r[O];for(var O in r.access)P.access[O]=r.access[O];P.addInitializer=function(U){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(U||null))};var T=(0,n[A])(d==="accessor"?{get:v.get,set:v.set}:v[h],P);if(d==="accessor"){if(T===void 0)continue;if(T===null||typeof T!="object")throw new TypeError("Object expected");(g=u(T.get))&&(v.get=g),(g=u(T.set))&&(v.set=g),(g=u(T.init))&&o.unshift(g)}else(g=u(T))&&(d==="field"?o.unshift(g):v[h]=g)}p&&Object.defineProperty(p,r.name,v),y=!0}function Bc(i,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(i,n):e[o].call(i);return r?n:void 0}function Fc(i){return typeof i=="symbol"?i:"".concat(i)}function zc(i,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function qc(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function se(i,e,n,r){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(v){try{p(r.next(v))}catch(g){u(g)}}function h(v){try{p(r.throw(v))}catch(g){u(g)}}function p(v){v.done?a(v.value):o(v.value).then(d,h)}p((r=r.apply(i,e||[])).next())})}function Vc(i,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(p){return function(v){return h([p,v])}}function h(p){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,p[0]&&(n=0)),n;)try{if(r=1,o&&(a=p[0]&2?o.return:p[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,p[1])).done)return a;switch(o=0,a&&(p=[p[0]&2,a.value]),p[0]){case 0:case 1:a=p;break;case 4:return n.label++,{value:p[1],done:!1};case 5:n.label++,o=p[1],p=[0];continue;case 7:p=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(p[0]===6||p[0]===2)){n=0;continue}if(p[0]===3&&(!a||p[1]>a[0]&&p[1]<a[3])){n.label=p[1];break}if(p[0]===6&&n.label<a[1]){n.label=a[1],a=p;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(p);break}a[2]&&n.ops.pop(),n.trys.pop();continue}p=e.call(i,n)}catch(v){p=[6,v],o=0}finally{r=a=0}if(p[0]&5)throw p[1];return{value:p[0]?p[1]:void 0,done:!0}}}var $r=Object.create?function(i,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(i,r,o)}:function(i,e,n,r){r===void 0&&(r=n),i[r]=e[n]};function Hc(i,e){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&$r(e,i,n)}function Ar(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],r=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wa(i,e){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var r=n.call(i),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return a}function Zc(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(wa(arguments[e]));return i}function Kc(){for(var i=0,e=0,n=arguments.length;e<n;e++)i+=arguments[e].length;for(var r=Array(i),o=0,e=0;e<n;e++)for(var a=arguments[e],u=0,d=a.length;u<d;u++,o++)r[o]=a[u];return r}function Wc(i,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))}function Rn(i){return this instanceof Rn?(this.v=i,this):new Rn(i)}function Gc(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(i,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(A){return function(P){return Promise.resolve(P).then(A,g)}}function d(A,P){r[A]&&(o[A]=function(O){return new Promise(function(T,U){a.push([A,O,T,U])>1||h(A,O)})},P&&(o[A]=P(o[A])))}function h(A,P){try{p(r[A](P))}catch(O){y(a[0][3],O)}}function p(A){A.value instanceof Rn?Promise.resolve(A.value.v).then(v,g):y(a[0][2],A)}function v(A){h("next",A)}function g(A){h("throw",A)}function y(A,P){A(P),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Jc(i){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,a){e[o]=i[o]?function(u){return(n=!n)?{value:Rn(i[o](u)),done:!1}:a?a(u):u}:a}}function Yc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof Ar=="function"?Ar(i):i[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=i[a]&&function(u){return new Promise(function(d,h){u=i[a](u),o(d,h,u.done,u.value)})}}function o(a,u,d,h){Promise.resolve(h).then(function(p){a({value:p,done:d})},u)}}function Xc(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var Cm=Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e},Vo=function(i){return Vo=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Vo(i)};function Qc(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var n=Vo(i),r=0;r<n.length;r++)n[r]!=="default"&&$r(e,i,n[r]);return Cm(e,i),e}function ed(i){return i&&i.__esModule?i:{default:i}}function td(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)}function id(i,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(i,n):o?o.value=n:e.set(i,n),n}function nd(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function sd(i,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),i.stack.push({value:e,dispose:r,async:n})}else n&&i.stack.push({async:!0});return e}var Mm=typeof SuppressedError=="function"?SuppressedError:function(i,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};function rd(i){function e(a){i.error=i.hasError?new Mm(a,i.error,"An error was suppressed during disposal."):a,i.hasError=!0}var n,r=0;function o(){for(;n=i.stack.pop();)try{if(!n.async&&r===1)return r=0,i.stack.push(n),Promise.resolve().then(o);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(o,function(u){return e(u),o()})}else r|=1}catch(u){e(u)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function od(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,a,u){return r?e?".jsx":".js":o&&(!a||!u)?n:o+a+"."+u.toLowerCase()+"js"}):i}const Im={__extends:$c,__assign:Sr,__rest:Nn,__decorate:jc,__param:Nc,__esDecorate:Uc,__runInitializers:Bc,__propKey:Fc,__setFunctionName:zc,__metadata:qc,__awaiter:se,__generator:Vc,__createBinding:$r,__exportStar:Hc,__values:Ar,__read:wa,__spread:Zc,__spreadArrays:Kc,__spreadArray:Wc,__await:Rn,__asyncGenerator:Gc,__asyncDelegator:Jc,__asyncValues:Yc,__makeTemplateObject:Xc,__importStar:Qc,__importDefault:ed,__classPrivateFieldGet:td,__classPrivateFieldSet:id,__classPrivateFieldIn:nd,__addDisposableResource:sd,__disposeResources:rd,__rewriteRelativeImportExtension:od},Rm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:sd,get __assign(){return Sr},__asyncDelegator:Jc,__asyncGenerator:Gc,__asyncValues:Yc,__await:Rn,__awaiter:se,__classPrivateFieldGet:td,__classPrivateFieldIn:nd,__classPrivateFieldSet:id,__createBinding:$r,__decorate:jc,__disposeResources:rd,__esDecorate:Uc,__exportStar:Hc,__extends:$c,__generator:Vc,__importDefault:ed,__importStar:Qc,__makeTemplateObject:Xc,__metadata:qc,__param:Nc,__propKey:Fc,__read:wa,__rest:Nn,__rewriteRelativeImportExtension:od,__runInitializers:Bc,__setFunctionName:zc,__spread:Zc,__spreadArray:Wc,__spreadArrays:Kc,__values:Ar,default:Im},Symbol.toStringTag,{value:"Module"})),Dm="modulepreload",$m=function(i){return"/fueldock-estonia-1/"+i},nu={},Un=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=$m(h),h in nu)return;nu[h]=!0;const p=h.endsWith(".css"),v=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Dm,p||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),p)return new Promise((y,A)=>{g.addEventListener("load",y),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},jm=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Un(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Sa extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class su extends Sa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ru extends Sa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ou extends Sa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ho;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ho||(Ho={}));class Nm{constructor(e,{headers:n={},customFetch:r,region:o=Ho.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=jm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return se(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:a,method:u,body:d,signal:h}=r;let p={},{region:v}=r;v||(v=this.region);const g=new URL(`${this.url}/${n}`);v&&v!=="any"&&(p["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let y;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(p["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(p["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(p["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;const A=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},p),this.headers),a),body:y,signal:h}).catch(U=>{throw U.name==="AbortError"?U:new su(U)}),P=A.headers.get("x-relay-error");if(P&&P==="true")throw new ru(A);if(!A.ok)throw new ou(A);let O=((o=A.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),T;return O==="application/json"?T=yield A.json():O==="application/octet-stream"||O==="application/pdf"?T=yield A.blob():O==="text/event-stream"?T=A:O==="multipart/form-data"?T=yield A.formData():T=yield A.text(),{data:T,error:null,response:A}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new su(a)}:{data:null,error:a,response:a instanceof ou||a instanceof ru?a.context:void 0}}})}}var Um=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ad(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var o=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return i[r]}})}),n}var kt={};const Bn=ad(Rm);var Xs={},Qs={},er={},tr={},ir={},Fm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dn=Fm();const zm=Dn.fetch,ld=Dn.fetch.bind(Dn),ud=Dn.Headers,qm=Dn.Request,Vm=Dn.Response,sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ud,Request:qm,Response:Vm,default:ld,fetch:zm},Symbol.toStringTag,{value:"Module"})),Hm=ad(sn);var nr={},au;function cd(){if(au)return nr;au=1,Object.defineProperty(nr,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return nr.default=i,nr}var lu;function dd(){if(lu)return ir;lu=1,Object.defineProperty(ir,"__esModule",{value:!0});const i=Bn,e=i.__importDefault(Hm),n=i.__importDefault(cd());class r{constructor(a){var u,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async p=>{var v,g,y,A;let P=null,O=null,T=null,U=p.status,I=p.statusText;if(p.ok){if(this.method!=="HEAD"){const de=await p.text();de===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?O=de:O=JSON.parse(de))}const q=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),re=(y=p.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");q&&re&&re.length>1&&(T=parseInt(re[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(P={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,T=null,U=406,I="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const q=await p.text();try{P=JSON.parse(q),Array.isArray(P)&&p.status===404&&(O=[],P=null,U=200,I="OK")}catch{p.status===404&&q===""?(U=204,I="No Content"):P={message:q}}if(P&&this.isMaybeSingle&&(!((A=P==null?void 0:P.details)===null||A===void 0)&&A.includes("0 rows"))&&(P=null,U=200,I="OK"),P&&this.shouldThrowOnError)throw new n.default(P)}return{error:P,data:O,count:T,status:U,statusText:I}});return this.shouldThrowOnError||(h=h.catch(p=>{var v,g,y;return{error:{message:`${(v=p==null?void 0:p.name)!==null&&v!==void 0?v:"FetchError"}: ${p==null?void 0:p.message}`,details:`${(g=p==null?void 0:p.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=p==null?void 0:p.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,u)}returns(){return this}overrideTypes(){return this}}return ir.default=r,ir}var uu;function hd(){if(uu)return tr;uu=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=Bn.__importDefault(dd());class n extends e.default{select(o){let a=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const p=h?`${h}.order`:"order",v=this.url.searchParams.get(p);return this.url.searchParams.set(p,`${v?`${v},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,p=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(p,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:p="text"}={}){var v;const g=[o?"analyze":null,a?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${p}; for="${y}"; options=${g};`),p==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return tr.default=n,tr}var cu;function Aa(){if(cu)return er;cu=1,Object.defineProperty(er,"__esModule",{value:!0});const e=Bn.__importDefault(hd()),n=new RegExp("[,()]");class r extends e.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}in(a,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${d})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:d,type:h}={}){let p="";h==="plain"?p="pl":h==="phrase"?p="ph":h==="websearch"&&(p="w");const v=d===void 0?"":`(${d})`;return this.url.searchParams.append(a,`${p}fts${v}.${u}`),this}match(a){return Object.entries(a).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(a,u,d){return this.url.searchParams.append(a,`not.${u}.${d}`),this}or(a,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,u,d){return this.url.searchParams.append(a,`${u}.${d}`),this}}return er.default=r,er}var du;function fd(){if(du)return Qs;du=1,Object.defineProperty(Qs,"__esModule",{value:!0});const e=Bn.__importDefault(Aa());class n{constructor(o,{headers:a={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=d}select(o,a){const{head:u=!1,count:d}=a??{},h=u?"HEAD":"GET";let p=!1;const v=(o??"*").split("").map(g=>/\s/.test(g)&&!p?"":(g==='"'&&(p=!p),g)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var d;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const p=o.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(p.length>0){const v=[...new Set(p)].map(g=>`"${g}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var p;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(g.length>0){const y=[...new Set(g)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}update(o,{count:a}={}){var u;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Qs.default=n,Qs}var hu;function Zm(){if(hu)return Xs;hu=1,Object.defineProperty(Xs,"__esModule",{value:!0});const i=Bn,e=i.__importDefault(fd()),n=i.__importDefault(Aa());class r{constructor(a,{headers:u={},schema:d,fetch:h}={}){this.url=a,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(a){const u=new URL(`${this.url}/${a}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:d=!1,get:h=!1,count:p}={}){var v;let g;const y=new URL(`${this.url}/rpc/${a}`);let A;d||h?(g=d?"HEAD":"GET",Object.entries(u).filter(([O,T])=>T!==void 0).map(([O,T])=>[O,Array.isArray(T)?`{${T.join(",")}}`:`${T}`]).forEach(([O,T])=>{y.searchParams.append(O,T)})):(g="POST",A=u);const P=new Headers(this.headers);return p&&P.set("Prefer",`count=${p}`),new n.default({method:g,url:y,headers:P,schema:this.schemaName,body:A,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Xs.default=r,Xs}Object.defineProperty(kt,"__esModule",{value:!0});var pd=kt.PostgrestError=kd=kt.PostgrestBuilder=Sd=kt.PostgrestTransformBuilder=bd=kt.PostgrestFilterBuilder=gd=kt.PostgrestQueryBuilder=vd=kt.PostgrestClient=void 0;const Fn=Bn,md=Fn.__importDefault(Zm());var vd=kt.PostgrestClient=md.default;const _d=Fn.__importDefault(fd());var gd=kt.PostgrestQueryBuilder=_d.default;const yd=Fn.__importDefault(Aa());var bd=kt.PostgrestFilterBuilder=yd.default;const wd=Fn.__importDefault(hd());var Sd=kt.PostgrestTransformBuilder=wd.default;const Ad=Fn.__importDefault(dd());var kd=kt.PostgrestBuilder=Ad.default;const Td=Fn.__importDefault(cd());pd=kt.PostgrestError=Td.default;var Pd=kt.default={PostgrestClient:md.default,PostgrestQueryBuilder:_d.default,PostgrestFilterBuilder:yd.default,PostgrestTransformBuilder:wd.default,PostgrestBuilder:Ad.default,PostgrestError:Td.default};const Km=rf({__proto__:null,get PostgrestBuilder(){return kd},get PostgrestClient(){return vd},get PostgrestError(){return pd},get PostgrestFilterBuilder(){return bd},get PostgrestQueryBuilder(){return gd},get PostgrestTransformBuilder(){return Sd},default:Pd},[kt]),{PostgrestClient:Wm,PostgrestQueryBuilder:Ub,PostgrestFilterBuilder:Bb,PostgrestTransformBuilder:Fb,PostgrestBuilder:zb,PostgrestError:qb}=Pd||Km;class Gm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Jm="2.78.0",Ym=`realtime-js/${Jm}`,Xm="1.0.0",Zo=1e4,Qm=1e3,ev=100;var fs;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(fs||(fs={}));var ut;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ut||(ut={}));var Yt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Yt||(Yt={}));var Ko;(function(i){i.websocket="websocket"})(Ko||(Ko={}));var Yi;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Yi||(Yi={}));class tv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=r.decode(e.slice(u,u+o));u=u+o;const h=r.decode(e.slice(u,u+a));u=u+a;const p=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:h,payload:p}}}class Ed{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ke;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ke||(Ke={}));const fu=(i,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=iv(u,i,e,o),a),{}):{}},iv=(i,e,n,r)=>{const o=e.find(d=>d.name===i),a=o==null?void 0:o.type,u=n[i];return a&&!r.includes(a)?xd(a,u):Wo(u)},xd=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return ov(e,n)}switch(i){case Ke.bool:return nv(e);case Ke.float4:case Ke.float8:case Ke.int2:case Ke.int4:case Ke.int8:case Ke.numeric:case Ke.oid:return sv(e);case Ke.json:case Ke.jsonb:return rv(e);case Ke.timestamp:return av(e);case Ke.abstime:case Ke.date:case Ke.daterange:case Ke.int4range:case Ke.int8range:case Ke.money:case Ke.reltime:case Ke.text:case Ke.time:case Ke.timestamptz:case Ke.timetz:case Ke.tsrange:case Ke.tstzrange:return Wo(e);default:return Wo(e)}},Wo=i=>i,nv=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},sv=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},rv=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},ov=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let a;const u=i.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(d=>xd(e,d))}return i},av=i=>typeof i=="string"?i.replace(" ","T"):i,Ld=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class So{constructor(e,n,r={},o=Zo){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pu;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(pu||(pu={}));class ps{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ps.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=ps.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ps.syncDiff(this.state,o,a,u),d())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const a=this.cloneDeep(e),u=this.transformState(n),d={},h={};return this.map(a,(p,v)=>{u[p]||(h[p]=v)}),this.map(u,(p,v)=>{const g=a[p];if(g){const y=v.map(T=>T.presence_ref),A=g.map(T=>T.presence_ref),P=v.filter(T=>A.indexOf(T.presence_ref)<0),O=g.filter(T=>y.indexOf(T.presence_ref)<0);P.length>0&&(d[p]=P),O.length>0&&(h[p]=O)}else d[p]=v}),this.syncDiff(a,{joins:d,leaves:h},r,o)}static syncDiff(e,n,r,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(d,h)=>{var p;const v=(p=e[d])!==null&&p!==void 0?p:[];if(e[d]=this.cloneDeep(h),v.length>0){const g=e[d].map(A=>A.presence_ref),y=v.filter(A=>g.indexOf(A.presence_ref)<0);e[d].unshift(...y)}r(d,v,h)}),this.map(u,(d,h)=>{let p=e[d];if(!p)return;const v=h.map(g=>g.presence_ref);p=p.filter(g=>v.indexOf(g.presence_ref)<0),e[d]=p,o(d,p,h),p.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mu;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(mu||(mu={}));var ms;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(ms||(ms={}));var _i;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(_i||(_i={}));class ka{constructor(e,n={config:{}},r){var o,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new So(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new Ed(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new ps(this),this.broadcastEndpointURL=Ld(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,p=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[ms.PRESENCE]&&this.bindings[ms.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:p,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(_i.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(_i.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:A})=>{var P;if(this.socket.setAuth(),A===void 0){e==null||e(_i.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,T=(P=O==null?void 0:O.length)!==null&&P!==void 0?P:0,U=[];for(let I=0;I<T;I++){const C=O[I],{filter:{event:q,schema:re,table:de,filter:ge}}=C,Oe=A&&A[I];if(Oe&&Oe.event===q&&Oe.schema===re&&Oe.table===de&&Oe.filter===ge)U.push(Object.assign(Object.assign({},C),{id:Oe.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(_i.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(_i.SUBSCRIBED);return}}).receive("error",A=>{this.state=ut.errored,e==null||e(_i.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_i.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===ms.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const p=await d.json();h=p.error||p.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const p=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=p.body)===null||o===void 0?void 0:o.cancel()),p.ok?"ok":"error"}catch(p){return p.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,d,h;const p=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),p.receive("ok",()=>a("ok")),p.receive("error",()=>a("error")),p.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new So(this,Yt.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new So(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>ev){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,a;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:p,join:v}=Yt;if(r&&[d,h,p,v].indexOf(u)>=0&&r!==this._joinRef())return;let y=this._onMessage(u,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var P,O,T;return((P=A.filter)===null||P===void 0?void 0:P.event)==="*"||((T=(O=A.filter)===null||O===void 0?void 0:O.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===u}).map(A=>A.callback(y,r)):(a=this.bindings[u])===null||a===void 0||a.filter(A=>{var P,O,T,U,I,C;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in A){const q=A.id,re=(P=A.filter)===null||P===void 0?void 0:P.event;return q&&((O=n.ids)===null||O===void 0?void 0:O.includes(q))&&(re==="*"||(re==null?void 0:re.toLocaleLowerCase())===((T=n.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{const q=(I=(U=A==null?void 0:A.filter)===null||U===void 0?void 0:U.event)===null||I===void 0?void 0:I.toLocaleLowerCase();return q==="*"||q===((C=n==null?void 0:n.event)===null||C===void 0?void 0:C.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===u}).map(A=>{if(typeof y=="object"&&"ids"in y){const P=y.data,{schema:O,table:T,commit_timestamp:U,type:I,errors:C}=P;y=Object.assign(Object.assign({},{schema:O,table:T,commit_timestamp:U,eventType:I,new:{},old:{},errors:C}),this._getPayloadRecords(P))}A.callback(y,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ka.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fu(e.columns,e.old_record)),n}}const Ao=()=>{},sr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},lv=[1e3,2e3,5e3,1e4],uv=1e4,cv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class dv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zo,this.transport=null,this.heartbeatIntervalMs=sr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ao,this.ref=0,this.reconnectTimer=null,this.logger=Ao,this.conn=null,this.sendBuffer=[],this.serializer=new tv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>Un(async()=>{const{default:d}=await Promise.resolve().then(()=>sn);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ko.websocket}`,this.httpEndpoint=Ld(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Gm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Xm}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case fs.connecting:return Yi.Connecting;case fs.open:return Yi.Open;case fs.closing:return Yi.Closing;default:return Yi.Closed}}isConnected(){return this.connectionState()===Yi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new ka(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:o,ref:a}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Qm,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},sr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(p){this.log("error","error in heartbeat callback",p)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:u}=n,d=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${o} ${d}`.trim(),a),this.channels.filter(p=>p._isMember(r)).forEach(p=>p._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([cv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:Ym};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Yt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Ed(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,a,u,d,h,p,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Zo,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:sr.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Ao,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>lv[g-1]||uv,this.encode=(p=e==null?void 0:e.encode)!==null&&p!==void 0?p:(g,y)=>y(JSON.stringify(g)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ta extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Xe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class hv extends Ta{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Go extends Ta{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Pa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Un(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},fv=()=>se(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Un(()=>Promise.resolve().then(()=>sn),void 0)).Response:Response}),Jo=i=>{if(Array.isArray(i))return i.map(n=>Jo(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Jo(r)}),e},pv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ko=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},mv=(i,e,n)=>se(void 0,void 0,void 0,function*(){const r=yield fv();i instanceof r&&!(n!=null&&n.noResolveJson)?i.json().then(o=>{const a=i.status||500,u=(o==null?void 0:o.statusCode)||a+"";e(new hv(ko(o),a,u))}).catch(o=>{e(new Go(ko(o),o))}):e(new Go(ko(i),i))}),vv=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?o:(pv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function xs(i,e,n,r,o,a){return se(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,vv(e,r,o,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>mv(h,d,r))})})}function ws(i,e,n,r){return se(this,void 0,void 0,function*(){return xs(i,"GET",e,n,r)})}function Jt(i,e,n,r,o){return se(this,void 0,void 0,function*(){return xs(i,"POST",e,r,o,n)})}function Yo(i,e,n,r,o){return se(this,void 0,void 0,function*(){return xs(i,"PUT",e,r,o,n)})}function _v(i,e,n,r){return se(this,void 0,void 0,function*(){return xs(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ea(i,e,n,r,o){return se(this,void 0,void 0,function*(){return xs(i,"DELETE",e,r,o,n)})}class gv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return se(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}})}}var Od;class yv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Od]="BlobDownloadBuilder",this.promise=null}asStream(){return new gv(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return se(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Xe(e))return{data:null,error:e};throw e}})}}Od=Symbol.toStringTag;const bv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wv{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Pa(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return se(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},vu),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const p=this._removeEmptyFolders(n),v=this._getFinalPath(p),g=yield(e=="PUT"?Yo:Jt)(this.fetch,`${this.url}/object/${v}`,a,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:p,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Xe(a))return{data:null,error:a};throw a}})}upload(e,n,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return se(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const p=Object.assign({upsert:vu.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(p.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",p.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",p.cacheControl)):(h=r,v["cache-control"]=`max-age=${p.cacheControl}`,v["content-type"]=p.contentType);const g=yield Yo(this.fetch,d.toString(),h,{headers:v});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Xe(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return se(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield Jt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),u=new URL(this.url+a.url),d=u.searchParams.get("token");if(!d)throw new Ta("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}update(e,n,r){return se(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return se(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}copy(e,n,r){return se(this,void 0,void 0,function*(){try{return{data:{path:(yield Jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return se(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield Jt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return se(this,void 0,void 0,function*(){try{const o=yield Jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"",d=this._getFinalPath(e),h=()=>ws(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new yv(h,this.shouldThrowOnError)}info(e){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield ws(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jo(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}exists(e){return se(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield _v(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r)&&r instanceof Go){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let p=o.join("&");return p!==""&&(p=`?${p}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${p}`)}}}remove(e){return se(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}list(e,n,r){return se(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},bv),n),{prefix:e||""});return{data:yield Jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}listV2(e,n){return se(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Jt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Cd="2.78.0",Md={"X-Client-Info":`storage-js/${Cd}`};class Sv{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=Pa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return se(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield ws(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}getBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield ws(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}createBucket(e){return se(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Xe(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return se(this,void 0,void 0,function*(){try{return{data:yield Yo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Xe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class Av{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=Pa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}listBuckets(e){return se(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield ws(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Xe(n))return{data:null,error:n};throw n}})}}const xa={"X-Client-Info":`storage-js/${Cd}`,"Content-Type":"application/json"};class Id extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function It(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class To extends Id{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kv extends Id{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var _u;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_u||(_u={}));const La=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Un(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Tv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},gu=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),Pv=(i,e,n)=>se(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const o=i.status||500,a=i;if(typeof a.json=="function")a.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new To(gu(u),o,d))}).catch(()=>{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new To(d,o,u))});else{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new To(d,o,u))}}else e(new kv(gu(i),i))}),Ev=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return r?(Tv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function xv(i,e,n,r,o,a){return se(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,Ev(e,r,o,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const p=h.headers.get("content-type");return!p||!p.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>Pv(h,d,r))})})}function Rt(i,e,n,r,o){return se(this,void 0,void 0,function*(){return xv(i,"POST",e,r,o,n)})}class Lv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return se(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getIndex(e,n){return se(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}listIndexes(e){return se(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return se(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(It(r))return{data:null,error:r};throw r}})}}class Ov{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return se(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getVectors(e){return se(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}listVectors(e){return se(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield Rt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}queryVectors(e){return se(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteVectors(e){return se(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}}class Cv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},xa),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return se(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}getBucket(e){return se(this,void 0,void 0,function*(){try{return{data:yield Rt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}listBuckets(){return se(this,arguments,void 0,function*(e={}){try{return{data:yield Rt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}deleteBucket(e){return se(this,void 0,void 0,function*(){try{return{data:(yield Rt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(It(n))return{data:null,error:n};throw n}})}}class Mv extends Cv{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Iv(this.url,this.headers,e,this.fetch)}}class Iv extends Lv{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return se(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return se(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return se(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return se(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Rv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Rv extends Ov{constructor(e,n,r,o,a){super(e,n,a),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return se(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return se(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return se(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return se(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return se(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class Dv extends Sv{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new wv(this.url,this.headers,e,this.fetch)}get vectors(){return new Mv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Av(this.url+"/iceberg",this.headers,this.fetch)}}const $v="2.78.0";let rs="";typeof Deno<"u"?rs="deno":typeof document<"u"?rs="web":typeof navigator<"u"&&navigator.product==="ReactNative"?rs="react-native":rs="node";const jv={"X-Client-Info":`supabase-js-${rs}/${$v}`},Nv={headers:jv},Uv={schema:"public"},Bv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fv={},zv=i=>{let e;return i?e=i:typeof fetch>"u"?e=ld:e=fetch,(...n)=>e(...n)},qv=()=>typeof Headers>"u"?ud:Headers,Vv=(i,e,n)=>{const r=zv(n),o=qv();return async(a,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:i;let p=new o(u==null?void 0:u.headers);return p.has("apikey")||p.set("apikey",i),p.has("Authorization")||p.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},u),{headers:p}))}};function Hv(i){return i.endsWith("/")?i:i+"/"}function Zv(i,e){var n,r;const{db:o,auth:a,realtime:u,global:d}=i,{db:h,auth:p,realtime:v,global:g}=e,y={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},p),a),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}function Kv(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Hv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Rd="2.78.0",kn=30*1e3,Xo=3,Po=Xo*kn,Wv="http://localhost:9999",Gv="supabase.auth.token",Jv={"X-Client-Info":`gotrue-js/${Rd}`},Qo="X-Supabase-Api-Version",Dd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Xv=10*60*1e3;class Ss extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function ce(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class Qv extends Ss{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function e_(i){return ce(i)&&i.name==="AuthApiError"}class Xi extends Ss{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class $i extends Ss{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Wt extends $i{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function t_(i){return ce(i)&&i.name==="AuthSessionMissingError"}class _n extends $i{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rr extends $i{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class or extends $i{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function i_(i){return ce(i)&&i.name==="AuthImplicitGrantRedirectError"}class yu extends $i{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ea extends $i{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Eo(i){return ce(i)&&i.name==="AuthRetryableFetchError"}class bu extends $i{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ta extends $i{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const kr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wu=` 	
\r=`.split(""),n_=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<wu.length;e+=1)i[wu[e].charCodeAt(0)]=-2;for(let e=0;e<kr.length;e+=1)i[kr[e].charCodeAt(0)]=e;return i})();function Su(i,e,n){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(kr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(kr[r]),e.queuedBits-=6}}function $d(i,e,n){const r=n_[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Au(i){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{o_(u,r,n)};for(let u=0;u<i.length;u+=1)$d(i.charCodeAt(u),o,a);return e.join("")}function s_(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function r_(i,e){for(let n=0;n<i.length;n+=1){let r=i.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(i.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}s_(r,e)}}function o_(i,e,n){if(e.utf8seq===0){if(i<=127){n(i);return}for(let r=1;r<6;r+=1)if(!(i>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Cn(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)$d(i.charCodeAt(o),n,r);return new Uint8Array(e)}function a_(i){const e=[];return r_(i,n=>e.push(n)),new Uint8Array(e)}function en(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return i.forEach(o=>Su(o,n,r)),Su(null,n,r),e.join("")}function l_(i){return Math.round(Date.now()/1e3)+i}function u_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const St=()=>typeof window<"u"&&typeof document<"u",Zi={tested:!1,writable:!1},jd=()=>{if(!St())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Zi.tested)return Zi.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Zi.tested=!0,Zi.writable=!0}catch{Zi.tested=!0,Zi.writable=!1}return Zi.writable};function c_(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const Nd=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Un(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},d_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Tn=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Ki=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Pi=async(i,e)=>{await i.removeItem(e)};class jr{constructor(){this.promise=new jr.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}jr.promiseConstructor=Promise;function xo(i){const e=i.split(".");if(e.length!==3)throw new ta("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Yv.test(e[r]))throw new ta("JWT not in base64url format");return{header:JSON.parse(Au(e[0])),payload:JSON.parse(Au(e[1])),signature:Cn(e[2]),raw:{header:e[0],payload:e[1]}}}async function h_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function f_(i,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await i(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){o(u);return}}})()})}function p_(i){return("0"+i.toString(16)).substr(-2)}function m_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,p_).join("")}async function v_(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function __(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await v_(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gn(i,e,n=!1){const r=m_();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Tn(i,`${e}-code-verifier`,o);const a=await __(r);return[a,r===a?"plain":"s256"]}const g_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function y_(i){const e=i.headers.get(Qo);if(!e||!e.match(g_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function b_(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function w_(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const S_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yn(i){if(!S_.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lo(){const i={};return new Proxy(i,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function A_(i,e){return new Proxy(i,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,o)}})}function ku(i){return JSON.parse(JSON.stringify(i))}const Ji=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),k_=[502,503,504];async function Tu(i){var e;if(!d_(i))throw new ea(Ji(i),0);if(k_.includes(i.status))throw new ea(Ji(i),i.status);let n;try{n=await i.json()}catch(a){throw new Xi(Ji(a),a)}let r;const o=y_(i);if(o&&o.getTime()>=Dd["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bu(Ji(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Wt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new bu(Ji(n),i.status,n.weak_password.reasons);throw new Qv(Ji(n),i.status||500,r)}const T_=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function _e(i,e,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[Qo]||(a[Qo]=Dd["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await P_(i,e,n+d,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function P_(i,e,n,r,o,a){const u=T_(e,r,o,a);let d;try{d=await i(n,Object.assign({},u))}catch(h){throw console.error(h),new ea(Ji(h),0)}if(d.ok||await Tu(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await Tu(h)}}function Gt(i){var e;let n=null;L_(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=l_(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function Pu(i){const e=Gt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Li(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function E_(i){return{data:i,error:null}}function x_(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=i,u=Nn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function Eu(i){return i}function L_(i){return i.access_token&&i.refresh_token&&i.expires_in}const Oo=["global","local","others"];class O_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Nd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Oo[0]){if(Oo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oo.join(", ")}`);try{return await _e(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await _e(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Li})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Nn(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await _e(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:x_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(ce(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Li})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,a,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await _e(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Eu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const O=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(P.split(";")[1].split("=")[1]);p[`${T}Page`]=O}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(ce(p))return{data:{users:[]},error:p};throw p}}async getUserById(e){yn(e);try{return await _e(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Li})}catch(n){if(ce(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yn(e);try{return await _e(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Li})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yn(e);try{return await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Li})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yn(e.userId);try{const{data:n,error:r}=await _e(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yn(e.userId),yn(e.id);try{return{data:await _e(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,o,a,u,d,h;try{const p={nextPage:null,lastPage:0,total:0},v=await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:Eu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const O=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(P.split(";")[1].split("=")[1]);p[`${T}Page`]=O}),p.total=parseInt(y)),{data:Object.assign(Object.assign({},g),p),error:null}}catch(p){if(ce(p))return{data:{clients:[]},error:p};throw p}}async _createOAuthClient(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await _e(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await _e(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await _e(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await _e(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}}function xu(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}const bn={debug:!!(globalThis&&jd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ud extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class C_ extends Ud{}async function M_(i,e,n){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await n()}finally{bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new C_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(bn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function I_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bd(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function R_(i){return parseInt(i,16)}function D_(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function $_(i){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:d,requestId:h,resources:p,scheme:v,uri:g,version:y}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const A=Bd(i.address),P=v?`${v}://${r}`:r,O=i.statement?`${i.statement}
`:"",T=`${P} wants you to sign in with your Ethereum account:
${A}

${O}`;let U=`URI: ${g}
Version: ${y}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(U+=`
Expiration Time: ${o.toISOString()}`),d&&(U+=`
Not Before: ${d.toISOString()}`),h&&(U+=`
Request ID: ${h}`),p){let I=`
Resources:`;for(const C of p){if(!C||typeof C!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${C}`);I+=`
- ${C}`}U+=I}return`${T}
${U}`}class st extends Error{constructor({message:e,code:n,cause:r,name:o}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=o??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Tr extends st{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function j_({error:i,options:e}){var n,r,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new st({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new st({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new st({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new st({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new st({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new st({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new st({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new st({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const u=window.location.hostname;if(Fd(u)){if(a.rp.id!==u)return new st({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new st({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function N_({error:i,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new st({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new st({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(Fd(r)){if(n.rpId!==r)return new st({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new st({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new st({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new st({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class U_{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const B_=new U_;function F_(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:n,excludeCredentials:r}=i,o=Nn(i,["challenge","user","excludeCredentials"]),a=Cn(e).buffer,u=Object.assign(Object.assign({},n),{id:Cn(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:a,user:u});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const p=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},p),{id:Cn(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return d}function z_(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:n}=i,r=Nn(i,["challenge","allowCredentials"]),o=Cn(e).buffer,a=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Cn(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function q_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:en(new Uint8Array(i.response.attestationObject)),clientDataJSON:en(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function V_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,r=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:en(new Uint8Array(o.authenticatorData)),clientDataJSON:en(new Uint8Array(o.clientDataJSON)),signature:en(new Uint8Array(o.signature)),userHandle:o.userHandle?en(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fd(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Lu(){var i,e;return!!(St()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function H_(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tr("Browser returned unexpected credential type",e)}:{data:null,error:new Tr("Empty credential response",e)}}catch(e){return{data:null,error:j_({error:e,options:i})}}}async function Z_(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Tr("Browser returned unexpected credential type",e)}:{data:null,error:new Tr("Empty credential response",e)}}catch(e){return{data:null,error:N_({error:e,options:i})}}}const K_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},W_={userVerification:"preferred",hints:["security-key"]};function Pr(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of i)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))r[a]=u;else if(n(u))r[a]=u;else if(e(u)){const d=r[a];e(d)?r[a]=Pr(d,u):r[a]=Pr(u)}else r[a]=u}return r}function G_(i,e){return Pr(K_,i,e||{})}function J_(i,e){return Pr(W_,i,e||{})}class Y_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:o},a){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=o??B_.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:p}=u.webauthn.credential_options.publicKey;p.name||(p.name=`${p.id}:${r}`),p.displayName||(p.displayName=p.name)}switch(u.webauthn.type){case"create":{const p=G_(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:v,error:g}=await H_({publicKey:p,signal:h});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const p=J_(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:v,error:g}=await Z_(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:p,signal:h}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(u){return ce(u)?{data:null,error:u}:{data:null,error:new Xi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}},a){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn authentication")};try{if(!Lu())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:a});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(u){return ce(u)?{data:null,error:u}:{data:null,error:new Xi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o},a){if(!n)return{data:null,error:new Ss("rpId is required for WebAuthn registration")};try{if(!Lu())return{data:null,error:new Xi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:p}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:a});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:p}}catch(u){return ce(u)?{data:null,error:u}:{data:null,error:new Xi("Unexpected error in register",u)}}}}I_();const X_={url:Wv,storageKey:Gv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ou(i,e,n){return await n()}const wn={};class As{get jwks(){var e,n;return(n=(e=wn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){wn[this.storageKey]=Object.assign(Object.assign({},wn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=wn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wn[this.storageKey]=Object.assign(Object.assign({},wn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=As.nextInstanceID,As.nextInstanceID+=1,this.instanceID>0&&St()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},X_),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new O_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Nd(o.fetch),this.lock=o.lock||Ou,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:St()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=M_:this.lock=Ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Y_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:jd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=xu(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=xu(this.memoryStorage)),St()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=c_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),St()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),i_(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return ce(n)?{error:n}:{error:new Xi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Gt}),{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,o;try{let a;if("email"in e){const{email:v,password:g,options:y}=e;let A=null,P=null;this.flowType==="pkce"&&([A,P]=await gn(this.storage,this.storageKey)),a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:v,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:A,code_challenge_method:P},xform:Gt})}else if("phone"in e){const{phone:v,password:g,options:y}=e;a=await _e(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(o=y==null?void 0:y.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Gt})}else throw new rr("You must provide either an email or phone number and a password");const{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,p=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(a){if(ce(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:d}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else if("phone"in e){const{phone:a,password:u,options:d}=e;n=await _e(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else throw new rr("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _n}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,o,a,u,d,h,p,v,g,y;let A,P;if("message"in e)A=e.message,P=e.signature;else{const{chain:O,wallet:T,statement:U,options:I}=e;let C;if(St())if(typeof T=="object")C=T;else{const Me=window;if("ethereum"in Me&&typeof Me.ethereum=="object"&&"request"in Me.ethereum&&typeof Me.ethereum.request=="function")C=Me.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof T!="object"||!(I!=null&&I.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=T}const q=new URL((n=I==null?void 0:I.url)!==null&&n!==void 0?n:window.location.href),re=await C.request({method:"eth_requestAccounts"}).then(Me=>Me).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!re||re.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const de=Bd(re[0]);let ge=(r=I==null?void 0:I.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!ge){const Me=await C.request({method:"eth_chainId"});ge=R_(Me)}const Oe={domain:q.host,address:de,statement:U,uri:q.href,version:"1",chainId:ge,nonce:(o=I==null?void 0:I.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=I==null?void 0:I.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=I==null?void 0:I.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=I==null?void 0:I.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(p=I==null?void 0:I.signInWithEthereum)===null||p===void 0?void 0:p.requestId,resources:(v=I==null?void 0:I.signInWithEthereum)===null||v===void 0?void 0:v.resources};A=$_(Oe),P=await C.request({method:"personal_sign",params:[D_(A),de]})}try{const{data:O,error:T}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:P},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Gt});if(T)throw T;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new _n}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:T})}catch(O){if(ce(O))return{data:{user:null,session:null},error:O};throw O}}async signInWithSolana(e){var n,r,o,a,u,d,h,p,v,g,y,A;let P,O;if("message"in e)P=e.message,O=e.signature;else{const{chain:T,wallet:U,statement:I,options:C}=e;let q;if(St())if(typeof U=="object")q=U;else{const de=window;if("solana"in de&&typeof de.solana=="object"&&("signIn"in de.solana&&typeof de.solana.signIn=="function"||"signMessage"in de.solana&&typeof de.solana.signMessage=="function"))q=de.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(C!=null&&C.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");q=U}const re=new URL((n=C==null?void 0:C.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in q&&q.signIn){const de=await q.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},C==null?void 0:C.signInWithSolana),{version:"1",domain:re.host,uri:re.href}),I?{statement:I}:null));let ge;if(Array.isArray(de)&&de[0]&&typeof de[0]=="object")ge=de[0];else if(de&&typeof de=="object"&&"signedMessage"in de&&"signature"in de)ge=de;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)P=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),O=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in q)||typeof q.signMessage!="function"||!("publicKey"in q)||typeof q!="object"||!q.publicKey||!("toBase58"in q.publicKey)||typeof q.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${re.host} wants you to sign in with your Solana account:`,q.publicKey.toBase58(),...I?["",I,""]:[""],"Version: 1",`URI: ${re.href}`,`Issued At: ${(o=(r=C==null?void 0:C.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=C==null?void 0:C.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${C.signInWithSolana.notBefore}`]:[],...!((u=C==null?void 0:C.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${C.signInWithSolana.expirationTime}`]:[],...!((d=C==null?void 0:C.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${C.signInWithSolana.chainId}`]:[],...!((h=C==null?void 0:C.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${C.signInWithSolana.nonce}`]:[],...!((p=C==null?void 0:C.signInWithSolana)===null||p===void 0)&&p.requestId?[`Request ID: ${C.signInWithSolana.requestId}`]:[],...!((g=(v=C==null?void 0:C.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...C.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);const de=await q.signMessage(new TextEncoder().encode(P),"utf8");if(!de||!(de instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=de}}try{const{data:T,error:U}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:en(O)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Gt});if(U)throw U;return!T||!T.session||!T.user?{data:{user:null,session:null},error:new _n}:(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("SIGNED_IN",T.session)),{data:Object.assign({},T),error:U})}catch(T){if(ce(T))return{data:{user:null,session:null},error:T};throw T}}async _exchangeCodeForSession(e){const n=await Ki(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:u}=await _e(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gt});if(await Pi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new _n}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(ce(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:a,nonce:u}=e,d=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gt}),{data:h,error:p}=d;return p?{data:{user:null,session:null},error:p}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new _n}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:p})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,a,u;try{if("email"in e){const{email:d,options:h}=e;let p=null,v=null;this.flowType==="pkce"&&([p,v]=await gn(this.storage,this.storageKey));const{error:g}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:p,error:v}=await _e(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:p==null?void 0:p.message_id},error:v}}throw new rr("You must provide either an email or phone number.")}catch(d){if(ce(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,r;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:d}=await _e(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Gt});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,p=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:p,session:h},error:null}}catch(o){if(ce(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await gn(this.storage,this.storageKey)),await _e(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:E_})}catch(a){if(ce(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Wt;const{error:o}=await _e(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(ce(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:u}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:u,error:d}=await _e(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new rr("You must provide either an email or phone number and a type")}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ki(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Po:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Ki(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Lo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=A_(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Li}):await this._useSession(async n=>{var r,o,a;const{data:u,error:d}=n;if(d)throw d;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wt}:await _e(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Li})})}catch(n){if(ce(n))return t_(n)&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Wt;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await gn(this.storage,this.storageKey));const{data:p,error:v}=await _e(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Li});if(v)throw v;return u.user=p.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(ce(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wt;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:u}=xo(e.access_token);if(u.exp&&(r=u.exp,o=r<=n),o){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(ce(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Wt;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(ce(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!St())throw new or("No browser detected.");if(e.error||e.error_description||e.error_code)throw new or(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new or("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yu("No code detected.");const{data:I,error:C}=await this._exchangeCodeForSession(e.code);if(C)throw C;const q=new URL(window.location.href);return q.searchParams.delete("code"),window.history.replaceState(window.history.state,"",q.toString()),{data:{session:I.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:d,expires_at:h,token_type:p}=e;if(!a||!d||!u||!p)throw new or("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(d);let y=v+g;h&&(y=parseInt(h));const A=y-v;A*1e3<=kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${g}s`);const P=y-g;v-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,y,v):v-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,y,v);const{data:O,error:T}=await this._getUser(a);if(T)throw T;const U={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:g,expires_at:y,refresh_token:u,token_type:p,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:e.type},error:null}}catch(r){if(ce(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ki(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const u=(r=o.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(e_(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=u_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await gn(this.storage,this.storageKey,!0));try{return await _e(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(ce(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(ce(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var u,d,h,p,v;const{data:g,error:y}=a;if(y)throw y;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await _e(this.fetch,"GET",A,{headers:this.headers,jwt:(v=(p=g.session)===null||p===void 0?void 0:p.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return St()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(ce(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:o,data:{session:a}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:p,nonce:v}=e,g=await _e(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:p,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Gt}),{data:y,error:A}=g;return A?{data:{user:null,session:null},error:A}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new _n}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:A})}catch(o){if(ce(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)throw u;return await _e(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await f_(async o=>(o>0&&await h_(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await _e(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gt})),(o,a)=>{const u=200*Math.pow(2,o);return a&&Eo(a)&&Date.now()+u-r<kn})}catch(r){if(this._debug(n,"error",r),ce(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),St()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Ki(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ki(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Tn(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Lo()}else if(o&&!o.user&&!o.user){const u=await Ki(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Pi(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,o)):o.user=Lo()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Po;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Po}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Eo(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new jr;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Wt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),ce(a)){const u={data:null,error:a};return Eo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=ku(o);await Tn(this.storage,this.storageKey,a)}else{const o=ku(n);await Tn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Pi(this.storage,this.storageKey),await Pi(this.storage,this.storageKey+"-code-verifier"),await Pi(this.storage,this.storageKey+"-user"),this.userStorage&&await Pi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&St()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${kn}ms, refresh threshold is ${Xo} ticks`),o<=Xo&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ud)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!St()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await gn(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await _e(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:p}=await _e(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return p?{data:null,error:p}:(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?q_(e.webauthn.credential_response):V_(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=await _e(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:F_(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:z_(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(ce(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:o}=await this.getSession();if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=xo(r.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const p=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:p},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?{data:null,error:o}:r?await _e(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new Wt}})}catch(n){if(ce(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Wt};const u=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Wt};const u=await _e(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&St()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(ce(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+Xv>o)return r;const{data:a,error:u}=await _e(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:A,error:P}=await this.getSession();if(P||!A.session)return{data:null,error:P};r=A.session.access_token}const{header:o,payload:a,signature:u,raw:{header:d,payload:h}}=xo(r);n!=null&&n.allowExpired||b_(a.exp);const p=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!p){const{error:A}=await this.getUser(r);if(A)throw A;return{data:{claims:a,header:o,signature:u},error:null}}const v=w_(o.alg),g=await crypto.subtle.importKey("jwk",p,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,a_(`${d}.${h}`)))throw new ta("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(r){if(ce(r))return{data:null,error:r};throw r}}}As.nextInstanceID=0;const Q_=As;class eg extends Q_{constructor(e){super(e)}}class tg{constructor(e,n,r){var o,a,u;this.supabaseUrl=e,this.supabaseKey=n;const d=Kv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,p={db:Uv,realtime:Fv,auth:Object.assign(Object.assign({},Bv),{storageKey:h}),global:Nv},v=Zv(r??{},p);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=Vv(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Wm(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new Dv(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Nm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:u,flowType:d,lock:h,debug:p},v,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new eg({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),v),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,flowType:d,lock:h,debug:p,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new dv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ig=(i,e,n)=>new tg(i,e,n);function ng(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}ng()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const sg="https://mxcmguifgtbgcjiezqot.supabase.co",rg="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14Y21ndWlmZ3RiZ2NqaWV6cW90Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDMwMjAsImV4cCI6MjA3Nzc3OTAyMH0.s3voAwQsXQewcCIdMRzkuqQuncUAosBhmli3DVbCR8g",gt=ig(sg,rg),ft=oe(null),ar=oe(!0),Sn=oe(!1);function Ls(){return{user:ft,loading:ar,isAdmin:Sn,checkUser:async(u=2e3)=>{var g;ar.value=!0;const d=Date.now(),{data:{session:h}}=await gt.auth.getSession();ft.value=(h==null?void 0:h.user)||null,ft.value&&(Sn.value=((g=ft.value.user_metadata)==null?void 0:g.role)==="admin"||ft.value.email==="admin@fueldock.ee"||ft.value.email==="uve.mae@gmail.com");const p=Date.now()-d,v=Math.max(0,u-p);await new Promise(y=>setTimeout(y,v)),ar.value=!1},signUp:async(u,d)=>{const{data:h,error:p}=await gt.auth.signUp({email:u,password:d,options:{emailRedirectTo:window.location.origin}});if(p)throw p;return h},signIn:async(u,d)=>{var v;const{data:h,error:p}=await gt.auth.signInWithPassword({email:u,password:d});if(p)throw p;return ft.value=h.user,ft.value&&(Sn.value=((v=ft.value.user_metadata)==null?void 0:v.role)==="admin"||ft.value.email==="admin@fueldock.ee"||ft.value.email==="uve.mae@gmail.com"),h},signOut:async()=>{const{error:u}=await gt.auth.signOut();if(u)throw u;ft.value=null,Sn.value=!1},resetPassword:async u=>{const{error:d}=await gt.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/reset-password`});if(d)throw d},initAuthListener:()=>{gt.auth.onAuthStateChange((u,d)=>{var h;ft.value=(d==null?void 0:d.user)||null,ft.value?Sn.value=((h=ft.value.user_metadata)==null?void 0:h.role)==="admin"||ft.value.email==="admin@fueldock.ee"||ft.value.email==="uve.mae@gmail.com":Sn.value=!1,ar.value=!1})}}}const ji=(i,e)=>{const n=i.__vccOpts||i;for(const[r,o]of e)n[r]=o;return n},og={class:"login-container"},ag={class:"login-card"},lg={class:"mode-tabs"},ug={class:"form-group"},cg={class:"form-group"},dg=["disabled"],hg={class:"form-group"},fg={class:"form-group"},pg={class:"form-group"},mg=["disabled"],vg={class:"form-group"},_g=["disabled"],gg={key:3,class:"message error-message"},yg={key:4,class:"message success-message"},bg={__name:"LoginScreen",emits:["guest-mode"],setup(i,{emit:e}){const n=e,{signIn:r,signUp:o,resetPassword:a}=Ls(),u=oe("login"),d=oe(""),h=oe(""),p=oe(""),v=oe(!1),g=oe(""),y=oe("");async function A(){if(g.value="",y.value="",!d.value||!h.value){g.value="Please fill in all fields";return}v.value=!0;try{await r(d.value,h.value)}catch(U){g.value=U.message||"Login failed. Please check your credentials."}finally{v.value=!1}}async function P(){if(g.value="",y.value="",!d.value||!h.value||!p.value){g.value="Please fill in all fields";return}if(h.value!==p.value){g.value="Passwords do not match";return}if(h.value.length<6){g.value="Password must be at least 6 characters";return}v.value=!0;try{await o(d.value,h.value),y.value="Account created! Please check your email to confirm your account.",d.value="",h.value="",p.value="",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(U){g.value=U.message||"Signup failed. Please try again."}finally{v.value=!1}}async function O(){if(g.value="",y.value="",!d.value){g.value="Please enter your email address";return}v.value=!0;try{await a(d.value),y.value="Password reset link sent! Check your email.",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(U){g.value=U.message||"Failed to send reset link."}finally{v.value=!1}}function T(){n("guest-mode")}return(U,I)=>(K(),X("div",og,[m("div",ag,[I[18]||(I[18]=m("div",{class:"logo-section"},[m("img",{src:zo,alt:"FuelDock",class:"logo"}),m("h1",null,"FuelDock Estonia"),m("p",{class:"tagline"},"Marina Fuel Station Locator")],-1)),m("div",lg,[m("button",{class:et({active:u.value==="login"}),onClick:I[0]||(I[0]=C=>u.value="login")}," Login ",2),m("button",{class:et({active:u.value==="signup"}),onClick:I[1]||(I[1]=C=>u.value="signup")}," Sign Up ",2)]),u.value==="login"?(K(),X("form",{key:0,onSubmit:$t(A,["prevent"]),class:"auth-form"},[m("div",ug,[I[10]||(I[10]=m("label",null,"Email",-1)),Ae(m("input",{"onUpdate:modelValue":I[2]||(I[2]=C=>d.value=C),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[rt,d.value]])]),m("div",cg,[I[11]||(I[11]=m("label",null,"Password",-1)),Ae(m("input",{"onUpdate:modelValue":I[3]||(I[3]=C=>h.value=C),type:"password",placeholder:"",required:"",autocomplete:"current-password"},null,512),[[rt,h.value]])]),m("button",{type:"submit",class:"submit-btn",disabled:v.value},ne(v.value?"Logging in...":"Login"),9,dg),m("button",{type:"button",onClick:I[4]||(I[4]=C=>u.value="forgot"),class:"link-btn"}," Forgot password? ")],32)):me("",!0),u.value==="signup"?(K(),X("form",{key:1,onSubmit:$t(P,["prevent"]),class:"auth-form"},[m("div",hg,[I[12]||(I[12]=m("label",null,"Email",-1)),Ae(m("input",{"onUpdate:modelValue":I[5]||(I[5]=C=>d.value=C),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[rt,d.value]])]),m("div",fg,[I[13]||(I[13]=m("label",null,"Password",-1)),Ae(m("input",{"onUpdate:modelValue":I[6]||(I[6]=C=>h.value=C),type:"password",placeholder:"",required:"",autocomplete:"new-password",minlength:"6"},null,512),[[rt,h.value]])]),m("div",pg,[I[14]||(I[14]=m("label",null,"Confirm Password",-1)),Ae(m("input",{"onUpdate:modelValue":I[7]||(I[7]=C=>p.value=C),type:"password",placeholder:"",required:"",autocomplete:"new-password"},null,512),[[rt,p.value]])]),m("button",{type:"submit",class:"submit-btn",disabled:v.value},ne(v.value?"Creating account...":"Create Account"),9,mg),I[15]||(I[15]=m("p",{class:"info-text"}," You'll receive a confirmation email to activate your account. ",-1))],32)):me("",!0),u.value==="forgot"?(K(),X("form",{key:2,onSubmit:$t(O,["prevent"]),class:"auth-form"},[m("div",vg,[I[16]||(I[16]=m("label",null,"Email",-1)),Ae(m("input",{"onUpdate:modelValue":I[8]||(I[8]=C=>d.value=C),type:"email",placeholder:"your@email.com",required:""},null,512),[[rt,d.value]])]),m("button",{type:"submit",class:"submit-btn",disabled:v.value},ne(v.value?"Sending...":"Send Reset Link"),9,_g),m("button",{type:"button",onClick:I[9]||(I[9]=C=>u.value="login"),class:"link-btn"}," Back to Login ")],32)):me("",!0),g.value?(K(),X("div",gg,ne(g.value),1)):me("",!0),y.value?(K(),X("div",yg,ne(y.value),1)):me("",!0),m("div",{class:"guest-section"},[m("button",{onClick:T,class:"guest-btn"}," Continue as Guest "),I[17]||(I[17]=m("p",{class:"guest-info"}," Limited view: See marina locations only ",-1))])])]))}},wg=ji(bg,[["__scopeId","data-v-e2058a05"]]);var ia={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,r){r(e)})(Um,function(n){var r="1.9.4";function o(t){var s,l,c,f;for(l=1,c=arguments.length;l<c;l++){f=arguments[l];for(s in f)t[s]=f[s]}return t}var a=Object.create||function(){function t(){}return function(s){return t.prototype=s,new t}}();function u(t,s){var l=Array.prototype.slice;if(t.bind)return t.bind.apply(t,l.call(arguments,1));var c=l.call(arguments,2);return function(){return t.apply(s,c.length?c.concat(l.call(arguments)):arguments)}}var d=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function p(t,s,l){var c,f,_,w;return w=function(){c=!1,f&&(_.apply(l,f),f=!1)},_=function(){c?f=arguments:(t.apply(l,arguments),setTimeout(w,s),c=!0)},_}function v(t,s,l){var c=s[1],f=s[0],_=c-f;return t===c&&l?t:((t-f)%_+_)%_+f}function g(){return!1}function y(t,s){if(s===!1)return t;var l=Math.pow(10,s===void 0?6:s);return Math.round(t*l)/l}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return A(t).split(/\s+/)}function O(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var l in s)t.options[l]=s[l];return t.options}function T(t,s,l){var c=[];for(var f in t)c.push(encodeURIComponent(l?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function I(t,s){return t.replace(U,function(l,c){var f=s[c];if(f===void 0)throw new Error("No value provided for variable "+l);return typeof f=="function"&&(f=f(s)),f})}var C=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function q(t,s){for(var l=0;l<t.length;l++)if(t[l]===s)return l;return-1}var re="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function de(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ge=0;function Oe(t){var s=+new Date,l=Math.max(0,16-(s-ge));return ge=s+l,window.setTimeout(t,l)}var Me=window.requestAnimationFrame||de("RequestAnimationFrame")||Oe,J=window.cancelAnimationFrame||de("CancelAnimationFrame")||de("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function $(t,s,l){if(l&&Me===Oe)t.call(s);else return Me.call(window,u(t,s))}function B(t){t&&J.call(window,t)}var ye={__proto__:null,extend:o,create:a,bind:u,get lastId(){return d},stamp:h,throttle:p,wrapNum:v,falseFn:g,formatNum:y,trim:A,splitWords:P,setOptions:O,getParamString:T,template:I,isArray:C,indexOf:q,emptyImageUrl:re,requestFn:Me,cancelFn:J,requestAnimFrame:$,cancelAnimFrame:B};function ie(){}ie.extend=function(t){var s=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=s.__super__=this.prototype,c=a(l);c.constructor=s,s.prototype=c;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(s[f]=this[f]);return t.statics&&o(s,t.statics),t.includes&&(j(t.includes),o.apply(null,[c].concat(t.includes))),o(c,t),delete c.statics,delete c.includes,c.options&&(c.options=l.options?a(l.options):{},o(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,w=c._initHooks.length;_<w;_++)c._initHooks[_].call(this)}},s},ie.include=function(t){var s=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},ie.mergeOptions=function(t){return o(this.prototype.options,t),this},ie.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),l=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function j(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=C(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Z={on:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l)}return this},off:function(t,s,l){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],s);else{t=P(t);for(var f=arguments.length===1,_=0,w=t.length;_<w;_++)f?this._off(t[_]):this._off(t[_],s,l)}return this},_on:function(t,s,l,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,l)===!1){l===this&&(l=void 0);var f={fn:s,ctx:l};c&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,s,l){var c,f,_;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(f=0,_=c.length;f<_;f++)c[f].fn=g;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var w=this._listens(t,s,l);if(w!==!1){var x=c[w];this._firingCount&&(x.fn=g,this._events[t]=c=c.slice()),c.splice(w,1)}}},fire:function(t,s,l){if(!this.listens(t,l))return this;var c=o({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var _=0,w=f.length;_<w;_++){var x=f[_],M=x.fn;x.once&&this.off(t,M,x.ctx),M.call(x.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(t,s,l,c){typeof t!="string"&&console.warn('"string" type argument expected');var f=s;typeof s!="function"&&(c=!!s,f=void 0,l=void 0);var _=this._events&&this._events[t];if(_&&_.length&&this._listens(t,f,l)!==!1)return!0;if(c){for(var w in this._eventParents)if(this._eventParents[w].listens(t,s,l,c))return!0}return!1},_listens:function(t,s,l){if(!this._events)return!1;var c=this._events[t]||[];if(!s)return!!c.length;l===this&&(l=void 0);for(var f=0,_=c.length;f<_;f++)if(c[f].fn===s&&c[f].ctx===l)return f;return!1},once:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s,!0);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};Z.addEventListener=Z.on,Z.removeEventListener=Z.clearAllEventListeners=Z.off,Z.addOneTimeEventListener=Z.once,Z.fireEvent=Z.fire,Z.hasEventListeners=Z.listens;var ke=ie.extend(Z);function Q(t,s,l){this.x=l?Math.round(t):t,this.y=l?Math.round(s):s}var dt=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Q.prototype={clone:function(){return new Q(this.x,this.y)},add:function(t){return this.clone()._add(he(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(he(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Q(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Q(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=dt(this.x),this.y=dt(this.y),this},distanceTo:function(t){t=he(t);var s=t.x-this.x,l=t.y-this.y;return Math.sqrt(s*s+l*l)},equals:function(t){return t=he(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=he(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function he(t,s,l){return t instanceof Q?t:C(t)?new Q(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new Q(t.x,t.y):new Q(t,s,l)}function Re(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}Re.prototype={extend:function(t){var s,l;if(!t)return this;if(t instanceof Q||typeof t[0]=="number"||"x"in t)s=l=he(t);else if(t=qe(t),s=t.min,l=t.max,!s||!l)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=l.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(t){return he((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return he(this.min.x,this.max.y)},getTopRight:function(){return he(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,l;return typeof t[0]=="number"||t instanceof Q?t=he(t):t=qe(t),t instanceof Re?(s=t.min,l=t.max):s=l=t,s.x>=this.min.x&&l.x<=this.max.x&&s.y>=this.min.y&&l.y<=this.max.y},intersects:function(t){t=qe(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>=s.x&&c.x<=l.x,w=f.y>=s.y&&c.y<=l.y;return _&&w},overlaps:function(t){t=qe(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>s.x&&c.x<l.x,w=f.y>s.y&&c.y<l.y;return _&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,l=this.max,c=Math.abs(s.x-l.x)*t,f=Math.abs(s.y-l.y)*t;return qe(he(s.x-c,s.y-f),he(l.x+c,l.y+f))},equals:function(t){return t?(t=qe(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function qe(t,s){return!t||t instanceof Re?t:new Re(t,s)}function lt(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}lt.prototype={extend:function(t){var s=this._southWest,l=this._northEast,c,f;if(t instanceof De)c=t,f=t;else if(t instanceof lt){if(c=t._southWest,f=t._northEast,!c||!f)return this}else return t?this.extend(be(t)||Fe(t)):this;return!s&&!l?(this._southWest=new De(c.lat,c.lng),this._northEast=new De(f.lat,f.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),l.lat=Math.max(f.lat,l.lat),l.lng=Math.max(f.lng,l.lng)),this},pad:function(t){var s=this._southWest,l=this._northEast,c=Math.abs(s.lat-l.lat)*t,f=Math.abs(s.lng-l.lng)*t;return new lt(new De(s.lat-c,s.lng-f),new De(l.lat+c,l.lng+f))},getCenter:function(){return new De((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new De(this.getNorth(),this.getWest())},getSouthEast:function(){return new De(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof De||"lat"in t?t=be(t):t=Fe(t);var s=this._southWest,l=this._northEast,c,f;return t instanceof lt?(c=t.getSouthWest(),f=t.getNorthEast()):c=f=t,c.lat>=s.lat&&f.lat<=l.lat&&c.lng>=s.lng&&f.lng<=l.lng},intersects:function(t){t=Fe(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>=s.lat&&c.lat<=l.lat,w=f.lng>=s.lng&&c.lng<=l.lng;return _&&w},overlaps:function(t){t=Fe(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>s.lat&&c.lat<l.lat,w=f.lng>s.lng&&c.lng<l.lng;return _&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=Fe(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(t,s){return t instanceof lt?t:new lt(t,s)}function De(t,s,l){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,l!==void 0&&(this.alt=+l)}De.prototype={equals:function(t,s){if(!t)return!1;t=be(t);var l=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return l<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return xt.distance(this,be(t))},wrap:function(){return xt.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,l=s/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-s,this.lng-l],[this.lat+s,this.lng+l])},clone:function(){return new De(this.lat,this.lng,this.alt)}};function be(t,s,l){return t instanceof De?t:C(t)&&typeof t[0]!="object"?t.length===3?new De(t[0],t[1],t[2]):t.length===2?new De(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new De(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new De(t,s,l)}var mt={latLngToPoint:function(t,s){var l=this.projection.project(t),c=this.scale(s);return this.transformation._transform(l,c)},pointToLatLng:function(t,s){var l=this.scale(s),c=this.transformation.untransform(t,l);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,l=this.scale(t),c=this.transformation.transform(s.min,l),f=this.transformation.transform(s.max,l);return new Re(c,f)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,l=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new De(l,s,c)},wrapLatLngBounds:function(t){var s=t.getCenter(),l=this.wrapLatLng(s),c=s.lat-l.lat,f=s.lng-l.lng;if(c===0&&f===0)return t;var _=t.getSouthWest(),w=t.getNorthEast(),x=new De(_.lat-c,_.lng-f),M=new De(w.lat-c,w.lng-f);return new lt(x,M)}},xt=o({},mt,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var l=Math.PI/180,c=t.lat*l,f=s.lat*l,_=Math.sin((s.lat-t.lat)*l/2),w=Math.sin((s.lng-t.lng)*l/2),x=_*_+Math.cos(c)*Math.cos(f)*w*w,M=2*Math.atan2(Math.sqrt(x),Math.sqrt(1-x));return this.R*M}}),Ni=6378137,Vt={R:Ni,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,t.lat),-l),f=Math.sin(c*s);return new Q(this.R*t.lng*s,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var s=180/Math.PI;return new De((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:function(){var t=Ni*Math.PI;return new Re([-t,-t],[t,t])}()};function rn(t,s,l,c){if(C(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=l,this._d=c}rn.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new Q((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function b(t,s,l,c){return new rn(t,s,l,c)}var k=o({},xt,{code:"EPSG:3857",projection:Vt,transformation:function(){var t=.5/(Math.PI*Vt.R);return b(t,.5,-t,.5)}()}),R=o({},k,{code:"EPSG:900913"});function H(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function F(t,s){var l="",c,f,_,w,x,M;for(c=0,_=t.length;c<_;c++){for(x=t[c],f=0,w=x.length;f<w;f++)M=x[f],l+=(f?"L":"M")+M.x+" "+M.y;l+=s?ue.svg?"z":"x":""}return l||"M0 0"}var N=document.documentElement.style,Y="ActiveXObject"in window,G=Y&&!document.addEventListener,W="msLaunchUri"in navigator&&!("documentMode"in document),V=Qt("webkit"),ae=Qt("android"),ee=Qt("android 2")||Qt("android 3"),le=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),fe=ae&&Qt("Google")&&le<537&&!("AudioNode"in window),Ee=!!window.opera,Ne=!W&&Qt("chrome"),E=Qt("gecko")&&!V&&!Ee&&!Y,S=!Ne&&Qt("safari"),D=Qt("phantom"),Te="OTransition"in N,He=navigator.platform.indexOf("Win")===0,Ce=Y&&"transition"in N,Je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ee,we="MozPerspective"in N,$e=!window.L_DISABLE_3D&&(Ce||Je||we)&&!Te&&!D,Qe=typeof orientation<"u"||Qt("mobile"),vt=Qe&&V,on=Qe&&Je,zn=!window.PointerEvent&&window.MSPointerEvent,Os=!!(window.PointerEvent||zn),Oa="ontouchstart"in window||!!window.TouchEvent,qd=!window.L_NO_TOUCH&&(Oa||Os),Vd=Qe&&Ee,Hd=Qe&&E,Zd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kd=function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,s),window.removeEventListener("testPassiveEventSupport",g,s)}catch{}return t}(),Wd=function(){return!!document.createElement("canvas").getContext}(),Nr=!!(document.createElementNS&&H("svg").createSVGRect),Gd=!!Nr&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jd=!Nr&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Yd=navigator.platform.indexOf("Mac")===0,Xd=navigator.platform.indexOf("Linux")===0;function Qt(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var ue={ie:Y,ielt9:G,edge:W,webkit:V,android:ae,android23:ee,androidStock:fe,opera:Ee,chrome:Ne,gecko:E,safari:S,phantom:D,opera12:Te,win:He,ie3d:Ce,webkit3d:Je,gecko3d:we,any3d:$e,mobile:Qe,mobileWebkit:vt,mobileWebkit3d:on,msPointer:zn,pointer:Os,touch:qd,touchNative:Oa,mobileOpera:Vd,mobileGecko:Hd,retina:Zd,passiveEvents:Kd,canvas:Wd,svg:Nr,vml:Jd,inlineSvg:Gd,mac:Yd,linux:Xd},Ca=ue.msPointer?"MSPointerDown":"pointerdown",Ma=ue.msPointer?"MSPointerMove":"pointermove",Ia=ue.msPointer?"MSPointerUp":"pointerup",Ra=ue.msPointer?"MSPointerCancel":"pointercancel",Ur={touchstart:Ca,touchmove:Ma,touchend:Ia,touchcancel:Ra},Da={touchstart:sh,touchmove:Cs,touchend:Cs,touchcancel:Cs},an={},$a=!1;function Qd(t,s,l){return s==="touchstart"&&nh(),Da[s]?(l=Da[s].bind(this,l),t.addEventListener(Ur[s],l,!1),l):(console.warn("wrong event specified:",s),g)}function eh(t,s,l){if(!Ur[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Ur[s],l,!1)}function th(t){an[t.pointerId]=t}function ih(t){an[t.pointerId]&&(an[t.pointerId]=t)}function ja(t){delete an[t.pointerId]}function nh(){$a||(document.addEventListener(Ca,th,!0),document.addEventListener(Ma,ih,!0),document.addEventListener(Ia,ja,!0),document.addEventListener(Ra,ja,!0),$a=!0)}function Cs(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var l in an)s.touches.push(an[l]);s.changedTouches=[s],t(s)}}function sh(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&ht(s),Cs(t,s)}function rh(t){var s={},l,c;for(c in t)l=t[c],s[c]=l&&l.bind?l.bind(t):l;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var oh=200;function ah(t,s){t.addEventListener("dblclick",s);var l=0,c;function f(_){if(_.detail!==1){c=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var w=za(_);if(!(w.some(function(M){return M instanceof HTMLLabelElement&&M.attributes.for})&&!w.some(function(M){return M instanceof HTMLInputElement||M instanceof HTMLSelectElement}))){var x=Date.now();x-l<=oh?(c++,c===2&&s(rh(_))):c=1,l=x}}}return t.addEventListener("click",f),{dblclick:s,simDblclick:f}}function lh(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var Br=Rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),qn=Rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Na=qn==="webkitTransition"||qn==="OTransition"?qn+"End":"transitionend";function Ua(t){return typeof t=="string"?document.getElementById(t):t}function Vn(t,s){var l=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);l=c?c[s]:null}return l==="auto"?null:l}function je(t,s,l){var c=document.createElement(t);return c.className=s||"",l&&l.appendChild(c),c}function Ye(t){var s=t.parentNode;s&&s.removeChild(t)}function Ms(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ln(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function un(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function Fr(t,s){if(t.classList!==void 0)return t.classList.contains(s);var l=Is(t);return l.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(l)}function xe(t,s){if(t.classList!==void 0)for(var l=P(s),c=0,f=l.length;c<f;c++)t.classList.add(l[c]);else if(!Fr(t,s)){var _=Is(t);zr(t,(_?_+" ":"")+s)}}function tt(t,s){t.classList!==void 0?t.classList.remove(s):zr(t,A((" "+Is(t)+" ").replace(" "+s+" "," ")))}function zr(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function Is(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function jt(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&uh(t,s)}function uh(t,s){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=t.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),l?(l.Enabled=s!==100,l.Opacity=s):t.style.filter+=" progid:"+c+"(opacity="+s+")"}function Rs(t){for(var s=document.documentElement.style,l=0;l<t.length;l++)if(t[l]in s)return t[l];return!1}function Ui(t,s,l){var c=s||new Q(0,0);t.style[Br]=(ue.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function it(t,s){t._leaflet_pos=s,ue.any3d?Ui(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function Bi(t){return t._leaflet_pos||new Q(0,0)}var Hn,Zn,qr;if("onselectstart"in document)Hn=function(){Se(window,"selectstart",ht)},Zn=function(){Ze(window,"selectstart",ht)};else{var Kn=Rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Hn=function(){if(Kn){var t=document.documentElement.style;qr=t[Kn],t[Kn]="none"}},Zn=function(){Kn&&(document.documentElement.style[Kn]=qr,qr=void 0)}}function Vr(){Se(window,"dragstart",ht)}function Hr(){Ze(window,"dragstart",ht)}var Ds,Zr;function Kr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&($s(),Ds=t,Zr=t.style.outlineStyle,t.style.outlineStyle="none",Se(window,"keydown",$s))}function $s(){Ds&&(Ds.style.outlineStyle=Zr,Ds=void 0,Zr=void 0,Ze(window,"keydown",$s))}function Ba(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Wr(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var ch={__proto__:null,TRANSFORM:Br,TRANSITION:qn,TRANSITION_END:Na,get:Ua,getStyle:Vn,create:je,remove:Ye,empty:Ms,toFront:ln,toBack:un,hasClass:Fr,addClass:xe,removeClass:tt,setClass:zr,getClass:Is,setOpacity:jt,testProp:Rs,setTransform:Ui,setPosition:it,getPosition:Bi,get disableTextSelection(){return Hn},get enableTextSelection(){return Zn},disableImageDrag:Vr,enableImageDrag:Hr,preventOutline:Kr,restoreOutline:$s,getSizedParentNode:Ba,getScale:Wr};function Se(t,s,l,c){if(s&&typeof s=="object")for(var f in s)Jr(t,f,s[f],l);else{s=P(s);for(var _=0,w=s.length;_<w;_++)Jr(t,s[_],l,c)}return this}var ei="_leaflet_events";function Ze(t,s,l,c){if(arguments.length===1)Fa(t),delete t[ei];else if(s&&typeof s=="object")for(var f in s)Yr(t,f,s[f],l);else if(s=P(s),arguments.length===2)Fa(t,function(x){return q(s,x)!==-1});else for(var _=0,w=s.length;_<w;_++)Yr(t,s[_],l,c);return this}function Fa(t,s){for(var l in t[ei]){var c=l.split(/\d/)[0];(!s||s(c))&&Yr(t,c,null,null,l)}}var Gr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Jr(t,s,l,c){var f=s+h(l)+(c?"_"+h(c):"");if(t[ei]&&t[ei][f])return this;var _=function(x){return l.call(c||t,x||window.event)},w=_;!ue.touchNative&&ue.pointer&&s.indexOf("touch")===0?_=Qd(t,s,_):ue.touch&&s==="dblclick"?_=ah(t,_):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Gr[s]||s,_,ue.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(_=function(x){x=x||window.event,Qr(t,x)&&w(x)},t.addEventListener(Gr[s],_,!1)):t.addEventListener(s,w,!1):t.attachEvent("on"+s,_),t[ei]=t[ei]||{},t[ei][f]=_}function Yr(t,s,l,c,f){f=f||s+h(l)+(c?"_"+h(c):"");var _=t[ei]&&t[ei][f];if(!_)return this;!ue.touchNative&&ue.pointer&&s.indexOf("touch")===0?eh(t,s,_):ue.touch&&s==="dblclick"?lh(t,_):"removeEventListener"in t?t.removeEventListener(Gr[s]||s,_,!1):t.detachEvent("on"+s,_),t[ei][f]=null}function Fi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Xr(t){return Jr(t,"wheel",Fi),this}function Wn(t){return Se(t,"mousedown touchstart dblclick contextmenu",Fi),t._leaflet_disable_click=!0,this}function ht(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function zi(t){return ht(t),Fi(t),this}function za(t){if(t.composedPath)return t.composedPath();for(var s=[],l=t.target;l;)s.push(l),l=l.parentNode;return s}function qa(t,s){if(!s)return new Q(t.clientX,t.clientY);var l=Wr(s),c=l.boundingClientRect;return new Q((t.clientX-c.left)/l.x-s.clientLeft,(t.clientY-c.top)/l.y-s.clientTop)}var dh=ue.linux&&ue.chrome?window.devicePixelRatio:ue.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Va(t){return ue.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/dh:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function Qr(t,s){var l=s.relatedTarget;if(!l)return!0;try{for(;l&&l!==t;)l=l.parentNode}catch{return!1}return l!==t}var hh={__proto__:null,on:Se,off:Ze,stopPropagation:Fi,disableScrollPropagation:Xr,disableClickPropagation:Wn,preventDefault:ht,stop:zi,getPropagationPath:za,getMousePosition:qa,getWheelDelta:Va,isExternalTarget:Qr,addListener:Se,removeListener:Ze},Ha=ke.extend({run:function(t,s,l,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=Bi(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,l=this._duration*1e3;s<l?this._runFrame(this._easeOut(s/l),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var l=this._startPos.add(this._offset.multiplyBy(t));s&&l._round(),it(this._el,l),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ie=ke.extend({options:{crs:k,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=O(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(be(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=qn&&ue.any3d&&!ue.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,l){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(be(t),s,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,l.zoom):this._tryAnimatedPan(t,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,l.pan&&l.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(ue.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,l){var c=this.getZoomScale(s),f=this.getSize().divideBy(2),_=t instanceof Q?t:this.latLngToContainerPoint(t),w=_.subtract(f).multiplyBy(1-1/c),x=this.containerPointToLatLng(f.add(w));return this.setView(x,s,{zoom:l})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():Fe(t);var l=he(s.paddingTopLeft||s.padding||[0,0]),c=he(s.paddingBottomRight||s.padding||[0,0]),f=this.getBoundsZoom(t,!1,l.add(c));if(f=typeof s.maxZoom=="number"?Math.min(s.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var _=c.subtract(l).divideBy(2),w=this.project(t.getSouthWest(),f),x=this.project(t.getNorthEast(),f),M=this.unproject(w.add(x).divideBy(2).add(_),f);return{center:M,zoom:f}},fitBounds:function(t,s){if(t=Fe(t),!t.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(t,s);return this.setView(l.center,l.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=he(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,l,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,l){if(l=l||{},l.animate===!1||!ue.any3d)return this.setView(t,s,l);this._stop();var c=this.project(this.getCenter()),f=this.project(t),_=this.getSize(),w=this._zoom;t=be(t),s=s===void 0?w:s;var x=Math.max(_.x,_.y),M=x*this.getZoomScale(w,s),z=f.distanceTo(c)||1,te=1.42,pe=te*te;function Le(nt){var Ws=nt?-1:1,ef=nt?M:x,tf=M*M-x*x+Ws*pe*pe*z*z,nf=2*ef*pe*z,co=tf/nf,Tl=Math.sqrt(co*co+1)-co,sf=Tl<1e-9?-18:Math.log(Tl);return sf}function bt(nt){return(Math.exp(nt)-Math.exp(-nt))/2}function ct(nt){return(Math.exp(nt)+Math.exp(-nt))/2}function Ut(nt){return bt(nt)/ct(nt)}var Lt=Le(0);function mn(nt){return x*(ct(Lt)/ct(Lt+te*nt))}function Jh(nt){return x*(ct(Lt)*Ut(Lt+te*nt)-bt(Lt))/pe}function Yh(nt){return 1-Math.pow(1-nt,1.5)}var Xh=Date.now(),Al=(Le(1)-Lt)/te,Qh=l.duration?1e3*l.duration:1e3*Al*.8;function kl(){var nt=(Date.now()-Xh)/Qh,Ws=Yh(nt)*Al;nt<=1?(this._flyToFrame=$(kl,this),this._move(this.unproject(c.add(f.subtract(c).multiplyBy(Jh(Ws)/z)),w),this.getScaleZoom(x/mn(Ws),w),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),kl.call(this),this},flyToBounds:function(t,s){var l=this._getBoundsCenterZoom(t,s);return this.flyTo(l.center,l.zoom,s)},setMaxBounds:function(t){return t=Fe(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,Fe(t));return l.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var l=he(s.paddingTopLeft||s.padding||[0,0]),c=he(s.paddingBottomRight||s.padding||[0,0]),f=this.project(this.getCenter()),_=this.project(t),w=this.getPixelBounds(),x=qe([w.min.add(l),w.max.subtract(c)]),M=x.getSize();if(!x.contains(_)){this._enforcingBounds=!0;var z=_.subtract(x.getCenter()),te=x.extend(_).getSize().subtract(M);f.x+=z.x<0?-te.x:te.x,f.y+=z.y<0?-te.y:te.y,this.panTo(this.unproject(f),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=s.divideBy(2).round(),f=l.divideBy(2).round(),_=c.subtract(f);return!_.x&&!_.y?this:(t.animate&&t.pan?this.panBy(_):(t.pan&&this._rawPanBy(_),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,l,t):navigator.geolocation.getCurrentPosition(s,l,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,l=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,l=t.coords.longitude,c=new De(s,l),f=c.toBounds(t.coords.accuracy*2),_=this._locateOptions;if(_.setView){var w=this.getBoundsZoom(f);this.setView(c,_.maxZoom?Math.min(w,_.maxZoom):w)}var x={latlng:c,bounds:f,timestamp:t.timestamp};for(var M in t.coords)typeof t.coords[M]=="number"&&(x[M]=t.coords[M]);this.fire("locationfound",x)}},addHandler:function(t,s){if(!s)return this;var l=this[t]=new s(this);return this._handlers.push(l),this.options[t]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ye(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Ye(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var l="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=je("div",l,s||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),l=this.unproject(t.getTopRight());return new lt(s,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,l){t=Fe(t),l=he(l||[0,0]);var c=this.getZoom()||0,f=this.getMinZoom(),_=this.getMaxZoom(),w=t.getNorthWest(),x=t.getSouthEast(),M=this.getSize().subtract(l),z=qe(this.project(x,c),this.project(w,c)).getSize(),te=ue.any3d?this.options.zoomSnap:1,pe=M.x/z.x,Le=M.y/z.y,bt=s?Math.max(pe,Le):Math.min(pe,Le);return c=this.getScaleZoom(bt,c),te&&(c=Math.round(c/(te/100))*(te/100),c=s?Math.ceil(c/te)*te:Math.floor(c/te)*te),Math.max(f,Math.min(_,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Q(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var l=this._getTopLeftPoint(t,s);return new Re(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var l=this.options.crs;return s=s===void 0?this._zoom:s,l.scale(t)/l.scale(s)},getScaleZoom:function(t,s){var l=this.options.crs;s=s===void 0?this._zoom:s;var c=l.zoom(t*l.scale(s));return isNaN(c)?1/0:c},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(be(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(he(t),s)},layerPointToLatLng:function(t){var s=he(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(be(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(be(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Fe(t))},distance:function(t,s){return this.options.crs.distance(be(t),be(s))},containerPointToLayerPoint:function(t){return he(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return he(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(he(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(t)))},mouseEventToContainerPoint:function(t){return qa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=Ua(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Se(s,"scroll",this._onScroll,this),this._containerId=h(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&ue.any3d,xe(t,"leaflet-container"+(ue.touch?" leaflet-touch":"")+(ue.retina?" leaflet-retina":"")+(ue.ielt9?" leaflet-oldie":"")+(ue.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Vn(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),it(this._mapPane,new Q(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(t.markerPane,"leaflet-zoom-hide"),xe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,l){it(this._mapPane,new Q(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var f=this._zoom!==s;this._moveStart(f,l)._move(t,s)._moveEnd(f),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,l,c){s===void 0&&(s=this._zoom);var f=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?l&&l.pinch&&this.fire("zoom",l):((f||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){it(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var s=t?Ze:Se;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),ue.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var l=[],c,f=s==="mouseout"||s==="mouseover",_=t.target||t.srcElement,w=!1;_;){if(c=this._targets[h(_)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){w=!0;break}if(c&&c.listens(s,!0)&&(f&&!Qr(_,t)||(l.push(c),f))||_===this._container)break;_=_.parentNode}return!l.length&&!w&&!f&&this.listens(s,!0)&&(l=[this]),l},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var l=t.type;l==="mousedown"&&Kr(s),this._fireDOMEvent(t,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,l){if(t.type==="click"){var c=o({},t);c.type="preclick",this._fireDOMEvent(c,c.type,l)}var f=this._findEventTargets(t,s);if(l){for(var _=[],w=0;w<l.length;w++)l[w].listens(s,!0)&&_.push(l[w]);f=_.concat(f)}if(f.length){s==="contextmenu"&&ht(t);var x=f[0],M={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var z=x.getLatLng&&(!x._radius||x._radius<=10);M.containerPoint=z?this.latLngToContainerPoint(x.getLatLng()):this.mouseEventToContainerPoint(t),M.layerPoint=this.containerPointToLayerPoint(M.containerPoint),M.latlng=z?x.getLatLng():this.layerPointToLatLng(M.layerPoint)}for(w=0;w<f.length;w++)if(f[w].fire(s,M,!0),M.originalEvent._stopped||f[w].options.bubblingMouseEvents===!1&&q(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return Bi(this._mapPane)||new Q(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var l=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var l=this.getSize()._divideBy(2);return this.project(t,s)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return this.project(t,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return qe([this.project(t.getSouthWest(),s)._subtract(c),this.project(t.getNorthWest(),s)._subtract(c),this.project(t.getSouthEast(),s)._subtract(c),this.project(t.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,l){if(!l)return t;var c=this.project(t,s),f=this.getSize().divideBy(2),_=new Re(c.subtract(f),c.add(f)),w=this._getBoundsOffset(_,l,s);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?t:this.unproject(c.add(w),s)},_limitOffset:function(t,s){if(!s)return t;var l=this.getPixelBounds(),c=new Re(l.min.add(t),l.max.add(t));return t.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(t,s,l){var c=qe(this.project(s.getNorthEast(),l),this.project(s.getSouthWest(),l)),f=c.min.subtract(t.min),_=c.max.subtract(t.max),w=this._rebound(f.x,-_.x),x=this._rebound(f.y,-_.y);return new Q(w,x)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),l=this.getMaxZoom(),c=ue.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(s,Math.min(l,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var l=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,s),!0)},_createAnimProxy:function(){var t=this._proxy=je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var l=Br,c=this._proxy.style[l];Ui(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ye(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();Ui(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),f=this._getCenterOffset(t)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(f)?!1:($(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,l,c){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fh(t,s){return new Ie(t,s)}var Ht=ie.extend({options:{position:"topright"},initialize:function(t){O(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),l=this.getPosition(),c=t._controlCorners[l];return xe(s,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ye(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Gn=function(t){return new Ht(t)};Ie.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",l=this._controlContainer=je("div",s+"control-container",this._container);function c(f,_){var w=s+f+" "+s+_;t[f+_]=je("div",w,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Ye(this._controlCorners[t]);Ye(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Za=Ht.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,l,c){return l<c?-1:c<l?1:0}},initialize:function(t,s,l){O(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ht.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(h(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=je("div",t),l=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Wn(s),Xr(s);var c=this._section=je("section",t+"-list");l&&(this._map.on("click",this.collapse,this),Se(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=je("a",t+"-toggle",s);f.href="#",f.title="Layers",f.setAttribute("role","button"),Se(f,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){ht(_),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=je("div",t+"-base",c),this._separator=je("div",t+"-separator",c),this._overlaysList=je("div",t+"-overlays",c),s.appendChild(c)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&h(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,l){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(c,f){return this.options.sortFunction(c.layer,f.layer,c.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ms(this._baseLayersList),Ms(this._overlaysList),this._layerControlInputs=[];var t,s,l,c,f=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),s=s||c.overlay,t=t||!c.overlay,f+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(h(t.target)),l=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;l&&this._map.fire(l,s)},_createRadioElement:function(t,s){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(t){var s=document.createElement("label"),l=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+h(this),l),this._layerControlInputs.push(c),c.layerId=h(t.layer),Se(c,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var _=document.createElement("span");s.appendChild(_),_.appendChild(c),_.appendChild(f);var w=t.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,l,c=[],f=[];this._handlingClick=!0;for(var _=t.length-1;_>=0;_--)s=t[_],l=this._getLayer(s.layerId).layer,s.checked?c.push(l):s.checked||f.push(l);for(_=0;_<f.length;_++)this._map.hasLayer(f[_])&&this._map.removeLayer(f[_]);for(_=0;_<c.length;_++)this._map.hasLayer(c[_])||this._map.addLayer(c[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,l,c=this._map.getZoom(),f=t.length-1;f>=0;f--)s=t[f],l=this._getLayer(s.layerId).layer,s.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Se(t,"click",ht),this.expand();var s=this;setTimeout(function(){Ze(t,"click",ht),s._preventClick=!1})}}),ph=function(t,s,l){return new Za(t,s,l)},eo=Ht.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",l=je("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",l,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,l,c,f){var _=je("a",l,c);return _.innerHTML=t,_.href="#",_.title=s,_.setAttribute("role","button"),_.setAttribute("aria-label",s),Wn(_),Se(_,"click",zi),Se(_,"click",f,this),Se(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";tt(this._zoomInButton,s),tt(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xe(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xe(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new eo,this.addControl(this.zoomControl))});var mh=function(t){return new eo(t)},Ka=Ht.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",l=je("div",s),c=this.options;return this._addScales(c,s+"-line",l),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),l},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,l){t.metric&&(this._mScale=je("div",s,l)),t.imperial&&(this._iScale=je("div",s,l))},_update:function(){var t=this._map,s=t.getSize().y/2,l=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(l)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),l=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,l,s/t)},_updateImperial:function(t){var s=t*3.2808399,l,c,f;s>5280?(l=s/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(f=this._getRoundNum(s),this._updateScale(this._iScale,f+" ft",f/s))},_updateScale:function(t,s,l){t.style.width=Math.round(this.options.maxWidth*l)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),l=t/s;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,s*l}}),vh=function(t){return new Ka(t)},_h='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',to=Ht.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ue.inlineSvg?_h+" ":"")+"Leaflet</a>"},initialize:function(t){O(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=je("div","leaflet-control-attribution"),Wn(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var l=[];this.options.prefix&&l.push(this.options.prefix),t.length&&l.push(t.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new to().addTo(this)});var gh=function(t){return new to(t)};Ht.Layers=Za,Ht.Zoom=eo,Ht.Scale=Ka,Ht.Attribution=to,Gn.layers=ph,Gn.zoom=mh,Gn.scale=vh,Gn.attribution=gh;var ti=ie.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ti.addTo=function(t,s){return t.addHandler(s,this),this};var yh={Events:Z},Wa=ue.touch?"touchstart mousedown":"mousedown",ki=ke.extend({options:{clickTolerance:3},initialize:function(t,s,l,c){O(this,c),this._element=t,this._dragStartTarget=s||t,this._preventOutline=l},enable:function(){this._enabled||(Se(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ki._dragging===this&&this.finishDrag(!0),Ze(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!Fr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ki._dragging===this&&this.finishDrag();return}if(!(ki._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ki._dragging=this,this._preventOutline&&Kr(this._element),Vr(),Hn(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,l=Ba(this._element);this._startPoint=new Q(s.clientX,s.clientY),this._startPos=Bi(this._element),this._parentScale=Wr(l);var c=t.type==="mousedown";Se(document,c?"mousemove":"touchmove",this._onMove,this),Se(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,l=new Q(s.clientX,s.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,ht(t),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),it(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Ze(document,"mousemove touchmove",this._onMove,this),Ze(document,"mouseup touchend touchcancel",this._onUp,this),Hr(),Zn();var s=this._moved&&this._moving;this._moving=!1,ki._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ga(t,s,l){var c,f=[1,4,2,8],_,w,x,M,z,te,pe,Le;for(_=0,te=t.length;_<te;_++)t[_]._code=qi(t[_],s);for(x=0;x<4;x++){for(pe=f[x],c=[],_=0,te=t.length,w=te-1;_<te;w=_++)M=t[_],z=t[w],M._code&pe?z._code&pe||(Le=js(z,M,pe,s,l),Le._code=qi(Le,s),c.push(Le)):(z._code&pe&&(Le=js(z,M,pe,s,l),Le._code=qi(Le,s),c.push(Le)),c.push(M));t=c}return t}function Ja(t,s){var l,c,f,_,w,x,M,z,te;if(!t||t.length===0)throw new Error("latlngs not passed");Nt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var pe=be([0,0]),Le=Fe(t),bt=Le.getNorthWest().distanceTo(Le.getSouthWest())*Le.getNorthEast().distanceTo(Le.getNorthWest());bt<1700&&(pe=io(t));var ct=t.length,Ut=[];for(l=0;l<ct;l++){var Lt=be(t[l]);Ut.push(s.project(be([Lt.lat-pe.lat,Lt.lng-pe.lng])))}for(x=M=z=0,l=0,c=ct-1;l<ct;c=l++)f=Ut[l],_=Ut[c],w=f.y*_.x-_.y*f.x,M+=(f.x+_.x)*w,z+=(f.y+_.y)*w,x+=w*3;x===0?te=Ut[0]:te=[M/x,z/x];var mn=s.unproject(he(te));return be([mn.lat+pe.lat,mn.lng+pe.lng])}function io(t){for(var s=0,l=0,c=0,f=0;f<t.length;f++){var _=be(t[f]);s+=_.lat,l+=_.lng,c++}return be([s/c,l/c])}var bh={__proto__:null,clipPolygon:Ga,polygonCenter:Ja,centroid:io};function Ya(t,s){if(!s||!t.length)return t.slice();var l=s*s;return t=Ah(t,l),t=Sh(t,l),t}function Xa(t,s,l){return Math.sqrt(Jn(t,s,l,!0))}function wh(t,s,l){return Jn(t,s,l)}function Sh(t,s){var l=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,f=new c(l);f[0]=f[l-1]=1,no(t,f,s,0,l-1);var _,w=[];for(_=0;_<l;_++)f[_]&&w.push(t[_]);return w}function no(t,s,l,c,f){var _=0,w,x,M;for(x=c+1;x<=f-1;x++)M=Jn(t[x],t[c],t[f],!0),M>_&&(w=x,_=M);_>l&&(s[w]=1,no(t,s,l,c,w),no(t,s,l,w,f))}function Ah(t,s){for(var l=[t[0]],c=1,f=0,_=t.length;c<_;c++)kh(t[c],t[f])>s&&(l.push(t[c]),f=c);return f<_-1&&l.push(t[_-1]),l}var Qa;function el(t,s,l,c,f){var _=c?Qa:qi(t,l),w=qi(s,l),x,M,z;for(Qa=w;;){if(!(_|w))return[t,s];if(_&w)return!1;x=_||w,M=js(t,s,x,l,f),z=qi(M,l),x===_?(t=M,_=z):(s=M,w=z)}}function js(t,s,l,c,f){var _=s.x-t.x,w=s.y-t.y,x=c.min,M=c.max,z,te;return l&8?(z=t.x+_*(M.y-t.y)/w,te=M.y):l&4?(z=t.x+_*(x.y-t.y)/w,te=x.y):l&2?(z=M.x,te=t.y+w*(M.x-t.x)/_):l&1&&(z=x.x,te=t.y+w*(x.x-t.x)/_),new Q(z,te,f)}function qi(t,s){var l=0;return t.x<s.min.x?l|=1:t.x>s.max.x&&(l|=2),t.y<s.min.y?l|=4:t.y>s.max.y&&(l|=8),l}function kh(t,s){var l=s.x-t.x,c=s.y-t.y;return l*l+c*c}function Jn(t,s,l,c){var f=s.x,_=s.y,w=l.x-f,x=l.y-_,M=w*w+x*x,z;return M>0&&(z=((t.x-f)*w+(t.y-_)*x)/M,z>1?(f=l.x,_=l.y):z>0&&(f+=w*z,_+=x*z)),w=t.x-f,x=t.y-_,c?w*w+x*x:new Q(f,_)}function Nt(t){return!C(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function tl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Nt(t)}function il(t,s){var l,c,f,_,w,x,M,z;if(!t||t.length===0)throw new Error("latlngs not passed");Nt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var te=be([0,0]),pe=Fe(t),Le=pe.getNorthWest().distanceTo(pe.getSouthWest())*pe.getNorthEast().distanceTo(pe.getNorthWest());Le<1700&&(te=io(t));var bt=t.length,ct=[];for(l=0;l<bt;l++){var Ut=be(t[l]);ct.push(s.project(be([Ut.lat-te.lat,Ut.lng-te.lng])))}for(l=0,c=0;l<bt-1;l++)c+=ct[l].distanceTo(ct[l+1])/2;if(c===0)z=ct[0];else for(l=0,_=0;l<bt-1;l++)if(w=ct[l],x=ct[l+1],f=w.distanceTo(x),_+=f,_>c){M=(_-c)/f,z=[x.x-M*(x.x-w.x),x.y-M*(x.y-w.y)];break}var Lt=s.unproject(he(z));return be([Lt.lat+te.lat,Lt.lng+te.lng])}var Th={__proto__:null,simplify:Ya,pointToSegmentDistance:Xa,closestPointOnSegment:wh,clipSegment:el,_getEdgeIntersection:js,_getBitCode:qi,_sqClosestPointOnSegment:Jn,isFlat:Nt,_flat:tl,polylineCenter:il},so={project:function(t){return new Q(t.lng,t.lat)},unproject:function(t){return new De(t.y,t.x)},bounds:new Re([-180,-90],[180,90])},ro={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,l=this.R,c=t.lat*s,f=this.R_MINOR/l,_=Math.sqrt(1-f*f),w=_*Math.sin(c),x=Math.tan(Math.PI/4-c/2)/Math.pow((1-w)/(1+w),_/2);return c=-l*Math.log(Math.max(x,1e-10)),new Q(t.lng*s*l,c)},unproject:function(t){for(var s=180/Math.PI,l=this.R,c=this.R_MINOR/l,f=Math.sqrt(1-c*c),_=Math.exp(-t.y/l),w=Math.PI/2-2*Math.atan(_),x=0,M=.1,z;x<15&&Math.abs(M)>1e-7;x++)z=f*Math.sin(w),z=Math.pow((1-z)/(1+z),f/2),M=Math.PI/2-2*Math.atan(_*z)-w,w+=M;return new De(w*s,t.x*s/l)}},Ph={__proto__:null,LonLat:so,Mercator:ro,SphericalMercator:Vt},Eh=o({},xt,{code:"EPSG:3395",projection:ro,transformation:function(){var t=.5/(Math.PI*ro.R);return b(t,.5,-t,.5)}()}),nl=o({},xt,{code:"EPSG:4326",projection:so,transformation:b(1/180,1,-1/180,.5)}),xh=o({},mt,{projection:so,transformation:b(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var l=s.lng-t.lng,c=s.lat-t.lat;return Math.sqrt(l*l+c*c)},infinite:!0});mt.Earth=xt,mt.EPSG3395=Eh,mt.EPSG3857=k,mt.EPSG900913=R,mt.EPSG4326=nl,mt.Simple=xh;var Zt=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var l=this.getEvents();s.on(l,this),this.once("remove",function(){s.off(l,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=h(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=h(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},_addLayers:function(t){t=t?C(t)?t:[t]:[];for(var s=0,l=t.length;s<l;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=h(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var f=this._zoomBoundLayers[c].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),s=f.maxZoom===void 0?s:Math.max(s,f.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var cn=Zt.extend({initialize:function(t,s){O(this,s),this._layers={};var l,c;if(t)for(l=0,c=t.length;l<c;l++)this.addLayer(t[l])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[t]&&c[t].apply(c,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),Lh=function(t,s){return new cn(t,s)},di=cn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),cn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),cn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new lt;for(var s in this._layers){var l=this._layers[s];t.extend(l.getBounds?l.getBounds():l.getLatLng())}return t}}),Oh=function(t,s){return new di(t,s)},dn=ie.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){O(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var l=this._getIconUrl(t);if(!l){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,s){var l=this.options,c=l[s+"Size"];typeof c=="number"&&(c=[c,c]);var f=he(c),_=he(s==="shadow"&&l.shadowAnchor||l.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(l.className||""),_&&(t.style.marginLeft=-_.x+"px",t.style.marginTop=-_.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return ue.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ch(t){return new dn(t)}var Yn=dn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Yn.imagePath!="string"&&(Yn.imagePath=this._detectIconPath()),(this.options.imagePath||Yn.imagePath)+dn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(l,c,f){var _=c.exec(l);return _&&_[f]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=je("div","leaflet-default-icon-path",document.body),s=Vn(t,"background-image")||Vn(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),sl=ti.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ki(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,l=s._map,c=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,_=Bi(s._icon),w=l.getPixelBounds(),x=l.getPixelOrigin(),M=qe(w.min._subtract(x).add(f),w.max._subtract(x).subtract(f));if(!M.contains(_)){var z=he((Math.max(M.max.x,_.x)-M.max.x)/(w.max.x-M.max.x)-(Math.min(M.min.x,_.x)-M.min.x)/(w.min.x-M.min.x),(Math.max(M.max.y,_.y)-M.max.y)/(w.max.y-M.max.y)-(Math.min(M.min.y,_.y)-M.min.y)/(w.min.y-M.min.y)).multiplyBy(c);l.panBy(z,{animate:!1}),this._draggable._newPos._add(z),this._draggable._startPos._add(z),it(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=$(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,l=s._shadow,c=Bi(s._icon),f=s._map.layerPointToLatLng(c);l&&it(l,c),s._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ns=Zt.extend({options:{icon:new Yn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){O(this,s),this._latlng=be(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=be(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=t.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(l.title=t.title),l.tagName==="IMG"&&(l.alt=t.alt||"")),xe(l,s),t.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(l,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),_=!1;f!==this._shadow&&(this._removeShadow(),_=!0),f&&(xe(f,s),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&_&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ze(this._icon,"focus",this._panOnFocus,this),Ye(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ye(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&it(this._icon,t),this._shadow&&it(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sl)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sl(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&jt(this._icon,t),this._shadow&&jt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,l=s.iconSize?he(s.iconSize):he(0,0),c=s.iconAnchor?he(s.iconAnchor):he(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:l.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mh(t,s){return new Ns(t,s)}var Ti=Zt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return O(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Us=Ti.extend({options:{fill:!0,radius:10},initialize:function(t,s){O(this,s),this._latlng=be(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=be(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Ti.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,l=this._clickTolerance(),c=[t+l,s+l];this._pxBounds=new Re(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ih(t,s){return new Us(t,s)}var oo=Us.extend({initialize:function(t,s,l){if(typeof s=="number"&&(s=o({},l,{radius:s})),O(this,s),this._latlng=be(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new lt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ti.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===xt.distance){var f=Math.PI/180,_=this._mRadius/xt.R/f,w=l.project([s+_,t]),x=l.project([s-_,t]),M=w.add(x).divideBy(2),z=l.unproject(M).lat,te=Math.acos((Math.cos(_*f)-Math.sin(s*f)*Math.sin(z*f))/(Math.cos(s*f)*Math.cos(z*f)))/f;(isNaN(te)||te===0)&&(te=_/Math.cos(Math.PI/180*s)),this._point=M.subtract(l.getPixelOrigin()),this._radius=isNaN(te)?0:M.x-l.project([z,t-te]).x,this._radiusY=M.y-w.y}else{var pe=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(pe).x}this._updateBounds()}});function Rh(t,s,l){return new oo(t,s,l)}var hi=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){O(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,l=null,c=Jn,f,_,w=0,x=this._parts.length;w<x;w++)for(var M=this._parts[w],z=1,te=M.length;z<te;z++){f=M[z-1],_=M[z];var pe=c(t,f,_,!0);pe<s&&(s=pe,l=c(t,f,_))}return l&&(l.distance=Math.sqrt(s)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return il(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=be(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new lt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Nt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],l=Nt(t),c=0,f=t.length;c<f;c++)l?(s[c]=be(t[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(t[c]);return s},_project:function(){var t=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new Q(t,t);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,l){var c=t[0]instanceof De,f=t.length,_,w;if(c){for(w=[],_=0;_<f;_++)w[_]=this._map.latLngToLayerPoint(t[_]),l.extend(w[_]);s.push(w)}else for(_=0;_<f;_++)this._projectLatlngs(t[_],s,l)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,l,c,f,_,w,x,M;for(l=0,f=0,_=this._rings.length;l<_;l++)for(M=this._rings[l],c=0,w=M.length;c<w-1;c++)x=el(M[c],M[c+1],t,c,!0),x&&(s[f]=s[f]||[],s[f].push(x[0]),(x[1]!==M[c+1]||c===w-2)&&(s[f].push(x[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,l=0,c=t.length;l<c;l++)t[l]=Ya(t[l],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var l,c,f,_,w,x,M=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,_=this._parts.length;l<_;l++)for(x=this._parts[l],c=0,w=x.length,f=w-1;c<w;f=c++)if(!(!s&&c===0)&&Xa(t,x[f],x[c])<=M)return!0;return!1}});function Dh(t,s){return new hi(t,s)}hi._flat=tl;var hn=hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ja(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=hi.prototype._convertLatLngs.call(this,t),l=s.length;return l>=2&&s[0]instanceof De&&s[0].equals(s[l-1])&&s.pop(),s},_setLatLngs:function(t){hi.prototype._setLatLngs.call(this,t),Nt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Nt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,l=new Q(s,s);if(t=new Re(t.min.subtract(l),t.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,f=this._rings.length,_;c<f;c++)_=Ga(this._rings[c],t,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,l,c,f,_,w,x,M,z;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(_=0,M=this._parts.length;_<M;_++)for(l=this._parts[_],w=0,z=l.length,x=z-1;w<z;x=w++)c=l[w],f=l[x],c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(s=!s);return s||hi.prototype._containsPoint.call(this,t,!0)}});function $h(t,s){return new hn(t,s)}var fi=di.extend({initialize:function(t,s){O(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=C(t)?t:t.features,l,c,f;if(s){for(l=0,c=s.length;l<c;l++)f=s[l],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var _=this.options;if(_.filter&&!_.filter(t))return this;var w=Bs(t,_);return w?(w.feature=qs(t),w.defaultOptions=w.options,this.resetStyle(w),_.onEachFeature&&_.onEachFeature(t,w),this.addLayer(w)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function Bs(t,s){var l=t.type==="Feature"?t.geometry:t,c=l?l.coordinates:null,f=[],_=s&&s.pointToLayer,w=s&&s.coordsToLatLng||ao,x,M,z,te;if(!c&&!l)return null;switch(l.type){case"Point":return x=w(c),rl(_,t,x,s);case"MultiPoint":for(z=0,te=c.length;z<te;z++)x=w(c[z]),f.push(rl(_,t,x,s));return new di(f);case"LineString":case"MultiLineString":return M=Fs(c,l.type==="LineString"?0:1,w),new hi(M,s);case"Polygon":case"MultiPolygon":return M=Fs(c,l.type==="Polygon"?1:2,w),new hn(M,s);case"GeometryCollection":for(z=0,te=l.geometries.length;z<te;z++){var pe=Bs({geometry:l.geometries[z],type:"Feature",properties:t.properties},s);pe&&f.push(pe)}return new di(f);case"FeatureCollection":for(z=0,te=l.features.length;z<te;z++){var Le=Bs(l.features[z],s);Le&&f.push(Le)}return new di(f);default:throw new Error("Invalid GeoJSON object.")}}function rl(t,s,l,c){return t?t(s,l):new Ns(l,c&&c.markersInheritOptions&&c)}function ao(t){return new De(t[1],t[0],t[2])}function Fs(t,s,l){for(var c=[],f=0,_=t.length,w;f<_;f++)w=s?Fs(t[f],s-1,l):(l||ao)(t[f]),c.push(w);return c}function lo(t,s){return t=be(t),t.alt!==void 0?[y(t.lng,s),y(t.lat,s),y(t.alt,s)]:[y(t.lng,s),y(t.lat,s)]}function zs(t,s,l,c){for(var f=[],_=0,w=t.length;_<w;_++)f.push(s?zs(t[_],Nt(t[_])?0:s-1,l,c):lo(t[_],c));return!s&&l&&f.length>0&&f.push(f[0].slice()),f}function fn(t,s){return t.feature?o({},t.feature,{geometry:s}):qs(s)}function qs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var uo={toGeoJSON:function(t){return fn(this,{type:"Point",coordinates:lo(this.getLatLng(),t)})}};Ns.include(uo),oo.include(uo),Us.include(uo),hi.include({toGeoJSON:function(t){var s=!Nt(this._latlngs),l=zs(this._latlngs,s?1:0,!1,t);return fn(this,{type:(s?"Multi":"")+"LineString",coordinates:l})}}),hn.include({toGeoJSON:function(t){var s=!Nt(this._latlngs),l=s&&!Nt(this._latlngs[0]),c=zs(this._latlngs,l?2:s?1:0,!0,t);return s||(c=[c]),fn(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),cn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(l){s.push(l.toGeoJSON(t).geometry.coordinates)}),fn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var l=s==="GeometryCollection",c=[];return this.eachLayer(function(f){if(f.toGeoJSON){var _=f.toGeoJSON(t);if(l)c.push(_.geometry);else{var w=qs(_);w.type==="FeatureCollection"?c.push.apply(c,w.features):c.push(w)}}}),l?fn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function ol(t,s){return new fi(t,s)}var jh=ol,Vs=Zt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,l){this._url=t,this._bounds=Fe(s),O(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ye(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ln(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Fe(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:je("img");if(xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Ui(this._image,l,s)},_reset:function(){var t=this._image,s=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=s.getSize();it(t,s.min),t.style.width=l.x+"px",t.style.height=l.y+"px"},_updateOpacity:function(){jt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Nh=function(t,s,l){return new Vs(t,s,l)},al=Vs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:je("video");if(xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onloadeddata=u(this.fire,this,"load"),t){for(var l=s.getElementsByTagName("source"),c=[],f=0;f<l.length;f++)c.push(l[f].src);this._url=l.length>0?c:[s.src];return}C(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var w=je("source");w.src=this._url[_],s.appendChild(w)}}});function Uh(t,s,l){return new al(t,s,l)}var ll=Vs.extend({_initImage:function(){var t=this._image=this._url;xe(t,"leaflet-image-layer"),this._zoomAnimated&&xe(t,"leaflet-zoom-animated"),this.options.className&&xe(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function Bh(t,s,l){return new ll(t,s,l)}var ii=Zt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof De||C(t))?(this._latlng=be(t),O(this,s)):(O(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&jt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&jt(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(jt(this._container,0),this._removeTimeout=setTimeout(u(Ye,void 0,this._container),200)):Ye(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=be(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ln(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof di){s=null;var l=this._source._layers;for(var c in l)if(l[c]._map){s=l[c];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=he(this.options.offset),l=this._getAnchor();this._zoomAnimated?it(this._container,t.add(l)):s=s.add(t).add(l);var c=this._containerBottom=-s.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(t,s,l,c){var f=s;return f instanceof t||(f=new t(c).setContent(s)),l&&f.setLatLng(l),f}}),Zt.include({_initOverlay:function(t,s,l,c){var f=l;return f instanceof t?(O(f,c),f._source=this):(f=s&&!c?s:new t(c,this),f.setContent(l)),f}});var Hs=ii.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ii.prototype.openOn.call(this,t)},onAdd:function(t){ii.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",Fi))},onRemove:function(t){ii.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",Fi))},getEvents:function(){var t=ii.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=je("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=je("div",t+"-content-wrapper",s);if(this._contentNode=je("div",t+"-content",l),Wn(s),Xr(this._contentNode),Se(s,"contextmenu",Fi),this._tipContainer=je("div",t+"-tip-container",s),this._tip=je("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=je("a",t+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Se(c,"click",function(f){ht(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var l=t.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),s.width=l+1+"px",s.whiteSpace="",s.height="";var c=t.offsetHeight,f=this.options.maxHeight,_="leaflet-popup-scrolled";f&&c>f?(s.height=f+"px",xe(t,_)):tt(t,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),l=this._getAnchor();it(this._container,s.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(Vn(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+s,c=this._containerWidth,f=new Q(this._containerLeft,-l-this._containerBottom);f._add(Bi(this._container));var _=t.layerPointToContainerPoint(f),w=he(this.options.autoPanPadding),x=he(this.options.autoPanPaddingTopLeft||w),M=he(this.options.autoPanPaddingBottomRight||w),z=t.getSize(),te=0,pe=0;_.x+c+M.x>z.x&&(te=_.x+c-z.x+M.x),_.x-te-x.x<0&&(te=_.x-x.x),_.y+l+M.y>z.y&&(pe=_.y+l-z.y+M.y),_.y-pe-x.y<0&&(pe=_.y-x.y),(te||pe)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([te,pe]))}},_getAnchor:function(){return he(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fh=function(t,s){return new Hs(t,s)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(t,s,l){return this._initOverlay(Hs,t,s,l).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Zt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Hs,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof di||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){zi(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Zs=ii.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ii.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ii.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ii.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=je("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,l,c=this._map,f=this._container,_=c.latLngToContainerPoint(c.getCenter()),w=c.layerPointToContainerPoint(t),x=this.options.direction,M=f.offsetWidth,z=f.offsetHeight,te=he(this.options.offset),pe=this._getAnchor();x==="top"?(s=M/2,l=z):x==="bottom"?(s=M/2,l=0):x==="center"?(s=M/2,l=z/2):x==="right"?(s=0,l=z/2):x==="left"?(s=M,l=z/2):w.x<_.x?(x="right",s=0,l=z/2):(x="left",s=M+(te.x+pe.x)*2,l=z/2),t=t.subtract(he(s,l,!0)).add(te).add(pe),tt(f,"leaflet-tooltip-right"),tt(f,"leaflet-tooltip-left"),tt(f,"leaflet-tooltip-top"),tt(f,"leaflet-tooltip-bottom"),xe(f,"leaflet-tooltip-"+x),it(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&jt(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return he(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zh=function(t,s){return new Zs(t,s)};Ie.include({openTooltip:function(t,s,l){return this._initOverlay(Zs,t,s,l).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Zt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zs,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[s](l),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof di||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(Se(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Se(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,l,c;this._tooltip.options.sticky&&t.originalEvent&&(l=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(l),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var ul=dn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Ms(s),s.appendChild(l.html)):s.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=he(l.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function qh(t){return new ul(t)}dn.Default=Yn;var Xn=Zt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ue.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){O(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Ye(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=p(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Q?t:new Q(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,l=-t(-1/0,1/0),c=0,f=s.length,_;c<f;c++)_=s[c].style.zIndex,s[c]!==this._container&&_&&(l=t(l,+_));isFinite(l)&&(this.options.zIndex=l+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ue.ielt9){jt(this._container,this.options.opacity);var t=+new Date,s=!1,l=!1;for(var c in this._tiles){var f=this._tiles[c];if(!(!f.current||!f.loaded)){var _=Math.min(1,(t-f.loaded)/200);jt(f.el,_),_<1?s=!0:(f.active?l=!0:this._onOpaqueTile(f),f.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),s&&(B(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===t?(this._levels[l].el.style.zIndex=s-Math.abs(t-l),this._onUpdateLevel(l)):(Ye(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[t],f=this._map;return c||(c=this._levels[t]={},c.el=je("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,f.getCenter(),f.getZoom()),g(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,s,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Ye(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,l,c){var f=Math.floor(t/2),_=Math.floor(s/2),w=l-1,x=new Q(+f,+_);x.z=+w;var M=this._tileCoordsToKey(x),z=this._tiles[M];return z&&z.active?(z.retain=!0,!0):(z&&z.loaded&&(z.retain=!0),w>c?this._retainParent(f,_,w,c):!1)},_retainChildren:function(t,s,l,c){for(var f=2*t;f<2*t+2;f++)for(var _=2*s;_<2*s+2;_++){var w=new Q(f,_);w.z=l+1;var x=this._tileCoordsToKey(w),M=this._tiles[x];if(M&&M.active){M.retain=!0;continue}else M&&M.loaded&&(M.retain=!0);l+1<c&&this._retainChildren(f,_,l+1,c)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,l,c){var f=Math.round(s);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var _=this.options.updateWhenZooming&&f!==this._tileZoom;(!c||_)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var l in this._levels)this._setZoomTransform(this._levels[l],t,s)},_setZoomTransform:function(t,s,l){var c=this._map.getZoomScale(l,t.zoom),f=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,l)).round();ue.any3d?Ui(t.el,f,c):it(t.el,f)},_resetGrid:function(){var t=this._map,s=t.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],c).x/l.x),Math.ceil(t.project([0,s.wrapLng[1]],c).x/l.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],c).y/l.x),Math.ceil(t.project([s.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,l=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(l,this._tileZoom),f=s.project(t,this._tileZoom).floor(),_=s.getSize().divideBy(c*2);return new Re(f.subtract(_),f.add(_))},_update:function(t){var s=this._map;if(s){var l=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(c),_=f.getCenter(),w=[],x=this.options.keepBuffer,M=new Re(f.getBottomLeft().subtract([x,-x]),f.getTopRight().add([x,-x]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var z in this._tiles){var te=this._tiles[z].coords;(te.z!==this._tileZoom||!M.contains(new Q(te.x,te.y)))&&(this._tiles[z].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(t,l);return}for(var pe=f.min.y;pe<=f.max.y;pe++)for(var Le=f.min.x;Le<=f.max.x;Le++){var bt=new Q(Le,pe);if(bt.z=this._tileZoom,!!this._isValidTile(bt)){var ct=this._tiles[this._tileCoordsToKey(bt)];ct?ct.current=!0:w.push(bt)}}if(w.sort(function(Lt,mn){return Lt.distanceTo(_)-mn.distanceTo(_)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ut=document.createDocumentFragment();for(Le=0;Le<w.length;Le++)this._addTile(w[Le],Ut);this._level.el.appendChild(Ut)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var l=this._globalTileRange;if(!s.wrapLng&&(t.x<l.min.x||t.x>l.max.x)||!s.wrapLat&&(t.y<l.min.y||t.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return Fe(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,l=this.getTileSize(),c=t.scaleBy(l),f=c.add(l),_=s.unproject(c,t.z),w=s.unproject(f,t.z);return[_,w]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),l=new lt(s[0],s[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),l=new Q(+s[0],+s[1]);return l.z=+s[2],l},_removeTile:function(t){var s=this._tiles[t];s&&(Ye(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xe(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=g,t.onmousemove=g,ue.ielt9&&this.options.opacity<1&&jt(t,this.options.opacity)},_addTile:function(t,s){var l=this._getTilePos(t),c=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&$(u(this._tileReady,this,t,null,f)),it(f,l),this._tiles[c]={el:f,coords:t,current:!0},s.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,s,l){s&&this.fire("tileerror",{error:s,tile:l,coords:t});var c=this._tileCoordsToKey(t);l=this._tiles[c],l&&(l.loaded=+new Date,this._map._fadeAnimated?(jt(l.el,0),B(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),s||(xe(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ue.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new Q(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new Re(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vh(t){return new Xn(t)}var pn=Xn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=O(this,s),s.detectRetina&&ue.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var l=document.createElement("img");return Se(l,"load",u(this._tileOnLoad,this,s,l)),Se(l,"error",u(this._tileOnError,this,s,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(t),l},getTileUrl:function(t){var s={r:ue.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=l),s["-y"]=l}return I(this._url,o(s,this.options))},_tileOnLoad:function(t,s){ue.ielt9?setTimeout(u(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,l){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),t(l,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(t=s-t),t+c},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=g,s.onerror=g,!s.complete)){s.src=re;var l=this._tiles[t].coords;Ye(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:l})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",re),Xn.prototype._removeTile.call(this,t)},_tileReady:function(t,s,l){if(!(!this._map||l&&l.getAttribute("src")===re))return Xn.prototype._tileReady.call(this,t,s,l)}});function cl(t,s){return new pn(t,s)}var dl=pn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var l=o({},this.defaultWmsParams);for(var c in s)c in this.options||(l[c]=s[c]);s=O(this,s);var f=s.detectRetina&&ue.retina?2:1,_=this.getTileSize();l.width=_.x*f,l.height=_.y*f,this.wmsParams=l},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,pn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),l=this._crs,c=qe(l.project(s[0]),l.project(s[1])),f=c.min,_=c.max,w=(this._wmsVersion>=1.3&&this._crs===nl?[f.y,f.x,_.y,_.x]:[f.x,f.y,_.x,_.y]).join(","),x=pn.prototype.getTileUrl.call(this,t);return x+T(this.wmsParams,x,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(t,s){return o(this.wmsParams,t),s||this.redraw(),this}});function Hh(t,s){return new dl(t,s)}pn.WMS=dl,cl.wms=Hh;var pi=Zt.extend({options:{padding:.1},initialize:function(t){O(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var l=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,s),_=c.multiplyBy(-l).add(f).subtract(this._map._getNewPixelOrigin(t,s));ue.any3d?Ui(this._container,_,l):it(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),l=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new Re(l,l.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hl=pi.extend({options:{tolerance:0},getEvents:function(){var t=pi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,Ye(this._container),Ze(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var t=this._bounds,s=this._container,l=t.getSize(),c=ue.retina?2:1;it(s,t.min),s.width=c*l.x,s.height=c*l.y,s.style.width=l.x+"px",s.style.height=l.y+"px",ue.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,l=s.next,c=s.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),l=[],c,f;for(f=0;f<s.length;f++){if(c=Number(s[f]),isNaN(c))return;l.push(c)}t.options._dashArray=l}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var l=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var l,c,f,_,w=t._parts,x=w.length,M=this._ctx;if(x){for(M.beginPath(),l=0;l<x;l++){for(c=0,f=w[l].length;c<f;c++)_=w[l][c],M[c?"lineTo":"moveTo"](_.x,_.y);s&&M.closePath()}this._fillStroke(M,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,l=this._ctx,c=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||c)/c;f!==1&&(l.save(),l.scale(1,f)),l.beginPath(),l.arc(s.x,s.y/f,c,0,Math.PI*2,!1),f!==1&&l.restore(),this._fillStroke(l,t)}},_fillStroke:function(t,s){var l=s.options;l.fill&&(t.globalAlpha=l.fillOpacity,t.fillStyle=l.fillColor||l.color,t.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=l.opacity,t.lineWidth=l.weight,t.strokeStyle=l.color,t.lineCap=l.lineCap,t.lineJoin=l.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(l))&&(c=l);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(tt(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(xe(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,l){this._map._fireDOMEvent(s,l||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function fl(t){return ue.canvas?new hl(t):null}var Qn=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zh={_initContainer:function(){this._container=je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=Qn("shape");xe(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=Qn("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Ye(s),t.removeInteractiveTarget(s),delete this._layers[h(t)]},_updateStyle:function(t){var s=t._stroke,l=t._fill,c=t.options,f=t._container;f.stroked=!!c.stroke,f.filled=!!c.fill,c.stroke?(s||(s=t._stroke=Qn("stroke")),f.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=C(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(f.removeChild(s),t._stroke=null),c.fill?(l||(l=t._fill=Qn("fill")),f.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(f.removeChild(l),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),l=Math.round(t._radius),c=Math.round(t._radiusY||l);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){ln(t._container)},_bringToBack:function(t){un(t._container)}},Ks=ue.vml?Qn:H,es=pi.extend({_initContainer:function(){this._container=Ks("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ks("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ye(this._container),Ze(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var t=this._bounds,s=t.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,l.setAttribute("width",s.x),l.setAttribute("height",s.y)),it(l,t.min),l.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=Ks("path");t.options.className&&xe(s,t.options.className),t.options.interactive&&xe(s,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Ye(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,l=t.options;s&&(l.stroke?(s.setAttribute("stroke",l.color),s.setAttribute("stroke-opacity",l.opacity),s.setAttribute("stroke-width",l.weight),s.setAttribute("stroke-linecap",l.lineCap),s.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?s.setAttribute("stroke-dasharray",l.dashArray):s.removeAttribute("stroke-dasharray"),l.dashOffset?s.setAttribute("stroke-dashoffset",l.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),l.fill?(s.setAttribute("fill",l.fillColor||l.color),s.setAttribute("fill-opacity",l.fillOpacity),s.setAttribute("fill-rule",l.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,F(t._parts,s))},_updateCircle:function(t){var s=t._point,l=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||l,f="a"+l+","+c+" 0 1,0 ",_=t._empty()?"M0 0":"M"+(s.x-l)+","+s.y+f+l*2+",0 "+f+-l*2+",0 ";this._setPath(t,_)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){ln(t._path)},_bringToBack:function(t){un(t._path)}});ue.vml&&es.include(Zh);function pl(t){return ue.svg||ue.vml?new es(t):null}Ie.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&fl(t)||pl(t)}});var ml=hn.extend({initialize:function(t,s){hn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Fe(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Kh(t,s){return new ml(t,s)}es.create=Ks,es.pointsToPath=F,fi.geometryToLayer=Bs,fi.coordsToLatLng=ao,fi.coordsToLatLngs=Fs,fi.latLngToCoords=lo,fi.latLngsToCoords=zs,fi.getFeature=fn,fi.asFeature=qs,Ie.mergeOptions({boxZoom:!0});var vl=ti.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Ze(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ye(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Hn(),Vr(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=je("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new Re(this._point,this._startPoint),l=s.getSize();it(this._box,s.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Ye(this._box),tt(this._container,"leaflet-crosshair")),Zn(),Hr(),Ze(document,{contextmenu:zi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",vl),Ie.mergeOptions({doubleClickZoom:!0});var _l=ti.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,l=s.getZoom(),c=s.options.zoomDelta,f=t.originalEvent.shiftKey?l-c:l+c;s.options.doubleClickZoom==="center"?s.setZoom(f):s.setZoomAround(t.containerPoint,f)}});Ie.addInitHook("addHandler","doubleClickZoom",_l),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gl=ti.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ki(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=Fe(this._map.options.maxBounds);this._offsetLimit=qe(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,f=(c-s+l)%t+s-l,_=(c+s+l)%t-s-l,w=Math.abs(f+l)<Math.abs(_+l)?f:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(t){var s=this._map,l=s.options,c=!l.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),c)s.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,x=f.multiplyBy(w/_),M=x.distanceTo([0,0]),z=Math.min(l.inertiaMaxSpeed,M),te=x.multiplyBy(z/M),pe=z/(l.inertiaDeceleration*w),Le=te.multiplyBy(-pe/2).round();!Le.x&&!Le.y?s.fire("moveend"):(Le=s._limitOffset(Le,s.options.maxBounds),$(function(){s.panBy(Le,{duration:pe,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",gl),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yl=ti.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Ze(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,l=t.scrollTop||s.scrollTop,c=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},l=this.keyCodes,c,f;for(c=0,f=l.left.length;c<f;c++)s[l.left[c]]=[-1*t,0];for(c=0,f=l.right.length;c<f;c++)s[l.right[c]]=[t,0];for(c=0,f=l.down.length;c<f;c++)s[l.down[c]]=[0,t];for(c=0,f=l.up.length;c<f;c++)s[l.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},l=this.keyCodes,c,f;for(c=0,f=l.zoomIn.length;c<f;c++)s[l.zoomIn[c]]=t;for(c=0,f=l.zoomOut.length;c<f;c++)s[l.zoomOut[c]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Ze(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,l=this._map,c;if(s in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(c=this._panKeys[s],t.shiftKey&&(c=he(c).multiplyBy(3)),l.options.maxBounds&&(c=l._limitOffset(he(c),l.options.maxBounds)),l.options.worldCopyJump){var f=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(c)));l.panTo(f)}else l.panBy(c)}else if(s in this._zoomKeys)l.setZoom(l.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;zi(t)}}});Ie.addInitHook("addHandler","keyboard",yl),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bl=ti.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Ze(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=Va(t),l=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),zi(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),l=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,_=l?Math.ceil(f/l)*l:f,w=t._limitZoom(s+(this._delta>0?_:-_))-s;this._delta=0,this._startTime=null,w&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+w):t.setZoomAround(this._lastMousePos,s+w))}});Ie.addInitHook("addHandler","scrollWheelZoom",bl);var Wh=600;Ie.mergeOptions({tapHold:ue.touchNative&&ue.safari&&ue.mobile,tapTolerance:15});var wl=ti.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Ze(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new Q(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",ht),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Wh),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){Ze(document,"touchend",ht),Ze(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),Ze(document,"touchend touchcancel contextmenu",this._cancel,this),Ze(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new Q(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var l=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});l._simulated=!0,s.target.dispatchEvent(l)}});Ie.addInitHook("addHandler","tapHold",wl),Ie.mergeOptions({touchZoom:ue.touch,bounceAtZoomLimits:!0});var Sl=ti.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),Ze(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),ht(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]),f=l.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(f,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&f<1||this._zoom>s.getMaxZoom()&&f>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var _=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(f===1&&_.x===0&&_.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var w=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(w,this,!0),ht(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),Ze(document,"touchmove",this._onTouchMove,this),Ze(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",Sl),Ie.BoxZoom=vl,Ie.DoubleClickZoom=_l,Ie.Drag=gl,Ie.Keyboard=yl,Ie.ScrollWheelZoom=bl,Ie.TapHold=wl,Ie.TouchZoom=Sl,n.Bounds=Re,n.Browser=ue,n.CRS=mt,n.Canvas=hl,n.Circle=oo,n.CircleMarker=Us,n.Class=ie,n.Control=Ht,n.DivIcon=ul,n.DivOverlay=ii,n.DomEvent=hh,n.DomUtil=ch,n.Draggable=ki,n.Evented=ke,n.FeatureGroup=di,n.GeoJSON=fi,n.GridLayer=Xn,n.Handler=ti,n.Icon=dn,n.ImageOverlay=Vs,n.LatLng=De,n.LatLngBounds=lt,n.Layer=Zt,n.LayerGroup=cn,n.LineUtil=Th,n.Map=Ie,n.Marker=Ns,n.Mixin=yh,n.Path=Ti,n.Point=Q,n.PolyUtil=bh,n.Polygon=hn,n.Polyline=hi,n.Popup=Hs,n.PosAnimation=Ha,n.Projection=Ph,n.Rectangle=ml,n.Renderer=pi,n.SVG=es,n.SVGOverlay=ll,n.TileLayer=pn,n.Tooltip=Zs,n.Transformation=rn,n.Util=ye,n.VideoOverlay=al,n.bind=u,n.bounds=qe,n.canvas=fl,n.circle=Rh,n.circleMarker=Ih,n.control=Gn,n.divIcon=qh,n.extend=o,n.featureGroup=Oh,n.geoJSON=ol,n.geoJson=jh,n.gridLayer=Vh,n.icon=Ch,n.imageOverlay=Nh,n.latLng=be,n.latLngBounds=Fe,n.layerGroup=Lh,n.map=fh,n.marker=Mh,n.point=he,n.polygon=$h,n.polyline=Dh,n.popup=Fh,n.rectangle=Kh,n.setOptions=O,n.stamp=h,n.svg=pl,n.svgOverlay=Bh,n.tileLayer=cl,n.tooltip=zh,n.transformation=b,n.version=r,n.videoOverlay=Uh;var Gh=window.L;n.noConflict=function(){return window.L=Gh,this},window.L=n})})(ia,ia.exports);var Sg=ia.exports;const Kt=Bm(Sg),zd=[{id:"station-151",name:"DIRHAMI SADAM",location:"Lne maakond",coordinates:[59.21003692279346,23.49896192760152],hasStation:!0,stationType:"Olerex",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1401",name:"VARBLA SADAM",location:"Prnu maakond",coordinates:[58.43484598380541,23.684324121426343],hasStation:!0,stationType:"Olerex",fuelLevel:20,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-326",name:"NAISSAARE SADAM",location:"Harju maakond",coordinates:[59.55759484273108,24.55348856209784],hasStation:!0,stationType:"Alexela",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-250",name:"KUIVASTU SADAM",location:"Saare maakond",coordinates:[58.57294897894946,23.392649978026128],hasStation:!0,stationType:"Other",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-207",name:"KELNASE SADAM",location:"Harju maakond",coordinates:[59.636951026768706,25.011867300486617],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-348",name:"PATAREISADAM",location:"Harju maakond",coordinates:[59.448366521516434,24.752465507475613],hasStation:!0,stationType:"Other",fuelLevel:84,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-201",name:"KALLASTE SADAM",location:"Tartu maakond",coordinates:[58.668860481142566,27.165702769947824],hasStation:!0,stationType:"Alexela",fuelLevel:21,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-370",name:"PRNU SADAM",location:"Prnu maakond",coordinates:[58.38634198599385,24.481508870106325],hasStation:!0,stationType:"Other",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-313",name:"LEPPNEEME SADAM",location:"Harju maakond",coordinates:[59.5509187722641,24.868294011100197],hasStation:!0,stationType:"Other",fuelLevel:78,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-390",name:"VENE-BALTI SADAM",location:"Harju maakond",coordinates:[59.4593728708958,24.660111697149414],hasStation:!0,stationType:"Other",fuelLevel:50,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-302",name:"KURESSAARE SADAM",location:"Saare maakond",coordinates:[58.24504241378111,22.470592197513312],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-347",name:"PALDISKI PHJASADAM",location:"Harju maakond",coordinates:[59.34843151798162,24.051153538315592],hasStation:!0,stationType:"Other",fuelLevel:29,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-357",name:"ROOMASSAARE SADAM",location:"Saare maakond",coordinates:[58.216442900827786,22.505283815589987],hasStation:!0,stationType:"Other",fuelLevel:98,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-371",name:"SOELA SADAM",location:"Saare maakond",coordinates:[58.61757022248619,22.592246484257174],hasStation:!0,stationType:"Alexela",fuelLevel:98,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-374",name:"SUURSADAM",location:"Hiiu maakond",coordinates:[58.97588001930916,22.90780230864535],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1403",name:"KARLOVA PAADISADAM",location:"Tartu maakond",coordinates:[58.36924669964509,26.745325133140085],hasStation:!0,stationType:"Other",fuelLevel:58,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-373",name:"SUUR-HOLMI SADAM",location:"Lne maakond",coordinates:[58.958300072379465,23.526310476455595],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-382",name:"TOILA SADAM",location:"Ida-Viru maakond",coordinates:[59.427786464737984,27.5348288564074],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1600",name:"VSU SADAM",location:"Lne-Viru maakond",coordinates:[59.585700818310315,25.970719810712986],hasStation:!0,stationType:"Olerex",fuelLevel:99,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-318",name:"LOHUSALU SADAM",location:"Harju maakond",coordinates:[59.402582381641324,24.20638965593215],hasStation:!0,stationType:"Other",fuelLevel:85,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-6600",name:"VRSKA SADAM",location:"Vru maakond",coordinates:[57.958099398442535,27.628566145050225],hasStation:!0,stationType:"Other",fuelLevel:65,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1907",name:"SUARU SADAM",location:"Prnu maakond",coordinates:[58.14100107258266,24.01825909036016],hasStation:!0,stationType:"Alexela",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-51",name:"KOLJUNUKI SADAM",location:"Harju maakond",coordinates:[59.50503122798446,25.089844423357498],hasStation:!0,stationType:"Other",fuelLevel:99,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1452",name:"KOLKJA SADAM",location:"Tartu maakond",coordinates:[58.55530338233313,27.21829548241359],hasStation:!0,stationType:"Other",fuelLevel:48,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-324",name:"LUNARANNA SADAM",location:"Saare maakond",coordinates:[58.5410841962558,23.318508199317954],hasStation:!0,stationType:"Alexela",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-368",name:"SILLAME SADAM",location:"Ida-Viru maakond",coordinates:[59.418699435561486,27.737863067827544],hasStation:!0,stationType:"Other",fuelLevel:30,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-168",name:"PIRITA SADAM",location:"Harju maakond",coordinates:[59.466849255484284,24.822584053315577],hasStation:!0,stationType:"Other",fuelLevel:87,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-330",name:"MNTU SADAM",location:"Saare maakond",coordinates:[57.948558221449865,22.12621804490712],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-154",name:"HELTERMAA SADAM",location:"Hiiu maakond",coordinates:[58.86586149705953,23.045427562456016],hasStation:!0,stationType:"Other",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-344",name:"RUHNU SADAM",location:"Saare maakond",coordinates:[57.78123357568677,23.27055552095325],hasStation:!0,stationType:"Alexela",fuelLevel:94,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2101",name:"MNTU VIKELAEVADE SADAM",location:"Saare maakond",coordinates:[57.949315460072754,22.122961869349453],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-402",name:"VRATI SADAM",location:"Prnu maakond",coordinates:[58.30904639720103,23.98906592639463],hasStation:!0,stationType:"Olerex",fuelLevel:95,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-360",name:"RPINA SADAM",location:"Plva maakond",coordinates:[58.12528842065397,27.529742753356434],hasStation:!0,stationType:"Other",fuelLevel:75,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-389",name:"VASKNARVA PAADISADAM",location:"Ida-Viru maakond",coordinates:[58.99686410270323,27.741337017336683],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-804",name:"NEEME SADAM",location:"Harju maakond",coordinates:[59.531374963563266,25.160386352856108],hasStation:!0,stationType:"Other",fuelLevel:0,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1201",name:"PRNU JAHTKLUBI JAHISADAM",location:"Prnu maakond",coordinates:[58.386999980487374,24.49066001630294],hasStation:!0,stationType:"Other",fuelLevel:70,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2115",name:"NARVA-JESUU SADAM",location:"Ida-Viru maakond",coordinates:[59.46474251606081,28.04529010935306],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-452",name:"KRDLA SADAM",location:"Hiiu maakond",coordinates:[59.00878218744771,22.75255657459167],hasStation:!0,stationType:"Other",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-3934",name:"LUUNJA JESADAM",location:"Tartu maakond",coordinates:[58.35422312635373,26.881983927553723],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1210",name:"KABERNEEME SADAM",location:"Harju maakond",coordinates:[59.520062821619156,25.278242581356942],hasStation:!0,stationType:"Olerex",fuelLevel:48,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-163",name:"KAKUME SADAM",location:"Harju maakond",coordinates:[59.45097870670802,24.603946567184025],hasStation:!0,stationType:"Alexela",fuelLevel:57,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-1207",name:"KIGUSTE SADAM",location:"Saare maakond",coordinates:[58.370242604922666,22.97454178228539],hasStation:!0,stationType:"Alexela",fuelLevel:100,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2266",name:"MEHIKOORMA SADAM",location:"Plva maakond",coordinates:[58.23711955631759,27.474515950329753],hasStation:!0,stationType:"Other",fuelLevel:26,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-450",name:"EISMA SADAM",location:"Lne-Viru maakond",coordinates:[59.56978286768515,26.303200688222102],hasStation:!0,stationType:"Olerex",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-332",name:"OIU SADAM",location:"Viljandi maakond",coordinates:[58.398338614687276,25.97592285103282],hasStation:!0,stationType:"Other",fuelLevel:83,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2114",name:"HARA SADAM",location:"Harju maakond",coordinates:[59.58873686885067,25.613293788125322],hasStation:!0,stationType:"Other",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-376",name:"SRU SADAM",location:"Hiiu maakond",coordinates:[58.69156723910896,22.522160411928486],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1966",name:"SAAGA SADAM",location:"Tartu maakond",coordinates:[58.381139460562494,26.99149335204067],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-404",name:"WESTMERI JAHISADAM",location:"Lne maakond",coordinates:[58.95912661614998,23.52535516470745],hasStation:!0,stationType:"Other",fuelLevel:2,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-362",name:"SAASTNA VANASADAM",location:"Prnu maakond",coordinates:[58.73073039790515,23.566114437338317],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9184",name:"VAALA SADAM",location:"Prnu maakond",coordinates:[58.363177821976116,24.56847690319154],hasStation:!0,stationType:"FuelDock",fuelLevel:59,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3989",name:"KIIDEVA SADAM",location:"Lne maakond",coordinates:[58.77161284265908,23.547805120308286],hasStation:!0,stationType:"FuelDock",fuelLevel:2,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-384",name:"VASKNARVA",location:"Ida-Viru maakond",coordinates:[59.007928664881895,27.736718062775935],hasStation:!0,stationType:"FuelDock",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-200",name:"KALLASTE SADAM",location:"Saare maakond",coordinates:[58.6681380168726,23.253271458237467],hasStation:!0,stationType:"FuelDock",fuelLevel:85,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2659",name:"ALLIKLEPA SADAM",location:"Harju maakond",coordinates:[59.28493976831885,23.79287842078223],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-310",name:"LAO SADAM",location:"Prnu maakond",coordinates:[58.23406118749257,24.12211430721333],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6155",name:"NARVA-JESUU KALURISADAM",location:"Ida-Viru maakond",coordinates:[59.45928564119241,28.065444184945235],hasStation:!0,stationType:"FuelDock",fuelLevel:62,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2200",name:"NASVA JESADAM",location:"Saare maakond",coordinates:[58.22927401448976,22.3815052413029],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-710",name:"ADMIRALI VIKESADAM",location:"Prnu maakond",coordinates:[58.52980831241627,23.67822960415182],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-355",name:"ROOGRAHU SADAM",location:"Hiiu maakond",coordinates:[58.99972382472675,22.819022156007403],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-397",name:"VIDU SADAM",location:"Prnu maakond",coordinates:[58.30861522084546,24.020126188552936],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-164",name:"KALANA SADAM",location:"Hiiu maakond",coordinates:[58.9199467123978,22.057586566782323],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-352",name:"ROHUNEEME SADAM",location:"Harju maakond",coordinates:[59.558595051987844,24.7929295975825],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-212",name:"KOGUVA SADAM",location:"Saare maakond",coordinates:[58.5960754,23.075541],hasStation:!0,stationType:"FuelDock",fuelLevel:6,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-399",name:"VRKAIA SADAM",location:"Saare maakond",coordinates:[58.68247571496831,23.198758797370793],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-354",name:"ROHUNEEME VIKESADAM",location:"Harju maakond",coordinates:[59.559144067264775,24.793449784823064],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-52",name:"MIIDURANNA SADAM",location:"Harju maakond",coordinates:[59.49981500907193,24.814816485991393],hasStation:!0,stationType:"FuelDock",fuelLevel:7,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-708",name:"HALDI SADAM",location:"Hiiu maakond",coordinates:[58.806952076597874,22.446811851797356],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-162",name:"JEKRU SADAM",location:"Ida-Viru maakond",coordinates:[58.982702907194515,27.18212296967626],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-319",name:"MUNALAIU SADAM",location:"Prnu maakond",coordinates:[58.22911019419104,24.118643304592368],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-331",name:"MNNI VIKESADAM",location:"Prnu maakond",coordinates:[58.517979719027004,23.66405820378694],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-329",name:"NURME SADAM",location:"Harju maakond",coordinates:[59.51790225516271,24.80058976342078],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-349",name:"RISTNA LUNASADAM",location:"Hiiu maakond",coordinates:[58.92166086743255,22.06255289395695],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-358",name:"ROOPA SADAM",location:"Saare maakond",coordinates:[58.26326730006585,21.873827533691543],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1650",name:"SALINMME PAADISADAM",location:"Hiiu maakond",coordinates:[58.84468620000001,22.9373696],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2139",name:"NAISTLAIU SADAM",location:"Hiiu maakond",coordinates:[58.82473230000001,23.0324017],hasStation:!0,stationType:"FuelDock",fuelLevel:57,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-7101",name:"VAINU SADAM",location:"Harju maakond",coordinates:[59.501530243091835,25.458218586290347],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-333",name:"PALDISKI LUNASADAM",location:"Harju maakond",coordinates:[59.3349842563559,24.07896335384912],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-150",name:"BEKKERI SADAM",location:"Harju maakond",coordinates:[59.455599980566376,24.666024192915636],hasStation:!0,stationType:"FuelDock",fuelLevel:55,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3703",name:"ASERI VIKESADAM (EHITAMISEL)",location:"Lne-Viru maakond",coordinates:[59.45894762396577,26.88345739849666],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-315",name:"LINDI SADAM",location:"Prnu maakond",coordinates:[58.32955079426123,24.2899292277986],hasStation:!0,stationType:"FuelDock",fuelLevel:88,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3956",name:"RANNAAUGU SADAM",location:"Saare maakond",coordinates:[58.54532536434771,22.219043842318335],hasStation:!0,stationType:"FuelDock",fuelLevel:99,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-160",name:"JUHETA VIKESADAM",location:"Prnu maakond",coordinates:[58.36906383262766,24.294891453787876],hasStation:!0,stationType:"FuelDock",fuelLevel:51,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1202",name:"PRANGLI LUNASADAM",location:"Harju maakond",coordinates:[59.61477372687315,25.015589776094654],hasStation:!0,stationType:"FuelDock",fuelLevel:82,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2670",name:"SUARU KALASADAM",location:"Prnu maakond",coordinates:[58.14107752311868,24.015984614824013],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2059",name:"RLBY SADAM",location:"Lne maakond",coordinates:[59.025715675105985,23.277143300727463],hasStation:!0,stationType:"FuelDock",fuelLevel:4,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-383",name:"TREIMANI SADAM",location:"Prnu maakond",coordinates:[57.918494898835526,24.384048374730778],hasStation:!0,stationType:"FuelDock",fuelLevel:39,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-159",name:"JAAGUPI SADAM",location:"Prnu maakond",coordinates:[58.03645036928897,24.458270931851438],hasStation:!0,stationType:"FuelDock",fuelLevel:68,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-361",name:"SAAREPERA SADAM",location:"Plva maakond",coordinates:[58.1742387352723,27.496037095724574],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-210",name:"MUUGA SADAM",location:"Harju maakond",coordinates:[59.49536860774204,24.968909471408764],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2201",name:"MURATSI SADAM",location:"Saare maakond",coordinates:[58.230389667099594,22.575831463546947],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2665",name:"TORI JESADAM",location:"Saare maakond",coordinates:[58.245886548353305,22.467679256723216],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2158",name:"VARNJA SADAM",location:"Tartu maakond",coordinates:[58.48841461385842,27.24307947289049],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9354",name:"KASSARIOTSA SADAM",location:"Hiiu maakond",coordinates:[58.78134285116765,22.84932573879327],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2058",name:"TAALIKU SADAM",location:"Saare maakond",coordinates:[58.60419234080926,22.97888690013703],hasStation:!0,stationType:"FuelDock",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-401",name:"VPSU SADAM",location:"Plva maakond",coordinates:[58.08184717841632,27.544961574835792],hasStation:!0,stationType:"FuelDock",fuelLevel:81,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2152",name:"NVA SADAM",location:"Lne maakond",coordinates:[59.24743622790684,23.664776411518794],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1212",name:"VARESE SADAM",location:"Saare maakond",coordinates:[58.57447335160411,22.399202350590063],hasStation:!0,stationType:"FuelDock",fuelLevel:17,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2674",name:"ABAJA SADAM",location:"Saare maakond",coordinates:[58.36938736593679,22.01689148827335],hasStation:!0,stationType:"FuelDock",fuelLevel:76,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-203",name:"PALJASSAARE SADAM",location:"Harju maakond",coordinates:[59.46336338912072,24.714709799050695],hasStation:!0,stationType:"FuelDock",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2640",name:"KAAVI PAADISADAM",location:"Saare maakond",coordinates:[57.9815627,22.2023884],hasStation:!0,stationType:"FuelDock",fuelLevel:21,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-300",name:"KUNDA SADAM",location:"Lne-Viru maakond",coordinates:[59.52789303465741,26.546938436101357],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1962",name:"VALMERANNA SADAM",location:"Saare maakond",coordinates:[58.49668772855224,23.233283609424635],hasStation:!0,stationType:"FuelDock",fuelLevel:19,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9000",name:"MEREME SADAM",location:"Hiiu maakond",coordinates:[58.827722406684835,22.94929157869701],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2662",name:"AHOI JESADAM",location:"Saare maakond",coordinates:[58.225771484720006,22.382422628013053],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-398",name:"VISTE SADAM",location:"Prnu maakond",coordinates:[58.21498208590553,24.468800907359537],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-386",name:"TULETORNI KAI",location:"Hiiu maakond",coordinates:[58.789374519254764,22.771203367080076],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1939",name:"JE PAADISADAM",location:"Tartu maakond",coordinates:[58.3719368,26.7402542],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-339",name:"RANNAMETSA SADAM",location:"Prnu maakond",coordinates:[58.1228266725876,24.478076514051146],hasStation:!0,stationType:"FuelDock",fuelLevel:67,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-320",name:"LOHUSUU SADAM",location:"Jgeva maakond",coordinates:[58.9420857161942,27.052084407598997],hasStation:!0,stationType:"FuelDock",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-323",name:"MUSTVEE SADAM",location:"Jgeva maakond",coordinates:[58.84657657518838,26.950010156582593],hasStation:!0,stationType:"FuelDock",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9006",name:"VESTSILLA SADAM",location:"Lne maakond",coordinates:[58.94112537132108,23.45780081404875],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9119",name:"MNNIKU SADAM",location:"Hiiu maakond",coordinates:[58.78608590230018,22.77686859474286],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2257",name:"PAPISSAARE SADAM",location:"Saare maakond",coordinates:[58.359950228367275,21.985874150886424],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-854",name:"KESSE-JAANI SADAM",location:"Saare maakond",coordinates:[58.63182538532375,23.443455985247624],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-369",name:"PUSI VIKESADAM",location:"Tartu maakond",coordinates:[58.64599657833848,27.169645630816664],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-312",name:"LENNUSADAM",location:"Harju maakond",coordinates:[59.45306994544707,24.73578212131489],hasStation:!0,stationType:"FuelDock",fuelLevel:13,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-101",name:"AEGNA SADAM",location:"Harju maakond",coordinates:[59.57139401986587,24.757647451495856],hasStation:!0,stationType:"FuelDock",fuelLevel:45,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-378",name:"UNGUMA SADAM",location:"Saare maakond",coordinates:[58.460365166683424,23.146986403026737],hasStation:!0,stationType:"FuelDock",fuelLevel:27,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-375",name:"SVIBY SADAM",location:"Lne maakond",coordinates:[58.971306711840775,23.31288092166234],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2132",name:"PASLEPA-VIIGI SADAM",location:"Lne maakond",coordinates:[59.0242330852399,23.44388008955642],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-305",name:"SAAREMAA SADAM",location:"Saare maakond",coordinates:[58.53618451842988,22.238451896147108],hasStation:!0,stationType:"FuelDock",fuelLevel:15,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6967",name:"HAAPSALU VANASADAM",location:"Lne maakond",coordinates:[58.956072724190506,23.530434591097862],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-336",name:"ORJAKU SADAM",location:"Hiiu maakond",coordinates:[58.78875184646206,22.771536453302517],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-709",name:"TALVESADAM",location:"Prnu maakond",coordinates:[58.385433708468824,24.492859909525208],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1943",name:"TARVASTU SADAM",location:"Viljandi maakond",coordinates:[58.25279979063932,25.96429932088659],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9003",name:"RAHUSTE SADAM (EHITAMISEL)",location:"Saare maakond",coordinates:[58.07108782421003,22.133503437845288],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-396",name:"VIRTSU VANASADAM",location:"Prnu maakond",coordinates:[58.579062850862094,23.519255379601553],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-341",name:"RAJA VIKESADAM",location:"Jgeva maakond",coordinates:[58.82887193850611,26.946083113486765],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9169",name:"JESUU SADAM",location:"Viljandi maakond",coordinates:[58.38486567162639,26.133840792200246],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-317",name:"LIU VIKESADAM",location:"Prnu maakond",coordinates:[58.27911366655924,24.266310835893727],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2103",name:"PURTSE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.43414866191135,26.99094676902478],hasStation:!0,stationType:"FuelDock",fuelLevel:60,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1968",name:"PAE SADAM",location:"Saare maakond",coordinates:[58.49131925700116,23.268490170781323],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9009",name:"PRNU VANASADAM",location:"Prnu maakond",coordinates:[58.387767625213726,24.493385561739647],hasStation:!0,stationType:"FuelDock",fuelLevel:12,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-400",name:"VIKE-TURU SADAM",location:"Tartu maakond",coordinates:[58.378014764316596,26.736441846472427],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-322",name:"LMALA SADAM",location:"Saare maakond",coordinates:[58.17286388235762,22.119335565707047],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-301",name:"KUNGLA SADAM",location:"Saare maakond",coordinates:[58.363062455363405,22.95448957721547],hasStation:!0,stationType:"FuelDock",fuelLevel:86,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-359",name:"PURTSE SADAM",location:"Ida-Viru maakond",coordinates:[59.43496703955746,26.991858205788642],hasStation:!0,stationType:"FuelDock",fuelLevel:31,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1203",name:"RUHVE SADAM",location:"Saare maakond",coordinates:[58.37778694035379,23.039960672663877],hasStation:!0,stationType:"FuelDock",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-167",name:"KALEVI JAHTKLUBI SADAM",location:"Harju maakond",coordinates:[59.46737523850052,24.826854488297457],hasStation:!0,stationType:"FuelDock",fuelLevel:50,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9011",name:"UUS SADAM",location:"Lne maakond",coordinates:[58.95942544291826,23.50942821303493],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-343",name:"REMNIKU VANASADAM",location:"Ida-Viru maakond",coordinates:[59.010867566160115,27.54307865153787],hasStation:!0,stationType:"FuelDock",fuelLevel:18,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-303",name:"KURKSE SADAM",location:"Harju maakond",coordinates:[59.28832895232838,24.02159065267846],hasStation:!0,stationType:"FuelDock",fuelLevel:48,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-385",name:"TRIIGI SADAM",location:"Saare maakond",coordinates:[58.59162845433841,22.717430403041075],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1400",name:"SRU JAHISADAM",location:"Hiiu maakond",coordinates:[58.69425158708312,22.523211766635303],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2456",name:"OSMUSSAARE SADAM",location:"Lne maakond",coordinates:[59.27636803821998,23.411967874777897],hasStation:!0,stationType:"FuelDock",fuelLevel:9,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-805",name:"LAUTRI SADAM",location:"Hiiu maakond",coordinates:[58.8032955665529,22.74449914957879],hasStation:!0,stationType:"FuelDock",fuelLevel:64,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3921",name:"UISUSADAM",location:"Saare maakond",coordinates:[58.560141628008886,23.088235290479798],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-206",name:"KAVARU SADAM",location:"Prnu maakond",coordinates:[58.26959033387641,24.1929459655635],hasStation:!1,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"no-fuel-53",name:"ABRUKA SADAM",location:"Saare maakond",coordinates:[58.16249579999999,22.5253685],hasStation:!1},{id:"no-fuel-156",name:"ALAJE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.00760824317872,27.43315649366905],hasStation:!1},{id:"no-fuel-161",name:"ATLA SADAM",location:"Saare maakond",coordinates:[58.30182561400056,21.89417462777699],hasStation:!1},{id:"no-fuel-8403",name:"BERESJE SADAM",location:"Vru maakond",coordinates:[58.08933965040894,27.581745397645683],hasStation:!1},{id:"no-fuel-9173",name:"BRGERMEISTRI SADAM",location:"Lne maakond",coordinates:[58.962750098622465,23.51982933938877],hasStation:!1},{id:"no-fuel-152",name:"HAAPSALU VESKIVIIGI SADAM",location:"Lne maakond",coordinates:[58.957906797945306,23.527560438372888],hasStation:!1},{id:"no-fuel-2259",name:"HARA SADAM",location:"Lne maakond",coordinates:[59.089547144334546,23.528659333244907],hasStation:!1},{id:"no-fuel-157",name:"HIIESSAARE SADAM",location:"Hiiu maakond",coordinates:[59.00219377023878,22.84236244766205],hasStation:!1},{id:"no-fuel-158",name:"HUNDIPEA SADAM",location:"Harju maakond",coordinates:[59.457312008996055,24.717993325664104],hasStation:!1},{id:"no-fuel-3677",name:"JAPSI KALASADAM",location:"Prnu maakond",coordinates:[58.3892241359425,24.487270069670497],hasStation:!1},{id:"no-fuel-9010",name:"JERE PAADISADAM",location:"Tartu maakond",coordinates:[58.33761913210218,26.786921028512324],hasStation:!1},{id:"no-fuel-7151",name:"KADARIKU SADAM",location:"Prnu maakond",coordinates:[58.45423618866158,23.685171323438134],hasStation:!1},{id:"no-fuel-8350",name:"KAKRI KALASADAM",location:"Hiiu maakond",coordinates:[58.97625603209905,22.906171653353994],hasStation:!1},{id:"no-fuel-346",name:"KALANA JAHISADAM",location:"Hiiu maakond",coordinates:[58.921752249722424,22.05812188152198],hasStation:!1},{id:"no-fuel-165",name:"KALASADAM",location:"Harju maakond",coordinates:[59.44572413728157,24.748646112018033],hasStation:!1},{id:"no-fuel-8909",name:"KALDASILLA SADAM",location:"Jgeva maakond",coordinates:[58.77706910196583,26.98008280857649],hasStation:!1},{id:"no-fuel-1960",name:"KALDU SADAM",location:"Saare maakond",coordinates:[58.45409024759508,23.268570985854836],hasStation:!1},{id:"no-fuel-2134",name:"KALMAKLA SADAM",location:"Jgeva maakond",coordinates:[58.89112288008285,26.969858407974247],hasStation:!1},{id:"no-fuel-2354",name:"KAREPA SADAM ",location:"Lne-Viru maakond",coordinates:[59.547455175281335,26.423717795855435],hasStation:!1},{id:"no-fuel-2611",name:"KASSARI SADAM",location:"Hiiu maakond",coordinates:[58.78206296922745,22.8497978117697],hasStation:!1},{id:"no-fuel-204",name:"KASTNA VIKESADAM",location:"Prnu maakond",coordinates:[58.350374,23.9130336],hasStation:!1},{id:"no-fuel-205",name:"KAUNISPE SADAM",location:"Saare maakond",coordinates:[58.04186264452349,22.059860388705594],hasStation:!1},{id:"no-fuel-208",name:"KELVINGI SADAM",location:"Harju maakond",coordinates:[59.55546929940867,24.839830324190146],hasStation:!1},{id:"no-fuel-211",name:"KIHNU SADAM",location:"Prnu maakond",coordinates:[58.14123325518436,24.02088792334366],hasStation:!1},{id:"no-fuel-9005",name:"KIRDERANNA SADAM",location:"Saare maakond",coordinates:[58.62095579164729,22.864040247367672],hasStation:!1},{id:"no-fuel-304",name:"KRGESSAARE SADAM",location:"Hiiu maakond",coordinates:[58.990071656325064,22.466397377637612],hasStation:!1},{id:"no-fuel-306",name:"KRSA SADAM",location:"Saare maakond",coordinates:[58.2286732,22.7280573],hasStation:!1},{id:"no-fuel-8351",name:"KSMU MAJAKA SADAM",location:"Lne-Viru maakond",coordinates:[59.60446942979059,25.92349111405371],hasStation:!1},{id:"no-fuel-9179",name:"KTIOJA SADAM",location:"Prnu maakond",coordinates:[58.5212122,23.7241667],hasStation:!1},{id:"no-fuel-307",name:"LAAKSAARE SADAM",location:"Plva maakond",coordinates:[58.338430088258725,27.417041637358558],hasStation:!1},{id:"no-fuel-308",name:"LAHESUU SADAM",location:"Harju maakond",coordinates:[59.45833700363406,24.702973080875516],hasStation:!1},{id:"no-fuel-8392",name:"LEESIKALDA SADAM",location:"Harju maakond",coordinates:[59.594514926928966,25.50226025510831],hasStation:!1},{id:"no-fuel-2123",name:"LEHTMA KALURISADAM",location:"Hiiu maakond",coordinates:[59.06882085554219,22.696219278375228],hasStation:!1},{id:"no-fuel-311",name:"LEHTMA SADAM",location:"Hiiu maakond",coordinates:[59.06761035561787,22.701143728235156],hasStation:!1},{id:"no-fuel-314",name:"LEPPNEEME KALASADAM",location:"Harju maakond",coordinates:[59.55167179919739,24.867263868960684],hasStation:!1},{id:"no-fuel-321",name:"LOKSA SADAM",location:"Harju maakond",coordinates:[59.58444612705517,25.70408193417594],hasStation:!1},{id:"no-fuel-801",name:"LUIGE VIKESADAM",location:"Lne maakond",coordinates:[58.871280759575235,23.477649072772582],hasStation:!1},{id:"no-fuel-1964",name:"LPESUU SADAM",location:"Saare maakond",coordinates:[58.48967911640937,23.273795518412854],hasStation:!1},{id:"no-fuel-707",name:"LNE SADAM",location:"Prnu maakond",coordinates:[58.5271617204529,23.676867501805706],hasStation:!1},{id:"no-fuel-325",name:"LTSA PAADISADAM",location:"Saare maakond",coordinates:[58.14659002353162,22.253064692365207],hasStation:!1},{id:"no-fuel-2501",name:"MAHU SADAM",location:"Lne-Viru maakond",coordinates:[59.521069587424115,26.72726843815698],hasStation:!1},{id:"no-fuel-309",name:"MANILAIU SADAM",location:"Prnu maakond",coordinates:[58.22227849999999,24.1247841],hasStation:!1},{id:"no-fuel-9008",name:"MEERAPALU SADAM",location:"Plva maakond",coordinates:[58.387508933619536,27.37374460137659],hasStation:!1},{id:"no-fuel-327",name:"MEERUSE SADAM",location:"Harju maakond",coordinates:[59.45045246851013,24.6697146192323],hasStation:!1},{id:"no-fuel-316",name:"MERELAIU VIKESADAM",location:"Prnu maakond",coordinates:[58.30465547982153,24.022958257706886],hasStation:!1},{id:"no-fuel-2314",name:"MIHKLI SADAM",location:"Jgeva maakond",coordinates:[58.77751123834221,26.99003963770032],hasStation:!1},{id:"no-fuel-9001",name:"NARVA-JESUU JAHTKLUBI SADAM",location:"Ida-Viru maakond",coordinates:[59.45970543207499,28.057687381023182],hasStation:!1},{id:"no-fuel-1553",name:"NARVA KULGU SADAM",location:"Ida-Viru maakond",coordinates:[59.3442578564839,28.173097424427883],hasStation:!1},{id:"no-fuel-1552",name:"NARVA LINNASADAM",location:"Ida-Viru maakond",coordinates:[59.38395796610147,28.20554144247878],hasStation:!1},{id:"no-fuel-328",name:"NASVA SADAM",location:"Saare maakond",coordinates:[58.2269312,22.3783734],hasStation:!1},{id:"no-fuel-353",name:"NOBLESSNERI SADAM",location:"Harju maakond",coordinates:[59.452183843127564,24.729565371485567],hasStation:!1},{id:"no-fuel-334",name:"OMEDU RAND",location:"Jgeva maakond",coordinates:[58.77780043141777,26.98858028346087],hasStation:!1},{id:"no-fuel-335",name:"ORISSAARE SADAM",location:"Saare maakond",coordinates:[58.562676613132034,23.092617941450893],hasStation:!1},{id:"no-fuel-337",name:"OTI SADAM",location:"Harju maakond",coordinates:[59.56629675506538,24.79439948373618],hasStation:!1},{id:"no-fuel-338",name:"OTSA VIKESADAM",location:"Tartu maakond",coordinates:[58.6489774918986,27.169001881798852],hasStation:!1},{id:"no-fuel-705",name:"PAATSALU SADAM",location:"Prnu maakond",coordinates:[58.524444905111146,23.67949722512728],hasStation:!1},{id:"no-fuel-8457",name:"PAKRINEEME SADAM",location:"Harju maakond",coordinates:[59.38888889999999,24.0369444],hasStation:!1},{id:"no-fuel-350",name:"PEERNI SADAM",location:"Prnu maakond",coordinates:[58.246312842792065,24.134033920475662],hasStation:!1},{id:"no-fuel-1659",name:"PIHELGALAIU SADAM",location:"Prnu maakond",coordinates:[58.44586885868282,23.66907840453489],hasStation:!1},{id:"no-fuel-1930",name:"PIIRISSAARE SADAM",location:"Tartu maakond",coordinates:[58.375722394408996,27.511417843756576],hasStation:!1},{id:"no-fuel-356",name:"PIIRIVALVESADAM",location:"Harju maakond",coordinates:[59.457268391513615,24.66181822941108],hasStation:!1},{id:"no-fuel-377",name:"PUISE KALASADAM",location:"Lne maakond",coordinates:[58.7835441,23.4985324],hasStation:!1},{id:"no-fuel-808",name:"PURTSE JAHTSADAM",location:"Ida-Viru maakond",coordinates:[59.435106161788916,26.99108540802319],hasStation:!1},{id:"no-fuel-342",name:"REBASE PAADISADAM",location:"Tartu maakond",coordinates:[58.36787658063787,26.749016207832376],hasStation:!1},{id:"no-fuel-345",name:"RISTNA SADAM",location:"Harju maakond",coordinates:[59.27073824103223,23.744625264828233],hasStation:!1},{id:"no-fuel-351",name:"ROHUKLA SADAM",location:"Lne maakond",coordinates:[58.905958908457656,23.420534724676656],hasStation:!1},{id:"no-fuel-363",name:"SALINMME SADAM",location:"Hiiu maakond",coordinates:[58.8270809846774,22.95055220122218],hasStation:!1},{id:"no-fuel-365",name:"SALME JESADAM",location:"Saare maakond",coordinates:[58.1654474887975,22.252818894890837],hasStation:!1},{id:"no-fuel-366",name:"SALMISTU SADAM",location:"Harju maakond",coordinates:[59.49659394520264,25.366337433421357],hasStation:!1},{id:"no-fuel-367",name:"SASSUKVERE SADAM",location:"Tartu maakond",coordinates:[58.71493614828406,27.126172656299634],hasStation:!1},{id:"no-fuel-1936",name:"SIGATSUARU VIKESADAM",location:"Prnu maakond",coordinates:[58.15445383926815,24.002310626327155],hasStation:!1},{id:"no-fuel-7401",name:"SITME SADAM",location:"Saare maakond",coordinates:[58.51088849396052,23.199316307192024],hasStation:!1},{id:"no-fuel-372",name:"SOO SADAM",location:"Tartu maakond",coordinates:[58.72244286155842,27.12023931143356],hasStation:!1},{id:"no-fuel-1251",name:"SUUR-LOOTSI SADAM",location:"Ida-Viru maakond",coordinates:[59.4678736,28.0420528],hasStation:!1},{id:"no-fuel-1154",name:"SUURPEA SADAM",location:"Harju maakond",coordinates:[59.6281046477358,25.682983138624618],hasStation:!1},{id:"no-fuel-2680",name:"TAMMNEEME SADAM",location:"Harju maakond",coordinates:[59.529013819775024,24.893335103988647],hasStation:!1},{id:"no-fuel-380",name:"TAPURLA SADAM",location:"Harju maakond",coordinates:[59.61120815173785,25.573854563726297],hasStation:!1},{id:"no-fuel-381",name:"TILGU SADAM",location:"Harju maakond",coordinates:[59.45518286496472,24.487001945135006],hasStation:!1},{id:"no-fuel-9007",name:"TOOMINGA VIKESADAM",location:"Harju maakond",coordinates:[59.56256026313831,24.79553650363329],hasStation:!1},{id:"no-fuel-704",name:"TOPU SADAM",location:"Lne maakond",coordinates:[58.84439243775599,23.50073748712197],hasStation:!1},{id:"no-fuel-2122",name:"TURJA SADAM",location:"Saare maakond",coordinates:[58.3327473718112,22.93243528887582],hasStation:!1},{id:"no-fuel-2133",name:"TURUSADAM",location:"Tartu maakond",coordinates:[58.3795223030903,26.735905398384677],hasStation:!1},{id:"no-fuel-387",name:"TRKMA SADAM",location:"Hiiu maakond",coordinates:[58.69332616544748,22.609981401097386],hasStation:!1},{id:"no-fuel-9168",name:"ULGE SADAM",location:"Viljandi maakond",coordinates:[58.40635470910224,26.013124772690055],hasStation:!1},{id:"no-fuel-3826",name:"VAHTREPA SADAM",location:"Hiiu maakond",coordinates:[58.88560138747144,23.02869308620697],hasStation:!1},{id:"no-fuel-4651",name:"VAINUPEA SADAM",location:"Lne-Viru maakond",coordinates:[59.583802468572706,26.273932825674926],hasStation:!1},{id:"no-fuel-166",name:"VANASADAM",location:"Harju maakond",coordinates:[59.44304063799767,24.75930008714019],hasStation:!1},{id:"no-fuel-2147",name:"VANA-SAUGA SADAM",location:"Prnu maakond",coordinates:[58.38997205050698,24.475392484556682],hasStation:!1},{id:"no-fuel-8977",name:"VANASAUNA SADAM",location:"Viljandi maakond",coordinates:[58.36875436320875,25.9668093112776],hasStation:!1},{id:"no-fuel-393",name:"VASKNARVA UUSSADAM",location:"Ida-Viru maakond",coordinates:[58.99790578740703,27.739502189448658],hasStation:!1},{id:"no-fuel-388",name:"VEERE SADAM",location:"Saare maakond",coordinates:[58.4616643503602,22.05045075745465],hasStation:!1},{id:"no-fuel-901",name:"VEERE VANASADAM",location:"Saare maakond",coordinates:[58.460906732883764,22.04877742773411],hasStation:!1},{id:"no-fuel-3870",name:"VEIBRI SADAM",location:"Tartu maakond",coordinates:[58.33766136986146,26.792575007800597],hasStation:!1},{id:"no-fuel-1150",name:"VERGI SADAM",location:"Lne-Viru maakond",coordinates:[59.59942875325675,26.101439794239237],hasStation:!1},{id:"no-fuel-2645",name:"VIINISTU SADAM",location:"Harju maakond",coordinates:[59.646704192089956,25.75353627355206],hasStation:!1},{id:"no-fuel-2551",name:"VIKATI SADAM",location:"Saare maakond",coordinates:[58.37183486965951,21.86242812338169],hasStation:!1},{id:"no-fuel-395",name:"VIRTSU KALASADAM",location:"Prnu maakond",coordinates:[58.58872092778278,23.525488549491424],hasStation:!1},{id:"no-fuel-394",name:"VIRTSU SADAM",location:"Prnu maakond",coordinates:[58.574979596464345,23.503157983475997],hasStation:!1},{id:"no-fuel-3811",name:"VPSU KLASADAM",location:"Vru maakond",coordinates:[58.07978519644125,27.544044310678082],hasStation:!1},{id:"no-fuel-1056",name:"VRSSU SADAM",location:"Hiiu maakond",coordinates:[58.933159290586694,22.955026035777763],hasStation:!1},{id:"no-fuel-403",name:"WESTMERI SADAM",location:"Lne maakond",coordinates:[58.95979075002165,23.524604057955777],hasStation:!1},{id:"no-fuel-405",name:"STERBY SADAM",location:"Lne maakond",coordinates:[58.9756951,23.518072],hasStation:!1},{id:"no-fuel-2669",name:"RGORU PAADISADAM",location:"Tartu maakond",coordinates:[58.37948574041217,26.989706925419874],hasStation:!1}],Ag={class:"map-container"},kg={key:0,class:"search-container"},Tg={class:"search-bar"},Pg={key:0,class:"search-dropdown"},Eg=["onMousedown"],xg={class:"dropdown-item-content"},Lg={class:"station-name"},Og={class:"station-meta"},Cg={class:"station-location"},Mg={key:1,class:"no-fuel-indicator"},Ig={key:1,class:"active-filters"},Rg=["onClick"],Dg={key:2,class:"results-counter"},$g={class:"filter-header"},jg={class:"filter-content"},Ng={class:"filter-section"},Ug={class:"radio-group"},Bg={class:"filter-section"},Fg={class:"checkbox-group"},zg={class:"filter-section"},qg={class:"price-range"},Vg={class:"price-display"},Hg={class:"filter-section"},Zg={class:"checkbox-group"},Kg={class:"filter-section"},Wg={class:"checkbox-group"},Gg={class:"filter-section"},Jg={class:"checkbox-group"},Yg={class:"filter-actions"},Xg={class:"filter-header"},Qg={class:"map-type-content"},ey={class:"map-type-options"},ty={key:0,class:"active-indicator"},iy={key:0,class:"active-indicator"},ny={key:0,class:"active-indicator"},sy={key:0,class:"active-indicator"},ry={key:0,class:"active-indicator"},oy={key:0,class:"sea-marks-toggle"},ay={class:"toggle-label"},ly={key:5,class:"edit-buttons"},uy=["disabled"],cy=["disabled"],dy={key:6,class:"legend"},hy={key:7,class:"save-notification"},fy={__name:"MapView",props:{guestMode:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},showFiltersFromParent:{type:Boolean,default:!1},showMapTypeFromParent:{type:Boolean,default:!1}},emits:["station-click","close-filters","close-map-type"],setup(i,{expose:e,emit:n}){const{user:r}=Ls(),o=i,a=n,u=oe(null),d=oe(null),h=oe(""),p=oe(!1),v=oe(null),g=oe(""),y=oe(null),A=oe([]),P=oe([]),O=oe([]),T=oe({distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1}),U=oe("street"),I=oe(!1);let C=null,q=[],re=null,de=null,ge={},Oe=null,Me=null,J=JSON.parse(JSON.stringify(zd)),$={center:null,zoom:null,focusedStation:null};const B=Pt(()=>{if(!h.value)return[];const E=h.value.toLowerCase();return J.filter(S=>S.name.toLowerCase().includes(E)||S.location.toLowerCase().includes(E)).slice(0,8)}),ye=oe(null),ie=Pt(()=>{let E=0;return T.value.distance!=="any"&&E++,T.value.fuelTypes.length>0&&(E+=T.value.fuelTypes.length),T.value.maxPrice<3&&E++,T.value.fuelLevels.length>0&&(E+=T.value.fuelLevels.length),T.value.providers.length>0&&(E+=T.value.providers.length),T.value.hasStation&&E++,E}),j=Pt(()=>{const E=[];return T.value.distance!=="any"&&E.push({label:`Distance <${T.value.distance}km`,type:"distance",value:"any"}),T.value.fuelTypes.forEach(S=>{E.push({label:S.toUpperCase(),type:"fuelTypes",value:S})}),T.value.maxPrice<3&&E.push({label:`Price ${T.value.maxPrice}`,type:"maxPrice",value:3}),T.value.fuelLevels.forEach(S=>{const D={available:"Available >20%",low:"Low <20%",empty:"Empty"};E.push({label:D[S],type:"fuelLevels",value:S})}),T.value.providers.forEach(S=>{E.push({label:S,type:"providers",value:S})}),T.value.hasStation&&E.push({label:"Active stations only",type:"hasStation",value:!1}),E}),Z=Pt(()=>G().length),ke=Pt(()=>J.length);jn(async()=>{lt(),be(),Q(),await dt(),window.exportStationCoordinates=()=>(console.log("=== UPDATED STATION COORDINATES ==="),console.log(JSON.stringify(J,null,2)),console.log("=== Copy the above JSON to update stations.json ==="),J),console.log("%c EDIT MODE ENABLED","color: red; font-size: 16px; font-weight: bold"),console.log("Drag markers to update positions."),console.log('Click "Save Coordinates" button or run exportStationCoordinates() in console.')});function Q(){navigator.geolocation?navigator.geolocation.getCurrentPosition(E=>{ye.value={lat:E.coords.latitude,lng:E.coords.longitude}},E=>{console.log("Location access denied:",E),ye.value={lat:58.5953,lng:25.0136}}):ye.value={lat:58.5953,lng:25.0136}}async function dt(){if(!(!r.value||o.guestMode))try{const{data:E,error:S}=await gt.from("favorites").select("station_id").eq("user_id",r.value.id);if(S){console.error("Error loading favorites:",S);return}A.value=E.map(D=>D.station_id)}catch(E){console.error("Error loading favorites:",E)}}function he(E){return A.value.includes(E)}function Re(){C&&$.center&&$.zoom&&C.setView($.center,$.zoom,{animate:!1})}function qe(){C&&C.invalidateSize()}e({restoreMapView:Re,invalidateMapSize:qe,refreshFavorites:async()=>{await dt(),be()}});function lt(){const E=$.center&&$.zoom?[$.center,$.zoom]:[[58.5953,25.0136],7];C=Kt.map(u.value).setView(E[0],E[1]),ge={street:Kt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),satellite:Kt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),terrain:Kt.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:" OpenTopoMap",maxZoom:17}),cartoVoyager:Kt.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:" OpenStreetMap,  CARTO",maxZoom:19})},Me=Kt.tileLayer("https://t1.openseamap.org/seamark/{z}/{x}/{y}.png",{attribution:" OpenSeaMap contributors",maxZoom:18,transparent:!0}),Oe=ge.street,Oe.addTo(C),re=Kt.layerGroup().addTo(C),o.guestMode||(o.isAdmin&&(u.value.style.border="4px solid red"),de=Kt.control({position:"bottomleft"}),de.onAdd=function(){const S=Kt.DomUtil.create("div","coordinate-display");return S.style.cssText=`
        background: rgba(255, 255, 255, 0.95);
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        font-family: monospace;
        font-size: 14px;
        display: none;
      `,S.innerHTML="Drag a marker to see coordinates",S},de.addTo(C))}function Fe(E){if(C){if(C.hasLayer(Me)&&C.removeLayer(Me),Oe&&C.removeLayer(Oe),E==="nautical")Oe=ge.street,Oe.addTo(C),Me.addTo(C),I.value=!0;else if(E==="nautical-dark")Oe=ge.cartoVoyager,Oe.addTo(C),Me.addTo(C),I.value=!0;else{if(!ge[E])return;Oe=ge[E],Oe.addTo(C),I.value=!1}U.value=E,a("close-map-type")}}function De(){I.value=!I.value,I.value?C.hasLayer(Me)||Me.addTo(C):C.hasLayer(Me)&&C.removeLayer(Me)}function be(){Ni(),J.forEach(E=>{const S=mt(E);q.push({marker:S,station:E}),re.addLayer(S)})}function mt(E){const S=le(E),D=he(E.id),He={icon:fe(S,E===v.value,D),draggable:o.isAdmin&&!o.guestMode};o.isAdmin&&!o.guestMode&&(He.autoPan=!0,He.autoPanPadding=[50,50]);const Ce=Kt.marker(E.coordinates,He).on("click",()=>xt(E));return o.isAdmin&&!o.guestMode&&(Ce.on("dragstart",function(Je){const we=document.querySelector(".coordinate-display");if(we){we.style.display="block",we.style.background="rgba(255, 255, 100, 0.95)";const $e=J.find(Qe=>Qe.id===E.id);we.innerHTML=`
          <strong>Dragging: ${$e?$e.name:E.name}</strong><br>
          Original: [${E.coordinates[0].toFixed(6)}, ${E.coordinates[1].toFixed(6)}]
        `}}),Ce.on("drag",function(Je){const we=Je.target.getLatLng(),$e=document.querySelector(".coordinate-display");if($e){const Qe=J.find(vt=>vt.id===E.id);$e.innerHTML=`
          <strong>${Qe?Qe.name:E.name}</strong><br>
          Lat: ${we.lat.toFixed(6)}<br>
          Lng: ${we.lng.toFixed(6)}
        `}}),Ce.on("dragend",function(Je){const we=Je.target.getLatLng(),$e=J.findIndex(vt=>vt.id===E.id);if($e!==-1){const vt=[...J[$e].coordinates],on=[we.lat,we.lng];P.value.push({id:E.id,name:J[$e].name,previousCoordinates:vt,newCoordinates:on}),O.value=[],y.value={id:E.id,previousCoordinates:vt,newCoordinates:on},J[$e].coordinates=on;const zn=q.find(Os=>Os.station.id===E.id);zn&&(zn.station.coordinates=on)}const Qe=document.querySelector(".coordinate-display");if(Qe){const vt=J[$e];Qe.style.background="rgba(16, 185, 129, 0.95)",Qe.innerHTML=`
          <strong>${vt?vt.name:E.name}</strong><br>
           Updated: [${we.lat.toFixed(6)}, ${we.lng.toFixed(6)}]<br>
          <small>Click "Save Coordinates" button</small>
        `,setTimeout(()=>{Qe.style.display="none",Qe.style.background="rgba(255, 255, 255, 0.95)"},5e3)}}),Ce.on("mouseover",function(Je){u.value.style.cursor="grab"}),Ce.on("mouseout",function(Je){u.value.style.cursor=""})),o.guestMode||(Ce.on("mouseover",function(Je){const we=Je.target.getLatLng(),$e=document.querySelector(".coordinate-display");if($e){const Qe=J.find(vt=>vt.id===E.id);$e.style.display="block",$e.style.background="rgba(255, 255, 255, 0.95)",$e.innerHTML=`
          <strong>${Qe?Qe.name:E.name}</strong><br>
          Lat: ${we.lat.toFixed(6)}<br>
          Lng: ${we.lng.toFixed(6)}
        `}}),Ce.on("mouseout",function(Je){const we=document.querySelector(".coordinate-display");we&&(we.style.display="none")})),Ce}async function xt(E){var S;if(C.flyTo(E.coordinates,14,{animate:!0,duration:2}),await new Promise(D=>setTimeout(D,2e3)),$.center=C.getCenter(),$.zoom=C.getZoom(),$.focusedStation=E,E.hasStation)a("station-click",E);else{const D=(S=q.find(Te=>Te.station.id===E.id))==null?void 0:S.marker;D&&D.bindPopup(`
        <div style="text-align: center;">
          <b>${E.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup()}}function Ni(){re&&re.clearLayers(),q=[]}function Vt(){if(P.value.length===0)return;const E=P.value.pop(),S=J.findIndex(D=>D.id===E.id);if(S!==-1){O.value.push(E),J[S].coordinates=[...E.previousCoordinates];const D=q.find(Te=>Te.station.id===E.id);D&&(D.station.coordinates=[...E.previousCoordinates],D.marker.setLatLng(E.previousCoordinates)),P.value.length>0?y.value=P.value[P.value.length-1]:y.value=null,g.value=` Undone: ${E.name}`,setTimeout(()=>{g.value=""},2e3)}}function rn(){if(O.value.length===0)return;const E=O.value.pop(),S=J.findIndex(D=>D.id===E.id);if(S!==-1){P.value.push(E),J[S].coordinates=[...E.newCoordinates];const D=q.find(Te=>Te.station.id===E.id);D&&(D.station.coordinates=[...E.newCoordinates],D.marker.setLatLng(E.newCoordinates)),y.value=E,g.value=` Redone: ${E.name}`,setTimeout(()=>{g.value=""},2e3)}}async function b(){try{const S=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(J)})).json();if(S.success)g.value=" Saved! stations.json updated successfully",setTimeout(()=>{g.value=""},4e3);else throw new Error(S.message)}catch(E){console.error("Save error:",E),g.value=" Error saving file. Is the save server running?",setTimeout(()=>{g.value=""},5e3)}}function k(){p.value=!0,h.value?N():q.forEach(({marker:E})=>{E.setOpacity(1)})}function R(){setTimeout(()=>{p.value=!1},200)}async function H(E){h.value=E.name,p.value=!1,v.value=E,C.flyTo(E.coordinates,14,{animate:!0,duration:2}),N(),await new Promise(D=>setTimeout(D,3e3)),$.center=C.getCenter(),$.zoom=C.getZoom(),$.focusedStation=E;const S=q.find(D=>D.station.id===E.id);S&&(E.hasStation?a("station-click",E):S.marker.bindPopup(`
        <div style="text-align: center;">
          <b>${E.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup())}function F(){h.value="",v.value=null,p.value=!1,q.forEach(({marker:E})=>{E.setOpacity(1)}),$.focusedStation||C.setView([58.5953,25.0136],7,{animate:!0,duration:.5})}function N(){const E=G(),S=new Set(E.map(Te=>Te.id)),D=h.value.toLowerCase();q.forEach(({marker:Te,station:He})=>{const Ce=J.find($e=>$e.id===He.id),Je=!D||Ce&&(Ce.name.toLowerCase().includes(D)||Ce.location.toLowerCase().includes(D)),we=S.has(He.id);Te.setOpacity(Je&&we?1:.3)})}function Y(E,S,D,Te){const Ce=(D-E)*Math.PI/180,Je=(Te-S)*Math.PI/180,we=Math.sin(Ce/2)*Math.sin(Ce/2)+Math.cos(E*Math.PI/180)*Math.cos(D*Math.PI/180)*Math.sin(Je/2)*Math.sin(Je/2);return 6371*(2*Math.atan2(Math.sqrt(we),Math.sqrt(1-we)))}function G(){let E=[...J];if(T.value.hasStation&&(E=E.filter(S=>S.hasStation)),T.value.providers.length>0&&(E=E.filter(S=>S.stationType?T.value.providers.includes(S.stationType):T.value.providers.includes("Other"))),T.value.fuelLevels.length>0&&(E=E.filter(S=>!!(T.value.fuelLevels.includes("available")&&S.fuelLevel>=20||T.value.fuelLevels.includes("low")&&S.fuelLevel<20&&S.fuelLevel>0||T.value.fuelLevels.includes("empty")&&S.fuelLevel===0))),T.value.fuelTypes.length>0&&(E=E.filter(S=>S.fuels?T.value.fuelTypes.some(D=>{var Te;return(Te=S.fuels[D])==null?void 0:Te.available}):!1)),T.value.maxPrice<3&&(E=E.filter(S=>{if(!S.fuels)return!1;const D=Object.values(S.fuels).map(Te=>Te.price).filter(Te=>Te>0);return D.length>0&&Math.min(...D)<=T.value.maxPrice})),T.value.distance!=="any"&&ye.value){const S=parseFloat(T.value.distance);E=E.filter(D=>Y(ye.value.lat,ye.value.lng,D.coordinates[0],D.coordinates[1])<=S)}return ye.value&&E.sort((S,D)=>{const Te=Y(ye.value.lat,ye.value.lng,S.coordinates[0],S.coordinates[1]),He=Y(ye.value.lat,ye.value.lng,D.coordinates[0],D.coordinates[1]);return Te-He}),E}function W(){return G().length}function V(){a("close-filters"),N()}function ae(){T.value={distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1},N()}function ee(E,S){if(E==="distance")T.value.distance=S;else if(E==="maxPrice")T.value.maxPrice=S;else if(E==="hasStation")T.value.hasStation=S;else if(Array.isArray(T.value[E])){const D=T.value[E].indexOf(S);D>-1&&T.value[E].splice(D,1)}N()}function le(E){return o.guestMode?"purple":E.hasStation?E.fuelLevel===0?"gray":E.fuelLevel<20?"yellow":"green":"red"}function fe(E,S=!1,D=!1){const Te={green:"#10b981",yellow:"#fbbf24",gray:"#9ca3af",red:"#ef4444",purple:"#a855f7"},He=o.guestMode||E==="red"?10:15,Ce=S?He+40:He,Je=S?4:2,we=D&&!o.guestMode?`
    <div style="
      position: absolute;
      top: -4px;
      right: -4px;
      background: #fbbf24;
      color: white;
      width: ${Math.max(12,Ce*.5)}px;
      height: ${Math.max(12,Ce*.5)}px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: ${Math.max(8,Ce*.4)}px;
      border: 1px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.4);
      z-index: 10;
    "></div>
  `:"";return Kt.divIcon({className:"custom-marker",html:`
      <div style="position: relative; width: ${Ce}px; height: ${Ce}px;">
        <div style="
          background: ${Te[E]};
          width: ${Ce}px;
          height: ${Ce}px;
          border-radius: 50%;
          border: ${Je}px solid ${S?"#1e40af":"white"};
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>
        ${we}
      </div>
    `,iconSize:[Ce,Ce],iconAnchor:[Ce/2,Ce/2]})}function Ee(E){return E.fuelLevel===0?"fuel-empty":E.fuelLevel<20?"fuel-low":"fuel-good"}function Ne(E){return E.fuelLevel===0?"Empty":E.fuelLevel<20?`${E.fuelLevel}% Low`:`${E.fuelLevel}%`}return(E,S)=>(K(),X("div",Ag,[i.guestMode?me("",!0):(K(),X("div",kg,[m("div",Tg,[Ae(m("input",{ref_key:"searchInput",ref:d,"onUpdate:modelValue":S[0]||(S[0]=D=>h.value=D),onInput:k,onFocus:S[1]||(S[1]=D=>p.value=!0),onBlur:R,placeholder:" Search marina...",class:"search-input"},null,544),[[rt,h.value]]),p.value&&B.value.length>0?(K(),X("div",Pg,[(K(!0),X(ot,null,ai(B.value,D=>(K(),X("div",{key:D.id,onMousedown:Te=>H(D),class:et(["dropdown-item",{"has-fuel":D.hasStation}])},[m("div",xg,[m("div",Lg,ne(D.name),1),m("div",Og,[m("span",Cg,ne(D.location),1),D.hasStation?(K(),X("span",{key:0,class:et(["fuel-indicator",Ee(D)])},ne(Ne(D)),3)):(K(),X("span",Mg,"No fuel"))])])],42,Eg))),128))])):me("",!0)]),h.value?(K(),X("button",{key:0,onClick:F,class:"clear-button",title:"Clear search"},"  ")):me("",!0)])),!i.guestMode&&ie.value>0?(K(),X("div",Ig,[S[30]||(S[30]=m("span",{class:"active-filters-label"},"Active:",-1)),(K(!0),X(ot,null,ai(j.value,(D,Te)=>(K(),X("span",{key:Te,class:"filter-chip"},[ze(ne(D.label)+" ",1),m("button",{onClick:He=>ee(D.type,D.value),class:"chip-remove"},"",8,Rg)]))),128)),m("button",{onClick:ae,class:"clear-all-btn"},"Clear all")])):me("",!0),!i.guestMode&&ie.value>0?(K(),X("div",Dg," Showing "+ne(Z.value)+" of "+ne(ke.value)+" stations ",1)):me("",!0),i.showFiltersFromParent?(K(),X("div",{key:3,class:"filter-overlay",onClick:S[20]||(S[20]=D=>a("close-filters"))},[m("div",{class:"filter-panel",onClick:S[19]||(S[19]=$t(()=>{},["stop"]))},[m("div",$g,[S[31]||(S[31]=m("h3",null," Filters",-1)),m("button",{onClick:S[2]||(S[2]=D=>a("close-filters")),class:"close-panel-btn"},"")]),m("div",jg,[m("div",Ng,[S[36]||(S[36]=m("h4",null," Distance",-1)),m("div",Ug,[m("label",null,[Ae(m("input",{type:"radio","onUpdate:modelValue":S[3]||(S[3]=D=>T.value.distance=D),value:"any"},null,512),[[Qi,T.value.distance]]),S[32]||(S[32]=ze(" Any distance ",-1))]),m("label",null,[Ae(m("input",{type:"radio","onUpdate:modelValue":S[4]||(S[4]=D=>T.value.distance=D),value:"10"},null,512),[[Qi,T.value.distance]]),S[33]||(S[33]=ze(" Within 10 km ",-1))]),m("label",null,[Ae(m("input",{type:"radio","onUpdate:modelValue":S[5]||(S[5]=D=>T.value.distance=D),value:"25"},null,512),[[Qi,T.value.distance]]),S[34]||(S[34]=ze(" Within 25 km ",-1))]),m("label",null,[Ae(m("input",{type:"radio","onUpdate:modelValue":S[6]||(S[6]=D=>T.value.distance=D),value:"50"},null,512),[[Qi,T.value.distance]]),S[35]||(S[35]=ze(" Within 50 km ",-1))])])]),m("div",Bg,[S[40]||(S[40]=m("h4",null," Fuel Type",-1)),m("div",Fg,[m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[7]||(S[7]=D=>T.value.fuelTypes=D),value:"diesel"},null,512),[[Ct,T.value.fuelTypes]]),S[37]||(S[37]=ze(" Diesel ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[8]||(S[8]=D=>T.value.fuelTypes=D),value:"e95"},null,512),[[Ct,T.value.fuelTypes]]),S[38]||(S[38]=ze(" E95 ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[9]||(S[9]=D=>T.value.fuelTypes=D),value:"e98"},null,512),[[Ct,T.value.fuelTypes]]),S[39]||(S[39]=ze(" E98 ",-1))])])]),m("div",zg,[S[41]||(S[41]=m("h4",null," Price Range",-1)),m("div",qg,[Ae(m("input",{type:"range","onUpdate:modelValue":S[10]||(S[10]=D=>T.value.maxPrice=D),min:"1.0",max:"3.0",step:"0.1",class:"price-slider"},null,512),[[rt,T.value.maxPrice]]),m("div",Vg," Max: "+ne(T.value.maxPrice)+"/L ",1)])]),m("div",Hg,[S[45]||(S[45]=m("h4",null," Fuel Level",-1)),m("div",Zg,[m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[11]||(S[11]=D=>T.value.fuelLevels=D),value:"available"},null,512),[[Ct,T.value.fuelLevels]]),S[42]||(S[42]=ze(" Available (>20%) ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[12]||(S[12]=D=>T.value.fuelLevels=D),value:"low"},null,512),[[Ct,T.value.fuelLevels]]),S[43]||(S[43]=ze(" Low (<20%) ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[13]||(S[13]=D=>T.value.fuelLevels=D),value:"empty"},null,512),[[Ct,T.value.fuelLevels]]),S[44]||(S[44]=ze(" Empty (0%) ",-1))])])]),m("div",Kg,[S[50]||(S[50]=m("h4",null," Provider",-1)),m("div",Wg,[m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[14]||(S[14]=D=>T.value.providers=D),value:"Olerex"},null,512),[[Ct,T.value.providers]]),S[46]||(S[46]=ze(" Olerex ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[15]||(S[15]=D=>T.value.providers=D),value:"Circle K"},null,512),[[Ct,T.value.providers]]),S[47]||(S[47]=ze(" Circle K ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[16]||(S[16]=D=>T.value.providers=D),value:"Alexela"},null,512),[[Ct,T.value.providers]]),S[48]||(S[48]=ze(" Alexela ",-1))]),m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[17]||(S[17]=D=>T.value.providers=D),value:"Other"},null,512),[[Ct,T.value.providers]]),S[49]||(S[49]=ze(" Other ",-1))])])]),m("div",Gg,[S[52]||(S[52]=m("h4",null," Station Status",-1)),m("div",Jg,[m("label",null,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[18]||(S[18]=D=>T.value.hasStation=D)},null,512),[[Ct,T.value.hasStation]]),S[51]||(S[51]=ze(" Only show active fuel stations ",-1))])])])]),m("div",Yg,[m("button",{onClick:ae,class:"clear-filters-btn"},"Clear All"),m("button",{onClick:V,class:"apply-filters-btn"}," Apply ("+ne(W())+") ",1)])])])):me("",!0),i.showMapTypeFromParent?(K(),X("div",{key:4,class:"filter-overlay",onClick:S[29]||(S[29]=D=>a("close-map-type"))},[m("div",{class:"map-type-panel",onClick:S[28]||(S[28]=$t(()=>{},["stop"]))},[m("div",Xg,[S[53]||(S[53]=m("h3",null," Map Type",-1)),m("button",{onClick:S[21]||(S[21]=D=>a("close-map-type")),class:"close-panel-btn"},"")]),m("div",Qg,[m("div",ey,[m("div",{onClick:S[22]||(S[22]=D=>Fe("street")),class:et(["map-type-option",{active:U.value==="street"}])},[S[54]||(S[54]=m("div",{class:"map-type-icon"},"",-1)),S[55]||(S[55]=m("div",{class:"map-type-info"},[m("h4",null,"Street Map"),m("p",null,"Standard OpenStreetMap view")],-1)),U.value==="street"?(K(),X("div",ty,"")):me("",!0)],2),m("div",{onClick:S[23]||(S[23]=D=>Fe("satellite")),class:et(["map-type-option",{active:U.value==="satellite"}])},[S[56]||(S[56]=m("div",{class:"map-type-icon"},"",-1)),S[57]||(S[57]=m("div",{class:"map-type-info"},[m("h4",null,"Satellite"),m("p",null,"Aerial imagery view")],-1)),U.value==="satellite"?(K(),X("div",iy,"")):me("",!0)],2),m("div",{onClick:S[24]||(S[24]=D=>Fe("nautical")),class:et(["map-type-option",{active:U.value==="nautical"}])},[S[58]||(S[58]=m("div",{class:"map-type-icon"},"",-1)),S[59]||(S[59]=m("div",{class:"map-type-info"},[m("h4",null,"Nautical"),m("p",null,"Light nautical chart with sea marks")],-1)),U.value==="nautical"?(K(),X("div",ny,"")):me("",!0)],2),m("div",{onClick:S[25]||(S[25]=D=>Fe("nautical-dark")),class:et(["map-type-option",{active:U.value==="nautical-dark"}])},[S[60]||(S[60]=m("div",{class:"map-type-icon"},"",-1)),S[61]||(S[61]=m("div",{class:"map-type-info"},[m("h4",null,"Nautical+"),m("p",null,"Enhanced nautical with better contrast")],-1)),U.value==="nautical-dark"?(K(),X("div",sy,"")):me("",!0)],2),m("div",{onClick:S[26]||(S[26]=D=>Fe("terrain")),class:et(["map-type-option",{active:U.value==="terrain"}])},[S[62]||(S[62]=m("div",{class:"map-type-icon"},"",-1)),S[63]||(S[63]=m("div",{class:"map-type-info"},[m("h4",null,"Terrain"),m("p",null,"Topographic map with elevation")],-1)),U.value==="terrain"?(K(),X("div",ry,"")):me("",!0)],2)]),U.value!=="nautical"&&U.value!=="nautical-dark"?(K(),X("div",oy,[m("label",ay,[Ae(m("input",{type:"checkbox","onUpdate:modelValue":S[27]||(S[27]=D=>I.value=D),onChange:De},null,544),[[Ct,I.value]]),S[64]||(S[64]=m("span",null,"Show Nautical Markers",-1)),S[65]||(S[65]=m("small",null,"Overlay sea marks on current map",-1))])])):me("",!0)])])])):me("",!0),i.isAdmin&&!i.guestMode?(K(),X("div",ly,[m("button",{onClick:Vt,disabled:P.value.length===0,class:"undo-btn",title:"Undo last marker move"},"  ",8,uy),m("button",{onClick:rn,disabled:O.value.length===0,class:"redo-btn",title:"Redo last undone move"},"  ",8,cy),m("button",{onClick:b,class:"save-coordinates-btn",title:"Save updated coordinates"},"  Save Coordinates ")])):me("",!0),m("div",{ref_key:"mapRef",ref:u,class:"map"},null,512),i.guestMode?me("",!0):(K(),X("div",dy,[...S[66]||(S[66]=[m("div",null,[m("span",{class:"dot green"}),ze(" Fuel >20%")],-1),m("div",null,[m("span",{class:"dot yellow"}),ze(" Fuel <20%")],-1),m("div",null,[m("span",{class:"dot red"}),ze(" No station")],-1)])])),g.value?(K(),X("div",hy,ne(g.value),1)):me("",!0)]))}},py=ji(fy,[["__scopeId","data-v-426b654f"]]),my={class:"header"},vy={class:"header-actions"},_y=["disabled","title"],gy={class:"content"},yy={class:"info-card"},by={class:"info-row"},wy={class:"value"},Sy={class:"info-row"},Ay={class:"value"},ky={class:"info-row"},Ty={class:"value coordinates"},Py={class:"info-row"},Ey={class:"info-row"},xy={class:"value"},Ly={class:"prices-card"},Oy={class:"fuel-type"},Cy={class:"price"},My={class:"info-card"},Iy={class:"info-row"},Ry={class:"value"},Dy={class:"info-row"},$y={class:"value"},jy={__name:"StationDetail",props:{station:{type:Object,required:!0}},emits:["back","pay"],setup(i){const e=i,{user:n}=Ls(),r=oe(!1),o=oe(null),a=oe(!1),u=oe(null),d=Pt(()=>Math.round(e.station.capacity*e.station.fuelLevel/100)),h=Pt(()=>{const[A,P]=e.station.coordinates;return`${A.toFixed(6)}, ${P.toFixed(6)}`}),p=Pt(()=>e.station.fuelLevel===0?" OUT OF FUEL":e.station.fuelLevel<20?" LOW FUEL":" AVAILABLE"),v=Pt(()=>e.station.fuelLevel===0?"text-red-600":e.station.fuelLevel<20?"text-yellow-600":"text-green-600");jn(async()=>{if(n.value)try{const{data:A,error:P}=await gt.from("favorites").select("id").eq("user_id",n.value.id).eq("station_id",e.station.id).maybeSingle();if(P&&P.code!=="PGRST116"){console.error("Error checking favorite:",P);return}A&&(r.value=!0,o.value=A.id)}catch(A){console.error("Error checking favorite:",A)}});async function g(){if(!(!n.value||a.value)){a.value=!0;try{if(r.value){const{error:A}=await gt.from("favorites").delete().eq("id",o.value).eq("user_id",n.value.id);if(A)throw A;r.value=!1,o.value=null,y("Removed from favorites")}else{const{data:A,error:P}=await gt.from("favorites").insert({user_id:n.value.id,station_id:e.station.id,name:e.station.name,location:e.station.location,coordinates:e.station.coordinates,station_type:e.station.stationType,fuel_level:e.station.fuelLevel,capacity:e.station.capacity,fuels:e.station.fuels}).select().single();if(P)throw P;r.value=!0,o.value=A.id,y("Added to favorites!")}}catch(A){console.error("Error toggling favorite:",A),y("Error updating favorites",!0)}finally{a.value=!1}}}function y(A,P=!1){u.value={message:A,isError:P},setTimeout(()=>{u.value=null},3e3)}return(A,P)=>(K(),X("div",{class:"modal-overlay",onClick:P[3]||(P[3]=O=>A.$emit("back"))},[m("div",{class:"modal-content",onClick:P[2]||(P[2]=$t(()=>{},["stop"]))},[m("header",my,[m("h2",null,ne(i.station.name),1),m("div",vy,[Bt(n)?(K(),X("button",{key:0,onClick:g,disabled:a.value,class:et(["favorite-btn",{"is-favorite":r.value}]),title:r.value?"Remove from favorites":"Add to favorites"},ne(r.value?"":""),11,_y)):me("",!0),m("button",{onClick:P[0]||(P[0]=O=>A.$emit("back")),class:"close-btn"},"")])]),m("div",gy,[m("div",yy,[m("div",by,[P[4]||(P[4]=m("span",{class:"label"},"Provider:",-1)),m("span",wy," "+ne(i.station.stationType),1)]),m("div",Sy,[P[5]||(P[5]=m("span",{class:"label"},"Location:",-1)),m("span",Ay," "+ne(i.station.location),1)]),m("div",ky,[P[6]||(P[6]=m("span",{class:"label"},"Coordinates:",-1)),m("span",Ty,ne(h.value),1)]),m("div",Py,[P[7]||(P[7]=m("span",{class:"label"},"Status:",-1)),m("span",{class:et(["value",v.value])},ne(p.value),3)]),m("div",Ey,[P[8]||(P[8]=m("span",{class:"label"},"Fuel Level:",-1)),m("span",xy,ne(d.value)+"L / "+ne(i.station.capacity)+"L",1)])]),m("div",Ly,[P[9]||(P[9]=m("h3",null,"Fuel Prices",-1)),(K(!0),X(ot,null,ai(i.station.fuels,(O,T)=>(K(),X("div",{key:T,class:"price-row"},[m("span",Oy,ne(T.toUpperCase()),1),m("span",Cy,ne(O.price.toFixed(2))+"/L",1)]))),128))]),m("div",My,[m("div",Iy,[P[10]||(P[10]=m("span",{class:"label"},"Hours:",-1)),m("span",Ry," "+ne(i.station.hours),1)]),m("div",Dy,[P[11]||(P[11]=m("span",{class:"label"},"Payment:",-1)),m("span",$y," "+ne(i.station.payment.join(", ")),1)])]),m("button",{onClick:P[1]||(P[1]=O=>A.$emit("pay",i.station)),class:"fuel-btn"}," START FUELING ")])]),u.value?(K(),X("div",{key:0,class:et(["notification",{error:u.value.isError}])},ne(u.value.message),3)):me("",!0)]))}},Ny=ji(jy,[["__scopeId","data-v-008fa4dc"]]),Uy={class:"payment-page"},By={class:"header"},Fy={class:"content"},zy={class:"card"},qy={class:"fuel-options"},Vy=["value"],Hy={class:"card"},Zy={class:"total"},Ky={class:"card"},Wy={class:"payment-option"},Gy={class:"payment-option"},Jy={key:0,class:"qr-box"},Yy={__name:"PaymentScreen",props:{station:{type:Object,required:!0}},emits:["back","complete"],setup(i,{emit:e}){const n=i,r=e,o=oe(Object.keys(n.station.fuels)[0]),a=oe(50),u=oe("qr"),d=Pt(()=>{var v;return(((v=n.station.fuels[o.value])==null?void 0:v.price)||0)*a.value});function h(){r("complete",{station:n.station.name,fuelType:o.value.toUpperCase(),liters:a.value,cost:d.value})}return(p,v)=>(K(),X("div",Uy,[m("header",By,[m("button",{onClick:v[0]||(v[0]=g=>p.$emit("back")),class:"back-btn"}," Back"),v[5]||(v[5]=m("h2",null,"Payment",-1))]),m("div",Fy,[m("div",zy,[v[6]||(v[6]=m("h3",null,"Select Fuel Type",-1)),m("div",qy,[(K(!0),X(ot,null,ai(i.station.fuels,(g,y)=>(K(),X("label",{key:y,class:"fuel-option"},[Ae(m("input",{type:"radio",value:y,"onUpdate:modelValue":v[1]||(v[1]=A=>o.value=A)},null,8,Vy),[[Qi,o.value]]),m("span",null,ne(y.toUpperCase())+" - "+ne(g.price.toFixed(2))+"/L",1)]))),128))])]),m("div",Hy,[v[8]||(v[8]=m("h3",null,"Liters",-1)),Ae(m("input",{type:"number","onUpdate:modelValue":v[2]||(v[2]=g=>a.value=g),placeholder:"50",class:"input"},null,512),[[rt,a.value]]),m("p",Zy,[v[7]||(v[7]=ze("Cost: ",-1)),m("strong",null,ne(d.value.toFixed(2))+"",1)])]),m("div",Ky,[v[11]||(v[11]=m("h3",null,"Payment Method",-1)),m("label",Wy,[Ae(m("input",{type:"radio",value:"qr","onUpdate:modelValue":v[3]||(v[3]=g=>u.value=g)},null,512),[[Qi,u.value]]),v[9]||(v[9]=m("span",null," QR Code",-1))]),m("label",Gy,[Ae(m("input",{type:"radio",value:"card","onUpdate:modelValue":v[4]||(v[4]=g=>u.value=g)},null,512),[[Qi,u.value]]),v[10]||(v[10]=m("span",null," Card",-1))])]),u.value==="qr"?(K(),X("div",Jy,[...v[12]||(v[12]=[m("div",{class:"qr-code"},"QR",-1)])])):me("",!0),m("button",{onClick:h,class:"confirm-btn"},"CONFIRM PAYMENT")])]))}},Xy=ji(Yy,[["__scopeId","data-v-b6412c7e"]]),Qy={class:"history-page"},e0={class:"header"},t0={class:"content"},i0={key:0,class:"empty"},n0={key:1,class:"history-list"},s0={class:"item-header"},r0={class:"date"},o0={class:"cost"},a0={class:"item-details"},l0={key:2,class:"summary"},u0={class:"total-spent"},c0={class:"modal-actions"},d0={__name:"HistoryScreen",emits:["back"],setup(i){const e=oe([]),n=oe(!1);jn(()=>{e.value=JSON.parse(localStorage.getItem("fuelHistory")||"[]")});const r=Pt(()=>e.value.reduce((d,h)=>d+h.cost,0));function o(d){return new Date(d).toLocaleDateString("et-EE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function a(){n.value=!0}function u(){localStorage.removeItem("fuelHistory"),e.value=[],n.value=!1}return(d,h)=>(K(),X("div",Qy,[m("header",e0,[m("button",{onClick:h[0]||(h[0]=p=>d.$emit("back")),class:"back-btn"}," Back"),h[4]||(h[4]=m("h2",null,"Fuel History",-1))]),m("div",t0,[e.value.length===0?(K(),X("div",i0,[...h[5]||(h[5]=[m("p",null,"No transactions yet",-1)])])):(K(),X("div",n0,[(K(!0),X(ot,null,ai(e.value,(p,v)=>(K(),X("div",{key:v,class:"history-item"},[m("div",s0,[m("span",r0,ne(o(p.date)),1),m("span",o0,ne(p.cost.toFixed(2))+"",1)]),m("div",a0,[m("p",null,[m("strong",null,ne(p.station),1)]),m("p",null,ne(p.liters)+"L "+ne(p.fuelType),1)])]))),128))])),e.value.length>0?(K(),X("div",l0,[m("button",{onClick:a,class:"reset-btn"},"  Clear History "),m("div",u0,[m("p",null,[h[6]||(h[6]=ze("Total spent: ",-1)),m("strong",null,ne(r.value.toFixed(2))+"",1)])])])):me("",!0),n.value?(K(),X("div",{key:3,class:"modal-overlay",onClick:h[3]||(h[3]=p=>n.value=!1)},[m("div",{class:"confirm-modal",onClick:h[2]||(h[2]=$t(()=>{},["stop"]))},[h[7]||(h[7]=m("div",{class:"modal-icon"},"",-1)),h[8]||(h[8]=m("h3",null,"Clear History?",-1)),h[9]||(h[9]=m("p",null,"This will permanently delete all fuel history records.",-1)),m("div",c0,[m("button",{onClick:h[1]||(h[1]=p=>n.value=!1),class:"cancel-btn"},"Cancel"),m("button",{onClick:u,class:"confirm-btn"},"Clear All")])])])):me("",!0)])]))}},h0=ji(d0,[["__scopeId","data-v-1dd5308e"]]),f0={class:"favorites-container"},p0={class:"favorites-header"},m0={class:"favorites-content"},v0={key:0,class:"empty-state"},_0={key:1,class:"favorites-list"},g0={class:"favorites-actions"},y0={class:"sort-options"},b0={class:"favorite-cards"},w0={class:"card-header"},S0={class:"card-badges"},A0={class:"card-body"},k0={class:"info-row"},T0={class:"info-row"},P0={key:0,class:"info-row"},E0={class:"info-row"},x0={key:0,class:"card-notes"},L0={class:"notes-text"},O0={key:1,class:"card-tags"},C0={class:"card-actions"},M0=["onClick"],I0=["onClick"],R0=["onClick"],D0={class:"modal-subtitle"},$0={class:"form-group"},j0={class:"form-group"},N0={class:"tags-input"},U0={key:0,class:"current-tags"},B0=["onClick"],F0={class:"modal-actions"},z0={__name:"FavoritesScreen",emits:["back","view-station","show-on-map"],setup(i,{emit:e}){const{user:n}=Ls(),r=e,o=oe([]),a=oe("distance"),u=oe(null),d=oe(""),h=oe([]),p=oe(""),v=oe(null);jn(async()=>{await P(),g()});function g(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(J=>{v.value={lat:J.coords.latitude,lng:J.coords.longitude},A()},()=>{v.value={lat:58.5953,lng:25.0136},A()})}function y(J,$,B,ye){const j=(B-J)*Math.PI/180,Z=(ye-$)*Math.PI/180,ke=Math.sin(j/2)*Math.sin(j/2)+Math.cos(J*Math.PI/180)*Math.cos(B*Math.PI/180)*Math.sin(Z/2)*Math.sin(Z/2);return(6371*(2*Math.atan2(Math.sqrt(ke),Math.sqrt(1-ke)))).toFixed(1)}function A(){v.value&&o.value.forEach(J=>{J.distance=y(v.value.lat,v.value.lng,J.coordinates[0],J.coordinates[1])})}async function P(){if(!n.value)return;const{data:J,error:$}=await gt.from("favorites").select("*").eq("user_id",n.value.id);$?console.error("Error loading favorites:",$):o.value=J||[]}const O=Pt(()=>{const J=[...o.value];return a.value==="distance"?J.sort(($,B)=>parseFloat($.distance||999)-parseFloat(B.distance||999)):a.value==="name"?J.sort(($,B)=>$.name.localeCompare(B.name)):a.value==="fuelLevel"?J.sort(($,B)=>B.fuelLevel-$.fuelLevel):a.value==="dateAdded"&&J.sort(($,B)=>new Date(B.created_at)-new Date($.created_at)),J});function T(J){return J.fuelLevel===0?"fuel-empty":J.fuelLevel<20?"fuel-low":"fuel-good"}function U(J){return J.fuelLevel===0?"Empty":J.fuelLevel<20?`${J.fuelLevel}% Low`:`${J.fuelLevel}%`}function I(J){if(!J.fuels)return"N/A";const $=Object.values(J.fuels).map(B=>B.price).filter(B=>B>0);return $.length===0?"N/A":`From ${Math.min(...$).toFixed(2)}/L`}function C(J){r("view-station",J)}function q(){r("show-on-map",o.value)}function re(J){u.value=J,d.value=J.notes||"",h.value=J.tags||[]}function de(){p.value.trim()&&!h.value.includes(p.value.trim())&&(h.value.push(p.value.trim()),p.value="")}function ge(J){h.value.splice(J,1)}async function Oe(){const{error:J}=await gt.from("favorites").update({notes:d.value,tags:h.value}).eq("id",u.value.id).eq("user_id",n.value.id);if(J)console.error("Error saving notes:",J);else{const $=o.value.findIndex(B=>B.id===u.value.id);$!==-1&&(o.value[$].notes=d.value,o.value[$].tags=h.value),u.value=null}}async function Me(J){if(!confirm(`Remove ${J.name} from favorites?`))return;const{error:$}=await gt.from("favorites").delete().eq("id",J.id).eq("user_id",n.value.id);$?console.error("Error removing favorite:",$):o.value=o.value.filter(B=>B.id!==J.id)}return(J,$)=>(K(),X("div",f0,[m("header",p0,[m("button",{onClick:$[0]||($[0]=B=>J.$emit("back")),class:"back-btn"}," Back to Map"),$[8]||($[8]=m("h2",null," My Favorites",-1))]),m("div",m0,[o.value.length===0?(K(),X("div",v0,[$[9]||($[9]=m("div",{class:"empty-icon"},"",-1)),$[10]||($[10]=m("h3",null,"No Favorites Yet",-1)),$[11]||($[11]=m("p",null,"Start adding marinas to your favorites from the map!",-1)),m("button",{onClick:$[1]||($[1]=B=>J.$emit("back")),class:"browse-btn"}," Browse Marinas ")])):(K(),X("div",_0,[m("div",g0,[m("button",{onClick:q,class:"show-all-btn"},"  Show All on Map "),m("div",y0,[$[13]||($[13]=m("label",null,"Sort by:",-1)),Ae(m("select",{"onUpdate:modelValue":$[2]||($[2]=B=>a.value=B),class:"sort-select"},[...$[12]||($[12]=[m("option",{value:"distance"},"Distance",-1),m("option",{value:"name"},"Name",-1),m("option",{value:"fuelLevel"},"Fuel Level",-1),m("option",{value:"dateAdded"},"Recently Added",-1)])],512),[[wm,a.value]])])]),m("div",b0,[(K(!0),X(ot,null,ai(O.value,B=>(K(),X("div",{key:B.id,class:"favorite-card"},[m("div",w0,[m("h3",null,ne(B.name),1),m("div",S0,[m("span",{class:et(["fuel-badge",T(B)])},ne(U(B)),3)])]),m("div",A0,[m("div",k0,[$[14]||($[14]=m("span",{class:"icon"},"",-1)),m("span",null,ne(B.location),1)]),m("div",T0,[$[15]||($[15]=m("span",{class:"icon"},"",-1)),m("span",null,ne(B.stationType),1)]),B.distance?(K(),X("div",P0,[$[16]||($[16]=m("span",{class:"icon"},"",-1)),m("span",null,ne(B.distance)+" km away",1)])):me("",!0),m("div",E0,[$[17]||($[17]=m("span",{class:"icon"},"",-1)),m("span",null,ne(I(B)),1)])]),B.notes?(K(),X("div",x0,[$[18]||($[18]=m("div",{class:"notes-label"}," My Notes:",-1)),m("div",L0,ne(B.notes),1)])):me("",!0),B.tags&&B.tags.length>0?(K(),X("div",O0,[(K(!0),X(ot,null,ai(B.tags,ye=>(K(),X("span",{key:ye,class:"tag"},ne(ye),1))),128))])):me("",!0),m("div",C0,[m("button",{onClick:ye=>C(B),class:"action-btn view-btn"},"  View ",8,M0),m("button",{onClick:ye=>re(B),class:"action-btn edit-btn"},"  Edit Notes ",8,I0),m("button",{onClick:ye=>Me(B),class:"action-btn remove-btn"},"  Remove ",8,R0)])]))),128))])]))]),u.value?(K(),X("div",{key:0,class:"modal-overlay",onClick:$[7]||($[7]=B=>u.value=null)},[m("div",{class:"modal-content",onClick:$[6]||($[6]=$t(()=>{},["stop"]))},[$[21]||($[21]=m("h3",null," Edit Notes",-1)),m("p",D0,ne(u.value.name),1),m("div",$0,[$[19]||($[19]=m("label",null," Personal Notes",-1)),Ae(m("textarea",{"onUpdate:modelValue":$[3]||($[3]=B=>d.value=B),placeholder:"Add your personal notes about this marina...",rows:"4",class:"notes-textarea"},null,512),[[rt,d.value]])]),m("div",j0,[$[20]||($[20]=m("label",null," Tags",-1)),m("div",N0,[Ae(m("input",{"onUpdate:modelValue":$[4]||($[4]=B=>p.value=B),onKeyup:Tm(de,["enter"]),placeholder:"Add a tag and press Enter",class:"tag-input"},null,544),[[rt,p.value]])]),h.value.length>0?(K(),X("div",U0,[(K(!0),X(ot,null,ai(h.value,(B,ye)=>(K(),X("span",{key:ye,class:"edit-tag"},[ze(ne(B)+" ",1),m("button",{onClick:ie=>ge(ye),class:"remove-tag-btn"},"",8,B0)]))),128))])):me("",!0)]),m("div",F0,[m("button",{onClick:$[5]||($[5]=B=>u.value=null),class:"cancel-btn"},"Cancel"),m("button",{onClick:Oe,class:"save-btn"},"Save")])])])):me("",!0)]))}},q0=ji(z0,[["__scopeId","data-v-f33f546b"]]),V0={class:"admin-container"},H0={class:"admin-header"},Z0={class:"tabs"},K0={key:0,class:"tab-content"},W0={class:"toolbar"},G0={class:"table-container"},J0={class:"data-table"},Y0={class:"fuel-indicator"},X0={class:"fuel-bar"},Q0={class:"action-buttons"},eb=["onClick"],tb=["onClick"],ib={key:1,class:"tab-content"},nb={class:"toolbar"},sb={class:"table-container"},rb={class:"data-table"},ob={class:"action-buttons"},ab=["onClick","title"],lb=["onClick"],ub={class:"form-row"},cb={class:"form-group"},db={class:"form-group"},hb={class:"form-row"},fb={class:"form-group"},pb={class:"form-group"},mb={class:"form-row"},vb={class:"form-group"},_b={class:"form-group"},gb={class:"form-row"},yb={class:"form-group"},bb={class:"form-group"},wb={class:"form-actions"},Sb={type:"submit",class:"save-btn"},Ab={class:"modal-actions"},kb={key:4,class:"loading-overlay"},Tb={__name:"AdminPanel",emits:["back"],setup(i,{emit:e}){const n=oe("marinas"),r=oe(""),o=oe(""),a=oe(!1),u=oe(null),d=oe(!1),h=oe(null),p=oe(null),v=oe([...zd]),g=oe([]),y=oe({id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}),A=Pt(()=>{if(!r.value)return v.value;const ie=r.value.toLowerCase();return v.value.filter(j=>{var Z;return j.name.toLowerCase().includes(ie)||j.location.toLowerCase().includes(ie)||((Z=j.stationType)==null?void 0:Z.toLowerCase().includes(ie))})}),P=Pt(()=>{if(!o.value)return g.value;const ie=o.value.toLowerCase();return g.value.filter(j=>j.email.toLowerCase().includes(ie))});cr(n,async ie=>{ie==="users"&&g.value.length===0&&await O()});async function O(){d.value=!0;try{const{data:ie,error:j}=await gt.auth.admin.listUsers();if(j)throw j;g.value=ie.users||[]}catch(ie){ye("Failed to load users: "+ie.message,"error")}finally{d.value=!1}}function T(ie){u.value=ie,y.value={...ie}}function U(ie){ie.target.classList.contains("modal-overlay")&&I()}function I(){a.value=!1,u.value=null,p.value=null,C()}function C(){y.value={id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}}async function q(){if(u.value){const ie=v.value.findIndex(j=>j.id===u.value.id);ie!==-1&&(v.value[ie]={...y.value})}else y.value.id=`station-${Date.now()}`,v.value.push({...y.value});await J(),I()}function re(ie){p.value={type:"marina",item:ie}}async function de(){if(p.value){if(p.value.type==="marina"){const ie=p.value.item;v.value=v.value.filter(j=>j.id!==ie.id),ye("Marina deleted successfully","success"),await J()}p.value=null}}async function ge(ie){if(confirm(`Delete user ${ie.email}?`)){d.value=!0;try{const{error:j}=await gt.auth.admin.deleteUser(ie.id);if(j)throw j;g.value=g.value.filter(Z=>Z.id!==ie.id),ye("User deleted successfully","success")}catch(j){ye("Failed to delete user: "+j.message,"error")}finally{d.value=!1}}}async function Oe(ie){var ke;const Z=((ke=ie.user_metadata)==null?void 0:ke.role)==="admin"?"user":"admin";d.value=!0;try{const{error:Q}=await gt.auth.admin.updateUserById(ie.id,{user_metadata:{role:Z}});if(Q)throw Q;const dt=g.value.findIndex(he=>he.id===ie.id);dt!==-1&&(g.value[dt].user_metadata={...g.value[dt].user_metadata,role:Z}),ye(`User ${Z==="admin"?"promoted to":"removed from"} admin`,"success")}catch(Q){ye("Failed to update role: "+Q.message,"error")}finally{d.value=!1}}function Me(ie){var j;return((j=ie.user_metadata)==null?void 0:j.role)==="admin"||ie.email==="admin@fueldock.ee"}async function J(){d.value=!0;try{const j=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v.value)})).json();if(j.success)ye(" Marinas saved successfully!","success");else throw new Error(j.message)}catch(ie){console.error("Save error:",ie),ye(" Error saving marinas. Is the save server running?","error")}finally{d.value=!1}}function $(ie){return ie===0?"empty":ie<20?"low":"good"}function B(ie){return ie?new Date(ie).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}function ye(ie,j="success"){h.value={message:ie,type:j},setTimeout(()=>{h.value=null},3e3)}return(ie,j)=>(K(),X("div",V0,[m("header",H0,[m("button",{onClick:j[0]||(j[0]=Z=>ie.$emit("back")),class:"back-btn"}," Back to Map"),j[19]||(j[19]=m("h2",null,"Admin Panel",-1))]),m("div",Z0,[m("button",{class:et({active:n.value==="marinas"}),onClick:j[1]||(j[1]=Z=>n.value="marinas")}," Marina Management ",2),m("button",{class:et({active:n.value==="users"}),onClick:j[2]||(j[2]=Z=>n.value="users")}," User Management ",2)]),n.value==="marinas"?(K(),X("div",K0,[m("div",W0,[Ae(m("input",{"onUpdate:modelValue":j[3]||(j[3]=Z=>r.value=Z),placeholder:" Search marinas...",class:"search-input"},null,512),[[rt,r.value]]),m("button",{onClick:j[4]||(j[4]=Z=>a.value=!0),class:"add-btn"}," + Add Marina ")]),m("div",G0,[m("table",J0,[j[20]||(j[20]=m("thead",null,[m("tr",null,[m("th",null,"Name"),m("th",null,"Location"),m("th",null,"Provider"),m("th",null,"Fuel Level"),m("th",null,"Capacity"),m("th",null,"Status"),m("th",null,"Actions")])],-1)),m("tbody",null,[(K(!0),X(ot,null,ai(A.value,Z=>(K(),X("tr",{key:Z.id},[m("td",null,ne(Z.name),1),m("td",null,ne(Z.location),1),m("td",null,ne(Z.stationType),1),m("td",null,[m("div",Y0,[m("div",X0,[m("div",{class:et(["fuel-fill",$(Z.fuelLevel)]),style:Ts({width:Z.fuelLevel+"%"})},null,6)]),m("span",null,ne(Z.fuelLevel)+"%",1)])]),m("td",null,ne(Z.capacity)+"L",1),m("td",null,[m("span",{class:et(["status-badge",Z.hasStation?"active":"inactive"])},ne(Z.hasStation?"Active":"Inactive"),3)]),m("td",null,[m("div",Q0,[m("button",{onClick:ke=>T(Z),class:"edit-btn",title:"Edit"},"  ",8,eb),m("button",{onClick:ke=>re(Z),class:"delete-btn",title:"Delete"},"  ",8,tb)])])]))),128))])])])])):me("",!0),n.value==="users"?(K(),X("div",ib,[m("div",nb,[Ae(m("input",{"onUpdate:modelValue":j[5]||(j[5]=Z=>o.value=Z),placeholder:" Search users...",class:"search-input"},null,512),[[rt,o.value]])]),m("div",sb,[m("table",rb,[j[21]||(j[21]=m("thead",null,[m("tr",null,[m("th",null,"Email"),m("th",null,"Created"),m("th",null,"Last Sign In"),m("th",null,"Status"),m("th",null,"Actions")])],-1)),m("tbody",null,[(K(!0),X(ot,null,ai(P.value,Z=>(K(),X("tr",{key:Z.id},[m("td",null,ne(Z.email),1),m("td",null,ne(B(Z.created_at)),1),m("td",null,ne(B(Z.last_sign_in_at)),1),m("td",null,[m("span",{class:et(["status-badge",Z.email_confirmed_at?"active":"pending"])},ne(Z.email_confirmed_at?"Verified":"Pending"),3)]),m("td",null,[m("div",ob,[m("button",{onClick:ke=>Oe(Z),class:"role-btn",title:Me(Z)?"Remove Admin":"Make Admin"},ne(Me(Z)?"":""),9,ab),m("button",{onClick:ke=>ge(Z),class:"delete-btn",title:"Delete User"},"  ",8,lb)])])]))),128))])])])])):me("",!0),a.value||u.value?(K(),X("div",{key:2,class:"modal-overlay",onMousedown:U},[m("div",{class:"modal-content",onClick:j[14]||(j[14]=$t(()=>{},["stop"])),onMousedown:j[15]||(j[15]=$t(()=>{},["stop"]))},[m("h3",null,ne(u.value?"Edit Marina":"Add New Marina"),1),m("form",{onSubmit:$t(q,["prevent"]),class:"marina-form"},[m("div",ub,[m("div",cb,[j[22]||(j[22]=m("label",null,"Marina Name *",-1)),Ae(m("input",{"onUpdate:modelValue":j[6]||(j[6]=Z=>y.value.name=Z),type:"text",required:"",placeholder:"e.g., DIRHAMI SADAM"},null,512),[[rt,y.value.name]])]),m("div",db,[j[23]||(j[23]=m("label",null,"Location *",-1)),Ae(m("input",{"onUpdate:modelValue":j[7]||(j[7]=Z=>y.value.location=Z),type:"text",required:"",placeholder:"e.g., Lne maakond"},null,512),[[rt,y.value.location]])])]),m("div",hb,[m("div",fb,[j[24]||(j[24]=m("label",null,"Latitude *",-1)),Ae(m("input",{"onUpdate:modelValue":j[8]||(j[8]=Z=>y.value.coordinates[0]=Z),type:"number",step:"any",required:""},null,512),[[rt,y.value.coordinates[0],void 0,{number:!0}]])]),m("div",pb,[j[25]||(j[25]=m("label",null,"Longitude *",-1)),Ae(m("input",{"onUpdate:modelValue":j[9]||(j[9]=Z=>y.value.coordinates[1]=Z),type:"number",step:"any",required:""},null,512),[[rt,y.value.coordinates[1],void 0,{number:!0}]])])]),m("div",mb,[m("div",vb,[j[26]||(j[26]=m("label",null,"Station Type",-1)),Ae(m("input",{"onUpdate:modelValue":j[10]||(j[10]=Z=>y.value.stationType=Z),type:"text",placeholder:"e.g., Olerex"},null,512),[[rt,y.value.stationType]])]),m("div",_b,[m("label",null,[Ae(m("input",{"onUpdate:modelValue":j[11]||(j[11]=Z=>y.value.hasStation=Z),type:"checkbox"},null,512),[[Ct,y.value.hasStation]]),j[27]||(j[27]=ze(" Has Fuel Station ",-1))])])]),m("div",gb,[m("div",yb,[j[28]||(j[28]=m("label",null,"Fuel Level (%)",-1)),Ae(m("input",{"onUpdate:modelValue":j[12]||(j[12]=Z=>y.value.fuelLevel=Z),type:"number",min:"0",max:"100"},null,512),[[rt,y.value.fuelLevel,void 0,{number:!0}]])]),m("div",bb,[j[29]||(j[29]=m("label",null,"Capacity (L)",-1)),Ae(m("input",{"onUpdate:modelValue":j[13]||(j[13]=Z=>y.value.capacity=Z),type:"number",min:"0"},null,512),[[rt,y.value.capacity,void 0,{number:!0}]])])]),m("div",wb,[m("button",{type:"button",onClick:I,class:"cancel-btn"}," Cancel "),m("button",Sb,ne(u.value?"Update":"Add")+" Marina ",1)])],32)],32)],32)):me("",!0),p.value?(K(),X("div",{key:3,class:"modal-overlay",onClick:j[18]||(j[18]=Z=>p.value=null)},[m("div",{class:"login-prompt-modal",onClick:j[17]||(j[17]=$t(()=>{},["stop"]))},[j[35]||(j[35]=m("div",{class:"modal-icon"},"",-1)),j[36]||(j[36]=m("h3",null,"Confirm Delete",-1)),m("p",null,[j[30]||(j[30]=ze(" Are you sure you want to delete",-1)),j[31]||(j[31]=m("br",null,null,-1)),m("strong",null,ne(p.value.item.name||p.value.item.email),1),j[32]||(j[32]=ze("? ",-1)),j[33]||(j[33]=m("br",null,null,-1)),j[34]||(j[34]=ze("This action cannot be undone. ",-1))]),m("div",Ab,[m("button",{onClick:de,class:"delete-confirm-btn"}," Delete "),m("button",{onClick:j[16]||(j[16]=Z=>p.value=null),class:"cancel-btn"}," Cancel ")])])])):me("",!0),d.value?(K(),X("div",kb,[...j[37]||(j[37]=[m("div",{class:"spinner"},null,-1)])])):me("",!0),h.value?(K(),X("div",{key:5,class:et(["notification",h.value.type])},ne(h.value.message),3)):me("",!0)]))}},Pb=ji(Tb,[["__scopeId","data-v-e78266fb"]]),Eb={key:1,class:"app"},xb={class:"header-fixed"},Lb={class:"flex justify-between items-center w-full"},Ob={class:"text-2xl font-bold flex items-center gap-2"},Cb={key:0,class:"guest-badge"},Mb={class:"header-actions"},Ib={class:"h-[calc(100vh-80px)]"},Rb={class:"modal-actions"},Db={key:3,class:"loading-screen"},$b={class:"progress-bar"},jb={__name:"App",setup(i){const{user:e,loading:n,isAdmin:r,checkUser:o,signOut:a,initAuthListener:u}=Ls(),d=oe(0),h=oe("map"),p=oe(null),v=oe(null),g=oe(null),y=oe(!1),A=oe(!1),P=oe(!1),O=oe(!1);jn(async()=>{const $=setInterval(()=>{d.value+=5,d.value>=100&&clearInterval($)},100);await o(),u()});function T(){y.value=!0}async function U(){try{await a(),y.value=!1,h.value="map",p.value=null}catch($){console.error("Logout error:",$)}}function I($){if(y.value){A.value=!0;return}$.hasStation&&(p.value=$)}function C(){y.value=!1,A.value=!1}function q($){v.value=$,h.value="payment",p.value=null}function re(){h.value="map",p.value=null,v.value=null,g.value&&setTimeout(()=>{g.value.invalidateMapSize()},50)}async function de(){p.value=null,g.value&&setTimeout(async()=>{g.value.restoreMapView(),await g.value.refreshFavorites()},50)}function ge($){const B=JSON.parse(localStorage.getItem("fuelHistory")||"[]");B.unshift({...$,date:new Date().toISOString()}),localStorage.setItem("fuelHistory",JSON.stringify(B)),re()}async function Oe($){h.value="map",g.value&&setTimeout(async()=>{await g.value.refreshFavorites()},50)}function Me(){P.value=!P.value}function J(){O.value=!O.value}return($,B)=>(K(),X(ot,null,[!Bt(e)&&!y.value&&!Bt(n)?(K(),Gi(wg,{key:0,onGuestMode:T})):(K(),X("div",Eb,[m("header",xb,[m("div",Lb,[m("h1",Ob,[B[8]||(B[8]=m("img",{src:zo,alt:"Logo",class:"w-16 h-16"},null,-1)),B[9]||(B[9]=ze(" FuelDock Estonia ",-1)),y.value?(K(),X("span",Cb,"Guest")):me("",!0)]),m("div",Mb,[!y.value&&Bt(e)?(K(),X("button",{key:0,onClick:B[0]||(B[0]=ye=>h.value="favorites"),class:"favorites-btn",title:"My Favorites"},"  ")):me("",!0),!y.value&&Bt(e)?(K(),X("button",{key:1,onClick:B[1]||(B[1]=ye=>h.value="history"),class:"history-btn",title:"Fuel History"},"  ")):me("",!0),!y.value&&Bt(e)&&h.value==="map"?(K(),X("button",{key:2,onClick:Me,class:"filters-btn",title:"Filters"},"  ")):me("",!0),!y.value&&Bt(e)&&h.value==="map"?(K(),X("button",{key:3,onClick:J,class:"map-type-btn-header",title:"Map Type"},"  ")):me("",!0),Bt(r)&&!y.value?(K(),X("button",{key:4,onClick:B[2]||(B[2]=ye=>h.value="admin"),class:"admin-btn",title:"Admin Panel"},"  ")):me("",!0),y.value?(K(),X("button",{key:5,onClick:C,class:"guest-login-btn",title:"Login"},"  Login ")):me("",!0),Bt(e)?(K(),X("button",{key:6,onClick:U,class:"logout-btn",title:"Logout"},"  Logout ")):me("",!0)])])]),m("main",Ib,[h.value==="favorites"?(K(),Gi(q0,{key:0,onBack:re,onViewStation:I,onShowOnMap:Oe})):h.value==="history"?(K(),Gi(h0,{key:1,onBack:re})):h.value==="payment"?(K(),Gi(Xy,{key:2,station:v.value,onBack:re,onComplete:ge},null,8,["station"])):h.value==="admin"?(K(),Gi(Pb,{key:3,onBack:re})):me("",!0),Ae(li(py,{ref_key:"mapViewRef",ref:g,"guest-mode":y.value,"is-admin":Bt(r),"show-filters-from-parent":P.value,"show-map-type-from-parent":O.value,onStationClick:I,onCloseFilters:B[3]||(B[3]=ye=>P.value=!1),onCloseMapType:B[4]||(B[4]=ye=>O.value=!1)},null,8,["guest-mode","is-admin","show-filters-from-parent","show-map-type-from-parent"]),[[om,h.value==="map"]])]),p.value?(K(),Gi(Ny,{key:0,station:p.value,onBack:de,onPay:q},null,8,["station"])):me("",!0)])),A.value?(K(),X("div",{key:2,class:"modal-overlay",onClick:B[7]||(B[7]=ye=>A.value=!1)},[m("div",{class:"login-prompt-modal",onClick:B[6]||(B[6]=$t(()=>{},["stop"]))},[B[10]||(B[10]=m("div",{class:"modal-icon"},"",-1)),B[11]||(B[11]=m("h3",null,"Login Required",-1)),B[12]||(B[12]=m("p",null,"Please login to see marina details and fuel information",-1)),m("div",Rb,[m("button",{onClick:C,class:"login-btn"}," Login / Sign Up "),m("button",{onClick:B[5]||(B[5]=ye=>A.value=!1),class:"cancel-btn"}," Continue Browsing ")])])])):me("",!0),Bt(n)?(K(),X("div",Db,[B[13]||(B[13]=m("img",{src:zo,alt:"FuelDock",class:"loading-logo"},null,-1)),m("div",$b,[m("div",{class:"progress-fill",style:Ts({width:d.value+"%"})},null,4)])])):me("",!0)],64))}},Nb=ji(jb,[["__scopeId","data-v-1b911514"]]);xm(Nb).mount("#app");
