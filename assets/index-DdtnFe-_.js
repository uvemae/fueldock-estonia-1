function rf(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in i)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function na(i){const e=Object.create(null);for(const n of i.split(","))e[n]=1;return n=>n in e}const qe={},Pn=[],li=()=>{},Cu=()=>!1,Er=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),sa=i=>i.startsWith("onUpdate:"),Et=Object.assign,ra=(i,e)=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)},of=Object.prototype.hasOwnProperty,Be=(i,e)=>of.call(i,e),_e=Array.isArray,xn=i=>Ts(i)==="[object Map]",$n=i=>Ts(i)==="[object Set]",Pl=i=>Ts(i)==="[object Date]",Pe=i=>typeof i=="function",at=i=>typeof i=="string",ui=i=>typeof i=="symbol",Ge=i=>i!==null&&typeof i=="object",Mu=i=>(Ge(i)||Pe(i))&&Pe(i.then)&&Pe(i.catch),Iu=Object.prototype.toString,Ts=i=>Iu.call(i),af=i=>Ts(i).slice(8,-1),Ru=i=>Ts(i)==="[object Object]",oa=i=>at(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,as=na(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Lr=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},lf=/-\w/g,Mi=Lr(i=>i.replace(lf,e=>e.slice(1).toUpperCase())),uf=/\B([A-Z])/g,$i=Lr(i=>i.replace(uf,"-$1").toLowerCase()),Du=Lr(i=>i.charAt(0).toUpperCase()+i.slice(1)),fo=Lr(i=>i?`on${Du(i)}`:""),Ci=(i,e)=>!Object.is(i,e),lr=(i,...e)=>{for(let n=0;n<i.length;n++)i[n](...e)},$u=(i,e,n,r=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:r,value:n})},pr=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let xl;const Or=()=>xl||(xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function jn(i){if(_e(i)){const e={};for(let n=0;n<i.length;n++){const r=i[n],o=at(r)?ff(r):jn(r);if(o)for(const a in o)e[a]=o[a]}return e}else if(at(i)||Ge(i))return i}const cf=/;(?![^(]*\))/g,df=/:([^]+)/,hf=/\/\*[^]*?\*\//g;function ff(i){const e={};return i.replace(hf,"").split(cf).forEach(n=>{if(n){const r=n.split(df);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Je(i){let e="";if(at(i))e=i;else if(_e(i))for(let n=0;n<i.length;n++){const r=Je(i[n]);r&&(e+=r+" ")}else if(Ge(i))for(const n in i)i[n]&&(e+=n+" ");return e.trim()}const pf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=na(pf);function ju(i){return!!i||i===""}function vf(i,e){if(i.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<i.length;r++)n=nn(i[r],e[r]);return n}function nn(i,e){if(i===e)return!0;let n=Pl(i),r=Pl(e);if(n||r)return n&&r?i.getTime()===e.getTime():!1;if(n=ui(i),r=ui(e),n||r)return i===e;if(n=_e(i),r=_e(e),n||r)return n&&r?vf(i,e):!1;if(n=Ge(i),r=Ge(e),n||r){if(!n||!r)return!1;const o=Object.keys(i).length,a=Object.keys(e).length;if(o!==a)return!1;for(const u in i){const d=i.hasOwnProperty(u),h=e.hasOwnProperty(u);if(d&&!h||!d&&h||!nn(i[u],e[u]))return!1}}return String(i)===String(e)}function aa(i,e){return i.findIndex(n=>nn(n,e))}const Nu=i=>!!(i&&i.__v_isRef===!0),te=i=>at(i)?i:i==null?"":_e(i)||Ge(i)&&(i.toString===Iu||!Pe(i.toString))?Nu(i)?te(i.value):JSON.stringify(i,Uu,2):String(i),Uu=(i,e)=>Nu(e)?Uu(i,e.value):xn(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],a)=>(n[po(r,a)+" =>"]=o,n),{})}:$n(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>po(n))}:ui(e)?po(e):Ge(e)&&!_e(e)&&!Ru(e)?String(e):e,po=(i,e="")=>{var n;return ui(i)?`Symbol(${(n=i.description)!=null?n:e})`:i};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ct;class _f{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ct,!e&&Ct&&(this.index=(Ct.scopes||(Ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ct;try{return Ct=this,e()}finally{Ct=n}}}on(){++this._on===1&&(this.prevScope=Ct,Ct=this)}off(){this._on>0&&--this._on===0&&(Ct=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function gf(){return Ct}let We;const mo=new WeakSet;class Bu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ct&&Ct.active&&Ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,mo.has(this)&&(mo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,El(this),qu(this);const e=We,n=Xt;We=this,Xt=!0;try{return this.fn()}finally{Vu(this),We=e,Xt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)ca(e);this.deps=this.depsTail=void 0,El(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?mo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Co(this)&&this.run()}get dirty(){return Co(this)}}let Fu=0,ls,us;function zu(i,e=!1){if(i.flags|=8,e){i.next=us,us=i;return}i.next=ls,ls=i}function la(){Fu++}function ua(){if(--Fu>0)return;if(us){let e=us;for(us=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let i;for(;ls;){let e=ls;for(ls=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){i||(i=r)}e=n}}if(i)throw i}function qu(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vu(i){let e,n=i.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),ca(r),yf(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}i.deps=e,i.depsTail=n}function Co(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function Hu(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===_s)||(i.globalVersion=_s,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!Co(i))))return;i.flags|=2;const e=i.dep,n=We,r=Xt;We=i,Xt=!0;try{qu(i);const o=i.fn(i._value);(e.version===0||Ci(o,i._value))&&(i.flags|=128,i._value=o,e.version++)}catch(o){throw e.version++,o}finally{We=n,Xt=r,Vu(i),i.flags&=-3}}function ca(i,e=!1){const{dep:n,prevSub:r,nextSub:o}=i;if(r&&(r.nextSub=o,i.prevSub=void 0),o&&(o.prevSub=r,i.nextSub=void 0),n.subs===i&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)ca(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function yf(i){const{prevDep:e,nextDep:n}=i;e&&(e.nextDep=n,i.prevDep=void 0),n&&(n.prevDep=e,i.nextDep=void 0)}let Xt=!0;const Zu=[];function wi(){Zu.push(Xt),Xt=!1}function Si(){const i=Zu.pop();Xt=i===void 0?!0:i}function El(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let _s=0;class bf{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class da{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Xt||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new bf(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,Ku(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,_s++,this.notify(e)}notify(e){la();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ua()}}}function Ku(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ku(r)}const n=i.dep.subs;n!==i&&(i.prevSub=n,n&&(n.nextSub=i)),i.dep.subs=i}}const Mo=new WeakMap,tn=Symbol(""),Io=Symbol(""),gs=Symbol("");function gt(i,e,n){if(Xt&&We){let r=Mo.get(i);r||Mo.set(i,r=new Map);let o=r.get(n);o||(r.set(n,o=new da),o.map=r,o.key=n),o.track()}}function gi(i,e,n,r,o,a){const u=Mo.get(i);if(!u){_s++;return}const d=h=>{h&&h.trigger()};if(la(),e==="clear")u.forEach(d);else{const h=_e(i),m=h&&oa(n);if(h&&n==="length"){const v=Number(r);u.forEach((g,y)=>{(y==="length"||y===gs||!ui(y)&&y>=v)&&d(g)})}else switch((n!==void 0||u.has(void 0))&&d(u.get(n)),m&&d(u.get(gs)),e){case"add":h?m&&d(u.get("length")):(d(u.get(tn)),xn(i)&&d(u.get(Io)));break;case"delete":h||(d(u.get(tn)),xn(i)&&d(u.get(Io)));break;case"set":xn(i)&&d(u.get(tn));break}}ua()}function vn(i){const e=Ue(i);return e===i?e:(gt(e,"iterate",gs),zt(i)?e:e.map(mt))}function Cr(i){return gt(i=Ue(i),"iterate",gs),i}const wf={__proto__:null,[Symbol.iterator](){return vo(this,Symbol.iterator,mt)},concat(...i){return vn(this).concat(...i.map(e=>_e(e)?vn(e):e))},entries(){return vo(this,"entries",i=>(i[1]=mt(i[1]),i))},every(i,e){return mi(this,"every",i,e,void 0,arguments)},filter(i,e){return mi(this,"filter",i,e,n=>n.map(mt),arguments)},find(i,e){return mi(this,"find",i,e,mt,arguments)},findIndex(i,e){return mi(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return mi(this,"findLast",i,e,mt,arguments)},findLastIndex(i,e){return mi(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return mi(this,"forEach",i,e,void 0,arguments)},includes(...i){return _o(this,"includes",i)},indexOf(...i){return _o(this,"indexOf",i)},join(i){return vn(this).join(i)},lastIndexOf(...i){return _o(this,"lastIndexOf",i)},map(i,e){return mi(this,"map",i,e,void 0,arguments)},pop(){return is(this,"pop")},push(...i){return is(this,"push",i)},reduce(i,...e){return Ll(this,"reduce",i,e)},reduceRight(i,...e){return Ll(this,"reduceRight",i,e)},shift(){return is(this,"shift")},some(i,e){return mi(this,"some",i,e,void 0,arguments)},splice(...i){return is(this,"splice",i)},toReversed(){return vn(this).toReversed()},toSorted(i){return vn(this).toSorted(i)},toSpliced(...i){return vn(this).toSpliced(...i)},unshift(...i){return is(this,"unshift",i)},values(){return vo(this,"values",mt)}};function vo(i,e,n){const r=Cr(i),o=r[e]();return r!==i&&!zt(i)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=n(a.value)),a}),o}const Sf=Array.prototype;function mi(i,e,n,r,o,a){const u=Cr(i),d=u!==i&&!zt(i),h=u[e];if(h!==Sf[e]){const g=h.apply(i,a);return d?mt(g):g}let m=n;u!==i&&(d?m=function(g,y){return n.call(this,mt(g),y,i)}:n.length>2&&(m=function(g,y){return n.call(this,g,y,i)}));const v=h.call(u,m,r);return d&&o?o(v):v}function Ll(i,e,n,r){const o=Cr(i);let a=n;return o!==i&&(zt(i)?n.length>3&&(a=function(u,d,h){return n.call(this,u,d,h,i)}):a=function(u,d,h){return n.call(this,u,mt(d),h,i)}),o[e](a,...r)}function _o(i,e,n){const r=Ue(i);gt(r,"iterate",gs);const o=r[e](...n);return(o===-1||o===!1)&&ma(n[0])?(n[0]=Ue(n[0]),r[e](...n)):o}function is(i,e,n=[]){wi(),la();const r=Ue(i)[e].apply(i,n);return ua(),Si(),r}const Af=na("__proto__,__v_isRef,__isVue"),Wu=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(ui));function kf(i){ui(i)||(i=String(i));const e=Ue(this);return gt(e,"has",i),e.hasOwnProperty(i)}class Gu{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Rf:Qu:a?Xu:Yu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=_e(e);if(!o){let h;if(u&&(h=wf[n]))return h;if(n==="hasOwnProperty")return kf}const d=Reflect.get(e,n,wt(e)?e:r);if((ui(n)?Wu.has(n):Af(n))||(o||gt(e,"get",n),a))return d;if(wt(d)){const h=u&&oa(n)?d:d.value;return o&&Ge(h)?Do(h):h}return Ge(d)?o?Do(d):fa(d):d}}class Ju extends Gu{constructor(e=!1){super(!1,e)}set(e,n,r,o){let a=e[n];if(!this._isShallow){const h=Ii(a);if(!zt(r)&&!Ii(r)&&(a=Ue(a),r=Ue(r)),!_e(e)&&wt(a)&&!wt(r))return h||(a.value=r),!0}const u=_e(e)&&oa(n)?Number(n)<e.length:Be(e,n),d=Reflect.set(e,n,r,wt(e)?e:o);return e===Ue(o)&&(u?Ci(r,a)&&gi(e,"set",n,r):gi(e,"add",n,r)),d}deleteProperty(e,n){const r=Be(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&gi(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!ui(n)||!Wu.has(n))&&gt(e,"has",n),r}ownKeys(e){return gt(e,"iterate",_e(e)?"length":tn),Reflect.ownKeys(e)}}class Tf extends Gu{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Pf=new Ju,xf=new Tf,Ef=new Ju(!0);const Ro=i=>i,Gs=i=>Reflect.getPrototypeOf(i);function Lf(i,e,n){return function(...r){const o=this.__v_raw,a=Ue(o),u=xn(a),d=i==="entries"||i===Symbol.iterator&&u,h=i==="keys"&&u,m=o[i](...r),v=n?Ro:e?mr:mt;return!e&&gt(a,"iterate",h?Io:tn),{next(){const{value:g,done:y}=m.next();return y?{value:g,done:y}:{value:d?[v(g[0]),v(g[1])]:v(g),done:y}},[Symbol.iterator](){return this}}}}function Js(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function Of(i,e){const n={get(o){const a=this.__v_raw,u=Ue(a),d=Ue(o);i||(Ci(o,d)&&gt(u,"get",o),gt(u,"get",d));const{has:h}=Gs(u),m=e?Ro:i?mr:mt;if(h.call(u,o))return m(a.get(o));if(h.call(u,d))return m(a.get(d));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!i&&gt(Ue(o),"iterate",tn),o.size},has(o){const a=this.__v_raw,u=Ue(a),d=Ue(o);return i||(Ci(o,d)&&gt(u,"has",o),gt(u,"has",d)),o===d?a.has(o):a.has(o)||a.has(d)},forEach(o,a){const u=this,d=u.__v_raw,h=Ue(d),m=e?Ro:i?mr:mt;return!i&&gt(h,"iterate",tn),d.forEach((v,g)=>o.call(a,m(v),m(g),u))}};return Et(n,i?{add:Js("add"),set:Js("set"),delete:Js("delete"),clear:Js("clear")}:{add(o){!e&&!zt(o)&&!Ii(o)&&(o=Ue(o));const a=Ue(this);return Gs(a).has.call(a,o)||(a.add(o),gi(a,"add",o,o)),this},set(o,a){!e&&!zt(a)&&!Ii(a)&&(a=Ue(a));const u=Ue(this),{has:d,get:h}=Gs(u);let m=d.call(u,o);m||(o=Ue(o),m=d.call(u,o));const v=h.call(u,o);return u.set(o,a),m?Ci(a,v)&&gi(u,"set",o,a):gi(u,"add",o,a),this},delete(o){const a=Ue(this),{has:u,get:d}=Gs(a);let h=u.call(a,o);h||(o=Ue(o),h=u.call(a,o)),d&&d.call(a,o);const m=a.delete(o);return h&&gi(a,"delete",o,void 0),m},clear(){const o=Ue(this),a=o.size!==0,u=o.clear();return a&&gi(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Lf(o,i,e)}),n}function ha(i,e){const n=Of(i,e);return(r,o,a)=>o==="__v_isReactive"?!i:o==="__v_isReadonly"?i:o==="__v_raw"?r:Reflect.get(Be(n,o)&&o in r?n:r,o,a)}const Cf={get:ha(!1,!1)},Mf={get:ha(!1,!0)},If={get:ha(!0,!1)};const Yu=new WeakMap,Xu=new WeakMap,Qu=new WeakMap,Rf=new WeakMap;function Df(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $f(i){return i.__v_skip||!Object.isExtensible(i)?0:Df(af(i))}function fa(i){return Ii(i)?i:pa(i,!1,Pf,Cf,Yu)}function jf(i){return pa(i,!1,Ef,Mf,Xu)}function Do(i){return pa(i,!0,xf,If,Qu)}function pa(i,e,n,r,o){if(!Ge(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const a=$f(i);if(a===0)return i;const u=o.get(i);if(u)return u;const d=new Proxy(i,a===2?r:n);return o.set(i,d),d}function En(i){return Ii(i)?En(i.__v_raw):!!(i&&i.__v_isReactive)}function Ii(i){return!!(i&&i.__v_isReadonly)}function zt(i){return!!(i&&i.__v_isShallow)}function ma(i){return i?!!i.__v_raw:!1}function Ue(i){const e=i&&i.__v_raw;return e?Ue(e):i}function Nf(i){return!Be(i,"__v_skip")&&Object.isExtensible(i)&&$u(i,"__v_skip",!0),i}const mt=i=>Ge(i)?fa(i):i,mr=i=>Ge(i)?Do(i):i;function wt(i){return i?i.__v_isRef===!0:!1}function re(i){return Uf(i,!1)}function Uf(i,e){return wt(i)?i:new Bf(i,e)}class Bf{constructor(e,n){this.dep=new da,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Ue(e),this._value=n?e:mt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||zt(e)||Ii(e);e=r?e:Ue(e),Ci(e,n)&&(this._rawValue=e,this._value=r?e:mt(e),this.dep.trigger())}}function dt(i){return wt(i)?i.value:i}const Ff={get:(i,e,n)=>e==="__v_raw"?i:dt(Reflect.get(i,e,n)),set:(i,e,n,r)=>{const o=i[e];return wt(o)&&!wt(n)?(o.value=n,!0):Reflect.set(i,e,n,r)}};function ec(i){return En(i)?i:new Proxy(i,Ff)}class zf{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new da(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=_s-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return zu(this,!0),!0}get value(){const e=this.dep.track();return Hu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qf(i,e,n=!1){let r,o;return Pe(i)?r=i:(r=i.get,o=i.set),new zf(r,o,n)}const Ys={},vr=new WeakMap;let Gi;function Vf(i,e=!1,n=Gi){if(n){let r=vr.get(n);r||vr.set(n,r=[]),r.push(i)}}function Hf(i,e,n=qe){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:d,call:h}=n,m=B=>o?B:zt(B)||o===!1||o===0?yi(B,1):yi(B);let v,g,y,A,P=!1,O=!1;if(wt(i)?(g=()=>i.value,P=zt(i)):En(i)?(g=()=>m(i),P=!0):_e(i)?(O=!0,P=i.some(B=>En(B)||zt(B)),g=()=>i.map(B=>{if(wt(B))return B.value;if(En(B))return m(B);if(Pe(B))return h?h(B,2):B()})):Pe(i)?e?g=h?()=>h(i,2):i:g=()=>{if(y){wi();try{y()}finally{Si()}}const B=Gi;Gi=v;try{return h?h(i,3,[A]):i(A)}finally{Gi=B}}:g=li,e&&o){const B=g,ue=o===!0?1/0:o;g=()=>yi(B(),ue)}const k=gf(),N=()=>{v.stop(),k&&k.active&&ra(k.effects,v)};if(a&&e){const B=e;e=(...ue)=>{B(...ue),N()}}let R=O?new Array(i.length).fill(Ys):Ys;const M=B=>{if(!(!(v.flags&1)||!v.dirty&&!B))if(e){const ue=v.run();if(o||P||(O?ue.some((le,ge)=>Ci(le,R[ge])):Ci(ue,R))){y&&y();const le=Gi;Gi=v;try{const ge=[ue,R===Ys?void 0:O&&R[0]===Ys?[]:R,A];R=ue,h?h(e,3,ge):e(...ge)}finally{Gi=le}}}else v.run()};return d&&d(M),v=new Bu(g),v.scheduler=u?()=>u(M,!1):M,A=B=>Vf(B,!1,v),y=v.onStop=()=>{const B=vr.get(v);if(B){if(h)h(B,4);else for(const ue of B)ue();vr.delete(v)}},e?r?M(!0):R=v.run():u?u(M.bind(null,!0),!0):v.run(),N.pause=v.pause.bind(v),N.resume=v.resume.bind(v),N.stop=N,N}function yi(i,e=1/0,n){if(e<=0||!Ge(i)||i.__v_skip||(n=n||new Map,(n.get(i)||0)>=e))return i;if(n.set(i,e),e--,wt(i))yi(i.value,e,n);else if(_e(i))for(let r=0;r<i.length;r++)yi(i[r],e,n);else if($n(i)||xn(i))i.forEach(r=>{yi(r,e,n)});else if(Ru(i)){for(const r in i)yi(i[r],e,n);for(const r of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,r)&&yi(i[r],e,n)}return i}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ps(i,e,n,r){try{return r?i(...r):i()}catch(o){Mr(o,e,n)}}function ci(i,e,n,r){if(Pe(i)){const o=Ps(i,e,n,r);return o&&Mu(o)&&o.catch(a=>{Mr(a,e,n)}),o}if(_e(i)){const o=[];for(let a=0;a<i.length;a++)o.push(ci(i[a],e,n,r));return o}}function Mr(i,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||qe;if(e){let d=e.parent;const h=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const v=d.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](i,h,m)===!1)return}d=d.parent}if(a){wi(),Ps(a,null,10,[i,h,m]),Si();return}}Zf(i,n,o,r,u)}function Zf(i,e,n,r=!0,o=!1){if(o)throw i;console.error(i)}const Tt=[];let oi=-1;const Ln=[];let xi=null,An=0;const tc=Promise.resolve();let _r=null;function ic(i){const e=_r||tc;return i?e.then(this?i.bind(this):i):e}function Kf(i){let e=oi+1,n=Tt.length;for(;e<n;){const r=e+n>>>1,o=Tt[r],a=ys(o);a<i||a===i&&o.flags&2?e=r+1:n=r}return e}function va(i){if(!(i.flags&1)){const e=ys(i),n=Tt[Tt.length-1];!n||!(i.flags&2)&&e>=ys(n)?Tt.push(i):Tt.splice(Kf(e),0,i),i.flags|=1,nc()}}function nc(){_r||(_r=tc.then(rc))}function Wf(i){_e(i)?Ln.push(...i):xi&&i.id===-1?xi.splice(An+1,0,i):i.flags&1||(Ln.push(i),i.flags|=1),nc()}function Ol(i,e,n=oi+1){for(;n<Tt.length;n++){const r=Tt[n];if(r&&r.flags&2){if(i&&r.id!==i.uid)continue;Tt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sc(i){if(Ln.length){const e=[...new Set(Ln)].sort((n,r)=>ys(n)-ys(r));if(Ln.length=0,xi){xi.push(...e);return}for(xi=e,An=0;An<xi.length;An++){const n=xi[An];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}xi=null,An=0}}const ys=i=>i.id==null?i.flags&2?-1:1/0:i.id;function rc(i){try{for(oi=0;oi<Tt.length;oi++){const e=Tt[oi];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Ps(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;oi<Tt.length;oi++){const e=Tt[oi];e&&(e.flags&=-2)}oi=-1,Tt.length=0,sc(),_r=null,(Tt.length||Ln.length)&&rc()}}let Ft=null,oc=null;function gr(i){const e=Ft;return Ft=i,oc=i&&i.type.__scopeId||null,e}function Gf(i,e=Ft,n){if(!e||i._n)return i;const r=(...o)=>{r._d&&Bl(-1);const a=gr(e);let u;try{u=i(...o)}finally{gr(a),r._d&&Bl(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function we(i,e){if(Ft===null)return i;const n=$r(Ft),r=i.dirs||(i.dirs=[]);for(let o=0;o<e.length;o++){let[a,u,d,h=qe]=e[o];a&&(Pe(a)&&(a={mounted:a,updated:a}),a.deep&&yi(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:d,modifiers:h}))}return i}function Hi(i,e,n,r){const o=i.dirs,a=e&&e.dirs;for(let u=0;u<o.length;u++){const d=o[u];a&&(d.oldValue=a[u].value);let h=d.dir[r];h&&(wi(),ci(h,n,8,[i.el,d,i,e]),Si())}}const Jf=Symbol("_vte"),Yf=i=>i.__isTeleport,Xf=Symbol("_leaveCb");function _a(i,e){i.shapeFlag&6&&i.component?(i.transition=e,_a(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function ac(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const yr=new WeakMap;function cs(i,e,n,r,o=!1){if(_e(i)){i.forEach((P,O)=>cs(P,e&&(_e(e)?e[O]:e),n,r,o));return}if(ds(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&cs(i,e,n,r.component.subTree);return}const a=r.shapeFlag&4?$r(r.component):r.el,u=o?null:a,{i:d,r:h}=i,m=e&&e.r,v=d.refs===qe?d.refs={}:d.refs,g=d.setupState,y=Ue(g),A=g===qe?Cu:P=>Be(y,P);if(m!=null&&m!==h){if(Cl(e),at(m))v[m]=null,A(m)&&(g[m]=null);else if(wt(m)){m.value=null;const P=e;P.k&&(v[P.k]=null)}}if(Pe(h))Ps(h,d,12,[u,v]);else{const P=at(h),O=wt(h);if(P||O){const k=()=>{if(i.f){const N=P?A(h)?g[h]:v[h]:h.value;if(o)_e(N)&&ra(N,a);else if(_e(N))N.includes(a)||N.push(a);else if(P)v[h]=[a],A(h)&&(g[h]=v[h]);else{const R=[a];h.value=R,i.k&&(v[i.k]=R)}}else P?(v[h]=u,A(h)&&(g[h]=u)):O&&(h.value=u,i.k&&(v[i.k]=u))};if(u){const N=()=>{k(),yr.delete(i)};N.id=-1,yr.set(i,N),Rt(N,n)}else Cl(i),k()}}}function Cl(i){const e=yr.get(i);e&&(e.flags|=8,yr.delete(i))}Or().requestIdleCallback;Or().cancelIdleCallback;const ds=i=>!!i.type.__asyncLoader,lc=i=>i.type.__isKeepAlive;function Qf(i,e){uc(i,"a",e)}function ep(i,e){uc(i,"da",e)}function uc(i,e,n=xt){const r=i.__wdc||(i.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return i()});if(Ir(e,r,n),n){let o=n.parent;for(;o&&o.parent;)lc(o.parent.vnode)&&tp(r,e,n,o),o=o.parent}}function tp(i,e,n,r){const o=Ir(e,i,r,!0);cc(()=>{ra(r[e],o)},n)}function Ir(i,e,n=xt,r=!1){if(n){const o=n[i]||(n[i]=[]),a=e.__weh||(e.__weh=(...u)=>{wi();const d=xs(n),h=ci(e,n,i,u);return d(),Si(),h});return r?o.unshift(a):o.push(a),a}}const Ai=i=>(e,n=xt)=>{(!ws||i==="sp")&&Ir(i,(...r)=>e(...r),n)},ip=Ai("bm"),Nn=Ai("m"),np=Ai("bu"),sp=Ai("u"),rp=Ai("bum"),cc=Ai("um"),op=Ai("sp"),ap=Ai("rtg"),lp=Ai("rtc");function up(i,e=xt){Ir("ec",i,e)}const cp=Symbol.for("v-ndc");function Qt(i,e,n,r){let o;const a=n,u=_e(i);if(u||at(i)){const d=u&&En(i);let h=!1,m=!1;d&&(h=!zt(i),m=Ii(i),i=Cr(i)),o=new Array(i.length);for(let v=0,g=i.length;v<g;v++)o[v]=e(h?m?mr(mt(i[v])):mt(i[v]):i[v],v,void 0,a)}else if(typeof i=="number"){o=new Array(i);for(let d=0;d<i;d++)o[d]=e(d+1,d,void 0,a)}else if(Ge(i))if(i[Symbol.iterator])o=Array.from(i,(d,h)=>e(d,h,void 0,a));else{const d=Object.keys(i);o=new Array(d.length);for(let h=0,m=d.length;h<m;h++){const v=d[h];o[h]=e(i[v],v,h,a)}}else o=[];return o}const $o=i=>i?Cc(i)?$r(i):$o(i.parent):null,hs=Et(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>$o(i.parent),$root:i=>$o(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>hc(i),$forceUpdate:i=>i.f||(i.f=()=>{va(i.update)}),$nextTick:i=>i.n||(i.n=ic.bind(i.proxy)),$watch:i=>Mp.bind(i)}),go=(i,e)=>i!==qe&&!i.__isScriptSetup&&Be(i,e),dp={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:d,appContext:h}=i;let m;if(e[0]!=="$"){const A=u[e];if(A!==void 0)switch(A){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(go(r,e))return u[e]=1,r[e];if(o!==qe&&Be(o,e))return u[e]=2,o[e];if((m=i.propsOptions[0])&&Be(m,e))return u[e]=3,a[e];if(n!==qe&&Be(n,e))return u[e]=4,n[e];jo&&(u[e]=0)}}const v=hs[e];let g,y;if(v)return e==="$attrs"&&gt(i.attrs,"get",""),v(i);if((g=d.__cssModules)&&(g=g[e]))return g;if(n!==qe&&Be(n,e))return u[e]=4,n[e];if(y=h.config.globalProperties,Be(y,e))return y[e]},set({_:i},e,n){const{data:r,setupState:o,ctx:a}=i;return go(o,e)?(o[e]=n,!0):r!==qe&&Be(r,e)?(r[e]=n,!0):Be(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(a[e]=n,!0)},has({_:{data:i,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a,type:u}},d){let h,m;return!!(n[d]||i!==qe&&d[0]!=="$"&&Be(i,d)||go(e,d)||(h=a[0])&&Be(h,d)||Be(r,d)||Be(hs,d)||Be(o.config.globalProperties,d)||(m=u.__cssModules)&&m[d])},defineProperty(i,e,n){return n.get!=null?i._.accessCache[e]=0:Be(n,"value")&&this.set(i,e,n.value,null),Reflect.defineProperty(i,e,n)}};function Ml(i){return _e(i)?i.reduce((e,n)=>(e[n]=null,e),{}):i}let jo=!0;function hp(i){const e=hc(i),n=i.proxy,r=i.ctx;jo=!1,e.beforeCreate&&Il(e.beforeCreate,i,"bc");const{data:o,computed:a,methods:u,watch:d,provide:h,inject:m,created:v,beforeMount:g,mounted:y,beforeUpdate:A,updated:P,activated:O,deactivated:k,beforeDestroy:N,beforeUnmount:R,destroyed:M,unmounted:B,render:ue,renderTracked:le,renderTriggered:ge,errorCaptured:Le,serverPrefetch:Oe,expose:H,inheritAttrs:E,components:z,directives:F,filters:Y}=e;if(m&&fp(m,r,null),u)for(const ke in u){const ie=u[ke];Pe(ie)&&(r[ke]=ie.bind(n))}if(o){const ke=o.call(n,n);Ge(ke)&&(i.data=fa(ke))}if(jo=!0,a)for(const ke in a){const ie=a[ke],ht=Pe(ie)?ie.bind(n,n):Pe(ie.get)?ie.get.bind(n,n):li,pe=!Pe(ie)&&Pe(ie.set)?ie.set.bind(n):li,Re=bt({get:ht,set:pe});Object.defineProperty(r,ke,{enumerable:!0,configurable:!0,get:()=>Re.value,set:ze=>Re.value=ze})}if(d)for(const ke in d)dc(d[ke],r,n,ke);if(h){const ke=Pe(h)?h.call(n):h;Reflect.ownKeys(ke).forEach(ie=>{yp(ie,ke[ie])})}v&&Il(v,i,"c");function J(ke,ie){_e(ie)?ie.forEach(ht=>ke(ht.bind(n))):ie&&ke(ie.bind(n))}if(J(ip,g),J(Nn,y),J(np,A),J(sp,P),J(Qf,O),J(ep,k),J(up,Le),J(lp,le),J(ap,ge),J(rp,R),J(cc,B),J(op,Oe),_e(H))if(H.length){const ke=i.exposed||(i.exposed={});H.forEach(ie=>{Object.defineProperty(ke,ie,{get:()=>n[ie],set:ht=>n[ie]=ht,enumerable:!0})})}else i.exposed||(i.exposed={});ue&&i.render===li&&(i.render=ue),E!=null&&(i.inheritAttrs=E),z&&(i.components=z),F&&(i.directives=F),Oe&&ac(i)}function fp(i,e,n=li){_e(i)&&(i=No(i));for(const r in i){const o=i[r];let a;Ge(o)?"default"in o?a=ur(o.from||r,o.default,!0):a=ur(o.from||r):a=ur(o),wt(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function Il(i,e,n){ci(_e(i)?i.map(r=>r.bind(e.proxy)):i.bind(e.proxy),e,n)}function dc(i,e,n,r){let o=r.includes(".")?Tc(n,r):()=>n[r];if(at(i)){const a=e[i];Pe(a)&&cr(o,a)}else if(Pe(i))cr(o,i.bind(n));else if(Ge(i))if(_e(i))i.forEach(a=>dc(a,e,n,r));else{const a=Pe(i.handler)?i.handler.bind(n):e[i.handler];Pe(a)&&cr(o,a,i)}}function hc(i){const e=i.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=i.appContext,d=a.get(e);let h;return d?h=d:!o.length&&!n&&!r?h=e:(h={},o.length&&o.forEach(m=>br(h,m,u,!0)),br(h,e,u)),Ge(e)&&a.set(e,h),h}function br(i,e,n,r=!1){const{mixins:o,extends:a}=e;a&&br(i,a,n,!0),o&&o.forEach(u=>br(i,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const d=pp[u]||n&&n[u];i[u]=d?d(i[u],e[u]):e[u]}return i}const pp={data:Rl,props:Dl,emits:Dl,methods:rs,computed:rs,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:rs,directives:rs,watch:vp,provide:Rl,inject:mp};function Rl(i,e){return e?i?function(){return Et(Pe(i)?i.call(this,this):i,Pe(e)?e.call(this,this):e)}:e:i}function mp(i,e){return rs(No(i),No(e))}function No(i){if(_e(i)){const e={};for(let n=0;n<i.length;n++)e[i[n]]=i[n];return e}return i}function At(i,e){return i?[...new Set([].concat(i,e))]:e}function rs(i,e){return i?Et(Object.create(null),i,e):e}function Dl(i,e){return i?_e(i)&&_e(e)?[...new Set([...i,...e])]:Et(Object.create(null),Ml(i),Ml(e??{})):e}function vp(i,e){if(!i)return e;if(!e)return i;const n=Et(Object.create(null),i);for(const r in e)n[r]=At(i[r],e[r]);return n}function fc(){return{app:null,config:{isNativeTag:Cu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _p=0;function gp(i,e){return function(r,o=null){Pe(r)||(r=Et({},r)),o!=null&&!Ge(o)&&(o=null);const a=fc(),u=new WeakSet,d=[];let h=!1;const m=a.app={_uid:_p++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:tm,get config(){return a.config},set config(v){},use(v,...g){return u.has(v)||(v&&Pe(v.install)?(u.add(v),v.install(m,...g)):Pe(v)&&(u.add(v),v(m,...g))),m},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),m},component(v,g){return g?(a.components[v]=g,m):a.components[v]},directive(v,g){return g?(a.directives[v]=g,m):a.directives[v]},mount(v,g,y){if(!h){const A=m._ceVNode||ei(r,o);return A.appContext=a,y===!0?y="svg":y===!1&&(y=void 0),i(A,v,y),h=!0,m._container=v,v.__vue_app__=m,$r(A.component)}},onUnmount(v){d.push(v)},unmount(){h&&(ci(d,m._instance,16),i(null,m._container),delete m._container.__vue_app__)},provide(v,g){return a.provides[v]=g,m},runWithContext(v){const g=On;On=m;try{return v()}finally{On=g}}};return m}}let On=null;function yp(i,e){if(xt){let n=xt.provides;const r=xt.parent&&xt.parent.provides;r===n&&(n=xt.provides=Object.create(r)),n[i]=e}}function ur(i,e,n=!1){const r=Gp();if(r||On){let o=On?On._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&i in o)return o[i];if(arguments.length>1)return n&&Pe(e)?e.call(r&&r.proxy):e}}const pc={},mc=()=>Object.create(pc),vc=i=>Object.getPrototypeOf(i)===pc;function bp(i,e,n,r=!1){const o={},a=mc();i.propsDefaults=Object.create(null),_c(i,e,o,a);for(const u in i.propsOptions[0])u in o||(o[u]=void 0);n?i.props=r?o:jf(o):i.type.props?i.props=o:i.props=a,i.attrs=a}function wp(i,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=i,d=Ue(o),[h]=i.propsOptions;let m=!1;if((r||u>0)&&!(u&16)){if(u&8){const v=i.vnode.dynamicProps;for(let g=0;g<v.length;g++){let y=v[g];if(Rr(i.emitsOptions,y))continue;const A=e[y];if(h)if(Be(a,y))A!==a[y]&&(a[y]=A,m=!0);else{const P=Mi(y);o[P]=Uo(h,d,P,A,i,!1)}else A!==a[y]&&(a[y]=A,m=!0)}}}else{_c(i,e,o,a)&&(m=!0);let v;for(const g in d)(!e||!Be(e,g)&&((v=$i(g))===g||!Be(e,v)))&&(h?n&&(n[g]!==void 0||n[v]!==void 0)&&(o[g]=Uo(h,d,g,void 0,i,!0)):delete o[g]);if(a!==d)for(const g in a)(!e||!Be(e,g))&&(delete a[g],m=!0)}m&&gi(i.attrs,"set","")}function _c(i,e,n,r){const[o,a]=i.propsOptions;let u=!1,d;if(e)for(let h in e){if(as(h))continue;const m=e[h];let v;o&&Be(o,v=Mi(h))?!a||!a.includes(v)?n[v]=m:(d||(d={}))[v]=m:Rr(i.emitsOptions,h)||(!(h in r)||m!==r[h])&&(r[h]=m,u=!0)}if(a){const h=Ue(n),m=d||qe;for(let v=0;v<a.length;v++){const g=a[v];n[g]=Uo(o,h,g,m[g],i,!Be(m,g))}}return u}function Uo(i,e,n,r,o,a){const u=i[n];if(u!=null){const d=Be(u,"default");if(d&&r===void 0){const h=u.default;if(u.type!==Function&&!u.skipFactory&&Pe(h)){const{propsDefaults:m}=o;if(n in m)r=m[n];else{const v=xs(o);r=m[n]=h.call(null,e),v()}}else r=h;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!d?r=!1:u[1]&&(r===""||r===$i(n))&&(r=!0))}return r}const Sp=new WeakMap;function gc(i,e,n=!1){const r=n?Sp:e.propsCache,o=r.get(i);if(o)return o;const a=i.props,u={},d=[];let h=!1;if(!Pe(i)){const v=g=>{h=!0;const[y,A]=gc(g,e,!0);Et(u,y),A&&d.push(...A)};!n&&e.mixins.length&&e.mixins.forEach(v),i.extends&&v(i.extends),i.mixins&&i.mixins.forEach(v)}if(!a&&!h)return Ge(i)&&r.set(i,Pn),Pn;if(_e(a))for(let v=0;v<a.length;v++){const g=Mi(a[v]);$l(g)&&(u[g]=qe)}else if(a)for(const v in a){const g=Mi(v);if($l(g)){const y=a[v],A=u[g]=_e(y)||Pe(y)?{type:y}:Et({},y),P=A.type;let O=!1,k=!0;if(_e(P))for(let N=0;N<P.length;++N){const R=P[N],M=Pe(R)&&R.name;if(M==="Boolean"){O=!0;break}else M==="String"&&(k=!1)}else O=Pe(P)&&P.name==="Boolean";A[0]=O,A[1]=k,(O||Be(A,"default"))&&d.push(g)}}const m=[u,d];return Ge(i)&&r.set(i,m),m}function $l(i){return i[0]!=="$"&&!as(i)}const ga=i=>i==="_"||i==="_ctx"||i==="$stable",ya=i=>_e(i)?i.map(ai):[ai(i)],Ap=(i,e,n)=>{if(e._n)return e;const r=Gf((...o)=>ya(e(...o)),n);return r._c=!1,r},yc=(i,e,n)=>{const r=i._ctx;for(const o in i){if(ga(o))continue;const a=i[o];if(Pe(a))e[o]=Ap(o,a,r);else if(a!=null){const u=ya(a);e[o]=()=>u}}},bc=(i,e)=>{const n=ya(e);i.slots.default=()=>n},wc=(i,e,n)=>{for(const r in e)(n||!ga(r))&&(i[r]=e[r])},kp=(i,e,n)=>{const r=i.slots=mc();if(i.vnode.shapeFlag&32){const o=e._;o?(wc(r,e,n),n&&$u(r,"_",o,!0)):yc(e,r)}else e&&bc(i,e)},Tp=(i,e,n)=>{const{vnode:r,slots:o}=i;let a=!0,u=qe;if(r.shapeFlag&32){const d=e._;d?n&&d===1?a=!1:wc(o,e,n):(a=!e.$stable,yc(e,o)),u=e}else e&&(bc(i,e),u={default:1});if(a)for(const d in o)!ga(d)&&u[d]==null&&delete o[d]},Rt=Bp;function Pp(i){return xp(i)}function xp(i,e){const n=Or();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:d,createComment:h,setText:m,setElementText:v,parentNode:g,nextSibling:y,setScopeId:A=li,insertStaticContent:P}=i,O=(b,T,D,W=null,q=null,U=null,ee=void 0,Q=null,X=!!T.dynamicChildren)=>{if(b===T)return;b&&!ns(b,T)&&(W=vt(b),ze(b,q,U,!0),b=null),T.patchFlag===-2&&(X=!1,T.dynamicChildren=null);const{type:K,ref:ce,shapeFlag:ne}=T;switch(K){case Dr:k(b,T,D,W);break;case Ri:N(b,T,D,W);break;case dr:b==null&&R(T,D,W,ee);break;case it:z(b,T,D,W,q,U,ee,Q,X);break;default:ne&1?ue(b,T,D,W,q,U,ee,Q,X):ne&6?F(b,T,D,W,q,U,ee,Q,X):(ne&64||ne&128)&&K.process(b,T,D,W,q,U,ee,Q,X,Vt)}ce!=null&&q?cs(ce,b&&b.ref,U,T||b,!T):ce==null&&b&&b.ref!=null&&cs(b.ref,null,U,b,!0)},k=(b,T,D,W)=>{if(b==null)r(T.el=d(T.children),D,W);else{const q=T.el=b.el;T.children!==b.children&&m(q,T.children)}},N=(b,T,D,W)=>{b==null?r(T.el=h(T.children||""),D,W):T.el=b.el},R=(b,T,D,W)=>{[b.el,b.anchor]=P(b.children,T,D,W,b.el,b.anchor)},M=({el:b,anchor:T},D,W)=>{let q;for(;b&&b!==T;)q=y(b),r(b,D,W),b=q;r(T,D,W)},B=({el:b,anchor:T})=>{let D;for(;b&&b!==T;)D=y(b),o(b),b=D;o(T)},ue=(b,T,D,W,q,U,ee,Q,X)=>{T.type==="svg"?ee="svg":T.type==="math"&&(ee="mathml"),b==null?le(T,D,W,q,U,ee,Q,X):Oe(b,T,q,U,ee,Q,X)},le=(b,T,D,W,q,U,ee,Q)=>{let X,K;const{props:ce,shapeFlag:ne,transition:de,dirs:me}=b;if(X=b.el=u(b.type,U,ce&&ce.is,ce),ne&8?v(X,b.children):ne&16&&Le(b.children,X,null,W,q,yo(b,U),ee,Q),me&&Hi(b,null,W,"created"),ge(X,b,b.scopeId,ee,W),ce){for(const Ne in ce)Ne!=="value"&&!as(Ne)&&a(X,Ne,null,ce[Ne],U,W);"value"in ce&&a(X,"value",null,ce.value,U),(K=ce.onVnodeBeforeMount)&&ri(K,W,b)}me&&Hi(b,null,W,"beforeMount");const xe=Ep(q,de);xe&&de.beforeEnter(X),r(X,T,D),((K=ce&&ce.onVnodeMounted)||xe||me)&&Rt(()=>{K&&ri(K,W,b),xe&&de.enter(X),me&&Hi(b,null,W,"mounted")},q)},ge=(b,T,D,W,q)=>{if(D&&A(b,D),W)for(let U=0;U<W.length;U++)A(b,W[U]);if(q){let U=q.subTree;if(T===U||xc(U.type)&&(U.ssContent===T||U.ssFallback===T)){const ee=q.vnode;ge(b,ee,ee.scopeId,ee.slotScopeIds,q.parent)}}},Le=(b,T,D,W,q,U,ee,Q,X=0)=>{for(let K=X;K<b.length;K++){const ce=b[K]=Q?Ei(b[K]):ai(b[K]);O(null,ce,T,D,W,q,U,ee,Q)}},Oe=(b,T,D,W,q,U,ee)=>{const Q=T.el=b.el;let{patchFlag:X,dynamicChildren:K,dirs:ce}=T;X|=b.patchFlag&16;const ne=b.props||qe,de=T.props||qe;let me;if(D&&Zi(D,!1),(me=de.onVnodeBeforeUpdate)&&ri(me,D,T,b),ce&&Hi(T,b,D,"beforeUpdate"),D&&Zi(D,!0),(ne.innerHTML&&de.innerHTML==null||ne.textContent&&de.textContent==null)&&v(Q,""),K?H(b.dynamicChildren,K,Q,D,W,yo(T,q),U):ee||ie(b,T,Q,null,D,W,yo(T,q),U,!1),X>0){if(X&16)E(Q,ne,de,D,q);else if(X&2&&ne.class!==de.class&&a(Q,"class",null,de.class,q),X&4&&a(Q,"style",ne.style,de.style,q),X&8){const xe=T.dynamicProps;for(let Ne=0;Ne<xe.length;Ne++){const x=xe[Ne],S=ne[x],$=de[x];($!==S||x==="value")&&a(Q,x,S,$,q,D)}}X&1&&b.children!==T.children&&v(Q,T.children)}else!ee&&K==null&&E(Q,ne,de,D,q);((me=de.onVnodeUpdated)||ce)&&Rt(()=>{me&&ri(me,D,T,b),ce&&Hi(T,b,D,"updated")},W)},H=(b,T,D,W,q,U,ee)=>{for(let Q=0;Q<T.length;Q++){const X=b[Q],K=T[Q],ce=X.el&&(X.type===it||!ns(X,K)||X.shapeFlag&198)?g(X.el):D;O(X,K,ce,null,W,q,U,ee,!0)}},E=(b,T,D,W,q)=>{if(T!==D){if(T!==qe)for(const U in T)!as(U)&&!(U in D)&&a(b,U,T[U],null,q,W);for(const U in D){if(as(U))continue;const ee=D[U],Q=T[U];ee!==Q&&U!=="value"&&a(b,U,Q,ee,q,W)}"value"in D&&a(b,"value",T.value,D.value,q)}},z=(b,T,D,W,q,U,ee,Q,X)=>{const K=T.el=b?b.el:d(""),ce=T.anchor=b?b.anchor:d("");let{patchFlag:ne,dynamicChildren:de,slotScopeIds:me}=T;me&&(Q=Q?Q.concat(me):me),b==null?(r(K,D,W),r(ce,D,W),Le(T.children||[],D,ce,q,U,ee,Q,X)):ne>0&&ne&64&&de&&b.dynamicChildren?(H(b.dynamicChildren,de,D,q,U,ee,Q),(T.key!=null||q&&T===q.subTree)&&Sc(b,T,!0)):ie(b,T,D,ce,q,U,ee,Q,X)},F=(b,T,D,W,q,U,ee,Q,X)=>{T.slotScopeIds=Q,b==null?T.shapeFlag&512?q.ctx.activate(T,D,W,ee,X):Y(T,D,W,q,U,ee,X):j(b,T,X)},Y=(b,T,D,W,q,U,ee)=>{const Q=b.component=Wp(b,W,q);if(lc(b)&&(Q.ctx.renderer=Vt),Jp(Q,!1,ee),Q.asyncDep){if(q&&q.registerDep(Q,J,ee),!b.el){const X=Q.subTree=ei(Ri);N(null,X,T,D),b.placeholder=X.el}}else J(Q,b,T,D,q,U,ee)},j=(b,T,D)=>{const W=T.component=b.component;if(Np(b,T,D))if(W.asyncDep&&!W.asyncResolved){ke(W,T,D);return}else W.next=T,W.update();else T.el=b.el,W.vnode=T},J=(b,T,D,W,q,U,ee)=>{const Q=()=>{if(b.isMounted){let{next:ne,bu:de,u:me,parent:xe,vnode:Ne}=b;{const Ve=Ac(b);if(Ve){ne&&(ne.el=Ne.el,ke(b,ne,ee)),Ve.asyncDep.then(()=>{b.isUnmounted||Q()});return}}let x=ne,S;Zi(b,!1),ne?(ne.el=Ne.el,ke(b,ne,ee)):ne=Ne,de&&lr(de),(S=ne.props&&ne.props.onVnodeBeforeUpdate)&&ri(S,xe,ne,Ne),Zi(b,!0);const $=Nl(b),Te=b.subTree;b.subTree=$,O(Te,$,g(Te.el),vt(Te),b,q,U),ne.el=$.el,x===null&&Up(b,$.el),me&&Rt(me,q),(S=ne.props&&ne.props.onVnodeUpdated)&&Rt(()=>ri(S,xe,ne,Ne),q)}else{let ne;const{el:de,props:me}=T,{bm:xe,m:Ne,parent:x,root:S,type:$}=b,Te=ds(T);Zi(b,!1),xe&&lr(xe),!Te&&(ne=me&&me.onVnodeBeforeMount)&&ri(ne,x,T),Zi(b,!0);{S.ce&&S.ce._def.shadowRoot!==!1&&S.ce._injectChildStyle($);const Ve=b.subTree=Nl(b);O(null,Ve,D,W,b,q,U),T.el=Ve.el}if(Ne&&Rt(Ne,q),!Te&&(ne=me&&me.onVnodeMounted)){const Ve=T;Rt(()=>ri(ne,x,Ve),q)}(T.shapeFlag&256||x&&ds(x.vnode)&&x.vnode.shapeFlag&256)&&b.a&&Rt(b.a,q),b.isMounted=!0,T=D=W=null}};b.scope.on();const X=b.effect=new Bu(Q);b.scope.off();const K=b.update=X.run.bind(X),ce=b.job=X.runIfDirty.bind(X);ce.i=b,ce.id=b.uid,X.scheduler=()=>va(ce),Zi(b,!0),K()},ke=(b,T,D)=>{T.component=b;const W=b.vnode.props;b.vnode=T,b.next=null,wp(b,T.props,W,D),Tp(b,T.children,D),wi(),Ol(b),Si()},ie=(b,T,D,W,q,U,ee,Q,X=!1)=>{const K=b&&b.children,ce=b?b.shapeFlag:0,ne=T.children,{patchFlag:de,shapeFlag:me}=T;if(de>0){if(de&128){pe(K,ne,D,W,q,U,ee,Q,X);return}else if(de&256){ht(K,ne,D,W,q,U,ee,Q,X);return}}me&8?(ce&16&&be(K,q,U),ne!==K&&v(D,ne)):ce&16?me&16?pe(K,ne,D,W,q,U,ee,Q,X):be(K,q,U,!0):(ce&8&&v(D,""),me&16&&Le(ne,D,W,q,U,ee,Q,X))},ht=(b,T,D,W,q,U,ee,Q,X)=>{b=b||Pn,T=T||Pn;const K=b.length,ce=T.length,ne=Math.min(K,ce);let de;for(de=0;de<ne;de++){const me=T[de]=X?Ei(T[de]):ai(T[de]);O(b[de],me,D,null,q,U,ee,Q,X)}K>ce?be(b,q,U,!0,!1,ne):Le(T,D,W,q,U,ee,Q,X,ne)},pe=(b,T,D,W,q,U,ee,Q,X)=>{let K=0;const ce=T.length;let ne=b.length-1,de=ce-1;for(;K<=ne&&K<=de;){const me=b[K],xe=T[K]=X?Ei(T[K]):ai(T[K]);if(ns(me,xe))O(me,xe,D,null,q,U,ee,Q,X);else break;K++}for(;K<=ne&&K<=de;){const me=b[ne],xe=T[de]=X?Ei(T[de]):ai(T[de]);if(ns(me,xe))O(me,xe,D,null,q,U,ee,Q,X);else break;ne--,de--}if(K>ne){if(K<=de){const me=de+1,xe=me<ce?T[me].el:W;for(;K<=de;)O(null,T[K]=X?Ei(T[K]):ai(T[K]),D,xe,q,U,ee,Q,X),K++}}else if(K>de)for(;K<=ne;)ze(b[K],q,U,!0),K++;else{const me=K,xe=K,Ne=new Map;for(K=xe;K<=de;K++){const Se=T[K]=X?Ei(T[K]):ai(T[K]);Se.key!=null&&Ne.set(Se.key,K)}let x,S=0;const $=de-xe+1;let Te=!1,Ve=0;const Me=new Array($);for(K=0;K<$;K++)Me[K]=0;for(K=me;K<=ne;K++){const Se=b[K];if(S>=$){ze(Se,q,U,!0);continue}let $e;if(Se.key!=null)$e=Ne.get(Se.key);else for(x=xe;x<=de;x++)if(Me[x-xe]===0&&ns(Se,T[x])){$e=x;break}$e===void 0?ze(Se,q,U,!0):(Me[$e-xe]=K+1,$e>=Ve?Ve=$e:Te=!0,O(Se,T[$e],D,null,q,U,ee,Q,X),S++)}const Ye=Te?Lp(Me):Pn;for(x=Ye.length-1,K=$-1;K>=0;K--){const Se=xe+K,$e=T[Se],et=T[Se+1],_t=Se+1<ce?et.el||et.placeholder:W;Me[K]===0?O(null,$e,D,_t,q,U,ee,Q,X):Te&&(x<0||K!==Ye[x]?Re($e,D,_t,2):x--)}}},Re=(b,T,D,W,q=null)=>{const{el:U,type:ee,transition:Q,children:X,shapeFlag:K}=b;if(K&6){Re(b.component.subTree,T,D,W);return}if(K&128){b.suspense.move(T,D,W);return}if(K&64){ee.move(b,T,D,Vt);return}if(ee===it){r(U,T,D);for(let ne=0;ne<X.length;ne++)Re(X[ne],T,D,W);r(b.anchor,T,D);return}if(ee===dr){M(b,T,D);return}if(W!==2&&K&1&&Q)if(W===0)Q.beforeEnter(U),r(U,T,D),Rt(()=>Q.enter(U),q);else{const{leave:ne,delayLeave:de,afterLeave:me}=Q,xe=()=>{b.ctx.isUnmounted?o(U):r(U,T,D)},Ne=()=>{U._isLeaving&&U[Xf](!0),ne(U,()=>{xe(),me&&me()})};de?de(U,xe,Ne):Ne()}else r(U,T,D)},ze=(b,T,D,W=!1,q=!1)=>{const{type:U,props:ee,ref:Q,children:X,dynamicChildren:K,shapeFlag:ce,patchFlag:ne,dirs:de,cacheIndex:me}=b;if(ne===-2&&(q=!1),Q!=null&&(wi(),cs(Q,null,D,b,!0),Si()),me!=null&&(T.renderCache[me]=void 0),ce&256){T.ctx.deactivate(b);return}const xe=ce&1&&de,Ne=!ds(b);let x;if(Ne&&(x=ee&&ee.onVnodeBeforeUnmount)&&ri(x,T,b),ce&6)De(b.component,D,W);else{if(ce&128){b.suspense.unmount(D,W);return}xe&&Hi(b,null,T,"beforeUnmount"),ce&64?b.type.remove(b,T,D,Vt,W):K&&!K.hasOnce&&(U!==it||ne>0&&ne&64)?be(K,T,D,!1,!0):(U===it&&ne&384||!q&&ce&16)&&be(X,T,D),W&&lt(b)}(Ne&&(x=ee&&ee.onVnodeUnmounted)||xe)&&Rt(()=>{x&&ri(x,T,b),xe&&Hi(b,null,T,"unmounted")},D)},lt=b=>{const{type:T,el:D,anchor:W,transition:q}=b;if(T===it){Fe(D,W);return}if(T===dr){B(b);return}const U=()=>{o(D),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(b.shapeFlag&1&&q&&!q.persisted){const{leave:ee,delayLeave:Q}=q,X=()=>ee(D,U);Q?Q(b.el,U,X):X()}else U()},Fe=(b,T)=>{let D;for(;b!==T;)D=y(b),o(b),b=D;o(T)},De=(b,T,D)=>{const{bum:W,scope:q,job:U,subTree:ee,um:Q,m:X,a:K}=b;jl(X),jl(K),W&&lr(W),q.stop(),U&&(U.flags|=8,ze(ee,b,T,D)),Q&&Rt(Q,T),Rt(()=>{b.isUnmounted=!0},T)},be=(b,T,D,W=!1,q=!1,U=0)=>{for(let ee=U;ee<b.length;ee++)ze(b[ee],T,D,W,q)},vt=b=>{if(b.shapeFlag&6)return vt(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const T=y(b.anchor||b.el),D=T&&T[Jf];return D?y(D):T};let Lt=!1;const Ui=(b,T,D)=>{b==null?T._vnode&&ze(T._vnode,null,null,!0):O(T._vnode||null,b,T,null,null,null,D),T._vnode=b,Lt||(Lt=!0,Ol(),sc(),Lt=!1)},Vt={p:O,um:ze,m:Re,r:lt,mt:Y,mc:Le,pc:ie,pbc:H,n:vt,o:i};return{render:Ui,hydrate:void 0,createApp:gp(Ui)}}function yo({type:i,props:e},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Zi({effect:i,job:e},n){n?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function Ep(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Sc(i,e,n=!1){const r=i.children,o=e.children;if(_e(r)&&_e(o))for(let a=0;a<r.length;a++){const u=r[a];let d=o[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[a]=Ei(o[a]),d.el=u.el),!n&&d.patchFlag!==-2&&Sc(u,d)),d.type===Dr&&d.patchFlag!==-1&&(d.el=u.el),d.type===Ri&&!d.el&&(d.el=u.el)}}function Lp(i){const e=i.slice(),n=[0];let r,o,a,u,d;const h=i.length;for(r=0;r<h;r++){const m=i[r];if(m!==0){if(o=n[n.length-1],i[o]<m){e[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)d=a+u>>1,i[n[d]]<m?a=d+1:u=d;m<i[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function Ac(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ac(e)}function jl(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const Op=Symbol.for("v-scx"),Cp=()=>ur(Op);function cr(i,e,n){return kc(i,e,n)}function kc(i,e,n=qe){const{immediate:r,deep:o,flush:a,once:u}=n,d=Et({},n),h=e&&r||!e&&a!=="post";let m;if(ws){if(a==="sync"){const A=Cp();m=A.__watcherHandles||(A.__watcherHandles=[])}else if(!h){const A=()=>{};return A.stop=li,A.resume=li,A.pause=li,A}}const v=xt;d.call=(A,P,O)=>ci(A,v,P,O);let g=!1;a==="post"?d.scheduler=A=>{Rt(A,v&&v.suspense)}:a!=="sync"&&(g=!0,d.scheduler=(A,P)=>{P?A():va(A)}),d.augmentJob=A=>{e&&(A.flags|=4),g&&(A.flags|=2,v&&(A.id=v.uid,A.i=v))};const y=Hf(i,e,d);return ws&&(m?m.push(y):h&&y()),y}function Mp(i,e,n){const r=this.proxy,o=at(i)?i.includes(".")?Tc(r,i):()=>r[i]:i.bind(r,r);let a;Pe(e)?a=e:(a=e.handler,n=e);const u=xs(this),d=kc(o,a.bind(r),n);return u(),d}function Tc(i,e){const n=e.split(".");return()=>{let r=i;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Ip=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${Mi(e)}Modifiers`]||i[`${$i(e)}Modifiers`];function Rp(i,e,...n){if(i.isUnmounted)return;const r=i.vnode.props||qe;let o=n;const a=e.startsWith("update:"),u=a&&Ip(r,e.slice(7));u&&(u.trim&&(o=n.map(v=>at(v)?v.trim():v)),u.number&&(o=n.map(pr)));let d,h=r[d=fo(e)]||r[d=fo(Mi(e))];!h&&a&&(h=r[d=fo($i(e))]),h&&ci(h,i,6,o);const m=r[d+"Once"];if(m){if(!i.emitted)i.emitted={};else if(i.emitted[d])return;i.emitted[d]=!0,ci(m,i,6,o)}}const Dp=new WeakMap;function Pc(i,e,n=!1){const r=n?Dp:e.emitsCache,o=r.get(i);if(o!==void 0)return o;const a=i.emits;let u={},d=!1;if(!Pe(i)){const h=m=>{const v=Pc(m,e,!0);v&&(d=!0,Et(u,v))};!n&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}return!a&&!d?(Ge(i)&&r.set(i,null),null):(_e(a)?a.forEach(h=>u[h]=null):Et(u,a),Ge(i)&&r.set(i,u),u)}function Rr(i,e){return!i||!Er(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(i,e[0].toLowerCase()+e.slice(1))||Be(i,$i(e))||Be(i,e))}function Nl(i){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:d,emit:h,render:m,renderCache:v,props:g,data:y,setupState:A,ctx:P,inheritAttrs:O}=i,k=gr(i);let N,R;try{if(n.shapeFlag&4){const B=o||r,ue=B;N=ai(m.call(ue,B,v,g,A,y,P)),R=d}else{const B=e;N=ai(B.length>1?B(g,{attrs:d,slots:u,emit:h}):B(g,null)),R=e.props?d:$p(d)}}catch(B){fs.length=0,Mr(B,i,1),N=ei(Ri)}let M=N;if(R&&O!==!1){const B=Object.keys(R),{shapeFlag:ue}=M;B.length&&ue&7&&(a&&B.some(sa)&&(R=jp(R,a)),M=Mn(M,R,!1,!0))}return n.dirs&&(M=Mn(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&_a(M,n.transition),N=M,gr(k),N}const $p=i=>{let e;for(const n in i)(n==="class"||n==="style"||Er(n))&&((e||(e={}))[n]=i[n]);return e},jp=(i,e)=>{const n={};for(const r in i)(!sa(r)||!(r.slice(9)in e))&&(n[r]=i[r]);return n};function Np(i,e,n){const{props:r,children:o,component:a}=i,{props:u,children:d,patchFlag:h}=e,m=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Ul(r,u,m):!!u;if(h&8){const v=e.dynamicProps;for(let g=0;g<v.length;g++){const y=v[g];if(u[y]!==r[y]&&!Rr(m,y))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:r===u?!1:r?u?Ul(r,u,m):!0:!!u;return!1}function Ul(i,e,n){const r=Object.keys(e);if(r.length!==Object.keys(i).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==i[a]&&!Rr(n,a))return!0}return!1}function Up({vnode:i,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===i&&(r.el=i.el),r===i)(i=e.vnode).el=n,e=e.parent;else break}}const xc=i=>i.__isSuspense;function Bp(i,e){e&&e.pendingBranch?_e(i)?e.effects.push(...i):e.effects.push(i):Wf(i)}const it=Symbol.for("v-fgt"),Dr=Symbol.for("v-txt"),Ri=Symbol.for("v-cmt"),dr=Symbol.for("v-stc"),fs=[];let jt=null;function Z(i=!1){fs.push(jt=i?null:[])}function Fp(){fs.pop(),jt=fs[fs.length-1]||null}let bs=1;function Bl(i,e=!1){bs+=i,i<0&&jt&&e&&(jt.hasOnce=!0)}function Ec(i){return i.dynamicChildren=bs>0?jt||Pn:null,Fp(),bs>0&&jt&&jt.push(i),i}function G(i,e,n,r,o,a){return Ec(p(i,e,n,r,o,a,!0))}function Ji(i,e,n,r,o){return Ec(ei(i,e,n,r,o,!0))}function Lc(i){return i?i.__v_isVNode===!0:!1}function ns(i,e){return i.type===e.type&&i.key===e.key}const Oc=({key:i})=>i??null,hr=({ref:i,ref_key:e,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?at(i)||wt(i)||Pe(i)?{i:Ft,r:i,k:e,f:!!n}:i:null);function p(i,e=null,n=null,r=0,o=null,a=i===it?0:1,u=!1,d=!1){const h={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&Oc(e),ref:e&&hr(e),scopeId:oc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:Ft};return d?(ba(h,n),a&128&&i.normalize(h)):n&&(h.shapeFlag|=at(n)?8:16),bs>0&&!u&&jt&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&jt.push(h),h}const ei=zp;function zp(i,e=null,n=null,r=0,o=null,a=!1){if((!i||i===cp)&&(i=Ri),Lc(i)){const d=Mn(i,e,!0);return n&&ba(d,n),bs>0&&!a&&jt&&(d.shapeFlag&6?jt[jt.indexOf(i)]=d:jt.push(d)),d.patchFlag=-2,d}if(em(i)&&(i=i.__vccOpts),e){e=qp(e);let{class:d,style:h}=e;d&&!at(d)&&(e.class=Je(d)),Ge(h)&&(ma(h)&&!_e(h)&&(h=Et({},h)),e.style=jn(h))}const u=at(i)?1:xc(i)?128:Yf(i)?64:Ge(i)?4:Pe(i)?2:0;return p(i,e,n,r,o,u,a,!0)}function qp(i){return i?ma(i)||vc(i)?Et({},i):i:null}function Mn(i,e,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:d,transition:h}=i,m=e?Hp(o||{},e):o,v={__v_isVNode:!0,__v_skip:!0,type:i.type,props:m,key:m&&Oc(m),ref:e&&e.ref?n&&a?_e(a)?a.concat(hr(e)):[a,hr(e)]:hr(e):a,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:d,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==it?u===-1?16:u|16:u,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:h,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Mn(i.ssContent),ssFallback:i.ssFallback&&Mn(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return h&&r&&_a(v,h.clone(v)),v}function Ke(i=" ",e=0){return ei(Dr,null,i,e)}function Vp(i,e){const n=ei(dr,null,i);return n.staticCount=e,n}function oe(i="",e=!1){return e?(Z(),Ji(Ri,null,i)):ei(Ri,null,i)}function ai(i){return i==null||typeof i=="boolean"?ei(Ri):_e(i)?ei(it,null,i.slice()):Lc(i)?Ei(i):ei(Dr,null,String(i))}function Ei(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Mn(i)}function ba(i,e){let n=0;const{shapeFlag:r}=i;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),ba(i,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!vc(e)?e._ctx=Ft:o===3&&Ft&&(Ft.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else Pe(e)?(e={default:e,_ctx:Ft},n=32):(e=String(e),r&64?(n=16,e=[Ke(e)]):n=8);i.children=e,i.shapeFlag|=n}function Hp(...i){const e={};for(let n=0;n<i.length;n++){const r=i[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Je([e.class,r.class]));else if(o==="style")e.style=jn([e.style,r.style]);else if(Er(o)){const a=e[o],u=r[o];u&&a!==u&&!(_e(a)&&a.includes(u))&&(e[o]=a?[].concat(a,u):u)}else o!==""&&(e[o]=r[o])}return e}function ri(i,e,n,r=null){ci(i,e,7,[n,r])}const Zp=fc();let Kp=0;function Wp(i,e,n){const r=i.type,o=(e?e.appContext:i.appContext)||Zp,a={uid:Kp++,vnode:i,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _f(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gc(r,o),emitsOptions:Pc(r,o),emit:null,emitted:null,propsDefaults:qe,inheritAttrs:r.inheritAttrs,ctx:qe,data:qe,props:qe,attrs:qe,slots:qe,refs:qe,setupState:qe,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Rp.bind(null,a),i.ce&&i.ce(a),a}let xt=null;const Gp=()=>xt||Ft;let wr,Bo;{const i=Or(),e=(n,r)=>{let o;return(o=i[n])||(o=i[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};wr=e("__VUE_INSTANCE_SETTERS__",n=>xt=n),Bo=e("__VUE_SSR_SETTERS__",n=>ws=n)}const xs=i=>{const e=xt;return wr(i),i.scope.on(),()=>{i.scope.off(),wr(e)}},Fl=()=>{xt&&xt.scope.off(),wr(null)};function Cc(i){return i.vnode.shapeFlag&4}let ws=!1;function Jp(i,e=!1,n=!1){e&&Bo(e);const{props:r,children:o}=i.vnode,a=Cc(i);bp(i,r,a,e),kp(i,o,n||e);const u=a?Yp(i,e):void 0;return e&&Bo(!1),u}function Yp(i,e){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,dp);const{setup:r}=n;if(r){wi();const o=i.setupContext=r.length>1?Qp(i):null,a=xs(i),u=Ps(r,i,0,[i.props,o]),d=Mu(u);if(Si(),a(),(d||i.sp)&&!ds(i)&&ac(i),d){if(u.then(Fl,Fl),e)return u.then(h=>{zl(i,h)}).catch(h=>{Mr(h,i,0)});i.asyncDep=u}else zl(i,u)}else Mc(i)}function zl(i,e,n){Pe(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Ge(e)&&(i.setupState=ec(e)),Mc(i)}function Mc(i,e,n){const r=i.type;i.render||(i.render=r.render||li);{const o=xs(i);wi();try{hp(i)}finally{Si(),o()}}}const Xp={get(i,e){return gt(i,"get",""),i[e]}};function Qp(i){const e=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,Xp),slots:i.slots,emit:i.emit,expose:e}}function $r(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(ec(Nf(i.exposed)),{get(e,n){if(n in e)return e[n];if(n in hs)return hs[n](i)},has(e,n){return n in e||n in hs}})):i.proxy}function em(i){return Pe(i)&&"__vccOpts"in i}const bt=(i,e)=>qf(i,e,ws),tm="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Fo;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{Fo=ql.createPolicy("vue",{createHTML:i=>i})}catch{}const Ic=Fo?i=>Fo.createHTML(i):i=>i,im="http://www.w3.org/2000/svg",nm="http://www.w3.org/1998/Math/MathML",vi=typeof document<"u"?document:null,Vl=vi&&vi.createElement("template"),sm={insert:(i,e,n)=>{e.insertBefore(i,n||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,n,r)=>{const o=e==="svg"?vi.createElementNS(im,i):e==="mathml"?vi.createElementNS(nm,i):n?vi.createElement(i,{is:n}):vi.createElement(i);return i==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:i=>vi.createTextNode(i),createComment:i=>vi.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>vi.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,n,r,o,a){const u=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Vl.innerHTML=Ic(r==="svg"?`<svg>${i}</svg>`:r==="mathml"?`<math>${i}</math>`:i);const d=Vl.content;if(r==="svg"||r==="mathml"){const h=d.firstChild;for(;h.firstChild;)d.appendChild(h.firstChild);d.removeChild(h)}e.insertBefore(d,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rm=Symbol("_vtc");function om(i,e,n){const r=i[rm];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?i.removeAttribute("class"):n?i.setAttribute("class",e):i.className=e}const Sr=Symbol("_vod"),Rc=Symbol("_vsh"),am={name:"show",beforeMount(i,{value:e},{transition:n}){i[Sr]=i.style.display==="none"?"":i.style.display,n&&e?n.beforeEnter(i):ss(i,e)},mounted(i,{value:e},{transition:n}){n&&e&&n.enter(i)},updated(i,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(i),ss(i,!0),r.enter(i)):r.leave(i,()=>{ss(i,!1)}):ss(i,e))},beforeUnmount(i,{value:e}){ss(i,e)}};function ss(i,e){i.style.display=e?i[Sr]:"none",i[Rc]=!e}const lm=Symbol(""),um=/(?:^|;)\s*display\s*:/;function cm(i,e,n){const r=i.style,o=at(n);let a=!1;if(n&&!o){if(e)if(at(e))for(const u of e.split(";")){const d=u.slice(0,u.indexOf(":")).trim();n[d]==null&&fr(r,d,"")}else for(const u in e)n[u]==null&&fr(r,u,"");for(const u in n)u==="display"&&(a=!0),fr(r,u,n[u])}else if(o){if(e!==n){const u=r[lm];u&&(n+=";"+u),r.cssText=n,a=um.test(n)}}else e&&i.removeAttribute("style");Sr in i&&(i[Sr]=a?r.display:"",i[Rc]&&(r.display="none"))}const Hl=/\s*!important$/;function fr(i,e,n){if(_e(n))n.forEach(r=>fr(i,e,r));else if(n==null&&(n=""),e.startsWith("--"))i.setProperty(e,n);else{const r=dm(i,e);Hl.test(n)?i.setProperty($i(r),n.replace(Hl,""),"important"):i[r]=n}}const Zl=["Webkit","Moz","ms"],bo={};function dm(i,e){const n=bo[e];if(n)return n;let r=Mi(e);if(r!=="filter"&&r in i)return bo[e]=r;r=Du(r);for(let o=0;o<Zl.length;o++){const a=Zl[o]+r;if(a in i)return bo[e]=a}return e}const Kl="http://www.w3.org/1999/xlink";function Wl(i,e,n,r,o,a=mf(e)){r&&e.startsWith("xlink:")?n==null?i.removeAttributeNS(Kl,e.slice(6,e.length)):i.setAttributeNS(Kl,e,n):n==null||a&&!ju(n)?i.removeAttribute(e):i.setAttribute(e,a?"":ui(n)?String(n):n)}function Gl(i,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(i[e]=e==="innerHTML"?Ic(n):n);return}const a=i.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?i.getAttribute("value")||"":i.value,h=n==null?i.type==="checkbox"?"on":"":String(n);(d!==h||!("_value"in i))&&(i.value=h),n==null&&i.removeAttribute(e),i._value=n;return}let u=!1;if(n===""||n==null){const d=typeof i[e];d==="boolean"?n=ju(n):n==null&&d==="string"?(n="",u=!0):d==="number"&&(n=0,u=!0)}try{i[e]=n}catch{}u&&i.removeAttribute(o||e)}function bi(i,e,n,r){i.addEventListener(e,n,r)}function hm(i,e,n,r){i.removeEventListener(e,n,r)}const Jl=Symbol("_vei");function fm(i,e,n,r,o=null){const a=i[Jl]||(i[Jl]={}),u=a[e];if(r&&u)u.value=r;else{const[d,h]=pm(e);if(r){const m=a[e]=_m(r,o);bi(i,d,m,h)}else u&&(hm(i,d,u,h),a[e]=void 0)}}const Yl=/(?:Once|Passive|Capture)$/;function pm(i){let e;if(Yl.test(i)){e={};let r;for(;r=i.match(Yl);)i=i.slice(0,i.length-r[0].length),e[r[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):$i(i.slice(2)),e]}let wo=0;const mm=Promise.resolve(),vm=()=>wo||(mm.then(()=>wo=0),wo=Date.now());function _m(i,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ci(gm(r,n.value),e,5,[r])};return n.value=i,n.attached=vm(),n}function gm(i,e){if(_e(e)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Xl=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,ym=(i,e,n,r,o,a)=>{const u=o==="svg";e==="class"?om(i,r,u):e==="style"?cm(i,n,r):Er(e)?sa(e)||fm(i,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bm(i,e,r,u))?(Gl(i,e,r),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Wl(i,e,r,u,a,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!at(r))?Gl(i,Mi(e),r,a,e):(e==="true-value"?i._trueValue=r:e==="false-value"&&(i._falseValue=r),Wl(i,e,r,u))};function bm(i,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in i&&Xl(e)&&Pe(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=i.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Xl(e)&&at(n)?!1:e in i}const Di=i=>{const e=i.props["onUpdate:modelValue"]||!1;return _e(e)?n=>lr(e,n):e};function wm(i){i.target.composing=!0}function Ql(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const qt=Symbol("_assign"),ot={created(i,{modifiers:{lazy:e,trim:n,number:r}},o){i[qt]=Di(o);const a=r||o.props&&o.props.type==="number";bi(i,e?"change":"input",u=>{if(u.target.composing)return;let d=i.value;n&&(d=d.trim()),a&&(d=pr(d)),i[qt](d)}),n&&bi(i,"change",()=>{i.value=i.value.trim()}),e||(bi(i,"compositionstart",wm),bi(i,"compositionend",Ql),bi(i,"change",Ql))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(i[qt]=Di(u),i.composing)return;const d=(a||i.type==="number")&&!/^0\d/.test(i.value)?pr(i.value):i.value,h=e??"";d!==h&&(document.activeElement===i&&i.type!=="range"&&(r&&e===n||o&&i.value.trim()===h)||(i.value=h))}},It={deep:!0,created(i,e,n){i[qt]=Di(n),bi(i,"change",()=>{const r=i._modelValue,o=In(i),a=i.checked,u=i[qt];if(_e(r)){const d=aa(r,o),h=d!==-1;if(a&&!h)u(r.concat(o));else if(!a&&h){const m=[...r];m.splice(d,1),u(m)}}else if($n(r)){const d=new Set(r);a?d.add(o):d.delete(o),u(d)}else u(Dc(i,a))})},mounted:eu,beforeUpdate(i,e,n){i[qt]=Di(n),eu(i,e,n)}};function eu(i,{value:e,oldValue:n},r){i._modelValue=e;let o;if(_e(e))o=aa(e,r.props.value)>-1;else if($n(e))o=e.has(r.props.value);else{if(e===n)return;o=nn(e,Dc(i,!0))}i.checked!==o&&(i.checked=o)}const Oi={created(i,{value:e},n){i.checked=nn(e,n.props.value),i[qt]=Di(n),bi(i,"change",()=>{i[qt](In(i))})},beforeUpdate(i,{value:e,oldValue:n},r){i[qt]=Di(r),e!==n&&(i.checked=nn(e,r.props.value))}},Sm={deep:!0,created(i,{value:e,modifiers:{number:n}},r){const o=$n(e);bi(i,"change",()=>{const a=Array.prototype.filter.call(i.options,u=>u.selected).map(u=>n?pr(In(u)):In(u));i[qt](i.multiple?o?new Set(a):a:a[0]),i._assigning=!0,ic(()=>{i._assigning=!1})}),i[qt]=Di(r)},mounted(i,{value:e}){tu(i,e)},beforeUpdate(i,e,n){i[qt]=Di(n)},updated(i,{value:e}){i._assigning||tu(i,e)}};function tu(i,e){const n=i.multiple,r=_e(e);if(!(n&&!r&&!$n(e))){for(let o=0,a=i.options.length;o<a;o++){const u=i.options[o],d=In(u);if(n)if(r){const h=typeof d;h==="string"||h==="number"?u.selected=e.some(m=>String(m)===String(d)):u.selected=aa(e,d)>-1}else u.selected=e.has(d);else if(nn(In(u),e)){i.selectedIndex!==o&&(i.selectedIndex=o);return}}!n&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function In(i){return"_value"in i?i._value:i.value}function Dc(i,e){const n=e?"_trueValue":"_falseValue";return n in i?i[n]:e}const Am=["ctrl","shift","alt","meta"],km={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>Am.some(n=>i[`${n}Key`]&&!e.includes(n))},Mt=(i,e)=>{const n=i._withMods||(i._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<e.length;u++){const d=km[e[u]];if(d&&d(o,e))return}return i(o,...a)})},Tm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pm=(i,e)=>{const n=i._withKeys||(i._withKeys={}),r=e.join(".");return n[r]||(n[r]=o=>{if(!("key"in o))return;const a=$i(o.key);if(e.some(u=>u===a||Tm[u]===a))return i(o)})},xm=Et({patchProp:ym},sm);let iu;function Em(){return iu||(iu=Pp(xm))}const Lm=(...i)=>{const e=Em().createApp(...i),{mount:n}=e;return e.mount=r=>{const o=Cm(r);if(!o)return;const a=e._component;!Pe(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,Om(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function Om(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Cm(i){return at(i)?document.querySelector(i):i}const zo="/fueldock-estonia-1/pic/FuelDock-1_no_bg_s.png";var qo=function(i,e){return qo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},qo(i,e)};function $c(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");qo(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var Ar=function(){return Ar=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ar.apply(this,arguments)};function Un(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function jc(i,e,n,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,n,r);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(a=(o<3?u(a):o>3?u(e,n,a):u(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Nc(i,e){return function(n,r){e(n,r,i)}}function Uc(i,e,n,r,o,a){function u(N){if(N!==void 0&&typeof N!="function")throw new TypeError("Function expected");return N}for(var d=r.kind,h=d==="getter"?"get":d==="setter"?"set":"value",m=!e&&i?r.static?i:i.prototype:null,v=e||(m?Object.getOwnPropertyDescriptor(m,r.name):{}),g,y=!1,A=n.length-1;A>=0;A--){var P={};for(var O in r)P[O]=O==="access"?{}:r[O];for(var O in r.access)P.access[O]=r.access[O];P.addInitializer=function(N){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(N||null))};var k=(0,n[A])(d==="accessor"?{get:v.get,set:v.set}:v[h],P);if(d==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(g=u(k.get))&&(v.get=g),(g=u(k.set))&&(v.set=g),(g=u(k.init))&&o.unshift(g)}else(g=u(k))&&(d==="field"?o.unshift(g):v[h]=g)}m&&Object.defineProperty(m,r.name,v),y=!0}function Bc(i,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(i,n):e[o].call(i);return r?n:void 0}function Fc(i){return typeof i=="symbol"?i:"".concat(i)}function zc(i,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function qc(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function ae(i,e,n,r){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(v){try{m(r.next(v))}catch(g){u(g)}}function h(v){try{m(r.throw(v))}catch(g){u(g)}}function m(v){v.done?a(v.value):o(v.value).then(d,h)}m((r=r.apply(i,e||[])).next())})}function Vc(i,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(m){return function(v){return h([m,v])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,o&&(a=m[0]&2?o.return:m[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,m[1])).done)return a;switch(o=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(v){m=[6,v],o=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var jr=Object.create?function(i,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(i,r,o)}:function(i,e,n,r){r===void 0&&(r=n),i[r]=e[n]};function Hc(i,e){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&jr(e,i,n)}function kr(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],r=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wa(i,e){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var r=n.call(i),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return a}function Zc(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(wa(arguments[e]));return i}function Kc(){for(var i=0,e=0,n=arguments.length;e<n;e++)i+=arguments[e].length;for(var r=Array(i),o=0,e=0;e<n;e++)for(var a=arguments[e],u=0,d=a.length;u<d;u++,o++)r[o]=a[u];return r}function Wc(i,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))}function Rn(i){return this instanceof Rn?(this.v=i,this):new Rn(i)}function Gc(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(i,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(A){return function(P){return Promise.resolve(P).then(A,g)}}function d(A,P){r[A]&&(o[A]=function(O){return new Promise(function(k,N){a.push([A,O,k,N])>1||h(A,O)})},P&&(o[A]=P(o[A])))}function h(A,P){try{m(r[A](P))}catch(O){y(a[0][3],O)}}function m(A){A.value instanceof Rn?Promise.resolve(A.value.v).then(v,g):y(a[0][2],A)}function v(A){h("next",A)}function g(A){h("throw",A)}function y(A,P){A(P),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Jc(i){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,a){e[o]=i[o]?function(u){return(n=!n)?{value:Rn(i[o](u)),done:!1}:a?a(u):u}:a}}function Yc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof kr=="function"?kr(i):i[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=i[a]&&function(u){return new Promise(function(d,h){u=i[a](u),o(d,h,u.done,u.value)})}}function o(a,u,d,h){Promise.resolve(h).then(function(m){a({value:m,done:d})},u)}}function Xc(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var Mm=Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e},Vo=function(i){return Vo=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Vo(i)};function Qc(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var n=Vo(i),r=0;r<n.length;r++)n[r]!=="default"&&jr(e,i,n[r]);return Mm(e,i),e}function ed(i){return i&&i.__esModule?i:{default:i}}function td(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)}function id(i,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(i,n):o?o.value=n:e.set(i,n),n}function nd(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function sd(i,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),i.stack.push({value:e,dispose:r,async:n})}else n&&i.stack.push({async:!0});return e}var Im=typeof SuppressedError=="function"?SuppressedError:function(i,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};function rd(i){function e(a){i.error=i.hasError?new Im(a,i.error,"An error was suppressed during disposal."):a,i.hasError=!0}var n,r=0;function o(){for(;n=i.stack.pop();)try{if(!n.async&&r===1)return r=0,i.stack.push(n),Promise.resolve().then(o);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(o,function(u){return e(u),o()})}else r|=1}catch(u){e(u)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function od(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,a,u){return r?e?".jsx":".js":o&&(!a||!u)?n:o+a+"."+u.toLowerCase()+"js"}):i}const Rm={__extends:$c,__assign:Ar,__rest:Un,__decorate:jc,__param:Nc,__esDecorate:Uc,__runInitializers:Bc,__propKey:Fc,__setFunctionName:zc,__metadata:qc,__awaiter:ae,__generator:Vc,__createBinding:jr,__exportStar:Hc,__values:kr,__read:wa,__spread:Zc,__spreadArrays:Kc,__spreadArray:Wc,__await:Rn,__asyncGenerator:Gc,__asyncDelegator:Jc,__asyncValues:Yc,__makeTemplateObject:Xc,__importStar:Qc,__importDefault:ed,__classPrivateFieldGet:td,__classPrivateFieldSet:id,__classPrivateFieldIn:nd,__addDisposableResource:sd,__disposeResources:rd,__rewriteRelativeImportExtension:od},Dm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:sd,get __assign(){return Ar},__asyncDelegator:Jc,__asyncGenerator:Gc,__asyncValues:Yc,__await:Rn,__awaiter:ae,__classPrivateFieldGet:td,__classPrivateFieldIn:nd,__classPrivateFieldSet:id,__createBinding:jr,__decorate:jc,__disposeResources:rd,__esDecorate:Uc,__exportStar:Hc,__extends:$c,__generator:Vc,__importDefault:ed,__importStar:Qc,__makeTemplateObject:Xc,__metadata:qc,__param:Nc,__propKey:Fc,__read:wa,__rest:Un,__rewriteRelativeImportExtension:od,__runInitializers:Bc,__setFunctionName:zc,__spread:Zc,__spreadArray:Wc,__spreadArrays:Kc,__values:kr,default:Rm},Symbol.toStringTag,{value:"Module"})),$m="modulepreload",jm=function(i){return"/fueldock-estonia-1/"+i},nu={},Bn=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=jm(h),h in nu)return;nu[h]=!0;const m=h.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":$m,m||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),m)return new Promise((y,A)=>{g.addEventListener("load",y),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},Nm=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Sa extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class su extends Sa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ru extends Sa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ou extends Sa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Ho;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Ho||(Ho={}));class Um{constructor(e,{headers:n={},customFetch:r,region:o=Ho.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=Nm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ae(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:a,method:u,body:d,signal:h}=r;let m={},{region:v}=r;v||(v=this.region);const g=new URL(`${this.url}/${n}`);v&&v!=="any"&&(m["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let y;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;const A=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:y,signal:h}).catch(N=>{throw N.name==="AbortError"?N:new su(N)}),P=A.headers.get("x-relay-error");if(P&&P==="true")throw new ru(A);if(!A.ok)throw new ou(A);let O=((o=A.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),k;return O==="application/json"?k=yield A.json():O==="application/octet-stream"||O==="application/pdf"?k=yield A.blob():O==="text/event-stream"?k=A:O==="multipart/form-data"?k=yield A.formData():k=yield A.text(),{data:k,error:null,response:A}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new su(a)}:{data:null,error:a,response:a instanceof ou||a instanceof ru?a.context:void 0}}})}}var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ad(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var o=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return i[r]}})}),n}var Pt={};const Fn=ad(Dm);var Xs={},Qs={},er={},tr={},ir={},zm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Dn=zm();const qm=Dn.fetch,ld=Dn.fetch.bind(Dn),ud=Dn.Headers,Vm=Dn.Request,Hm=Dn.Response,sn=Object.freeze(Object.defineProperty({__proto__:null,Headers:ud,Request:Vm,Response:Hm,default:ld,fetch:qm},Symbol.toStringTag,{value:"Module"})),Zm=ad(sn);var nr={},au;function cd(){if(au)return nr;au=1,Object.defineProperty(nr,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return nr.default=i,nr}var lu;function dd(){if(lu)return ir;lu=1,Object.defineProperty(ir,"__esModule",{value:!0});const i=Fn,e=i.__importDefault(Zm),n=i.__importDefault(cd());class r{constructor(a){var u,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,g,y,A;let P=null,O=null,k=null,N=m.status,R=m.statusText;if(m.ok){if(this.method!=="HEAD"){const le=await m.text();le===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?O=le:O=JSON.parse(le))}const B=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),ue=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");B&&ue&&ue.length>1&&(k=parseInt(ue[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(P={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,k=null,N=406,R="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const B=await m.text();try{P=JSON.parse(B),Array.isArray(P)&&m.status===404&&(O=[],P=null,N=200,R="OK")}catch{m.status===404&&B===""?(N=204,R="No Content"):P={message:B}}if(P&&this.isMaybeSingle&&(!((A=P==null?void 0:P.details)===null||A===void 0)&&A.includes("0 rows"))&&(P=null,N=200,R="OK"),P&&this.shouldThrowOnError)throw new n.default(P)}return{error:P,data:O,count:k,status:N,statusText:R}});return this.shouldThrowOnError||(h=h.catch(m=>{var v,g,y;return{error:{message:`${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(g=m==null?void 0:m.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,u)}returns(){return this}overrideTypes(){return this}}return ir.default=r,ir}var uu;function hd(){if(uu)return tr;uu=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=Fn.__importDefault(dd());class n extends e.default{select(o){let a=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(m,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:m="text"}={}){var v;const g=[o?"analyze":null,a?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${g};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return tr.default=n,tr}var cu;function Aa(){if(cu)return er;cu=1,Object.defineProperty(er,"__esModule",{value:!0});const e=Fn.__importDefault(hd()),n=new RegExp("[,()]");class r extends e.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}in(a,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${d})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:d,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const v=d===void 0?"":`(${d})`;return this.url.searchParams.append(a,`${m}fts${v}.${u}`),this}match(a){return Object.entries(a).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(a,u,d){return this.url.searchParams.append(a,`not.${u}.${d}`),this}or(a,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,u,d){return this.url.searchParams.append(a,`${u}.${d}`),this}}return er.default=r,er}var du;function fd(){if(du)return Qs;du=1,Object.defineProperty(Qs,"__esModule",{value:!0});const e=Fn.__importDefault(Aa());class n{constructor(o,{headers:a={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=d}select(o,a){const{head:u=!1,count:d}=a??{},h=u?"HEAD":"GET";let m=!1;const v=(o??"*").split("").map(g=>/\s/.test(g)&&!m?"":(g==='"'&&(m=!m),g)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var d;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(m.length>0){const v=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(g.length>0){const y=[...new Set(g)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:a}={}){var u;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Qs.default=n,Qs}var hu;function Km(){if(hu)return Xs;hu=1,Object.defineProperty(Xs,"__esModule",{value:!0});const i=Fn,e=i.__importDefault(fd()),n=i.__importDefault(Aa());class r{constructor(a,{headers:u={},schema:d,fetch:h}={}){this.url=a,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(a){const u=new URL(`${this.url}/${a}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:d=!1,get:h=!1,count:m}={}){var v;let g;const y=new URL(`${this.url}/rpc/${a}`);let A;d||h?(g=d?"HEAD":"GET",Object.entries(u).filter(([O,k])=>k!==void 0).map(([O,k])=>[O,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([O,k])=>{y.searchParams.append(O,k)})):(g="POST",A=u);const P=new Headers(this.headers);return m&&P.set("Prefer",`count=${m}`),new n.default({method:g,url:y,headers:P,schema:this.schemaName,body:A,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Xs.default=r,Xs}Object.defineProperty(Pt,"__esModule",{value:!0});var pd=Pt.PostgrestError=kd=Pt.PostgrestBuilder=Sd=Pt.PostgrestTransformBuilder=bd=Pt.PostgrestFilterBuilder=gd=Pt.PostgrestQueryBuilder=vd=Pt.PostgrestClient=void 0;const zn=Fn,md=zn.__importDefault(Km());var vd=Pt.PostgrestClient=md.default;const _d=zn.__importDefault(fd());var gd=Pt.PostgrestQueryBuilder=_d.default;const yd=zn.__importDefault(Aa());var bd=Pt.PostgrestFilterBuilder=yd.default;const wd=zn.__importDefault(hd());var Sd=Pt.PostgrestTransformBuilder=wd.default;const Ad=zn.__importDefault(dd());var kd=Pt.PostgrestBuilder=Ad.default;const Td=zn.__importDefault(cd());pd=Pt.PostgrestError=Td.default;var Pd=Pt.default={PostgrestClient:md.default,PostgrestQueryBuilder:_d.default,PostgrestFilterBuilder:yd.default,PostgrestTransformBuilder:wd.default,PostgrestBuilder:Ad.default,PostgrestError:Td.default};const Wm=rf({__proto__:null,get PostgrestBuilder(){return kd},get PostgrestClient(){return vd},get PostgrestError(){return pd},get PostgrestFilterBuilder(){return bd},get PostgrestQueryBuilder(){return gd},get PostgrestTransformBuilder(){return Sd},default:Pd},[Pt]),{PostgrestClient:Gm,PostgrestQueryBuilder:_w,PostgrestFilterBuilder:gw,PostgrestTransformBuilder:yw,PostgrestBuilder:bw,PostgrestError:ww}=Pd||Wm;class Jm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ym="2.78.0",Xm=`realtime-js/${Ym}`,Qm="1.0.0",Zo=1e4,ev=1e3,tv=100;var ps;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ps||(ps={}));var ut;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ut||(ut={}));var Yt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Yt||(Yt={}));var Ko;(function(i){i.websocket="websocket"})(Ko||(Ko={}));var Xi;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(Xi||(Xi={}));class iv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=r.decode(e.slice(u,u+o));u=u+o;const h=r.decode(e.slice(u,u+a));u=u+a;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:h,payload:m}}}class xd{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ze||(Ze={}));const fu=(i,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=nv(u,i,e,o),a),{}):{}},nv=(i,e,n,r)=>{const o=e.find(d=>d.name===i),a=o==null?void 0:o.type,u=n[i];return a&&!r.includes(a)?Ed(a,u):Wo(u)},Ed=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return av(e,n)}switch(i){case Ze.bool:return sv(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return rv(e);case Ze.json:case Ze.jsonb:return ov(e);case Ze.timestamp:return lv(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Wo(e);default:return Wo(e)}},Wo=i=>i,sv=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},rv=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},ov=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},av=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let a;const u=i.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(d=>Ed(e,d))}return i},lv=i=>typeof i=="string"?i.replace(" ","T"):i,Ld=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class So{constructor(e,n,r={},o=Zo){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pu;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(pu||(pu={}));class ms{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ms.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=ms.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=ms.syncDiff(this.state,o,a,u),d())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const a=this.cloneDeep(e),u=this.transformState(n),d={},h={};return this.map(a,(m,v)=>{u[m]||(h[m]=v)}),this.map(u,(m,v)=>{const g=a[m];if(g){const y=v.map(k=>k.presence_ref),A=g.map(k=>k.presence_ref),P=v.filter(k=>A.indexOf(k.presence_ref)<0),O=g.filter(k=>y.indexOf(k.presence_ref)<0);P.length>0&&(d[m]=P),O.length>0&&(h[m]=O)}else d[m]=v}),this.syncDiff(a,{joins:d,leaves:h},r,o)}static syncDiff(e,n,r,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(d,h)=>{var m;const v=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(h),v.length>0){const g=e[d].map(A=>A.presence_ref),y=v.filter(A=>g.indexOf(A.presence_ref)<0);e[d].unshift(...y)}r(d,v,h)}),this.map(u,(d,h)=>{let m=e[d];if(!m)return;const v=h.map(g=>g.presence_ref);m=m.filter(g=>v.indexOf(g.presence_ref)<0),e[d]=m,o(d,m,h),m.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mu;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(mu||(mu={}));var vs;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(vs||(vs={}));var _i;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(_i||(_i={}));class ka{constructor(e,n={config:{}},r){var o,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new So(this,Yt.join,this.params,this.timeout),this.rejoinTimer=new xd(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yt.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new ms(this),this.broadcastEndpointURL=Ld(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[vs.PRESENCE]&&this.bindings[vs.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(_i.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(_i.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:A})=>{var P;if(this.socket.setAuth(),A===void 0){e==null||e(_i.SUBSCRIBED);return}else{const O=this.bindings.postgres_changes,k=(P=O==null?void 0:O.length)!==null&&P!==void 0?P:0,N=[];for(let R=0;R<k;R++){const M=O[R],{filter:{event:B,schema:ue,table:le,filter:ge}}=M,Le=A&&A[R];if(Le&&Le.event===B&&Le.schema===ue&&Le.table===le&&Le.filter===ge)N.push(Object.assign(Object.assign({},M),{id:Le.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(_i.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=N,e&&e(_i.SUBSCRIBED);return}}).receive("error",A=>{this.state=ut.errored,e==null||e(_i.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(_i.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===vs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,d,h;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new So(this,Yt.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new So(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,a;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:m,join:v}=Yt;if(r&&[d,h,m,v].indexOf(u)>=0&&r!==this._joinRef())return;let y=this._onMessage(u,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var P,O,k;return((P=A.filter)===null||P===void 0?void 0:P.event)==="*"||((k=(O=A.filter)===null||O===void 0?void 0:O.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===u}).map(A=>A.callback(y,r)):(a=this.bindings[u])===null||a===void 0||a.filter(A=>{var P,O,k,N,R,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in A){const B=A.id,ue=(P=A.filter)===null||P===void 0?void 0:P.event;return B&&((O=n.ids)===null||O===void 0?void 0:O.includes(B))&&(ue==="*"||(ue==null?void 0:ue.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const B=(R=(N=A==null?void 0:A.filter)===null||N===void 0?void 0:N.event)===null||R===void 0?void 0:R.toLocaleLowerCase();return B==="*"||B===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===u}).map(A=>{if(typeof y=="object"&&"ids"in y){const P=y.data,{schema:O,table:k,commit_timestamp:N,type:R,errors:M}=P;y=Object.assign(Object.assign({},{schema:O,table:k,commit_timestamp:N,eventType:R,new:{},old:{},errors:M}),this._getPayloadRecords(P))}A.callback(y,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&ka.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Yt.close,{},e)}_onError(e){this._on(Yt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fu(e.columns,e.old_record)),n}}const Ao=()=>{},sr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uv=[1e3,2e3,5e3,1e4],cv=1e4,dv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zo,this.transport=null,this.heartbeatIntervalMs=sr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Ao,this.ref=0,this.reconnectTimer=null,this.logger=Ao,this.conn=null,this.sendBuffer=[],this.serializer=new iv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>Bn(async()=>{const{default:d}=await Promise.resolve().then(()=>sn);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Ko.websocket}`,this.httpEndpoint=Ld(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qm}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ps.connecting:return Xi.Connecting;case ps.open:return Xi.Open;case ps.closing:return Xi.Closing;default:return Xi.Closed}}isConnected(){return this.connectionState()===Xi.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new ka(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:o,ref:a}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ev,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},sr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:u}=n,d=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${o} ${d}`.trim(),a),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Yt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([dv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:Xm};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Yt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xd(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},sr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,a,u,d,h,m,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Zo,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:sr.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:Ao,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>uv[g-1]||cv,this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(g,y)=>y(JSON.stringify(g)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Ta extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class fv extends Ta{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Go extends Ta{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const Pa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},pv=()=>ae(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Bn(()=>Promise.resolve().then(()=>sn),void 0)).Response:Response}),Jo=i=>{if(Array.isArray(i))return i.map(n=>Jo(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Jo(r)}),e},mv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},ko=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},vv=(i,e,n)=>ae(void 0,void 0,void 0,function*(){const r=yield pv();i instanceof r&&!(n!=null&&n.noResolveJson)?i.json().then(o=>{const a=i.status||500,u=(o==null?void 0:o.statusCode)||a+"";e(new fv(ko(o),a,u))}).catch(o=>{e(new Go(ko(o),o))}):e(new Go(ko(i),i))}),_v=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?o:(mv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Es(i,e,n,r,o,a){return ae(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,_v(e,r,o,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>vv(h,d,r))})})}function Ss(i,e,n,r){return ae(this,void 0,void 0,function*(){return Es(i,"GET",e,n,r)})}function Jt(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Es(i,"POST",e,r,o,n)})}function Yo(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Es(i,"PUT",e,r,o,n)})}function gv(i,e,n,r){return ae(this,void 0,void 0,function*(){return Es(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function xa(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Es(i,"DELETE",e,r,o,n)})}class yv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var Od;class bv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Od]="BlobDownloadBuilder",this.promise=null}asStream(){return new yv(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}Od=Symbol.toStringTag;const wv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sv{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=Pa(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return ae(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},vu),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const m=this._removeEmptyFolders(n),v=this._getFinalPath(m),g=yield(e=="PUT"?Yo:Jt)(this.fetch,`${this.url}/object/${v}`,a,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}upload(e,n,r){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return ae(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const m=Object.assign({upsert:vu.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",m.cacheControl)):(h=r,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const g=yield Yo(this.fetch,d.toString(),h,{headers:v});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Qe(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ae(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield Jt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),u=new URL(this.url+a.url),d=u.searchParams.get("token");if(!d)throw new Ta("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,n,r){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}copy(e,n,r){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Jt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return ae(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield Jt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return ae(this,void 0,void 0,function*(){try{const o=yield Jt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"",d=this._getFinalPath(e),h=()=>Ss(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new bv(h,this.shouldThrowOnError)}info(e){return ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield Ss(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Jo(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield gv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof Go){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${m}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}list(e,n,r){return ae(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},wv),n),{prefix:e||""});return{data:yield Jt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}listV2(e,n){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Jt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Cd="2.78.0",Md={"X-Client-Info":`storage-js/${Cd}`};class Av{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=Pa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield Ss(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}createBucket(e){return ae(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return ae(this,void 0,void 0,function*(){try{return{data:yield Yo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class kv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=Pa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Jt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield Ss(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield xa(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}}const Ea={"X-Client-Info":`storage-js/${Cd}`,"Content-Type":"application/json"};class Id extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Dt(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class To extends Id{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tv extends Id{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var _u;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_u||(_u={}));const La=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Pv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},gu=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),xv=(i,e,n)=>ae(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const o=i.status||500,a=i;if(typeof a.json=="function")a.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new To(gu(u),o,d))}).catch(()=>{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new To(d,o,u))});else{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new To(d,o,u))}}else e(new Tv(gu(i),i))}),Ev=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return r?(Pv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function Lv(i,e,n,r,o,a){return ae(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,Ev(e,r,o,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>xv(h,d,r))})})}function $t(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Lv(i,"POST",e,r,o,n)})}class Ov{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ea),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield $t(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ae(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}listIndexes(e){return ae(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ae(this,void 0,void 0,function*(){try{return{data:(yield $t(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Dt(r))return{data:null,error:r};throw r}})}}class Cv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ea),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield $t(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}getVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}listVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield $t(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}queryVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield $t(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}}class Mv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ea),n),this.fetch=La(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield $t(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield $t(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}listBuckets(){return ae(this,arguments,void 0,function*(e={}){try{return{data:yield $t(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield $t(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Dt(n))return{data:null,error:n};throw n}})}}class Iv extends Mv{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Rv(this.url,this.headers,e,this.fetch)}}class Rv extends Ov{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Dv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Dv extends Cv{constructor(e,n,r,o,a){super(e,n,a),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $v extends Av{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Sv(this.url,this.headers,e,this.fetch)}get vectors(){return new Iv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kv(this.url+"/iceberg",this.headers,this.fetch)}}const jv="2.78.0";let os="";typeof Deno<"u"?os="deno":typeof document<"u"?os="web":typeof navigator<"u"&&navigator.product==="ReactNative"?os="react-native":os="node";const Nv={"X-Client-Info":`supabase-js-${os}/${jv}`},Uv={headers:Nv},Bv={schema:"public"},Fv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zv={},qv=i=>{let e;return i?e=i:typeof fetch>"u"?e=ld:e=fetch,(...n)=>e(...n)},Vv=()=>typeof Headers>"u"?ud:Headers,Hv=(i,e,n)=>{const r=qv(n),o=Vv();return async(a,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:i;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},u),{headers:m}))}};function Zv(i){return i.endsWith("/")?i:i+"/"}function Kv(i,e){var n,r;const{db:o,auth:a,realtime:u,global:d}=i,{db:h,auth:m,realtime:v,global:g}=e,y={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}function Wv(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Rd="2.78.0",kn=30*1e3,Xo=3,Po=Xo*kn,Gv="http://localhost:9999",Jv="supabase.auth.token",Yv={"X-Client-Info":`gotrue-js/${Rd}`},Qo="X-Supabase-Api-Version",Dd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qv=10*60*1e3;class As extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function fe(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class e_ extends As{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function t_(i){return fe(i)&&i.name==="AuthApiError"}class Qi extends As{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class ji extends As{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Wt extends ji{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function i_(i){return fe(i)&&i.name==="AuthSessionMissingError"}class _n extends ji{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class rr extends ji{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class or extends ji{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n_(i){return fe(i)&&i.name==="AuthImplicitGrantRedirectError"}class yu extends ji{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ea extends ji{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function xo(i){return fe(i)&&i.name==="AuthRetryableFetchError"}class bu extends ji{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ta extends ji{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Tr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wu=` 	
\r=`.split(""),s_=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<wu.length;e+=1)i[wu[e].charCodeAt(0)]=-2;for(let e=0;e<Tr.length;e+=1)i[Tr[e].charCodeAt(0)]=e;return i})();function Su(i,e,n){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Tr[r]),e.queuedBits-=6}}function $d(i,e,n){const r=s_[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Au(i){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{a_(u,r,n)};for(let u=0;u<i.length;u+=1)$d(i.charCodeAt(u),o,a);return e.join("")}function r_(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function o_(i,e){for(let n=0;n<i.length;n+=1){let r=i.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(i.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}r_(r,e)}}function a_(i,e,n){if(e.utf8seq===0){if(i<=127){n(i);return}for(let r=1;r<6;r+=1)if(!(i>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Cn(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)$d(i.charCodeAt(o),n,r);return new Uint8Array(e)}function l_(i){const e=[];return o_(i,n=>e.push(n)),new Uint8Array(e)}function en(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return i.forEach(o=>Su(o,n,r)),Su(null,n,r),e.join("")}function u_(i){return Math.round(Date.now()/1e3)+i}function c_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",Ki={tested:!1,writable:!1},jd=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Ki.tested)return Ki.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Ki.tested=!0,Ki.writable=!0}catch{Ki.tested=!0,Ki.writable=!1}return Ki.writable};function d_(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const Nd=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Bn(async()=>{const{default:r}=await Promise.resolve().then(()=>sn);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},h_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Tn=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Wi=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},Pi=async(i,e)=>{await i.removeItem(e)};class Nr{constructor(){this.promise=new Nr.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Nr.promiseConstructor=Promise;function Eo(i){const e=i.split(".");if(e.length!==3)throw new ta("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Xv.test(e[r]))throw new ta("JWT not in base64url format");return{header:JSON.parse(Au(e[0])),payload:JSON.parse(Au(e[1])),signature:Cn(e[2]),raw:{header:e[0],payload:e[1]}}}async function f_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function p_(i,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await i(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){o(u);return}}})()})}function m_(i){return("0"+i.toString(16)).substr(-2)}function v_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,m_).join("")}async function __(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function g_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await __(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function gn(i,e,n=!1){const r=v_();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Tn(i,`${e}-code-verifier`,o);const a=await g_(r);return[a,r===a?"plain":"s256"]}const y_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b_(i){const e=i.headers.get(Qo);if(!e||!e.match(y_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function w_(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function S_(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const A_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function yn(i){if(!A_.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Lo(){const i={};return new Proxy(i,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k_(i,e){return new Proxy(i,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,o)}})}function ku(i){return JSON.parse(JSON.stringify(i))}const Yi=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),T_=[502,503,504];async function Tu(i){var e;if(!h_(i))throw new ea(Yi(i),0);if(T_.includes(i.status))throw new ea(Yi(i),i.status);let n;try{n=await i.json()}catch(a){throw new Qi(Yi(a),a)}let r;const o=b_(i);if(o&&o.getTime()>=Dd["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bu(Yi(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Wt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new bu(Yi(n),i.status,n.weak_password.reasons);throw new e_(Yi(n),i.status||500,r)}const P_=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function ye(i,e,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[Qo]||(a[Qo]=Dd["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await x_(i,e,n+d,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function x_(i,e,n,r,o,a){const u=P_(e,r,o,a);let d;try{d=await i(n,Object.assign({},u))}catch(h){throw console.error(h),new ea(Yi(h),0)}if(d.ok||await Tu(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await Tu(h)}}function Gt(i){var e;let n=null;O_(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=u_(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function Pu(i){const e=Gt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Li(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function E_(i){return{data:i,error:null}}function L_(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=i,u=Un(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function xu(i){return i}function O_(i){return i.access_token&&i.refresh_token&&i.expires_in}const Oo=["global","local","others"];class C_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Nd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Oo[0]){if(Oo.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Oo.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Li})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Un(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:L_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(fe(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Li})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:xu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const O=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);m[`${k}Page`]=O}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(fe(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){yn(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Li})}catch(n){if(fe(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){yn(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Li})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){yn(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Li})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){yn(e.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _deleteFactor(e){yn(e.userId),yn(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:xu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const O=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);m[`${k}Page`]=O}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(fe(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}}function Eu(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}const bn={debug:!!(globalThis&&jd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ud extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class M_ extends Ud{}async function I_(i,e,n){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),bn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await n()}finally{bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw bn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new M_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(bn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function R_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bd(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function D_(i){return parseInt(i,16)}function $_(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function j_(i){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:v,uri:g,version:y}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const A=Bd(i.address),P=v?`${v}://${r}`:r,O=i.statement?`${i.statement}
`:"",k=`${P} wants you to sign in with your Ethereum account:
${A}

${O}`;let N=`URI: ${g}
Version: ${y}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(N+=`
Expiration Time: ${o.toISOString()}`),d&&(N+=`
Not Before: ${d.toISOString()}`),h&&(N+=`
Request ID: ${h}`),m){let R=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);R+=`
- ${M}`}N+=R}return`${k}
${N}`}class rt extends Error{constructor({message:e,code:n,cause:r,name:o}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=o??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class Pr extends rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function N_({error:i,options:e}){var n,r,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new rt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const u=window.location.hostname;if(Fd(u)){if(a.rp.id!==u)return new rt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function U_({error:i,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new rt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(Fd(r)){if(n.rpId!==r)return new rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class B_{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F_=new B_;function z_(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:n,excludeCredentials:r}=i,o=Un(i,["challenge","user","excludeCredentials"]),a=Cn(e).buffer,u=Object.assign(Object.assign({},n),{id:Cn(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:a,user:u});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Cn(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function q_(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:n}=i,r=Un(i,["challenge","allowCredentials"]),o=Cn(e).buffer,a=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Cn(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function V_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:en(new Uint8Array(i.response.attestationObject)),clientDataJSON:en(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function H_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,r=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:en(new Uint8Array(o.authenticatorData)),clientDataJSON:en(new Uint8Array(o.clientDataJSON)),signature:en(new Uint8Array(o.signature)),userHandle:o.userHandle?en(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fd(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Lu(){var i,e;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Z_(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Pr("Browser returned unexpected credential type",e)}:{data:null,error:new Pr("Empty credential response",e)}}catch(e){return{data:null,error:N_({error:e,options:i})}}}async function K_(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Pr("Browser returned unexpected credential type",e)}:{data:null,error:new Pr("Empty credential response",e)}}catch(e){return{data:null,error:U_({error:e,options:i})}}}const W_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},G_={userVerification:"preferred",hints:["security-key"]};function xr(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of i)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))r[a]=u;else if(n(u))r[a]=u;else if(e(u)){const d=r[a];e(d)?r[a]=xr(d,u):r[a]=xr(u)}else r[a]=u}return r}function J_(i,e){return xr(W_,i,e||{})}function Y_(i,e){return xr(G_,i,e||{})}class X_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:o},a){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=o??F_.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=J_(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:v,error:g}=await Z_({publicKey:m,signal:h});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const m=Y_(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:v,error:g}=await K_(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:h}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Qi("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}},a){if(!n)return{data:null,error:new As("rpId is required for WebAuthn authentication")};try{if(!Lu())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:a});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Qi("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o},a){if(!n)return{data:null,error:new As("rpId is required for WebAuthn registration")};try{if(!Lu())return{data:null,error:new Qi("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:a});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(u){return fe(u)?{data:null,error:u}:{data:null,error:new Qi("Unexpected error in register",u)}}}}R_();const Q_={url:Gv,storageKey:Jv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ou(i,e,n){return await n()}const wn={};class ks{get jwks(){var e,n;return(n=(e=wn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){wn[this.storageKey]=Object.assign(Object.assign({},wn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=wn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){wn[this.storageKey]=Object.assign(Object.assign({},wn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ks.nextInstanceID,ks.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Q_),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new C_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Nd(o.fetch),this.lock=o.lock||Ou,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:kt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=I_:this.lock=Ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:jd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Rd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=d_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kt()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),n_(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return fe(n)?{error:n}:{error:new Qi("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Gt}),{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(fe(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,o;try{let a;if("email"in e){const{email:v,password:g,options:y}=e;let A=null,P=null;this.flowType==="pkce"&&([A,P]=await gn(this.storage,this.storageKey)),a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:v,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:A,code_challenge_method:P},xform:Gt})}else if("phone"in e){const{phone:v,password:g,options:y}=e;a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(o=y==null?void 0:y.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Gt})}else throw new rr("You must provide either an email or phone number and a password");const{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(fe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:d}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else if("phone"in e){const{phone:a,password:u,options:d}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else throw new rr("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new _n}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,o,a,u,d,h,m,v,g,y;let A,P;if("message"in e)A=e.message,P=e.signature;else{const{chain:O,wallet:k,statement:N,options:R}=e;let M;if(kt())if(typeof k=="object")M=k;else{const Oe=window;if("ethereum"in Oe&&typeof Oe.ethereum=="object"&&"request"in Oe.ethereum&&typeof Oe.ethereum.request=="function")M=Oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(R!=null&&R.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=k}const B=new URL((n=R==null?void 0:R.url)!==null&&n!==void 0?n:window.location.href),ue=await M.request({method:"eth_requestAccounts"}).then(Oe=>Oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ue||ue.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=Bd(ue[0]);let ge=(r=R==null?void 0:R.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!ge){const Oe=await M.request({method:"eth_chainId"});ge=D_(Oe)}const Le={domain:B.host,address:le,statement:N,uri:B.href,version:"1",chainId:ge,nonce:(o=R==null?void 0:R.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=R==null?void 0:R.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=R==null?void 0:R.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=R==null?void 0:R.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=R==null?void 0:R.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=R==null?void 0:R.signInWithEthereum)===null||v===void 0?void 0:v.resources};A=j_(Le),P=await M.request({method:"personal_sign",params:[$_(A),le]})}try{const{data:O,error:k}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:P},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Gt});if(k)throw k;return!O||!O.session||!O.user?{data:{user:null,session:null},error:new _n}:(O.session&&(await this._saveSession(O.session),await this._notifyAllSubscribers("SIGNED_IN",O.session)),{data:Object.assign({},O),error:k})}catch(O){if(fe(O))return{data:{user:null,session:null},error:O};throw O}}async signInWithSolana(e){var n,r,o,a,u,d,h,m,v,g,y,A;let P,O;if("message"in e)P=e.message,O=e.signature;else{const{chain:k,wallet:N,statement:R,options:M}=e;let B;if(kt())if(typeof N=="object")B=N;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))B=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof N!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=N}const ue=new URL((n=M==null?void 0:M.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const le=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:ue.host,uri:ue.href}),R?{statement:R}:null));let ge;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")ge=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)ge=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)P=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),O=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${ue.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...R?["",R,""]:[""],"Version: 1",`URI: ${ue.href}`,`Issued At: ${(o=(r=M==null?void 0:M.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=M==null?void 0:M.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((d=M==null?void 0:M.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((g=(v=M==null?void 0:M.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...M.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);const le=await B.signMessage(new TextEncoder().encode(P),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");O=le}}try{const{data:k,error:N}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:en(O)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Gt});if(N)throw N;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new _n}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:N})}catch(k){if(fe(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await Wi(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:u}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Gt});if(await Pi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new _n}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(fe(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:a,nonce:u}=e,d=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Gt}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new _n}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:m})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,a,u;try{if("email"in e){const{email:d,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await gn(this.storage,this.storageKey));const{error:g}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:m,error:v}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v}}throw new rr("You must provide either an email or phone number.")}catch(d){if(fe(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,r;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Gt});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await gn(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:E_})}catch(a){if(fe(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Wt;const{error:o}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(fe(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:u}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:u,error:d}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new rr("You must provide either an email or phone number and a type")}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Wi(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Po:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Wi(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Lo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=k_(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Li}):await this._useSession(async n=>{var r,o,a;const{data:u,error:d}=n;if(d)throw d;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Wt}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Li})})}catch(n){if(fe(n))return i_(n)&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Wt;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await gn(this.storage,this.storageKey));const{data:m,error:v}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Li});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(fe(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Wt;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:u}=Eo(e.access_token);if(u.exp&&(r=u.exp,o=r<=n),o){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(fe(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Wt;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(fe(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!kt())throw new or("No browser detected.");if(e.error||e.error_description||e.error_code)throw new or(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new or("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yu("No code detected.");const{data:R,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:R.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=e;if(!a||!d||!u||!m)throw new or("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(d);let y=v+g;h&&(y=parseInt(h));const A=y-v;A*1e3<=kn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${g}s`);const P=y-g;v-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,y,v):v-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,y,v);const{data:O,error:k}=await this._getUser(a);if(k)throw k;const N={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:g,expires_at:y,refresh_token:u,token_type:m,user:O.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:N,redirectType:e.type},error:null}}catch(r){if(fe(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Wi(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const u=(r=o.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(t_(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await Pi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=c_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await gn(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(fe(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(fe(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var u,d,h,m,v;const{data:g,error:y}=a;if(y)throw y;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",A,{headers:this.headers,jwt:(v=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return kt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(fe(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:o,data:{session:a}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:m,nonce:v}=e,g=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Gt}),{data:y,error:A}=g;return A?{data:{user:null,session:null},error:A}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new _n}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:A})}catch(o){if(fe(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)throw u;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p_(async o=>(o>0&&await f_(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Gt})),(o,a)=>{const u=200*Math.pow(2,o);return a&&xo(a)&&Date.now()+u-r<kn})}catch(r){if(this._debug(n,"error",r),fe(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),kt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Wi(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Wi(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Tn(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Lo()}else if(o&&!o.user&&!o.user){const u=await Wi(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await Pi(this.storage,this.storageKey+"-user"),await Tn(this.storage,this.storageKey,o)):o.user=Lo()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<Po;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${Po}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),xo(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Wt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Nr;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Wt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),fe(a)){const u={data:null,error:a};return xo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Tn(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=ku(o);await Tn(this.storage,this.storageKey,a)}else{const o=ku(n);await Tn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await Pi(this.storage,this.storageKey),await Pi(this.storage,this.storageKey+"-code-verifier"),await Pi(this.storage,this.storageKey+"-user"),this.userStorage&&await Pi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),kn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/kn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${kn}ms, refresh threshold is ${Xo} ticks`),o<=Xo&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ud)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await gn(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?V_(e.webauthn.credential_response):H_(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(fe(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:z_(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:q_(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(fe(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:o}=await this.getSession();if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Eo(r.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?{data:null,error:o}:r?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new Wt}})}catch(n){if(fe(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Wt};const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Wt};const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(fe(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+Qv>o)return r;const{data:a,error:u}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:A,error:P}=await this.getSession();if(P||!A.session)return{data:null,error:P};r=A.session.access_token}const{header:o,payload:a,signature:u,raw:{header:d,payload:h}}=Eo(r);n!=null&&n.allowExpired||w_(a.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:A}=await this.getUser(r);if(A)throw A;return{data:{claims:a,header:o,signature:u},error:null}}const v=S_(o.alg),g=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,l_(`${d}.${h}`)))throw new ta("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(r){if(fe(r))return{data:null,error:r};throw r}}}ks.nextInstanceID=0;const eg=ks;class tg extends eg{constructor(e){super(e)}}class ig{constructor(e,n,r){var o,a,u;this.supabaseUrl=e,this.supabaseKey=n;const d=Wv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:Bv,realtime:zv,auth:Object.assign(Object.assign({},Fv),{storageKey:h}),global:Uv},v=Kv(r??{},m);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=Hv(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Gm(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new $v(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Um(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:u,flowType:d,lock:h,debug:m},v,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tg({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),v),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,flowType:d,lock:h,debug:m,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ng=(i,e,n)=>new ig(i,e,n);function sg(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rg="https://mxcmguifgtbgcjiezqot.supabase.co",og="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14Y21ndWlmZ3RiZ2NqaWV6cW90Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDMwMjAsImV4cCI6MjA3Nzc3OTAyMH0.s3voAwQsXQewcCIdMRzkuqQuncUAosBhmli3DVbCR8g",yt=ng(rg,og),pt=re(null),ar=re(!0),Sn=re(!1);function Ls(){return{user:pt,loading:ar,isAdmin:Sn,checkUser:async(u=2e3)=>{var g;ar.value=!0;const d=Date.now(),{data:{session:h}}=await yt.auth.getSession();pt.value=(h==null?void 0:h.user)||null,pt.value&&(Sn.value=((g=pt.value.user_metadata)==null?void 0:g.role)==="admin"||pt.value.email==="admin@fueldock.ee"||pt.value.email==="uve.mae@gmail.com");const m=Date.now()-d,v=Math.max(0,u-m);await new Promise(y=>setTimeout(y,v)),ar.value=!1},signUp:async(u,d)=>{const{data:h,error:m}=await yt.auth.signUp({email:u,password:d,options:{emailRedirectTo:window.location.origin}});if(m)throw m;return h},signIn:async(u,d)=>{var v;const{data:h,error:m}=await yt.auth.signInWithPassword({email:u,password:d});if(m)throw m;return pt.value=h.user,pt.value&&(Sn.value=((v=pt.value.user_metadata)==null?void 0:v.role)==="admin"||pt.value.email==="admin@fueldock.ee"||pt.value.email==="uve.mae@gmail.com"),h},signOut:async()=>{const{error:u}=await yt.auth.signOut();if(u)throw u;pt.value=null,Sn.value=!1},resetPassword:async u=>{const{error:d}=await yt.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/reset-password`});if(d)throw d},initAuthListener:()=>{yt.auth.onAuthStateChange((u,d)=>{var h;pt.value=(d==null?void 0:d.user)||null,pt.value?Sn.value=((h=pt.value.user_metadata)==null?void 0:h.role)==="admin"||pt.value.email==="admin@fueldock.ee"||pt.value.email==="uve.mae@gmail.com":Sn.value=!1,ar.value=!1})}}}const Ni=(i,e)=>{const n=i.__vccOpts||i;for(const[r,o]of e)n[r]=o;return n},ag={class:"login-container"},lg={class:"login-card"},ug={class:"mode-tabs"},cg={class:"form-group"},dg={class:"form-group"},hg=["disabled"],fg={class:"form-group"},pg={class:"form-group"},mg={class:"form-group"},vg=["disabled"],_g={class:"form-group"},gg=["disabled"],yg={key:3,class:"message error-message"},bg={key:4,class:"message success-message"},wg={__name:"LoginScreen",emits:["guest-mode"],setup(i,{emit:e}){const n=e,{signIn:r,signUp:o,resetPassword:a}=Ls(),u=re("login"),d=re(""),h=re(""),m=re(""),v=re(!1),g=re(""),y=re("");async function A(){if(g.value="",y.value="",!d.value||!h.value){g.value="Please fill in all fields";return}v.value=!0;try{await r(d.value,h.value)}catch(N){g.value=N.message||"Login failed. Please check your credentials."}finally{v.value=!1}}async function P(){if(g.value="",y.value="",!d.value||!h.value||!m.value){g.value="Please fill in all fields";return}if(h.value!==m.value){g.value="Passwords do not match";return}if(h.value.length<6){g.value="Password must be at least 6 characters";return}v.value=!0;try{await o(d.value,h.value),y.value="Account created! Please check your email to confirm your account.",d.value="",h.value="",m.value="",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(N){g.value=N.message||"Signup failed. Please try again."}finally{v.value=!1}}async function O(){if(g.value="",y.value="",!d.value){g.value="Please enter your email address";return}v.value=!0;try{await a(d.value),y.value="Password reset link sent! Check your email.",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(N){g.value=N.message||"Failed to send reset link."}finally{v.value=!1}}function k(){n("guest-mode")}return(N,R)=>(Z(),G("div",ag,[p("div",lg,[R[18]||(R[18]=p("div",{class:"logo-section"},[p("img",{src:zo,alt:"FuelDock",class:"logo"}),p("h1",null,"FuelDock Estonia"),p("p",{class:"tagline"},"Marina Fuel Station Locator")],-1)),p("div",ug,[p("button",{class:Je({active:u.value==="login"}),onClick:R[0]||(R[0]=M=>u.value="login")}," Login ",2),p("button",{class:Je({active:u.value==="signup"}),onClick:R[1]||(R[1]=M=>u.value="signup")}," Sign Up ",2)]),u.value==="login"?(Z(),G("form",{key:0,onSubmit:Mt(A,["prevent"]),class:"auth-form"},[p("div",cg,[R[10]||(R[10]=p("label",null,"Email",-1)),we(p("input",{"onUpdate:modelValue":R[2]||(R[2]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[ot,d.value]])]),p("div",dg,[R[11]||(R[11]=p("label",null,"Password",-1)),we(p("input",{"onUpdate:modelValue":R[3]||(R[3]=M=>h.value=M),type:"password",placeholder:"",required:"",autocomplete:"current-password"},null,512),[[ot,h.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},te(v.value?"Logging in...":"Login"),9,hg),p("button",{type:"button",onClick:R[4]||(R[4]=M=>u.value="forgot"),class:"link-btn"}," Forgot password? ")],32)):oe("",!0),u.value==="signup"?(Z(),G("form",{key:1,onSubmit:Mt(P,["prevent"]),class:"auth-form"},[p("div",fg,[R[12]||(R[12]=p("label",null,"Email",-1)),we(p("input",{"onUpdate:modelValue":R[5]||(R[5]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[ot,d.value]])]),p("div",pg,[R[13]||(R[13]=p("label",null,"Password",-1)),we(p("input",{"onUpdate:modelValue":R[6]||(R[6]=M=>h.value=M),type:"password",placeholder:"",required:"",autocomplete:"new-password",minlength:"6"},null,512),[[ot,h.value]])]),p("div",mg,[R[14]||(R[14]=p("label",null,"Confirm Password",-1)),we(p("input",{"onUpdate:modelValue":R[7]||(R[7]=M=>m.value=M),type:"password",placeholder:"",required:"",autocomplete:"new-password"},null,512),[[ot,m.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},te(v.value?"Creating account...":"Create Account"),9,vg),R[15]||(R[15]=p("p",{class:"info-text"}," You'll receive a confirmation email to activate your account. ",-1))],32)):oe("",!0),u.value==="forgot"?(Z(),G("form",{key:2,onSubmit:Mt(O,["prevent"]),class:"auth-form"},[p("div",_g,[R[16]||(R[16]=p("label",null,"Email",-1)),we(p("input",{"onUpdate:modelValue":R[8]||(R[8]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:""},null,512),[[ot,d.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},te(v.value?"Sending...":"Send Reset Link"),9,gg),p("button",{type:"button",onClick:R[9]||(R[9]=M=>u.value="login"),class:"link-btn"}," Back to Login ")],32)):oe("",!0),g.value?(Z(),G("div",yg,te(g.value),1)):oe("",!0),y.value?(Z(),G("div",bg,te(y.value),1)):oe("",!0),p("div",{class:"guest-section"},[p("button",{onClick:k,class:"guest-btn"}," Continue as Guest "),R[17]||(R[17]=p("p",{class:"guest-info"}," Limited view: See marina locations only ",-1))])])]))}},Sg=Ni(wg,[["__scopeId","data-v-e2058a05"]]);var ia={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,r){r(e)})(Bm,function(n){var r="1.9.4";function o(t){var s,l,c,f;for(l=1,c=arguments.length;l<c;l++){f=arguments[l];for(s in f)t[s]=f[s]}return t}var a=Object.create||function(){function t(){}return function(s){return t.prototype=s,new t}}();function u(t,s){var l=Array.prototype.slice;if(t.bind)return t.bind.apply(t,l.call(arguments,1));var c=l.call(arguments,2);return function(){return t.apply(s,c.length?c.concat(l.call(arguments)):arguments)}}var d=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,s,l){var c,f,_,w;return w=function(){c=!1,f&&(_.apply(l,f),f=!1)},_=function(){c?f=arguments:(t.apply(l,arguments),setTimeout(w,s),c=!0)},_}function v(t,s,l){var c=s[1],f=s[0],_=c-f;return t===c&&l?t:((t-f)%_+_)%_+f}function g(){return!1}function y(t,s){if(s===!1)return t;var l=Math.pow(10,s===void 0?6:s);return Math.round(t*l)/l}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return A(t).split(/\s+/)}function O(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var l in s)t.options[l]=s[l];return t.options}function k(t,s,l){var c=[];for(var f in t)c.push(encodeURIComponent(l?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function R(t,s){return t.replace(N,function(l,c){var f=s[c];if(f===void 0)throw new Error("No value provided for variable "+l);return typeof f=="function"&&(f=f(s)),f})}var M=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function B(t,s){for(var l=0;l<t.length;l++)if(t[l]===s)return l;return-1}var ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ge=0;function Le(t){var s=+new Date,l=Math.max(0,16-(s-ge));return ge=s+l,window.setTimeout(t,l)}var Oe=window.requestAnimationFrame||le("RequestAnimationFrame")||Le,H=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function E(t,s,l){if(l&&Oe===Le)t.call(s);else return Oe.call(window,u(t,s))}function z(t){t&&H.call(window,t)}var F={__proto__:null,extend:o,create:a,bind:u,get lastId(){return d},stamp:h,throttle:m,wrapNum:v,falseFn:g,formatNum:y,trim:A,splitWords:P,setOptions:O,getParamString:k,template:R,isArray:M,indexOf:B,emptyImageUrl:ue,requestFn:Oe,cancelFn:H,requestAnimFrame:E,cancelAnimFrame:z};function Y(){}Y.extend=function(t){var s=function(){O(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=s.__super__=this.prototype,c=a(l);c.constructor=s,s.prototype=c;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(s[f]=this[f]);return t.statics&&o(s,t.statics),t.includes&&(j(t.includes),o.apply(null,[c].concat(t.includes))),o(c,t),delete c.statics,delete c.includes,c.options&&(c.options=l.options?a(l.options):{},o(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,w=c._initHooks.length;_<w;_++)c._initHooks[_].call(this)}},s},Y.include=function(t){var s=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},Y.mergeOptions=function(t){return o(this.prototype.options,t),this},Y.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),l=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function j(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=M(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l)}return this},off:function(t,s,l){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],s);else{t=P(t);for(var f=arguments.length===1,_=0,w=t.length;_<w;_++)f?this._off(t[_]):this._off(t[_],s,l)}return this},_on:function(t,s,l,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,l)===!1){l===this&&(l=void 0);var f={fn:s,ctx:l};c&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,s,l){var c,f,_;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(f=0,_=c.length;f<_;f++)c[f].fn=g;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var w=this._listens(t,s,l);if(w!==!1){var C=c[w];this._firingCount&&(C.fn=g,this._events[t]=c=c.slice()),c.splice(w,1)}}},fire:function(t,s,l){if(!this.listens(t,l))return this;var c=o({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var _=0,w=f.length;_<w;_++){var C=f[_],I=C.fn;C.once&&this.off(t,I,C.ctx),I.call(C.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(t,s,l,c){typeof t!="string"&&console.warn('"string" type argument expected');var f=s;typeof s!="function"&&(c=!!s,f=void 0,l=void 0);var _=this._events&&this._events[t];if(_&&_.length&&this._listens(t,f,l)!==!1)return!0;if(c){for(var w in this._eventParents)if(this._eventParents[w].listens(t,s,l,c))return!0}return!1},_listens:function(t,s,l){if(!this._events)return!1;var c=this._events[t]||[];if(!s)return!!c.length;l===this&&(l=void 0);for(var f=0,_=c.length;f<_;f++)if(c[f].fn===s&&c[f].ctx===l)return f;return!1},once:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s,!0);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var ke=Y.extend(J);function ie(t,s,l){this.x=l?Math.round(t):t,this.y=l?Math.round(s):s}var ht=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};ie.prototype={clone:function(){return new ie(this.x,this.y)},add:function(t){return this.clone()._add(pe(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(pe(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new ie(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new ie(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ht(this.x),this.y=ht(this.y),this},distanceTo:function(t){t=pe(t);var s=t.x-this.x,l=t.y-this.y;return Math.sqrt(s*s+l*l)},equals:function(t){return t=pe(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=pe(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function pe(t,s,l){return t instanceof ie?t:M(t)?new ie(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new ie(t.x,t.y):new ie(t,s,l)}function Re(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}Re.prototype={extend:function(t){var s,l;if(!t)return this;if(t instanceof ie||typeof t[0]=="number"||"x"in t)s=l=pe(t);else if(t=ze(t),s=t.min,l=t.max,!s||!l)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=l.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(t){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,l;return typeof t[0]=="number"||t instanceof ie?t=pe(t):t=ze(t),t instanceof Re?(s=t.min,l=t.max):s=l=t,s.x>=this.min.x&&l.x<=this.max.x&&s.y>=this.min.y&&l.y<=this.max.y},intersects:function(t){t=ze(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>=s.x&&c.x<=l.x,w=f.y>=s.y&&c.y<=l.y;return _&&w},overlaps:function(t){t=ze(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>s.x&&c.x<l.x,w=f.y>s.y&&c.y<l.y;return _&&w},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,l=this.max,c=Math.abs(s.x-l.x)*t,f=Math.abs(s.y-l.y)*t;return ze(pe(s.x-c,s.y-f),pe(l.x+c,l.y+f))},equals:function(t){return t?(t=ze(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function ze(t,s){return!t||t instanceof Re?t:new Re(t,s)}function lt(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}lt.prototype={extend:function(t){var s=this._southWest,l=this._northEast,c,f;if(t instanceof De)c=t,f=t;else if(t instanceof lt){if(c=t._southWest,f=t._northEast,!c||!f)return this}else return t?this.extend(be(t)||Fe(t)):this;return!s&&!l?(this._southWest=new De(c.lat,c.lng),this._northEast=new De(f.lat,f.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),l.lat=Math.max(f.lat,l.lat),l.lng=Math.max(f.lng,l.lng)),this},pad:function(t){var s=this._southWest,l=this._northEast,c=Math.abs(s.lat-l.lat)*t,f=Math.abs(s.lng-l.lng)*t;return new lt(new De(s.lat-c,s.lng-f),new De(l.lat+c,l.lng+f))},getCenter:function(){return new De((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new De(this.getNorth(),this.getWest())},getSouthEast:function(){return new De(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof De||"lat"in t?t=be(t):t=Fe(t);var s=this._southWest,l=this._northEast,c,f;return t instanceof lt?(c=t.getSouthWest(),f=t.getNorthEast()):c=f=t,c.lat>=s.lat&&f.lat<=l.lat&&c.lng>=s.lng&&f.lng<=l.lng},intersects:function(t){t=Fe(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>=s.lat&&c.lat<=l.lat,w=f.lng>=s.lng&&c.lng<=l.lng;return _&&w},overlaps:function(t){t=Fe(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>s.lat&&c.lat<l.lat,w=f.lng>s.lng&&c.lng<l.lng;return _&&w},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=Fe(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Fe(t,s){return t instanceof lt?t:new lt(t,s)}function De(t,s,l){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,l!==void 0&&(this.alt=+l)}De.prototype={equals:function(t,s){if(!t)return!1;t=be(t);var l=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return l<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return Lt.distance(this,be(t))},wrap:function(){return Lt.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,l=s/Math.cos(Math.PI/180*this.lat);return Fe([this.lat-s,this.lng-l],[this.lat+s,this.lng+l])},clone:function(){return new De(this.lat,this.lng,this.alt)}};function be(t,s,l){return t instanceof De?t:M(t)&&typeof t[0]!="object"?t.length===3?new De(t[0],t[1],t[2]):t.length===2?new De(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new De(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new De(t,s,l)}var vt={latLngToPoint:function(t,s){var l=this.projection.project(t),c=this.scale(s);return this.transformation._transform(l,c)},pointToLatLng:function(t,s){var l=this.scale(s),c=this.transformation.untransform(t,l);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,l=this.scale(t),c=this.transformation.transform(s.min,l),f=this.transformation.transform(s.max,l);return new Re(c,f)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,l=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new De(l,s,c)},wrapLatLngBounds:function(t){var s=t.getCenter(),l=this.wrapLatLng(s),c=s.lat-l.lat,f=s.lng-l.lng;if(c===0&&f===0)return t;var _=t.getSouthWest(),w=t.getNorthEast(),C=new De(_.lat-c,_.lng-f),I=new De(w.lat-c,w.lng-f);return new lt(C,I)}},Lt=o({},vt,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var l=Math.PI/180,c=t.lat*l,f=s.lat*l,_=Math.sin((s.lat-t.lat)*l/2),w=Math.sin((s.lng-t.lng)*l/2),C=_*_+Math.cos(c)*Math.cos(f)*w*w,I=2*Math.atan2(Math.sqrt(C),Math.sqrt(1-C));return this.R*I}}),Ui=6378137,Vt={R:Ui,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,t.lat),-l),f=Math.sin(c*s);return new ie(this.R*t.lng*s,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var s=180/Math.PI;return new De((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:function(){var t=Ui*Math.PI;return new Re([-t,-t],[t,t])}()};function rn(t,s,l,c){if(M(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=l,this._d=c}rn.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new ie((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function b(t,s,l,c){return new rn(t,s,l,c)}var T=o({},Lt,{code:"EPSG:3857",projection:Vt,transformation:function(){var t=.5/(Math.PI*Vt.R);return b(t,.5,-t,.5)}()}),D=o({},T,{code:"EPSG:900913"});function W(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function q(t,s){var l="",c,f,_,w,C,I;for(c=0,_=t.length;c<_;c++){for(C=t[c],f=0,w=C.length;f<w;f++)I=C[f],l+=(f?"L":"M")+I.x+" "+I.y;l+=s?he.svg?"z":"x":""}return l||"M0 0"}var U=document.documentElement.style,ee="ActiveXObject"in window,Q=ee&&!document.addEventListener,X="msLaunchUri"in navigator&&!("documentMode"in document),K=ti("webkit"),ce=ti("android"),ne=ti("android 2")||ti("android 3"),de=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),me=ce&&ti("Google")&&de<537&&!("AudioNode"in window),xe=!!window.opera,Ne=!X&&ti("chrome"),x=ti("gecko")&&!K&&!xe&&!ee,S=!Ne&&ti("safari"),$=ti("phantom"),Te="OTransition"in U,Ve=navigator.platform.indexOf("Win")===0,Me=ee&&"transition"in U,Ye="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ne,Se="MozPerspective"in U,$e=!window.L_DISABLE_3D&&(Me||Ye||Se)&&!Te&&!$,et=typeof orientation<"u"||ti("mobile"),_t=et&&K,on=et&&Ye,qn=!window.PointerEvent&&window.MSPointerEvent,Os=!!(window.PointerEvent||qn),Oa="ontouchstart"in window||!!window.TouchEvent,qd=!window.L_NO_TOUCH&&(Oa||Os),Vd=et&&xe,Hd=et&&x,Zd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kd=function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,s),window.removeEventListener("testPassiveEventSupport",g,s)}catch{}return t}(),Wd=function(){return!!document.createElement("canvas").getContext}(),Ur=!!(document.createElementNS&&W("svg").createSVGRect),Gd=!!Ur&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jd=!Ur&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Yd=navigator.platform.indexOf("Mac")===0,Xd=navigator.platform.indexOf("Linux")===0;function ti(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var he={ie:ee,ielt9:Q,edge:X,webkit:K,android:ce,android23:ne,androidStock:me,opera:xe,chrome:Ne,gecko:x,safari:S,phantom:$,opera12:Te,win:Ve,ie3d:Me,webkit3d:Ye,gecko3d:Se,any3d:$e,mobile:et,mobileWebkit:_t,mobileWebkit3d:on,msPointer:qn,pointer:Os,touch:qd,touchNative:Oa,mobileOpera:Vd,mobileGecko:Hd,retina:Zd,passiveEvents:Kd,canvas:Wd,svg:Ur,vml:Jd,inlineSvg:Gd,mac:Yd,linux:Xd},Ca=he.msPointer?"MSPointerDown":"pointerdown",Ma=he.msPointer?"MSPointerMove":"pointermove",Ia=he.msPointer?"MSPointerUp":"pointerup",Ra=he.msPointer?"MSPointerCancel":"pointercancel",Br={touchstart:Ca,touchmove:Ma,touchend:Ia,touchcancel:Ra},Da={touchstart:sh,touchmove:Cs,touchend:Cs,touchcancel:Cs},an={},$a=!1;function Qd(t,s,l){return s==="touchstart"&&nh(),Da[s]?(l=Da[s].bind(this,l),t.addEventListener(Br[s],l,!1),l):(console.warn("wrong event specified:",s),g)}function eh(t,s,l){if(!Br[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Br[s],l,!1)}function th(t){an[t.pointerId]=t}function ih(t){an[t.pointerId]&&(an[t.pointerId]=t)}function ja(t){delete an[t.pointerId]}function nh(){$a||(document.addEventListener(Ca,th,!0),document.addEventListener(Ma,ih,!0),document.addEventListener(Ia,ja,!0),document.addEventListener(Ra,ja,!0),$a=!0)}function Cs(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var l in an)s.touches.push(an[l]);s.changedTouches=[s],t(s)}}function sh(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&ft(s),Cs(t,s)}function rh(t){var s={},l,c;for(c in t)l=t[c],s[c]=l&&l.bind?l.bind(t):l;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var oh=200;function ah(t,s){t.addEventListener("dblclick",s);var l=0,c;function f(_){if(_.detail!==1){c=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var w=za(_);if(!(w.some(function(I){return I instanceof HTMLLabelElement&&I.attributes.for})&&!w.some(function(I){return I instanceof HTMLInputElement||I instanceof HTMLSelectElement}))){var C=Date.now();C-l<=oh?(c++,c===2&&s(rh(_))):c=1,l=C}}}return t.addEventListener("click",f),{dblclick:s,simDblclick:f}}function lh(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var Fr=Rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Vn=Rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Na=Vn==="webkitTransition"||Vn==="OTransition"?Vn+"End":"transitionend";function Ua(t){return typeof t=="string"?document.getElementById(t):t}function Hn(t,s){var l=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);l=c?c[s]:null}return l==="auto"?null:l}function je(t,s,l){var c=document.createElement(t);return c.className=s||"",l&&l.appendChild(c),c}function Xe(t){var s=t.parentNode;s&&s.removeChild(t)}function Ms(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function ln(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function un(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function zr(t,s){if(t.classList!==void 0)return t.classList.contains(s);var l=Is(t);return l.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(l)}function Ee(t,s){if(t.classList!==void 0)for(var l=P(s),c=0,f=l.length;c<f;c++)t.classList.add(l[c]);else if(!zr(t,s)){var _=Is(t);qr(t,(_?_+" ":"")+s)}}function tt(t,s){t.classList!==void 0?t.classList.remove(s):qr(t,A((" "+Is(t)+" ").replace(" "+s+" "," ")))}function qr(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function Is(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Nt(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&uh(t,s)}function uh(t,s){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=t.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),l?(l.Enabled=s!==100,l.Opacity=s):t.style.filter+=" progid:"+c+"(opacity="+s+")"}function Rs(t){for(var s=document.documentElement.style,l=0;l<t.length;l++)if(t[l]in s)return t[l];return!1}function Bi(t,s,l){var c=s||new ie(0,0);t.style[Fr]=(he.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function nt(t,s){t._leaflet_pos=s,he.any3d?Bi(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function Fi(t){return t._leaflet_pos||new ie(0,0)}var Zn,Kn,Vr;if("onselectstart"in document)Zn=function(){Ae(window,"selectstart",ft)},Kn=function(){He(window,"selectstart",ft)};else{var Wn=Rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Zn=function(){if(Wn){var t=document.documentElement.style;Vr=t[Wn],t[Wn]="none"}},Kn=function(){Wn&&(document.documentElement.style[Wn]=Vr,Vr=void 0)}}function Hr(){Ae(window,"dragstart",ft)}function Zr(){He(window,"dragstart",ft)}var Ds,Kr;function Wr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&($s(),Ds=t,Kr=t.style.outlineStyle,t.style.outlineStyle="none",Ae(window,"keydown",$s))}function $s(){Ds&&(Ds.style.outlineStyle=Kr,Ds=void 0,Kr=void 0,He(window,"keydown",$s))}function Ba(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Gr(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var ch={__proto__:null,TRANSFORM:Fr,TRANSITION:Vn,TRANSITION_END:Na,get:Ua,getStyle:Hn,create:je,remove:Xe,empty:Ms,toFront:ln,toBack:un,hasClass:zr,addClass:Ee,removeClass:tt,setClass:qr,getClass:Is,setOpacity:Nt,testProp:Rs,setTransform:Bi,setPosition:nt,getPosition:Fi,get disableTextSelection(){return Zn},get enableTextSelection(){return Kn},disableImageDrag:Hr,enableImageDrag:Zr,preventOutline:Wr,restoreOutline:$s,getSizedParentNode:Ba,getScale:Gr};function Ae(t,s,l,c){if(s&&typeof s=="object")for(var f in s)Yr(t,f,s[f],l);else{s=P(s);for(var _=0,w=s.length;_<w;_++)Yr(t,s[_],l,c)}return this}var ii="_leaflet_events";function He(t,s,l,c){if(arguments.length===1)Fa(t),delete t[ii];else if(s&&typeof s=="object")for(var f in s)Xr(t,f,s[f],l);else if(s=P(s),arguments.length===2)Fa(t,function(C){return B(s,C)!==-1});else for(var _=0,w=s.length;_<w;_++)Xr(t,s[_],l,c);return this}function Fa(t,s){for(var l in t[ii]){var c=l.split(/\d/)[0];(!s||s(c))&&Xr(t,c,null,null,l)}}var Jr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Yr(t,s,l,c){var f=s+h(l)+(c?"_"+h(c):"");if(t[ii]&&t[ii][f])return this;var _=function(C){return l.call(c||t,C||window.event)},w=_;!he.touchNative&&he.pointer&&s.indexOf("touch")===0?_=Qd(t,s,_):he.touch&&s==="dblclick"?_=ah(t,_):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Jr[s]||s,_,he.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(_=function(C){C=C||window.event,eo(t,C)&&w(C)},t.addEventListener(Jr[s],_,!1)):t.addEventListener(s,w,!1):t.attachEvent("on"+s,_),t[ii]=t[ii]||{},t[ii][f]=_}function Xr(t,s,l,c,f){f=f||s+h(l)+(c?"_"+h(c):"");var _=t[ii]&&t[ii][f];if(!_)return this;!he.touchNative&&he.pointer&&s.indexOf("touch")===0?eh(t,s,_):he.touch&&s==="dblclick"?lh(t,_):"removeEventListener"in t?t.removeEventListener(Jr[s]||s,_,!1):t.detachEvent("on"+s,_),t[ii][f]=null}function zi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function Qr(t){return Yr(t,"wheel",zi),this}function Gn(t){return Ae(t,"mousedown touchstart dblclick contextmenu",zi),t._leaflet_disable_click=!0,this}function ft(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function qi(t){return ft(t),zi(t),this}function za(t){if(t.composedPath)return t.composedPath();for(var s=[],l=t.target;l;)s.push(l),l=l.parentNode;return s}function qa(t,s){if(!s)return new ie(t.clientX,t.clientY);var l=Gr(s),c=l.boundingClientRect;return new ie((t.clientX-c.left)/l.x-s.clientLeft,(t.clientY-c.top)/l.y-s.clientTop)}var dh=he.linux&&he.chrome?window.devicePixelRatio:he.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Va(t){return he.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/dh:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function eo(t,s){var l=s.relatedTarget;if(!l)return!0;try{for(;l&&l!==t;)l=l.parentNode}catch{return!1}return l!==t}var hh={__proto__:null,on:Ae,off:He,stopPropagation:zi,disableScrollPropagation:Qr,disableClickPropagation:Gn,preventDefault:ft,stop:qi,getPropagationPath:za,getMousePosition:qa,getWheelDelta:Va,isExternalTarget:eo,addListener:Ae,removeListener:He},Ha=ke.extend({run:function(t,s,l,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=Fi(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=E(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,l=this._duration*1e3;s<l?this._runFrame(this._easeOut(s/l),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var l=this._startPos.add(this._offset.multiplyBy(t));s&&l._round(),nt(this._el,l),this.fire("step")},_complete:function(){z(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Ie=ke.extend({options:{crs:T,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=O(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(be(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Vn&&he.any3d&&!he.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ae(this._proxy,Na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,l){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(be(t),s,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,l.zoom):this._tryAnimatedPan(t,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,l.pan&&l.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(he.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,l){var c=this.getZoomScale(s),f=this.getSize().divideBy(2),_=t instanceof ie?t:this.latLngToContainerPoint(t),w=_.subtract(f).multiplyBy(1-1/c),C=this.containerPointToLatLng(f.add(w));return this.setView(C,s,{zoom:l})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():Fe(t);var l=pe(s.paddingTopLeft||s.padding||[0,0]),c=pe(s.paddingBottomRight||s.padding||[0,0]),f=this.getBoundsZoom(t,!1,l.add(c));if(f=typeof s.maxZoom=="number"?Math.min(s.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var _=c.subtract(l).divideBy(2),w=this.project(t.getSouthWest(),f),C=this.project(t.getNorthEast(),f),I=this.unproject(w.add(C).divideBy(2).add(_),f);return{center:I,zoom:f}},fitBounds:function(t,s){if(t=Fe(t),!t.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(t,s);return this.setView(l.center,l.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=pe(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){Ee(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,l,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,l){if(l=l||{},l.animate===!1||!he.any3d)return this.setView(t,s,l);this._stop();var c=this.project(this.getCenter()),f=this.project(t),_=this.getSize(),w=this._zoom;t=be(t),s=s===void 0?w:s;var C=Math.max(_.x,_.y),I=C*this.getZoomScale(w,s),V=f.distanceTo(c)||1,se=1.42,ve=se*se;function Ce(st){var Ws=st?-1:1,ef=st?I:C,tf=I*I-C*C+Ws*ve*ve*V*V,nf=2*ef*ve*V,ho=tf/nf,Tl=Math.sqrt(ho*ho+1)-ho,sf=Tl<1e-9?-18:Math.log(Tl);return sf}function St(st){return(Math.exp(st)-Math.exp(-st))/2}function ct(st){return(Math.exp(st)+Math.exp(-st))/2}function Bt(st){return St(st)/ct(st)}var Ot=Ce(0);function mn(st){return C*(ct(Ot)/ct(Ot+se*st))}function Jh(st){return C*(ct(Ot)*Bt(Ot+se*st)-St(Ot))/ve}function Yh(st){return 1-Math.pow(1-st,1.5)}var Xh=Date.now(),Al=(Ce(1)-Ot)/se,Qh=l.duration?1e3*l.duration:1e3*Al*.8;function kl(){var st=(Date.now()-Xh)/Qh,Ws=Yh(st)*Al;st<=1?(this._flyToFrame=E(kl,this),this._move(this.unproject(c.add(f.subtract(c).multiplyBy(Jh(Ws)/V)),w),this.getScaleZoom(C/mn(Ws),w),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),kl.call(this),this},flyToBounds:function(t,s){var l=this._getBoundsCenterZoom(t,s);return this.flyTo(l.center,l.zoom,s)},setMaxBounds:function(t){return t=Fe(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,Fe(t));return l.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var l=pe(s.paddingTopLeft||s.padding||[0,0]),c=pe(s.paddingBottomRight||s.padding||[0,0]),f=this.project(this.getCenter()),_=this.project(t),w=this.getPixelBounds(),C=ze([w.min.add(l),w.max.subtract(c)]),I=C.getSize();if(!C.contains(_)){this._enforcingBounds=!0;var V=_.subtract(C.getCenter()),se=C.extend(_).getSize().subtract(I);f.x+=V.x<0?-se.x:se.x,f.y+=V.y<0?-se.y:se.y,this.panTo(this.unproject(f),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=s.divideBy(2).round(),f=l.divideBy(2).round(),_=c.subtract(f);return!_.x&&!_.y?this:(t.animate&&t.pan?this.panBy(_):(t.pan&&this._rawPanBy(_),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,l,t):navigator.geolocation.getCurrentPosition(s,l,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,l=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,l=t.coords.longitude,c=new De(s,l),f=c.toBounds(t.coords.accuracy*2),_=this._locateOptions;if(_.setView){var w=this.getBoundsZoom(f);this.setView(c,_.maxZoom?Math.min(w,_.maxZoom):w)}var C={latlng:c,bounds:f,timestamp:t.timestamp};for(var I in t.coords)typeof t.coords[I]=="number"&&(C[I]=t.coords[I]);this.fire("locationfound",C)}},addHandler:function(t,s){if(!s)return this;var l=this[t]=new s(this);return this._handlers.push(l),this.options[t]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(z(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Xe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var l="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=je("div",l,s||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),l=this.unproject(t.getTopRight());return new lt(s,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,l){t=Fe(t),l=pe(l||[0,0]);var c=this.getZoom()||0,f=this.getMinZoom(),_=this.getMaxZoom(),w=t.getNorthWest(),C=t.getSouthEast(),I=this.getSize().subtract(l),V=ze(this.project(C,c),this.project(w,c)).getSize(),se=he.any3d?this.options.zoomSnap:1,ve=I.x/V.x,Ce=I.y/V.y,St=s?Math.max(ve,Ce):Math.min(ve,Ce);return c=this.getScaleZoom(St,c),se&&(c=Math.round(c/(se/100))*(se/100),c=s?Math.ceil(c/se)*se:Math.floor(c/se)*se),Math.max(f,Math.min(_,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new ie(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var l=this._getTopLeftPoint(t,s);return new Re(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var l=this.options.crs;return s=s===void 0?this._zoom:s,l.scale(t)/l.scale(s)},getScaleZoom:function(t,s){var l=this.options.crs;s=s===void 0?this._zoom:s;var c=l.zoom(t*l.scale(s));return isNaN(c)?1/0:c},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(be(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(pe(t),s)},layerPointToLatLng:function(t){var s=pe(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(be(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(be(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Fe(t))},distance:function(t,s){return this.options.crs.distance(be(t),be(s))},containerPointToLayerPoint:function(t){return pe(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return pe(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(pe(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(be(t)))},mouseEventToContainerPoint:function(t){return qa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=Ua(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ae(s,"scroll",this._onScroll,this),this._containerId=h(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&he.any3d,Ee(t,"leaflet-container"+(he.touch?" leaflet-touch":"")+(he.retina?" leaflet-retina":"")+(he.ielt9?" leaflet-oldie":"")+(he.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Hn(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new ie(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ee(t.markerPane,"leaflet-zoom-hide"),Ee(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,l){nt(this._mapPane,new ie(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var f=this._zoom!==s;this._moveStart(f,l)._move(t,s)._moveEnd(f),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,l,c){s===void 0&&(s=this._zoom);var f=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?l&&l.pinch&&this.fire("zoom",l):((f||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return z(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var s=t?He:Ae;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),he.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){z(this._resizeRequest),this._resizeRequest=E(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var l=[],c,f=s==="mouseout"||s==="mouseover",_=t.target||t.srcElement,w=!1;_;){if(c=this._targets[h(_)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){w=!0;break}if(c&&c.listens(s,!0)&&(f&&!eo(_,t)||(l.push(c),f))||_===this._container)break;_=_.parentNode}return!l.length&&!w&&!f&&this.listens(s,!0)&&(l=[this]),l},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var l=t.type;l==="mousedown"&&Wr(s),this._fireDOMEvent(t,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,l){if(t.type==="click"){var c=o({},t);c.type="preclick",this._fireDOMEvent(c,c.type,l)}var f=this._findEventTargets(t,s);if(l){for(var _=[],w=0;w<l.length;w++)l[w].listens(s,!0)&&_.push(l[w]);f=_.concat(f)}if(f.length){s==="contextmenu"&&ft(t);var C=f[0],I={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var V=C.getLatLng&&(!C._radius||C._radius<=10);I.containerPoint=V?this.latLngToContainerPoint(C.getLatLng()):this.mouseEventToContainerPoint(t),I.layerPoint=this.containerPointToLayerPoint(I.containerPoint),I.latlng=V?C.getLatLng():this.layerPointToLatLng(I.layerPoint)}for(w=0;w<f.length;w++)if(f[w].fire(s,I,!0),I.originalEvent._stopped||f[w].options.bubblingMouseEvents===!1&&B(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return Fi(this._mapPane)||new ie(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var l=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var l=this.getSize()._divideBy(2);return this.project(t,s)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return this.project(t,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return ze([this.project(t.getSouthWest(),s)._subtract(c),this.project(t.getNorthWest(),s)._subtract(c),this.project(t.getSouthEast(),s)._subtract(c),this.project(t.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,l){if(!l)return t;var c=this.project(t,s),f=this.getSize().divideBy(2),_=new Re(c.subtract(f),c.add(f)),w=this._getBoundsOffset(_,l,s);return Math.abs(w.x)<=1&&Math.abs(w.y)<=1?t:this.unproject(c.add(w),s)},_limitOffset:function(t,s){if(!s)return t;var l=this.getPixelBounds(),c=new Re(l.min.add(t),l.max.add(t));return t.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(t,s,l){var c=ze(this.project(s.getNorthEast(),l),this.project(s.getSouthWest(),l)),f=c.min.subtract(t.min),_=c.max.subtract(t.max),w=this._rebound(f.x,-_.x),C=this._rebound(f.y,-_.y);return new ie(w,C)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),l=this.getMaxZoom(),c=he.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(s,Math.min(l,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var l=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,s),!0)},_createAnimProxy:function(){var t=this._proxy=je("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var l=Fr,c=this._proxy.style[l];Bi(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();Bi(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),f=this._getCenterOffset(t)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(f)?!1:(E(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,l,c){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,Ee(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fh(t,s){return new Ie(t,s)}var Ht=Y.extend({options:{position:"topright"},initialize:function(t){O(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),l=this.getPosition(),c=t._controlCorners[l];return Ee(s,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Jn=function(t){return new Ht(t)};Ie.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",l=this._controlContainer=je("div",s+"control-container",this._container);function c(f,_){var w=s+f+" "+s+_;t[f+_]=je("div",w,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Xe(this._controlCorners[t]);Xe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Za=Ht.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,l,c){return l<c?-1:c<l?1:0}},initialize:function(t,s,l){O(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Ht.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(h(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){Ee(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(Ee(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=je("div",t),l=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Gn(s),Qr(s);var c=this._section=je("section",t+"-list");l&&(this._map.on("click",this.collapse,this),Ae(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=je("a",t+"-toggle",s);f.href="#",f.title="Layers",f.setAttribute("role","button"),Ae(f,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){ft(_),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=je("div",t+"-base",c),this._separator=je("div",t+"-separator",c),this._overlaysList=je("div",t+"-overlays",c),s.appendChild(c)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&h(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,l){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(c,f){return this.options.sortFunction(c.layer,f.layer,c.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Ms(this._baseLayersList),Ms(this._overlaysList),this._layerControlInputs=[];var t,s,l,c,f=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),s=s||c.overlay,t=t||!c.overlay,f+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(h(t.target)),l=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;l&&this._map.fire(l,s)},_createRadioElement:function(t,s){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(t){var s=document.createElement("label"),l=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+h(this),l),this._layerControlInputs.push(c),c.layerId=h(t.layer),Ae(c,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var _=document.createElement("span");s.appendChild(_),_.appendChild(c),_.appendChild(f);var w=t.overlay?this._overlaysList:this._baseLayersList;return w.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,l,c=[],f=[];this._handlingClick=!0;for(var _=t.length-1;_>=0;_--)s=t[_],l=this._getLayer(s.layerId).layer,s.checked?c.push(l):s.checked||f.push(l);for(_=0;_<f.length;_++)this._map.hasLayer(f[_])&&this._map.removeLayer(f[_]);for(_=0;_<c.length;_++)this._map.hasLayer(c[_])||this._map.addLayer(c[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,l,c=this._map.getZoom(),f=t.length-1;f>=0;f--)s=t[f],l=this._getLayer(s.layerId).layer,s.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Ae(t,"click",ft),this.expand();var s=this;setTimeout(function(){He(t,"click",ft),s._preventClick=!1})}}),ph=function(t,s,l){return new Za(t,s,l)},to=Ht.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",l=je("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",l,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,l,c,f){var _=je("a",l,c);return _.innerHTML=t,_.href="#",_.title=s,_.setAttribute("role","button"),_.setAttribute("aria-label",s),Gn(_),Ae(_,"click",qi),Ae(_,"click",f,this),Ae(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";tt(this._zoomInButton,s),tt(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(Ee(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(Ee(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Ie.mergeOptions({zoomControl:!0}),Ie.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new to,this.addControl(this.zoomControl))});var mh=function(t){return new to(t)},Ka=Ht.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",l=je("div",s),c=this.options;return this._addScales(c,s+"-line",l),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),l},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,l){t.metric&&(this._mScale=je("div",s,l)),t.imperial&&(this._iScale=je("div",s,l))},_update:function(){var t=this._map,s=t.getSize().y/2,l=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(l)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),l=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,l,s/t)},_updateImperial:function(t){var s=t*3.2808399,l,c,f;s>5280?(l=s/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(f=this._getRoundNum(s),this._updateScale(this._iScale,f+" ft",f/s))},_updateScale:function(t,s,l){t.style.width=Math.round(this.options.maxWidth*l)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),l=t/s;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,s*l}}),vh=function(t){return new Ka(t)},_h='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',io=Ht.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(he.inlineSvg?_h+" ":"")+"Leaflet</a>"},initialize:function(t){O(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=je("div","leaflet-control-attribution"),Gn(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var l=[];this.options.prefix&&l.push(this.options.prefix),t.length&&l.push(t.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Ie.mergeOptions({attributionControl:!0}),Ie.addInitHook(function(){this.options.attributionControl&&new io().addTo(this)});var gh=function(t){return new io(t)};Ht.Layers=Za,Ht.Zoom=to,Ht.Scale=Ka,Ht.Attribution=io,Jn.layers=ph,Jn.zoom=mh,Jn.scale=vh,Jn.attribution=gh;var ni=Y.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});ni.addTo=function(t,s){return t.addHandler(s,this),this};var yh={Events:J},Wa=he.touch?"touchstart mousedown":"mousedown",ki=ke.extend({options:{clickTolerance:3},initialize:function(t,s,l,c){O(this,c),this._element=t,this._dragStartTarget=s||t,this._preventOutline=l},enable:function(){this._enabled||(Ae(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(ki._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!zr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){ki._dragging===this&&this.finishDrag();return}if(!(ki._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(ki._dragging=this,this._preventOutline&&Wr(this._element),Hr(),Zn(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,l=Ba(this._element);this._startPoint=new ie(s.clientX,s.clientY),this._startPos=Fi(this._element),this._parentScale=Gr(l);var c=t.type==="mousedown";Ae(document,c?"mousemove":"touchmove",this._onMove,this),Ae(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,l=new ie(s.clientX,s.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,ft(t),this._moved||(this.fire("dragstart"),this._moved=!0,Ee(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ee(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),Zr(),Kn();var s=this._moved&&this._moving;this._moving=!1,ki._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ga(t,s,l){var c,f=[1,4,2,8],_,w,C,I,V,se,ve,Ce;for(_=0,se=t.length;_<se;_++)t[_]._code=Vi(t[_],s);for(C=0;C<4;C++){for(ve=f[C],c=[],_=0,se=t.length,w=se-1;_<se;w=_++)I=t[_],V=t[w],I._code&ve?V._code&ve||(Ce=js(V,I,ve,s,l),Ce._code=Vi(Ce,s),c.push(Ce)):(V._code&ve&&(Ce=js(V,I,ve,s,l),Ce._code=Vi(Ce,s),c.push(Ce)),c.push(I));t=c}return t}function Ja(t,s){var l,c,f,_,w,C,I,V,se;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ve=be([0,0]),Ce=Fe(t),St=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());St<1700&&(ve=no(t));var ct=t.length,Bt=[];for(l=0;l<ct;l++){var Ot=be(t[l]);Bt.push(s.project(be([Ot.lat-ve.lat,Ot.lng-ve.lng])))}for(C=I=V=0,l=0,c=ct-1;l<ct;c=l++)f=Bt[l],_=Bt[c],w=f.y*_.x-_.y*f.x,I+=(f.x+_.x)*w,V+=(f.y+_.y)*w,C+=w*3;C===0?se=Bt[0]:se=[I/C,V/C];var mn=s.unproject(pe(se));return be([mn.lat+ve.lat,mn.lng+ve.lng])}function no(t){for(var s=0,l=0,c=0,f=0;f<t.length;f++){var _=be(t[f]);s+=_.lat,l+=_.lng,c++}return be([s/c,l/c])}var bh={__proto__:null,clipPolygon:Ga,polygonCenter:Ja,centroid:no};function Ya(t,s){if(!s||!t.length)return t.slice();var l=s*s;return t=Ah(t,l),t=Sh(t,l),t}function Xa(t,s,l){return Math.sqrt(Yn(t,s,l,!0))}function wh(t,s,l){return Yn(t,s,l)}function Sh(t,s){var l=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,f=new c(l);f[0]=f[l-1]=1,so(t,f,s,0,l-1);var _,w=[];for(_=0;_<l;_++)f[_]&&w.push(t[_]);return w}function so(t,s,l,c,f){var _=0,w,C,I;for(C=c+1;C<=f-1;C++)I=Yn(t[C],t[c],t[f],!0),I>_&&(w=C,_=I);_>l&&(s[w]=1,so(t,s,l,c,w),so(t,s,l,w,f))}function Ah(t,s){for(var l=[t[0]],c=1,f=0,_=t.length;c<_;c++)kh(t[c],t[f])>s&&(l.push(t[c]),f=c);return f<_-1&&l.push(t[_-1]),l}var Qa;function el(t,s,l,c,f){var _=c?Qa:Vi(t,l),w=Vi(s,l),C,I,V;for(Qa=w;;){if(!(_|w))return[t,s];if(_&w)return!1;C=_||w,I=js(t,s,C,l,f),V=Vi(I,l),C===_?(t=I,_=V):(s=I,w=V)}}function js(t,s,l,c,f){var _=s.x-t.x,w=s.y-t.y,C=c.min,I=c.max,V,se;return l&8?(V=t.x+_*(I.y-t.y)/w,se=I.y):l&4?(V=t.x+_*(C.y-t.y)/w,se=C.y):l&2?(V=I.x,se=t.y+w*(I.x-t.x)/_):l&1&&(V=C.x,se=t.y+w*(C.x-t.x)/_),new ie(V,se,f)}function Vi(t,s){var l=0;return t.x<s.min.x?l|=1:t.x>s.max.x&&(l|=2),t.y<s.min.y?l|=4:t.y>s.max.y&&(l|=8),l}function kh(t,s){var l=s.x-t.x,c=s.y-t.y;return l*l+c*c}function Yn(t,s,l,c){var f=s.x,_=s.y,w=l.x-f,C=l.y-_,I=w*w+C*C,V;return I>0&&(V=((t.x-f)*w+(t.y-_)*C)/I,V>1?(f=l.x,_=l.y):V>0&&(f+=w*V,_+=C*V)),w=t.x-f,C=t.y-_,c?w*w+C*C:new ie(f,_)}function Ut(t){return!M(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function tl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Ut(t)}function il(t,s){var l,c,f,_,w,C,I,V;if(!t||t.length===0)throw new Error("latlngs not passed");Ut(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var se=be([0,0]),ve=Fe(t),Ce=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());Ce<1700&&(se=no(t));var St=t.length,ct=[];for(l=0;l<St;l++){var Bt=be(t[l]);ct.push(s.project(be([Bt.lat-se.lat,Bt.lng-se.lng])))}for(l=0,c=0;l<St-1;l++)c+=ct[l].distanceTo(ct[l+1])/2;if(c===0)V=ct[0];else for(l=0,_=0;l<St-1;l++)if(w=ct[l],C=ct[l+1],f=w.distanceTo(C),_+=f,_>c){I=(_-c)/f,V=[C.x-I*(C.x-w.x),C.y-I*(C.y-w.y)];break}var Ot=s.unproject(pe(V));return be([Ot.lat+se.lat,Ot.lng+se.lng])}var Th={__proto__:null,simplify:Ya,pointToSegmentDistance:Xa,closestPointOnSegment:wh,clipSegment:el,_getEdgeIntersection:js,_getBitCode:Vi,_sqClosestPointOnSegment:Yn,isFlat:Ut,_flat:tl,polylineCenter:il},ro={project:function(t){return new ie(t.lng,t.lat)},unproject:function(t){return new De(t.y,t.x)},bounds:new Re([-180,-90],[180,90])},oo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,l=this.R,c=t.lat*s,f=this.R_MINOR/l,_=Math.sqrt(1-f*f),w=_*Math.sin(c),C=Math.tan(Math.PI/4-c/2)/Math.pow((1-w)/(1+w),_/2);return c=-l*Math.log(Math.max(C,1e-10)),new ie(t.lng*s*l,c)},unproject:function(t){for(var s=180/Math.PI,l=this.R,c=this.R_MINOR/l,f=Math.sqrt(1-c*c),_=Math.exp(-t.y/l),w=Math.PI/2-2*Math.atan(_),C=0,I=.1,V;C<15&&Math.abs(I)>1e-7;C++)V=f*Math.sin(w),V=Math.pow((1-V)/(1+V),f/2),I=Math.PI/2-2*Math.atan(_*V)-w,w+=I;return new De(w*s,t.x*s/l)}},Ph={__proto__:null,LonLat:ro,Mercator:oo,SphericalMercator:Vt},xh=o({},Lt,{code:"EPSG:3395",projection:oo,transformation:function(){var t=.5/(Math.PI*oo.R);return b(t,.5,-t,.5)}()}),nl=o({},Lt,{code:"EPSG:4326",projection:ro,transformation:b(1/180,1,-1/180,.5)}),Eh=o({},vt,{projection:ro,transformation:b(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var l=s.lng-t.lng,c=s.lat-t.lat;return Math.sqrt(l*l+c*c)},infinite:!0});vt.Earth=Lt,vt.EPSG3395=xh,vt.EPSG3857=T,vt.EPSG900913=D,vt.EPSG4326=nl,vt.Simple=Eh;var Zt=ke.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var l=this.getEvents();s.on(l,this),this.once("remove",function(){s.off(l,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Ie.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=h(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=h(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},_addLayers:function(t){t=t?M(t)?t:[t]:[];for(var s=0,l=t.length;s<l;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=h(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var f=this._zoomBoundLayers[c].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),s=f.maxZoom===void 0?s:Math.max(s,f.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var cn=Zt.extend({initialize:function(t,s){O(this,s),this._layers={};var l,c;if(t)for(l=0,c=t.length;l<c;l++)this.addLayer(t[l])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[t]&&c[t].apply(c,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),Lh=function(t,s){return new cn(t,s)},di=cn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),cn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),cn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new lt;for(var s in this._layers){var l=this._layers[s];t.extend(l.getBounds?l.getBounds():l.getLatLng())}return t}}),Oh=function(t,s){return new di(t,s)},dn=Y.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){O(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var l=this._getIconUrl(t);if(!l){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,s){var l=this.options,c=l[s+"Size"];typeof c=="number"&&(c=[c,c]);var f=pe(c),_=pe(s==="shadow"&&l.shadowAnchor||l.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(l.className||""),_&&(t.style.marginLeft=-_.x+"px",t.style.marginTop=-_.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return he.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ch(t){return new dn(t)}var Xn=dn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Xn.imagePath!="string"&&(Xn.imagePath=this._detectIconPath()),(this.options.imagePath||Xn.imagePath)+dn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(l,c,f){var _=c.exec(l);return _&&_[f]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=je("div","leaflet-default-icon-path",document.body),s=Hn(t,"background-image")||Hn(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),sl=ni.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new ki(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ee(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,l=s._map,c=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,_=Fi(s._icon),w=l.getPixelBounds(),C=l.getPixelOrigin(),I=ze(w.min._subtract(C).add(f),w.max._subtract(C).subtract(f));if(!I.contains(_)){var V=pe((Math.max(I.max.x,_.x)-I.max.x)/(w.max.x-I.max.x)-(Math.min(I.min.x,_.x)-I.min.x)/(w.min.x-I.min.x),(Math.max(I.max.y,_.y)-I.max.y)/(w.max.y-I.max.y)-(Math.min(I.min.y,_.y)-I.min.y)/(w.min.y-I.min.y)).multiplyBy(c);l.panBy(V,{animate:!1}),this._draggable._newPos._add(V),this._draggable._startPos._add(V),nt(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=E(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(z(this._panRequest),this._panRequest=E(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,l=s._shadow,c=Fi(s._icon),f=s._map.layerPointToLatLng(c);l&&nt(l,c),s._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){z(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Ns=Zt.extend({options:{icon:new Xn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){O(this,s),this._latlng=be(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=be(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=t.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(l.title=t.title),l.tagName==="IMG"&&(l.alt=t.alt||"")),Ee(l,s),t.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ae(l,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),_=!1;f!==this._shadow&&(this._removeShadow(),_=!0),f&&(Ee(f,s),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&_&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),Xe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(Ee(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sl)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sl(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Nt(this._icon,t),this._shadow&&Nt(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,l=s.iconSize?pe(s.iconSize):pe(0,0),c=s.iconAnchor?pe(s.iconAnchor):pe(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:l.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mh(t,s){return new Ns(t,s)}var Ti=Zt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return O(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Us=Ti.extend({options:{fill:!0,radius:10},initialize:function(t,s){O(this,s),this._latlng=be(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=be(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Ti.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,l=this._clickTolerance(),c=[t+l,s+l];this._pxBounds=new Re(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ih(t,s){return new Us(t,s)}var ao=Us.extend({initialize:function(t,s,l){if(typeof s=="number"&&(s=o({},l,{radius:s})),O(this,s),this._latlng=be(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new lt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Ti.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===Lt.distance){var f=Math.PI/180,_=this._mRadius/Lt.R/f,w=l.project([s+_,t]),C=l.project([s-_,t]),I=w.add(C).divideBy(2),V=l.unproject(I).lat,se=Math.acos((Math.cos(_*f)-Math.sin(s*f)*Math.sin(V*f))/(Math.cos(s*f)*Math.cos(V*f)))/f;(isNaN(se)||se===0)&&(se=_/Math.cos(Math.PI/180*s)),this._point=I.subtract(l.getPixelOrigin()),this._radius=isNaN(se)?0:I.x-l.project([V,t-se]).x,this._radiusY=I.y-w.y}else{var ve=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(ve).x}this._updateBounds()}});function Rh(t,s,l){return new ao(t,s,l)}var hi=Ti.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){O(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,l=null,c=Yn,f,_,w=0,C=this._parts.length;w<C;w++)for(var I=this._parts[w],V=1,se=I.length;V<se;V++){f=I[V-1],_=I[V];var ve=c(t,f,_,!0);ve<s&&(s=ve,l=c(t,f,_))}return l&&(l.distance=Math.sqrt(s)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return il(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=be(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new lt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Ut(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],l=Ut(t),c=0,f=t.length;c<f;c++)l?(s[c]=be(t[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(t[c]);return s},_project:function(){var t=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new ie(t,t);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,l){var c=t[0]instanceof De,f=t.length,_,w;if(c){for(w=[],_=0;_<f;_++)w[_]=this._map.latLngToLayerPoint(t[_]),l.extend(w[_]);s.push(w)}else for(_=0;_<f;_++)this._projectLatlngs(t[_],s,l)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,l,c,f,_,w,C,I;for(l=0,f=0,_=this._rings.length;l<_;l++)for(I=this._rings[l],c=0,w=I.length;c<w-1;c++)C=el(I[c],I[c+1],t,c,!0),C&&(s[f]=s[f]||[],s[f].push(C[0]),(C[1]!==I[c+1]||c===w-2)&&(s[f].push(C[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,l=0,c=t.length;l<c;l++)t[l]=Ya(t[l],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var l,c,f,_,w,C,I=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,_=this._parts.length;l<_;l++)for(C=this._parts[l],c=0,w=C.length,f=w-1;c<w;f=c++)if(!(!s&&c===0)&&Xa(t,C[f],C[c])<=I)return!0;return!1}});function Dh(t,s){return new hi(t,s)}hi._flat=tl;var hn=hi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ja(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=hi.prototype._convertLatLngs.call(this,t),l=s.length;return l>=2&&s[0]instanceof De&&s[0].equals(s[l-1])&&s.pop(),s},_setLatLngs:function(t){hi.prototype._setLatLngs.call(this,t),Ut(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Ut(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,l=new ie(s,s);if(t=new Re(t.min.subtract(l),t.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,f=this._rings.length,_;c<f;c++)_=Ga(this._rings[c],t,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,l,c,f,_,w,C,I,V;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(_=0,I=this._parts.length;_<I;_++)for(l=this._parts[_],w=0,V=l.length,C=V-1;w<V;C=w++)c=l[w],f=l[C],c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(s=!s);return s||hi.prototype._containsPoint.call(this,t,!0)}});function $h(t,s){return new hn(t,s)}var fi=di.extend({initialize:function(t,s){O(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=M(t)?t:t.features,l,c,f;if(s){for(l=0,c=s.length;l<c;l++)f=s[l],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var _=this.options;if(_.filter&&!_.filter(t))return this;var w=Bs(t,_);return w?(w.feature=qs(t),w.defaultOptions=w.options,this.resetStyle(w),_.onEachFeature&&_.onEachFeature(t,w),this.addLayer(w)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function Bs(t,s){var l=t.type==="Feature"?t.geometry:t,c=l?l.coordinates:null,f=[],_=s&&s.pointToLayer,w=s&&s.coordsToLatLng||lo,C,I,V,se;if(!c&&!l)return null;switch(l.type){case"Point":return C=w(c),rl(_,t,C,s);case"MultiPoint":for(V=0,se=c.length;V<se;V++)C=w(c[V]),f.push(rl(_,t,C,s));return new di(f);case"LineString":case"MultiLineString":return I=Fs(c,l.type==="LineString"?0:1,w),new hi(I,s);case"Polygon":case"MultiPolygon":return I=Fs(c,l.type==="Polygon"?1:2,w),new hn(I,s);case"GeometryCollection":for(V=0,se=l.geometries.length;V<se;V++){var ve=Bs({geometry:l.geometries[V],type:"Feature",properties:t.properties},s);ve&&f.push(ve)}return new di(f);case"FeatureCollection":for(V=0,se=l.features.length;V<se;V++){var Ce=Bs(l.features[V],s);Ce&&f.push(Ce)}return new di(f);default:throw new Error("Invalid GeoJSON object.")}}function rl(t,s,l,c){return t?t(s,l):new Ns(l,c&&c.markersInheritOptions&&c)}function lo(t){return new De(t[1],t[0],t[2])}function Fs(t,s,l){for(var c=[],f=0,_=t.length,w;f<_;f++)w=s?Fs(t[f],s-1,l):(l||lo)(t[f]),c.push(w);return c}function uo(t,s){return t=be(t),t.alt!==void 0?[y(t.lng,s),y(t.lat,s),y(t.alt,s)]:[y(t.lng,s),y(t.lat,s)]}function zs(t,s,l,c){for(var f=[],_=0,w=t.length;_<w;_++)f.push(s?zs(t[_],Ut(t[_])?0:s-1,l,c):uo(t[_],c));return!s&&l&&f.length>0&&f.push(f[0].slice()),f}function fn(t,s){return t.feature?o({},t.feature,{geometry:s}):qs(s)}function qs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var co={toGeoJSON:function(t){return fn(this,{type:"Point",coordinates:uo(this.getLatLng(),t)})}};Ns.include(co),ao.include(co),Us.include(co),hi.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),l=zs(this._latlngs,s?1:0,!1,t);return fn(this,{type:(s?"Multi":"")+"LineString",coordinates:l})}}),hn.include({toGeoJSON:function(t){var s=!Ut(this._latlngs),l=s&&!Ut(this._latlngs[0]),c=zs(this._latlngs,l?2:s?1:0,!0,t);return s||(c=[c]),fn(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),cn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(l){s.push(l.toGeoJSON(t).geometry.coordinates)}),fn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var l=s==="GeometryCollection",c=[];return this.eachLayer(function(f){if(f.toGeoJSON){var _=f.toGeoJSON(t);if(l)c.push(_.geometry);else{var w=qs(_);w.type==="FeatureCollection"?c.push.apply(c,w.features):c.push(w)}}}),l?fn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function ol(t,s){return new fi(t,s)}var jh=ol,Vs=Zt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,l){this._url=t,this._bounds=Fe(s),O(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ee(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&ln(this._image),this},bringToBack:function(){return this._map&&un(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Fe(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:je("img");if(Ee(s,"leaflet-image-layer"),this._zoomAnimated&&Ee(s,"leaflet-zoom-animated"),this.options.className&&Ee(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;Bi(this._image,l,s)},_reset:function(){var t=this._image,s=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=s.getSize();nt(t,s.min),t.style.width=l.x+"px",t.style.height=l.y+"px"},_updateOpacity:function(){Nt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Nh=function(t,s,l){return new Vs(t,s,l)},al=Vs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:je("video");if(Ee(s,"leaflet-image-layer"),this._zoomAnimated&&Ee(s,"leaflet-zoom-animated"),this.options.className&&Ee(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onloadeddata=u(this.fire,this,"load"),t){for(var l=s.getElementsByTagName("source"),c=[],f=0;f<l.length;f++)c.push(l[f].src);this._url=l.length>0?c:[s.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var w=je("source");w.src=this._url[_],s.appendChild(w)}}});function Uh(t,s,l){return new al(t,s,l)}var ll=Vs.extend({_initImage:function(){var t=this._image=this._url;Ee(t,"leaflet-image-layer"),this._zoomAnimated&&Ee(t,"leaflet-zoom-animated"),this.options.className&&Ee(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function Bh(t,s,l){return new ll(t,s,l)}var si=Zt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof De||M(t))?(this._latlng=be(t),O(this,s)):(O(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Nt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Nt(this._container,1),this.bringToFront(),this.options.interactive&&(Ee(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Nt(this._container,0),this._removeTimeout=setTimeout(u(Xe,void 0,this._container),200)):Xe(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=be(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&ln(this._container),this},bringToBack:function(){return this._map&&un(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof di){s=null;var l=this._source._layers;for(var c in l)if(l[c]._map){s=l[c];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=pe(this.options.offset),l=this._getAnchor();this._zoomAnimated?nt(this._container,t.add(l)):s=s.add(t).add(l);var c=this._containerBottom=-s.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});Ie.include({_initOverlay:function(t,s,l,c){var f=s;return f instanceof t||(f=new t(c).setContent(s)),l&&f.setLatLng(l),f}}),Zt.include({_initOverlay:function(t,s,l,c){var f=l;return f instanceof t?(O(f,c),f._source=this):(f=s&&!c?s:new t(c,this),f.setContent(l)),f}});var Hs=si.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,si.prototype.openOn.call(this,t)},onAdd:function(t){si.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Ti||this._source.on("preclick",zi))},onRemove:function(t){si.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Ti||this._source.off("preclick",zi))},getEvents:function(){var t=si.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=je("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=je("div",t+"-content-wrapper",s);if(this._contentNode=je("div",t+"-content",l),Gn(s),Qr(this._contentNode),Ae(s,"contextmenu",zi),this._tipContainer=je("div",t+"-tip-container",s),this._tip=je("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=je("a",t+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Ae(c,"click",function(f){ft(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var l=t.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),s.width=l+1+"px",s.whiteSpace="",s.height="";var c=t.offsetHeight,f=this.options.maxHeight,_="leaflet-popup-scrolled";f&&c>f?(s.height=f+"px",Ee(t,_)):tt(t,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),l=this._getAnchor();nt(this._container,s.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(Hn(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+s,c=this._containerWidth,f=new ie(this._containerLeft,-l-this._containerBottom);f._add(Fi(this._container));var _=t.layerPointToContainerPoint(f),w=pe(this.options.autoPanPadding),C=pe(this.options.autoPanPaddingTopLeft||w),I=pe(this.options.autoPanPaddingBottomRight||w),V=t.getSize(),se=0,ve=0;_.x+c+I.x>V.x&&(se=_.x+c-V.x+I.x),_.x-se-C.x<0&&(se=_.x-C.x),_.y+l+I.y>V.y&&(ve=_.y+l-V.y+I.y),_.y-ve-C.y<0&&(ve=_.y-C.y),(se||ve)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([se,ve]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fh=function(t,s){return new Hs(t,s)};Ie.mergeOptions({closePopupOnClick:!0}),Ie.include({openPopup:function(t,s,l){return this._initOverlay(Hs,t,s,l).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Zt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Hs,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof di||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){qi(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Ti)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Zs=si.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){si.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){si.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=si.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=je("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,l,c=this._map,f=this._container,_=c.latLngToContainerPoint(c.getCenter()),w=c.layerPointToContainerPoint(t),C=this.options.direction,I=f.offsetWidth,V=f.offsetHeight,se=pe(this.options.offset),ve=this._getAnchor();C==="top"?(s=I/2,l=V):C==="bottom"?(s=I/2,l=0):C==="center"?(s=I/2,l=V/2):C==="right"?(s=0,l=V/2):C==="left"?(s=I,l=V/2):w.x<_.x?(C="right",s=0,l=V/2):(C="left",s=I+(se.x+ve.x)*2,l=V/2),t=t.subtract(pe(s,l,!0)).add(se).add(ve),tt(f,"leaflet-tooltip-right"),tt(f,"leaflet-tooltip-left"),tt(f,"leaflet-tooltip-top"),tt(f,"leaflet-tooltip-bottom"),Ee(f,"leaflet-tooltip-"+C),nt(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Nt(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zh=function(t,s){return new Zs(t,s)};Ie.include({openTooltip:function(t,s,l){return this._initOverlay(Zs,t,s,l).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Zt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Zs,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[s](l),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof di||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(Ae(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Ae(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,l,c;this._tooltip.options.sticky&&t.originalEvent&&(l=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(l),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var ul=dn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Ms(s),s.appendChild(l.html)):s.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=pe(l.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function qh(t){return new ul(t)}dn.Default=Xn;var Qn=Zt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:he.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){O(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Xe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(ln(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof ie?t:new ie(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,l=-t(-1/0,1/0),c=0,f=s.length,_;c<f;c++)_=s[c].style.zIndex,s[c]!==this._container&&_&&(l=t(l,+_));isFinite(l)&&(this.options.zIndex=l+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!he.ielt9){Nt(this._container,this.options.opacity);var t=+new Date,s=!1,l=!1;for(var c in this._tiles){var f=this._tiles[c];if(!(!f.current||!f.loaded)){var _=Math.min(1,(t-f.loaded)/200);Nt(f.el,_),_<1?s=!0:(f.active?l=!0:this._onOpaqueTile(f),f.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),s&&(z(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=je("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===t?(this._levels[l].el.style.zIndex=s-Math.abs(t-l),this._onUpdateLevel(l)):(Xe(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[t],f=this._map;return c||(c=this._levels[t]={},c.el=je("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,f.getCenter(),f.getZoom()),g(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,s,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Xe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,l,c){var f=Math.floor(t/2),_=Math.floor(s/2),w=l-1,C=new ie(+f,+_);C.z=+w;var I=this._tileCoordsToKey(C),V=this._tiles[I];return V&&V.active?(V.retain=!0,!0):(V&&V.loaded&&(V.retain=!0),w>c?this._retainParent(f,_,w,c):!1)},_retainChildren:function(t,s,l,c){for(var f=2*t;f<2*t+2;f++)for(var _=2*s;_<2*s+2;_++){var w=new ie(f,_);w.z=l+1;var C=this._tileCoordsToKey(w),I=this._tiles[C];if(I&&I.active){I.retain=!0;continue}else I&&I.loaded&&(I.retain=!0);l+1<c&&this._retainChildren(f,_,l+1,c)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,l,c){var f=Math.round(s);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var _=this.options.updateWhenZooming&&f!==this._tileZoom;(!c||_)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var l in this._levels)this._setZoomTransform(this._levels[l],t,s)},_setZoomTransform:function(t,s,l){var c=this._map.getZoomScale(l,t.zoom),f=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,l)).round();he.any3d?Bi(t.el,f,c):nt(t.el,f)},_resetGrid:function(){var t=this._map,s=t.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],c).x/l.x),Math.ceil(t.project([0,s.wrapLng[1]],c).x/l.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],c).y/l.x),Math.ceil(t.project([s.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,l=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(l,this._tileZoom),f=s.project(t,this._tileZoom).floor(),_=s.getSize().divideBy(c*2);return new Re(f.subtract(_),f.add(_))},_update:function(t){var s=this._map;if(s){var l=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(c),_=f.getCenter(),w=[],C=this.options.keepBuffer,I=new Re(f.getBottomLeft().subtract([C,-C]),f.getTopRight().add([C,-C]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var V in this._tiles){var se=this._tiles[V].coords;(se.z!==this._tileZoom||!I.contains(new ie(se.x,se.y)))&&(this._tiles[V].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(t,l);return}for(var ve=f.min.y;ve<=f.max.y;ve++)for(var Ce=f.min.x;Ce<=f.max.x;Ce++){var St=new ie(Ce,ve);if(St.z=this._tileZoom,!!this._isValidTile(St)){var ct=this._tiles[this._tileCoordsToKey(St)];ct?ct.current=!0:w.push(St)}}if(w.sort(function(Ot,mn){return Ot.distanceTo(_)-mn.distanceTo(_)}),w.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Bt=document.createDocumentFragment();for(Ce=0;Ce<w.length;Ce++)this._addTile(w[Ce],Bt);this._level.el.appendChild(Bt)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var l=this._globalTileRange;if(!s.wrapLng&&(t.x<l.min.x||t.x>l.max.x)||!s.wrapLat&&(t.y<l.min.y||t.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return Fe(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,l=this.getTileSize(),c=t.scaleBy(l),f=c.add(l),_=s.unproject(c,t.z),w=s.unproject(f,t.z);return[_,w]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),l=new lt(s[0],s[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),l=new ie(+s[0],+s[1]);return l.z=+s[2],l},_removeTile:function(t){var s=this._tiles[t];s&&(Xe(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){Ee(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=g,t.onmousemove=g,he.ielt9&&this.options.opacity<1&&Nt(t,this.options.opacity)},_addTile:function(t,s){var l=this._getTilePos(t),c=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&E(u(this._tileReady,this,t,null,f)),nt(f,l),this._tiles[c]={el:f,coords:t,current:!0},s.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,s,l){s&&this.fire("tileerror",{error:s,tile:l,coords:t});var c=this._tileCoordsToKey(t);l=this._tiles[c],l&&(l.loaded=+new Date,this._map._fadeAnimated?(Nt(l.el,0),z(this._fadeFrame),this._fadeFrame=E(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),s||(Ee(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),he.ielt9||!this._map._fadeAnimated?E(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new ie(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new Re(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vh(t){return new Qn(t)}var pn=Qn.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=O(this,s),s.detectRetina&&he.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var l=document.createElement("img");return Ae(l,"load",u(this._tileOnLoad,this,s,l)),Ae(l,"error",u(this._tileOnError,this,s,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(t),l},getTileUrl:function(t){var s={r:he.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=l),s["-y"]=l}return R(this._url,o(s,this.options))},_tileOnLoad:function(t,s){he.ielt9?setTimeout(u(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,l){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),t(l,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(t=s-t),t+c},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=g,s.onerror=g,!s.complete)){s.src=ue;var l=this._tiles[t].coords;Xe(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:l})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",ue),Qn.prototype._removeTile.call(this,t)},_tileReady:function(t,s,l){if(!(!this._map||l&&l.getAttribute("src")===ue))return Qn.prototype._tileReady.call(this,t,s,l)}});function cl(t,s){return new pn(t,s)}var dl=pn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var l=o({},this.defaultWmsParams);for(var c in s)c in this.options||(l[c]=s[c]);s=O(this,s);var f=s.detectRetina&&he.retina?2:1,_=this.getTileSize();l.width=_.x*f,l.height=_.y*f,this.wmsParams=l},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,pn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),l=this._crs,c=ze(l.project(s[0]),l.project(s[1])),f=c.min,_=c.max,w=(this._wmsVersion>=1.3&&this._crs===nl?[f.y,f.x,_.y,_.x]:[f.x,f.y,_.x,_.y]).join(","),C=pn.prototype.getTileUrl.call(this,t);return C+k(this.wmsParams,C,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+w},setParams:function(t,s){return o(this.wmsParams,t),s||this.redraw(),this}});function Hh(t,s){return new dl(t,s)}pn.WMS=dl,cl.wms=Hh;var pi=Zt.extend({options:{padding:.1},initialize:function(t){O(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ee(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var l=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,s),_=c.multiplyBy(-l).add(f).subtract(this._map._getNewPixelOrigin(t,s));he.any3d?Bi(this._container,_,l):nt(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),l=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new Re(l,l.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hl=pi.extend({options:{tolerance:0},getEvents:function(){var t=pi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){pi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Ae(t,"mousemove",this._onMouseMove,this),Ae(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ae(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){z(this._redrawRequest),delete this._ctx,Xe(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var t=this._bounds,s=this._container,l=t.getSize(),c=he.retina?2:1;nt(s,t.min),s.width=c*l.x,s.height=c*l.y,s.style.width=l.x+"px",s.style.height=l.y+"px",he.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){pi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,l=s.next,c=s.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),l=[],c,f;for(f=0;f<s.length;f++){if(c=Number(s[f]),isNaN(c))return;l.push(c)}t.options._dashArray=l}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||E(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var l=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var l,c,f,_,w=t._parts,C=w.length,I=this._ctx;if(C){for(I.beginPath(),l=0;l<C;l++){for(c=0,f=w[l].length;c<f;c++)_=w[l][c],I[c?"lineTo":"moveTo"](_.x,_.y);s&&I.closePath()}this._fillStroke(I,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,l=this._ctx,c=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||c)/c;f!==1&&(l.save(),l.scale(1,f)),l.beginPath(),l.arc(s.x,s.y/f,c,0,Math.PI*2,!1),f!==1&&l.restore(),this._fillStroke(l,t)}},_fillStroke:function(t,s){var l=s.options;l.fill&&(t.globalAlpha=l.fillOpacity,t.fillStyle=l.fillColor||l.color,t.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=l.opacity,t.lineWidth=l.weight,t.strokeStyle=l.color,t.lineCap=l.lineCap,t.lineJoin=l.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(l))&&(c=l);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(tt(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(Ee(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,l){this._map._fireDOMEvent(s,l||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function fl(t){return he.canvas?new hl(t):null}var es=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zh={_initContainer:function(){this._container=je("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(pi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=es("shape");Ee(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=es("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Xe(s),t.removeInteractiveTarget(s),delete this._layers[h(t)]},_updateStyle:function(t){var s=t._stroke,l=t._fill,c=t.options,f=t._container;f.stroked=!!c.stroke,f.filled=!!c.fill,c.stroke?(s||(s=t._stroke=es("stroke")),f.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=M(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(f.removeChild(s),t._stroke=null),c.fill?(l||(l=t._fill=es("fill")),f.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(f.removeChild(l),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),l=Math.round(t._radius),c=Math.round(t._radiusY||l);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){ln(t._container)},_bringToBack:function(t){un(t._container)}},Ks=he.vml?es:W,ts=pi.extend({_initContainer:function(){this._container=Ks("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ks("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xe(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){pi.prototype._update.call(this);var t=this._bounds,s=t.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,l.setAttribute("width",s.x),l.setAttribute("height",s.y)),nt(l,t.min),l.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=Ks("path");t.options.className&&Ee(s,t.options.className),t.options.interactive&&Ee(s,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Xe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,l=t.options;s&&(l.stroke?(s.setAttribute("stroke",l.color),s.setAttribute("stroke-opacity",l.opacity),s.setAttribute("stroke-width",l.weight),s.setAttribute("stroke-linecap",l.lineCap),s.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?s.setAttribute("stroke-dasharray",l.dashArray):s.removeAttribute("stroke-dasharray"),l.dashOffset?s.setAttribute("stroke-dashoffset",l.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),l.fill?(s.setAttribute("fill",l.fillColor||l.color),s.setAttribute("fill-opacity",l.fillOpacity),s.setAttribute("fill-rule",l.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,q(t._parts,s))},_updateCircle:function(t){var s=t._point,l=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||l,f="a"+l+","+c+" 0 1,0 ",_=t._empty()?"M0 0":"M"+(s.x-l)+","+s.y+f+l*2+",0 "+f+-l*2+",0 ";this._setPath(t,_)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){ln(t._path)},_bringToBack:function(t){un(t._path)}});he.vml&&ts.include(Zh);function pl(t){return he.svg||he.vml?new ts(t):null}Ie.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&fl(t)||pl(t)}});var ml=hn.extend({initialize:function(t,s){hn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Fe(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Kh(t,s){return new ml(t,s)}ts.create=Ks,ts.pointsToPath=q,fi.geometryToLayer=Bs,fi.coordsToLatLng=lo,fi.coordsToLatLngs=Fs,fi.latLngToCoords=uo,fi.latLngsToCoords=zs,fi.getFeature=fn,fi.asFeature=qs,Ie.mergeOptions({boxZoom:!0});var vl=ni.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Ae(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Zn(),Hr(),this._startPoint=this._map.mouseEventToContainerPoint(t),Ae(document,{contextmenu:qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=je("div","leaflet-zoom-box",this._container),Ee(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new Re(this._point,this._startPoint),l=s.getSize();nt(this._box,s.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Xe(this._box),tt(this._container,"leaflet-crosshair")),Kn(),Zr(),He(document,{contextmenu:qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Ie.addInitHook("addHandler","boxZoom",vl),Ie.mergeOptions({doubleClickZoom:!0});var _l=ni.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,l=s.getZoom(),c=s.options.zoomDelta,f=t.originalEvent.shiftKey?l-c:l+c;s.options.doubleClickZoom==="center"?s.setZoom(f):s.setZoomAround(t.containerPoint,f)}});Ie.addInitHook("addHandler","doubleClickZoom",_l),Ie.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gl=ni.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new ki(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}Ee(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=Fe(this._map.options.maxBounds);this._offsetLimit=ze(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,f=(c-s+l)%t+s-l,_=(c+s+l)%t-s-l,w=Math.abs(f+l)<Math.abs(_+l)?f:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=w},_onDragEnd:function(t){var s=this._map,l=s.options,c=!l.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),c)s.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,w=l.easeLinearity,C=f.multiplyBy(w/_),I=C.distanceTo([0,0]),V=Math.min(l.inertiaMaxSpeed,I),se=C.multiplyBy(V/I),ve=V/(l.inertiaDeceleration*w),Ce=se.multiplyBy(-ve/2).round();!Ce.x&&!Ce.y?s.fire("moveend"):(Ce=s._limitOffset(Ce,s.options.maxBounds),E(function(){s.panBy(Ce,{duration:ve,easeLinearity:w,noMoveStart:!0,animate:!0})}))}}});Ie.addInitHook("addHandler","dragging",gl),Ie.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yl=ni.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Ae(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,l=t.scrollTop||s.scrollTop,c=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},l=this.keyCodes,c,f;for(c=0,f=l.left.length;c<f;c++)s[l.left[c]]=[-1*t,0];for(c=0,f=l.right.length;c<f;c++)s[l.right[c]]=[t,0];for(c=0,f=l.down.length;c<f;c++)s[l.down[c]]=[0,t];for(c=0,f=l.up.length;c<f;c++)s[l.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},l=this.keyCodes,c,f;for(c=0,f=l.zoomIn.length;c<f;c++)s[l.zoomIn[c]]=t;for(c=0,f=l.zoomOut.length;c<f;c++)s[l.zoomOut[c]]=-t},_addHooks:function(){Ae(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,l=this._map,c;if(s in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(c=this._panKeys[s],t.shiftKey&&(c=pe(c).multiplyBy(3)),l.options.maxBounds&&(c=l._limitOffset(pe(c),l.options.maxBounds)),l.options.worldCopyJump){var f=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(c)));l.panTo(f)}else l.panBy(c)}else if(s in this._zoomKeys)l.setZoom(l.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;qi(t)}}});Ie.addInitHook("addHandler","keyboard",yl),Ie.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bl=ni.extend({addHooks:function(){Ae(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=Va(t),l=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),qi(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),l=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,_=l?Math.ceil(f/l)*l:f,w=t._limitZoom(s+(this._delta>0?_:-_))-s;this._delta=0,this._startTime=null,w&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+w):t.setZoomAround(this._lastMousePos,s+w))}});Ie.addInitHook("addHandler","scrollWheelZoom",bl);var Wh=600;Ie.mergeOptions({tapHold:he.touchNative&&he.safari&&he.mobile,tapTolerance:15});var wl=ni.extend({addHooks:function(){Ae(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new ie(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Ae(document,"touchend",ft),Ae(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Wh),Ae(document,"touchend touchcancel contextmenu",this._cancel,this),Ae(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){He(document,"touchend",ft),He(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new ie(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var l=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});l._simulated=!0,s.target.dispatchEvent(l)}});Ie.addInitHook("addHandler","tapHold",wl),Ie.mergeOptions({touchZoom:he.touch,bounceAtZoomLimits:!0});var Sl=ni.extend({addHooks:function(){Ee(this._map._container,"leaflet-touch-zoom"),Ae(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Ae(document,"touchmove",this._onTouchMove,this),Ae(document,"touchend touchcancel",this._onTouchEnd,this),ft(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]),f=l.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(f,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&f<1||this._zoom>s.getMaxZoom()&&f>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var _=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(f===1&&_.x===0&&_.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),z(this._animRequest);var w=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=E(w,this,!0),ft(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,z(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Ie.addInitHook("addHandler","touchZoom",Sl),Ie.BoxZoom=vl,Ie.DoubleClickZoom=_l,Ie.Drag=gl,Ie.Keyboard=yl,Ie.ScrollWheelZoom=bl,Ie.TapHold=wl,Ie.TouchZoom=Sl,n.Bounds=Re,n.Browser=he,n.CRS=vt,n.Canvas=hl,n.Circle=ao,n.CircleMarker=Us,n.Class=Y,n.Control=Ht,n.DivIcon=ul,n.DivOverlay=si,n.DomEvent=hh,n.DomUtil=ch,n.Draggable=ki,n.Evented=ke,n.FeatureGroup=di,n.GeoJSON=fi,n.GridLayer=Qn,n.Handler=ni,n.Icon=dn,n.ImageOverlay=Vs,n.LatLng=De,n.LatLngBounds=lt,n.Layer=Zt,n.LayerGroup=cn,n.LineUtil=Th,n.Map=Ie,n.Marker=Ns,n.Mixin=yh,n.Path=Ti,n.Point=ie,n.PolyUtil=bh,n.Polygon=hn,n.Polyline=hi,n.Popup=Hs,n.PosAnimation=Ha,n.Projection=Ph,n.Rectangle=ml,n.Renderer=pi,n.SVG=ts,n.SVGOverlay=ll,n.TileLayer=pn,n.Tooltip=Zs,n.Transformation=rn,n.Util=F,n.VideoOverlay=al,n.bind=u,n.bounds=ze,n.canvas=fl,n.circle=Rh,n.circleMarker=Ih,n.control=Jn,n.divIcon=qh,n.extend=o,n.featureGroup=Oh,n.geoJSON=ol,n.geoJson=jh,n.gridLayer=Vh,n.icon=Ch,n.imageOverlay=Nh,n.latLng=be,n.latLngBounds=Fe,n.layerGroup=Lh,n.map=fh,n.marker=Mh,n.point=pe,n.polygon=$h,n.polyline=Dh,n.popup=Fh,n.rectangle=Kh,n.setOptions=O,n.stamp=h,n.svg=pl,n.svgOverlay=Bh,n.tileLayer=cl,n.tooltip=zh,n.transformation=b,n.version=r,n.videoOverlay=Uh;var Gh=window.L;n.noConflict=function(){return window.L=Gh,this},window.L=n})})(ia,ia.exports);var Ag=ia.exports;const Kt=Fm(Ag),zd=[{id:"station-151",name:"DIRHAMI SADAM",location:"Lne maakond",coordinates:[59.21003692279346,23.49896192760152],hasStation:!0,stationType:"Olerex",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1401",name:"VARBLA SADAM",location:"Prnu maakond",coordinates:[58.43484598380541,23.684324121426343],hasStation:!0,stationType:"Olerex",fuelLevel:20,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-326",name:"NAISSAARE SADAM",location:"Harju maakond",coordinates:[59.55759484273108,24.55348856209784],hasStation:!0,stationType:"Alexela",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-250",name:"KUIVASTU SADAM",location:"Saare maakond",coordinates:[58.57294897894946,23.392649978026128],hasStation:!0,stationType:"Other",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-207",name:"KELNASE SADAM",location:"Harju maakond",coordinates:[59.636951026768706,25.011867300486617],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-348",name:"PATAREISADAM",location:"Harju maakond",coordinates:[59.448366521516434,24.752465507475613],hasStation:!0,stationType:"Other",fuelLevel:84,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-201",name:"KALLASTE SADAM",location:"Tartu maakond",coordinates:[58.668860481142566,27.165702769947824],hasStation:!0,stationType:"Alexela",fuelLevel:21,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-370",name:"PRNU SADAM",location:"Prnu maakond",coordinates:[58.38634198599385,24.481508870106325],hasStation:!0,stationType:"Other",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-313",name:"LEPPNEEME SADAM",location:"Harju maakond",coordinates:[59.5509187722641,24.868294011100197],hasStation:!0,stationType:"Other",fuelLevel:78,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-390",name:"VENE-BALTI SADAM",location:"Harju maakond",coordinates:[59.4593728708958,24.660111697149414],hasStation:!0,stationType:"Other",fuelLevel:50,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-302",name:"KURESSAARE SADAM",location:"Saare maakond",coordinates:[58.24504241378111,22.470592197513312],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-347",name:"PALDISKI PHJASADAM",location:"Harju maakond",coordinates:[59.34843151798162,24.051153538315592],hasStation:!0,stationType:"Other",fuelLevel:29,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-357",name:"ROOMASSAARE SADAM",location:"Saare maakond",coordinates:[58.216442900827786,22.505283815589987],hasStation:!0,stationType:"Other",fuelLevel:98,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-371",name:"SOELA SADAM",location:"Saare maakond",coordinates:[58.61757022248619,22.592246484257174],hasStation:!0,stationType:"Alexela",fuelLevel:98,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-374",name:"SUURSADAM",location:"Hiiu maakond",coordinates:[58.97588001930916,22.90780230864535],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1403",name:"KARLOVA PAADISADAM",location:"Tartu maakond",coordinates:[58.36924669964509,26.745325133140085],hasStation:!0,stationType:"Other",fuelLevel:58,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-373",name:"SUUR-HOLMI SADAM",location:"Lne maakond",coordinates:[58.958300072379465,23.526310476455595],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-382",name:"TOILA SADAM",location:"Ida-Viru maakond",coordinates:[59.427786464737984,27.5348288564074],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1600",name:"VSU SADAM",location:"Lne-Viru maakond",coordinates:[59.585700818310315,25.970719810712986],hasStation:!0,stationType:"Olerex",fuelLevel:99,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-318",name:"LOHUSALU SADAM",location:"Harju maakond",coordinates:[59.402582381641324,24.20638965593215],hasStation:!0,stationType:"Other",fuelLevel:85,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-6600",name:"VRSKA SADAM",location:"Vru maakond",coordinates:[57.958099398442535,27.628566145050225],hasStation:!0,stationType:"Other",fuelLevel:65,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1907",name:"SUARU SADAM",location:"Prnu maakond",coordinates:[58.14100107258266,24.01825909036016],hasStation:!0,stationType:"Alexela",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-51",name:"KOLJUNUKI SADAM",location:"Harju maakond",coordinates:[59.50503122798446,25.089844423357498],hasStation:!0,stationType:"Other",fuelLevel:99,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1452",name:"KOLKJA SADAM",location:"Tartu maakond",coordinates:[58.55530338233313,27.21829548241359],hasStation:!0,stationType:"Other",fuelLevel:48,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-324",name:"LUNARANNA SADAM",location:"Saare maakond",coordinates:[58.5410841962558,23.318508199317954],hasStation:!0,stationType:"Alexela",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-368",name:"SILLAME SADAM",location:"Ida-Viru maakond",coordinates:[59.418699435561486,27.737863067827544],hasStation:!0,stationType:"Other",fuelLevel:30,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-168",name:"PIRITA SADAM",location:"Harju maakond",coordinates:[59.466849255484284,24.822584053315577],hasStation:!0,stationType:"Other",fuelLevel:87,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-330",name:"MNTU SADAM",location:"Saare maakond",coordinates:[57.948558221449865,22.12621804490712],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-154",name:"HELTERMAA SADAM",location:"Hiiu maakond",coordinates:[58.86586149705953,23.045427562456016],hasStation:!0,stationType:"Other",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-344",name:"RUHNU SADAM",location:"Saare maakond",coordinates:[57.78123357568677,23.27055552095325],hasStation:!0,stationType:"Alexela",fuelLevel:94,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2101",name:"MNTU VIKELAEVADE SADAM",location:"Saare maakond",coordinates:[57.949315460072754,22.122961869349453],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-402",name:"VRATI SADAM",location:"Prnu maakond",coordinates:[58.30904639720103,23.98906592639463],hasStation:!0,stationType:"Olerex",fuelLevel:95,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-360",name:"RPINA SADAM",location:"Plva maakond",coordinates:[58.12528842065397,27.529742753356434],hasStation:!0,stationType:"Other",fuelLevel:75,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-389",name:"VASKNARVA PAADISADAM",location:"Ida-Viru maakond",coordinates:[58.99686410270323,27.741337017336683],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-804",name:"NEEME SADAM",location:"Harju maakond",coordinates:[59.531374963563266,25.160386352856108],hasStation:!0,stationType:"Other",fuelLevel:0,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1201",name:"PRNU JAHTKLUBI JAHISADAM",location:"Prnu maakond",coordinates:[58.386999980487374,24.49066001630294],hasStation:!0,stationType:"Other",fuelLevel:70,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2115",name:"NARVA-JESUU SADAM",location:"Ida-Viru maakond",coordinates:[59.46474251606081,28.04529010935306],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-452",name:"KRDLA SADAM",location:"Hiiu maakond",coordinates:[59.00878218744771,22.75255657459167],hasStation:!0,stationType:"Other",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-3934",name:"LUUNJA JESADAM",location:"Tartu maakond",coordinates:[58.35422312635373,26.881983927553723],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1210",name:"KABERNEEME SADAM",location:"Harju maakond",coordinates:[59.520062821619156,25.278242581356942],hasStation:!0,stationType:"Olerex",fuelLevel:48,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-163",name:"KAKUME SADAM",location:"Harju maakond",coordinates:[59.45097870670802,24.603946567184025],hasStation:!0,stationType:"Alexela",fuelLevel:57,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-1207",name:"KIGUSTE SADAM",location:"Saare maakond",coordinates:[58.370242604922666,22.97454178228539],hasStation:!0,stationType:"Alexela",fuelLevel:100,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2266",name:"MEHIKOORMA SADAM",location:"Plva maakond",coordinates:[58.23711955631759,27.474515950329753],hasStation:!0,stationType:"Other",fuelLevel:26,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-450",name:"EISMA SADAM",location:"Lne-Viru maakond",coordinates:[59.56978286768515,26.303200688222102],hasStation:!0,stationType:"Olerex",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-332",name:"OIU SADAM",location:"Viljandi maakond",coordinates:[58.398338614687276,25.97592285103282],hasStation:!0,stationType:"Other",fuelLevel:83,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2114",name:"HARA SADAM",location:"Harju maakond",coordinates:[59.58873686885067,25.613293788125322],hasStation:!0,stationType:"Other",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-376",name:"SRU SADAM",location:"Hiiu maakond",coordinates:[58.69156723910896,22.522160411928486],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1966",name:"SAAGA SADAM",location:"Tartu maakond",coordinates:[58.381139460562494,26.99149335204067],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-404",name:"WESTMERI JAHISADAM",location:"Lne maakond",coordinates:[58.95912661614998,23.52535516470745],hasStation:!0,stationType:"Other",fuelLevel:2,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-362",name:"SAASTNA VANASADAM",location:"Prnu maakond",coordinates:[58.73073039790515,23.566114437338317],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9184",name:"VAALA SADAM",location:"Prnu maakond",coordinates:[58.363177821976116,24.56847690319154],hasStation:!0,stationType:"FuelDock",fuelLevel:59,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3989",name:"KIIDEVA SADAM",location:"Lne maakond",coordinates:[58.77161284265908,23.547805120308286],hasStation:!0,stationType:"FuelDock",fuelLevel:2,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-384",name:"VASKNARVA",location:"Ida-Viru maakond",coordinates:[59.007928664881895,27.736718062775935],hasStation:!0,stationType:"FuelDock",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-200",name:"KALLASTE SADAM",location:"Saare maakond",coordinates:[58.6681380168726,23.253271458237467],hasStation:!0,stationType:"FuelDock",fuelLevel:85,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2659",name:"ALLIKLEPA SADAM",location:"Harju maakond",coordinates:[59.28493976831885,23.79287842078223],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-310",name:"LAO SADAM",location:"Prnu maakond",coordinates:[58.23406118749257,24.12211430721333],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6155",name:"NARVA-JESUU KALURISADAM",location:"Ida-Viru maakond",coordinates:[59.45928564119241,28.065444184945235],hasStation:!0,stationType:"FuelDock",fuelLevel:62,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2200",name:"NASVA JESADAM",location:"Saare maakond",coordinates:[58.22927401448976,22.3815052413029],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-710",name:"ADMIRALI VIKESADAM",location:"Prnu maakond",coordinates:[58.52980831241627,23.67822960415182],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-355",name:"ROOGRAHU SADAM",location:"Hiiu maakond",coordinates:[58.99972382472675,22.819022156007403],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-397",name:"VIDU SADAM",location:"Prnu maakond",coordinates:[58.30861522084546,24.020126188552936],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-164",name:"KALANA SADAM",location:"Hiiu maakond",coordinates:[58.9199467123978,22.057586566782323],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-352",name:"ROHUNEEME SADAM",location:"Harju maakond",coordinates:[59.558595051987844,24.7929295975825],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-212",name:"KOGUVA SADAM",location:"Saare maakond",coordinates:[58.5960754,23.075541],hasStation:!0,stationType:"FuelDock",fuelLevel:6,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-399",name:"VRKAIA SADAM",location:"Saare maakond",coordinates:[58.68247571496831,23.198758797370793],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-354",name:"ROHUNEEME VIKESADAM",location:"Harju maakond",coordinates:[59.559144067264775,24.793449784823064],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-52",name:"MIIDURANNA SADAM",location:"Harju maakond",coordinates:[59.49981500907193,24.814816485991393],hasStation:!0,stationType:"FuelDock",fuelLevel:7,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-708",name:"HALDI SADAM",location:"Hiiu maakond",coordinates:[58.806952076597874,22.446811851797356],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-162",name:"JEKRU SADAM",location:"Ida-Viru maakond",coordinates:[58.982702907194515,27.18212296967626],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-319",name:"MUNALAIU SADAM",location:"Prnu maakond",coordinates:[58.22911019419104,24.118643304592368],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-331",name:"MNNI VIKESADAM",location:"Prnu maakond",coordinates:[58.517979719027004,23.66405820378694],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-329",name:"NURME SADAM",location:"Harju maakond",coordinates:[59.51790225516271,24.80058976342078],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-349",name:"RISTNA LUNASADAM",location:"Hiiu maakond",coordinates:[58.92166086743255,22.06255289395695],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-358",name:"ROOPA SADAM",location:"Saare maakond",coordinates:[58.26326730006585,21.873827533691543],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1650",name:"SALINMME PAADISADAM",location:"Hiiu maakond",coordinates:[58.84468620000001,22.9373696],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2139",name:"NAISTLAIU SADAM",location:"Hiiu maakond",coordinates:[58.82473230000001,23.0324017],hasStation:!0,stationType:"FuelDock",fuelLevel:57,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-7101",name:"VAINU SADAM",location:"Harju maakond",coordinates:[59.501530243091835,25.458218586290347],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-333",name:"PALDISKI LUNASADAM",location:"Harju maakond",coordinates:[59.3349842563559,24.07896335384912],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-150",name:"BEKKERI SADAM",location:"Harju maakond",coordinates:[59.455599980566376,24.666024192915636],hasStation:!0,stationType:"FuelDock",fuelLevel:55,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3703",name:"ASERI VIKESADAM (EHITAMISEL)",location:"Lne-Viru maakond",coordinates:[59.45894762396577,26.88345739849666],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-315",name:"LINDI SADAM",location:"Prnu maakond",coordinates:[58.32955079426123,24.2899292277986],hasStation:!0,stationType:"FuelDock",fuelLevel:88,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3956",name:"RANNAAUGU SADAM",location:"Saare maakond",coordinates:[58.54532536434771,22.219043842318335],hasStation:!0,stationType:"FuelDock",fuelLevel:99,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-160",name:"JUHETA VIKESADAM",location:"Prnu maakond",coordinates:[58.36906383262766,24.294891453787876],hasStation:!0,stationType:"FuelDock",fuelLevel:51,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1202",name:"PRANGLI LUNASADAM",location:"Harju maakond",coordinates:[59.61477372687315,25.015589776094654],hasStation:!0,stationType:"FuelDock",fuelLevel:82,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2670",name:"SUARU KALASADAM",location:"Prnu maakond",coordinates:[58.14107752311868,24.015984614824013],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2059",name:"RLBY SADAM",location:"Lne maakond",coordinates:[59.025715675105985,23.277143300727463],hasStation:!0,stationType:"FuelDock",fuelLevel:4,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-383",name:"TREIMANI SADAM",location:"Prnu maakond",coordinates:[57.918494898835526,24.384048374730778],hasStation:!0,stationType:"FuelDock",fuelLevel:39,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-159",name:"JAAGUPI SADAM",location:"Prnu maakond",coordinates:[58.03645036928897,24.458270931851438],hasStation:!0,stationType:"FuelDock",fuelLevel:68,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-361",name:"SAAREPERA SADAM",location:"Plva maakond",coordinates:[58.1742387352723,27.496037095724574],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-210",name:"MUUGA SADAM",location:"Harju maakond",coordinates:[59.49536860774204,24.968909471408764],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2201",name:"MURATSI SADAM",location:"Saare maakond",coordinates:[58.230389667099594,22.575831463546947],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2665",name:"TORI JESADAM",location:"Saare maakond",coordinates:[58.245886548353305,22.467679256723216],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2158",name:"VARNJA SADAM",location:"Tartu maakond",coordinates:[58.48841461385842,27.24307947289049],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9354",name:"KASSARIOTSA SADAM",location:"Hiiu maakond",coordinates:[58.78134285116765,22.84932573879327],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2058",name:"TAALIKU SADAM",location:"Saare maakond",coordinates:[58.60419234080926,22.97888690013703],hasStation:!0,stationType:"FuelDock",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-401",name:"VPSU SADAM",location:"Plva maakond",coordinates:[58.08184717841632,27.544961574835792],hasStation:!0,stationType:"FuelDock",fuelLevel:81,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2152",name:"NVA SADAM",location:"Lne maakond",coordinates:[59.24743622790684,23.664776411518794],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1212",name:"VARESE SADAM",location:"Saare maakond",coordinates:[58.57447335160411,22.399202350590063],hasStation:!0,stationType:"FuelDock",fuelLevel:17,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2674",name:"ABAJA SADAM",location:"Saare maakond",coordinates:[58.36938736593679,22.01689148827335],hasStation:!0,stationType:"FuelDock",fuelLevel:76,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-203",name:"PALJASSAARE SADAM",location:"Harju maakond",coordinates:[59.46336338912072,24.714709799050695],hasStation:!0,stationType:"FuelDock",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2640",name:"KAAVI PAADISADAM",location:"Saare maakond",coordinates:[57.9815627,22.2023884],hasStation:!0,stationType:"FuelDock",fuelLevel:21,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-300",name:"KUNDA SADAM",location:"Lne-Viru maakond",coordinates:[59.52789303465741,26.546938436101357],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1962",name:"VALMERANNA SADAM",location:"Saare maakond",coordinates:[58.49668772855224,23.233283609424635],hasStation:!0,stationType:"FuelDock",fuelLevel:19,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9000",name:"MEREME SADAM",location:"Hiiu maakond",coordinates:[58.827722406684835,22.94929157869701],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2662",name:"AHOI JESADAM",location:"Saare maakond",coordinates:[58.225771484720006,22.382422628013053],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-398",name:"VISTE SADAM",location:"Prnu maakond",coordinates:[58.21498208590553,24.468800907359537],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-386",name:"TULETORNI KAI",location:"Hiiu maakond",coordinates:[58.789374519254764,22.771203367080076],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1939",name:"JE PAADISADAM",location:"Tartu maakond",coordinates:[58.3719368,26.7402542],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-339",name:"RANNAMETSA SADAM",location:"Prnu maakond",coordinates:[58.1228266725876,24.478076514051146],hasStation:!0,stationType:"FuelDock",fuelLevel:67,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-320",name:"LOHUSUU SADAM",location:"Jgeva maakond",coordinates:[58.9420857161942,27.052084407598997],hasStation:!0,stationType:"FuelDock",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-323",name:"MUSTVEE SADAM",location:"Jgeva maakond",coordinates:[58.84657657518838,26.950010156582593],hasStation:!0,stationType:"FuelDock",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9006",name:"VESTSILLA SADAM",location:"Lne maakond",coordinates:[58.94112537132108,23.45780081404875],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9119",name:"MNNIKU SADAM",location:"Hiiu maakond",coordinates:[58.78608590230018,22.77686859474286],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2257",name:"PAPISSAARE SADAM",location:"Saare maakond",coordinates:[58.359950228367275,21.985874150886424],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-854",name:"KESSE-JAANI SADAM",location:"Saare maakond",coordinates:[58.63182538532375,23.443455985247624],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-369",name:"PUSI VIKESADAM",location:"Tartu maakond",coordinates:[58.64599657833848,27.169645630816664],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-312",name:"LENNUSADAM",location:"Harju maakond",coordinates:[59.45306994544707,24.73578212131489],hasStation:!0,stationType:"FuelDock",fuelLevel:13,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-101",name:"AEGNA SADAM",location:"Harju maakond",coordinates:[59.57139401986587,24.757647451495856],hasStation:!0,stationType:"FuelDock",fuelLevel:45,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-378",name:"UNGUMA SADAM",location:"Saare maakond",coordinates:[58.460365166683424,23.146986403026737],hasStation:!0,stationType:"FuelDock",fuelLevel:27,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-375",name:"SVIBY SADAM",location:"Lne maakond",coordinates:[58.971306711840775,23.31288092166234],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2132",name:"PASLEPA-VIIGI SADAM",location:"Lne maakond",coordinates:[59.0242330852399,23.44388008955642],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-305",name:"SAAREMAA SADAM",location:"Saare maakond",coordinates:[58.53618451842988,22.238451896147108],hasStation:!0,stationType:"FuelDock",fuelLevel:15,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6967",name:"HAAPSALU VANASADAM",location:"Lne maakond",coordinates:[58.956072724190506,23.530434591097862],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-336",name:"ORJAKU SADAM",location:"Hiiu maakond",coordinates:[58.78875184646206,22.771536453302517],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-709",name:"TALVESADAM",location:"Prnu maakond",coordinates:[58.385433708468824,24.492859909525208],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1943",name:"TARVASTU SADAM",location:"Viljandi maakond",coordinates:[58.25279979063932,25.96429932088659],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9003",name:"RAHUSTE SADAM (EHITAMISEL)",location:"Saare maakond",coordinates:[58.07108782421003,22.133503437845288],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-396",name:"VIRTSU VANASADAM",location:"Prnu maakond",coordinates:[58.579062850862094,23.519255379601553],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-341",name:"RAJA VIKESADAM",location:"Jgeva maakond",coordinates:[58.82887193850611,26.946083113486765],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9169",name:"JESUU SADAM",location:"Viljandi maakond",coordinates:[58.38486567162639,26.133840792200246],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-317",name:"LIU VIKESADAM",location:"Prnu maakond",coordinates:[58.27911366655924,24.266310835893727],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2103",name:"PURTSE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.43414866191135,26.99094676902478],hasStation:!0,stationType:"FuelDock",fuelLevel:60,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1968",name:"PAE SADAM",location:"Saare maakond",coordinates:[58.49131925700116,23.268490170781323],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9009",name:"PRNU VANASADAM",location:"Prnu maakond",coordinates:[58.387767625213726,24.493385561739647],hasStation:!0,stationType:"FuelDock",fuelLevel:12,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-400",name:"VIKE-TURU SADAM",location:"Tartu maakond",coordinates:[58.378014764316596,26.736441846472427],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-322",name:"LMALA SADAM",location:"Saare maakond",coordinates:[58.17286388235762,22.119335565707047],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-301",name:"KUNGLA SADAM",location:"Saare maakond",coordinates:[58.363062455363405,22.95448957721547],hasStation:!0,stationType:"FuelDock",fuelLevel:86,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-359",name:"PURTSE SADAM",location:"Ida-Viru maakond",coordinates:[59.43496703955746,26.991858205788642],hasStation:!0,stationType:"FuelDock",fuelLevel:31,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1203",name:"RUHVE SADAM",location:"Saare maakond",coordinates:[58.37778694035379,23.039960672663877],hasStation:!0,stationType:"FuelDock",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-167",name:"KALEVI JAHTKLUBI SADAM",location:"Harju maakond",coordinates:[59.46737523850052,24.826854488297457],hasStation:!0,stationType:"FuelDock",fuelLevel:50,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9011",name:"UUS SADAM",location:"Lne maakond",coordinates:[58.95942544291826,23.50942821303493],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-343",name:"REMNIKU VANASADAM",location:"Ida-Viru maakond",coordinates:[59.010867566160115,27.54307865153787],hasStation:!0,stationType:"FuelDock",fuelLevel:18,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-303",name:"KURKSE SADAM",location:"Harju maakond",coordinates:[59.28832895232838,24.02159065267846],hasStation:!0,stationType:"FuelDock",fuelLevel:48,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-385",name:"TRIIGI SADAM",location:"Saare maakond",coordinates:[58.59162845433841,22.717430403041075],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1400",name:"SRU JAHISADAM",location:"Hiiu maakond",coordinates:[58.69425158708312,22.523211766635303],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2456",name:"OSMUSSAARE SADAM",location:"Lne maakond",coordinates:[59.27636803821998,23.411967874777897],hasStation:!0,stationType:"FuelDock",fuelLevel:9,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-805",name:"LAUTRI SADAM",location:"Hiiu maakond",coordinates:[58.8032955665529,22.74449914957879],hasStation:!0,stationType:"FuelDock",fuelLevel:64,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3921",name:"UISUSADAM",location:"Saare maakond",coordinates:[58.560141628008886,23.088235290479798],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-206",name:"KAVARU SADAM",location:"Prnu maakond",coordinates:[58.26959033387641,24.1929459655635],hasStation:!1,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"no-fuel-53",name:"ABRUKA SADAM",location:"Saare maakond",coordinates:[58.16249579999999,22.5253685],hasStation:!1},{id:"no-fuel-156",name:"ALAJE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.00760824317872,27.43315649366905],hasStation:!1},{id:"no-fuel-161",name:"ATLA SADAM",location:"Saare maakond",coordinates:[58.30182561400056,21.89417462777699],hasStation:!1},{id:"no-fuel-8403",name:"BERESJE SADAM",location:"Vru maakond",coordinates:[58.08933965040894,27.581745397645683],hasStation:!1},{id:"no-fuel-9173",name:"BRGERMEISTRI SADAM",location:"Lne maakond",coordinates:[58.962750098622465,23.51982933938877],hasStation:!1},{id:"no-fuel-152",name:"HAAPSALU VESKIVIIGI SADAM",location:"Lne maakond",coordinates:[58.957906797945306,23.527560438372888],hasStation:!1},{id:"no-fuel-2259",name:"HARA SADAM",location:"Lne maakond",coordinates:[59.089547144334546,23.528659333244907],hasStation:!1},{id:"no-fuel-157",name:"HIIESSAARE SADAM",location:"Hiiu maakond",coordinates:[59.00219377023878,22.84236244766205],hasStation:!1},{id:"no-fuel-158",name:"HUNDIPEA SADAM",location:"Harju maakond",coordinates:[59.457312008996055,24.717993325664104],hasStation:!1},{id:"no-fuel-3677",name:"JAPSI KALASADAM",location:"Prnu maakond",coordinates:[58.3892241359425,24.487270069670497],hasStation:!1},{id:"no-fuel-9010",name:"JERE PAADISADAM",location:"Tartu maakond",coordinates:[58.33761913210218,26.786921028512324],hasStation:!1},{id:"no-fuel-7151",name:"KADARIKU SADAM",location:"Prnu maakond",coordinates:[58.45423618866158,23.685171323438134],hasStation:!1},{id:"no-fuel-8350",name:"KAKRI KALASADAM",location:"Hiiu maakond",coordinates:[58.97625603209905,22.906171653353994],hasStation:!1},{id:"no-fuel-346",name:"KALANA JAHISADAM",location:"Hiiu maakond",coordinates:[58.921752249722424,22.05812188152198],hasStation:!1},{id:"no-fuel-165",name:"KALASADAM",location:"Harju maakond",coordinates:[59.44572413728157,24.748646112018033],hasStation:!1},{id:"no-fuel-8909",name:"KALDASILLA SADAM",location:"Jgeva maakond",coordinates:[58.77706910196583,26.98008280857649],hasStation:!1},{id:"no-fuel-1960",name:"KALDU SADAM",location:"Saare maakond",coordinates:[58.45409024759508,23.268570985854836],hasStation:!1},{id:"no-fuel-2134",name:"KALMAKLA SADAM",location:"Jgeva maakond",coordinates:[58.89112288008285,26.969858407974247],hasStation:!1},{id:"no-fuel-2354",name:"KAREPA SADAM ",location:"Lne-Viru maakond",coordinates:[59.547455175281335,26.423717795855435],hasStation:!1},{id:"no-fuel-2611",name:"KASSARI SADAM",location:"Hiiu maakond",coordinates:[58.78206296922745,22.8497978117697],hasStation:!1},{id:"no-fuel-204",name:"KASTNA VIKESADAM",location:"Prnu maakond",coordinates:[58.350374,23.9130336],hasStation:!1},{id:"no-fuel-205",name:"KAUNISPE SADAM",location:"Saare maakond",coordinates:[58.04186264452349,22.059860388705594],hasStation:!1},{id:"no-fuel-208",name:"KELVINGI SADAM",location:"Harju maakond",coordinates:[59.55546929940867,24.839830324190146],hasStation:!1},{id:"no-fuel-211",name:"KIHNU SADAM",location:"Prnu maakond",coordinates:[58.14123325518436,24.02088792334366],hasStation:!1},{id:"no-fuel-9005",name:"KIRDERANNA SADAM",location:"Saare maakond",coordinates:[58.62095579164729,22.864040247367672],hasStation:!1},{id:"no-fuel-304",name:"KRGESSAARE SADAM",location:"Hiiu maakond",coordinates:[58.990071656325064,22.466397377637612],hasStation:!1},{id:"no-fuel-306",name:"KRSA SADAM",location:"Saare maakond",coordinates:[58.2286732,22.7280573],hasStation:!1},{id:"no-fuel-8351",name:"KSMU MAJAKA SADAM",location:"Lne-Viru maakond",coordinates:[59.60446942979059,25.92349111405371],hasStation:!1},{id:"no-fuel-9179",name:"KTIOJA SADAM",location:"Prnu maakond",coordinates:[58.5212122,23.7241667],hasStation:!1},{id:"no-fuel-307",name:"LAAKSAARE SADAM",location:"Plva maakond",coordinates:[58.338430088258725,27.417041637358558],hasStation:!1},{id:"no-fuel-308",name:"LAHESUU SADAM",location:"Harju maakond",coordinates:[59.45833700363406,24.702973080875516],hasStation:!1},{id:"no-fuel-8392",name:"LEESIKALDA SADAM",location:"Harju maakond",coordinates:[59.594514926928966,25.50226025510831],hasStation:!1},{id:"no-fuel-2123",name:"LEHTMA KALURISADAM",location:"Hiiu maakond",coordinates:[59.06882085554219,22.696219278375228],hasStation:!1},{id:"no-fuel-311",name:"LEHTMA SADAM",location:"Hiiu maakond",coordinates:[59.06761035561787,22.701143728235156],hasStation:!1},{id:"no-fuel-314",name:"LEPPNEEME KALASADAM",location:"Harju maakond",coordinates:[59.55167179919739,24.867263868960684],hasStation:!1},{id:"no-fuel-321",name:"LOKSA SADAM",location:"Harju maakond",coordinates:[59.58444612705517,25.70408193417594],hasStation:!1},{id:"no-fuel-801",name:"LUIGE VIKESADAM",location:"Lne maakond",coordinates:[58.871280759575235,23.477649072772582],hasStation:!1},{id:"no-fuel-1964",name:"LPESUU SADAM",location:"Saare maakond",coordinates:[58.48967911640937,23.273795518412854],hasStation:!1},{id:"no-fuel-707",name:"LNE SADAM",location:"Prnu maakond",coordinates:[58.5271617204529,23.676867501805706],hasStation:!1},{id:"no-fuel-325",name:"LTSA PAADISADAM",location:"Saare maakond",coordinates:[58.14659002353162,22.253064692365207],hasStation:!1},{id:"no-fuel-2501",name:"MAHU SADAM",location:"Lne-Viru maakond",coordinates:[59.521069587424115,26.72726843815698],hasStation:!1},{id:"no-fuel-309",name:"MANILAIU SADAM",location:"Prnu maakond",coordinates:[58.22227849999999,24.1247841],hasStation:!1},{id:"no-fuel-9008",name:"MEERAPALU SADAM",location:"Plva maakond",coordinates:[58.387508933619536,27.37374460137659],hasStation:!1},{id:"no-fuel-327",name:"MEERUSE SADAM",location:"Harju maakond",coordinates:[59.45045246851013,24.6697146192323],hasStation:!1},{id:"no-fuel-316",name:"MERELAIU VIKESADAM",location:"Prnu maakond",coordinates:[58.30465547982153,24.022958257706886],hasStation:!1},{id:"no-fuel-2314",name:"MIHKLI SADAM",location:"Jgeva maakond",coordinates:[58.77751123834221,26.99003963770032],hasStation:!1},{id:"no-fuel-9001",name:"NARVA-JESUU JAHTKLUBI SADAM",location:"Ida-Viru maakond",coordinates:[59.45970543207499,28.057687381023182],hasStation:!1},{id:"no-fuel-1553",name:"NARVA KULGU SADAM",location:"Ida-Viru maakond",coordinates:[59.3442578564839,28.173097424427883],hasStation:!1},{id:"no-fuel-1552",name:"NARVA LINNASADAM",location:"Ida-Viru maakond",coordinates:[59.38395796610147,28.20554144247878],hasStation:!1},{id:"no-fuel-328",name:"NASVA SADAM",location:"Saare maakond",coordinates:[58.2269312,22.3783734],hasStation:!1},{id:"no-fuel-353",name:"NOBLESSNERI SADAM",location:"Harju maakond",coordinates:[59.452183843127564,24.729565371485567],hasStation:!1},{id:"no-fuel-334",name:"OMEDU RAND",location:"Jgeva maakond",coordinates:[58.77780043141777,26.98858028346087],hasStation:!1},{id:"no-fuel-335",name:"ORISSAARE SADAM",location:"Saare maakond",coordinates:[58.562676613132034,23.092617941450893],hasStation:!1},{id:"no-fuel-337",name:"OTI SADAM",location:"Harju maakond",coordinates:[59.56629675506538,24.79439948373618],hasStation:!1},{id:"no-fuel-338",name:"OTSA VIKESADAM",location:"Tartu maakond",coordinates:[58.6489774918986,27.169001881798852],hasStation:!1},{id:"no-fuel-705",name:"PAATSALU SADAM",location:"Prnu maakond",coordinates:[58.524444905111146,23.67949722512728],hasStation:!1},{id:"no-fuel-8457",name:"PAKRINEEME SADAM",location:"Harju maakond",coordinates:[59.38888889999999,24.0369444],hasStation:!1},{id:"no-fuel-350",name:"PEERNI SADAM",location:"Prnu maakond",coordinates:[58.246312842792065,24.134033920475662],hasStation:!1},{id:"no-fuel-1659",name:"PIHELGALAIU SADAM",location:"Prnu maakond",coordinates:[58.44586885868282,23.66907840453489],hasStation:!1},{id:"no-fuel-1930",name:"PIIRISSAARE SADAM",location:"Tartu maakond",coordinates:[58.375722394408996,27.511417843756576],hasStation:!1},{id:"no-fuel-356",name:"PIIRIVALVESADAM",location:"Harju maakond",coordinates:[59.457268391513615,24.66181822941108],hasStation:!1},{id:"no-fuel-377",name:"PUISE KALASADAM",location:"Lne maakond",coordinates:[58.7835441,23.4985324],hasStation:!1},{id:"no-fuel-808",name:"PURTSE JAHTSADAM",location:"Ida-Viru maakond",coordinates:[59.435106161788916,26.99108540802319],hasStation:!1},{id:"no-fuel-342",name:"REBASE PAADISADAM",location:"Tartu maakond",coordinates:[58.36787658063787,26.749016207832376],hasStation:!1},{id:"no-fuel-345",name:"RISTNA SADAM",location:"Harju maakond",coordinates:[59.27073824103223,23.744625264828233],hasStation:!1},{id:"no-fuel-351",name:"ROHUKLA SADAM",location:"Lne maakond",coordinates:[58.905958908457656,23.420534724676656],hasStation:!1},{id:"no-fuel-363",name:"SALINMME SADAM",location:"Hiiu maakond",coordinates:[58.8270809846774,22.95055220122218],hasStation:!1},{id:"no-fuel-365",name:"SALME JESADAM",location:"Saare maakond",coordinates:[58.1654474887975,22.252818894890837],hasStation:!1},{id:"no-fuel-366",name:"SALMISTU SADAM",location:"Harju maakond",coordinates:[59.49659394520264,25.366337433421357],hasStation:!1},{id:"no-fuel-367",name:"SASSUKVERE SADAM",location:"Tartu maakond",coordinates:[58.71493614828406,27.126172656299634],hasStation:!1},{id:"no-fuel-1936",name:"SIGATSUARU VIKESADAM",location:"Prnu maakond",coordinates:[58.15445383926815,24.002310626327155],hasStation:!1},{id:"no-fuel-7401",name:"SITME SADAM",location:"Saare maakond",coordinates:[58.51088849396052,23.199316307192024],hasStation:!1},{id:"no-fuel-372",name:"SOO SADAM",location:"Tartu maakond",coordinates:[58.72244286155842,27.12023931143356],hasStation:!1},{id:"no-fuel-1251",name:"SUUR-LOOTSI SADAM",location:"Ida-Viru maakond",coordinates:[59.4678736,28.0420528],hasStation:!1},{id:"no-fuel-1154",name:"SUURPEA SADAM",location:"Harju maakond",coordinates:[59.6281046477358,25.682983138624618],hasStation:!1},{id:"no-fuel-2680",name:"TAMMNEEME SADAM",location:"Harju maakond",coordinates:[59.529013819775024,24.893335103988647],hasStation:!1},{id:"no-fuel-380",name:"TAPURLA SADAM",location:"Harju maakond",coordinates:[59.61120815173785,25.573854563726297],hasStation:!1},{id:"no-fuel-381",name:"TILGU SADAM",location:"Harju maakond",coordinates:[59.45518286496472,24.487001945135006],hasStation:!1},{id:"no-fuel-9007",name:"TOOMINGA VIKESADAM",location:"Harju maakond",coordinates:[59.56256026313831,24.79553650363329],hasStation:!1},{id:"no-fuel-704",name:"TOPU SADAM",location:"Lne maakond",coordinates:[58.84439243775599,23.50073748712197],hasStation:!1},{id:"no-fuel-2122",name:"TURJA SADAM",location:"Saare maakond",coordinates:[58.3327473718112,22.93243528887582],hasStation:!1},{id:"no-fuel-2133",name:"TURUSADAM",location:"Tartu maakond",coordinates:[58.3795223030903,26.735905398384677],hasStation:!1},{id:"no-fuel-387",name:"TRKMA SADAM",location:"Hiiu maakond",coordinates:[58.69332616544748,22.609981401097386],hasStation:!1},{id:"no-fuel-9168",name:"ULGE SADAM",location:"Viljandi maakond",coordinates:[58.40635470910224,26.013124772690055],hasStation:!1},{id:"no-fuel-3826",name:"VAHTREPA SADAM",location:"Hiiu maakond",coordinates:[58.88560138747144,23.02869308620697],hasStation:!1},{id:"no-fuel-4651",name:"VAINUPEA SADAM",location:"Lne-Viru maakond",coordinates:[59.583802468572706,26.273932825674926],hasStation:!1},{id:"no-fuel-166",name:"VANASADAM",location:"Harju maakond",coordinates:[59.44304063799767,24.75930008714019],hasStation:!1},{id:"no-fuel-2147",name:"VANA-SAUGA SADAM",location:"Prnu maakond",coordinates:[58.38997205050698,24.475392484556682],hasStation:!1},{id:"no-fuel-8977",name:"VANASAUNA SADAM",location:"Viljandi maakond",coordinates:[58.36875436320875,25.9668093112776],hasStation:!1},{id:"no-fuel-393",name:"VASKNARVA UUSSADAM",location:"Ida-Viru maakond",coordinates:[58.99790578740703,27.739502189448658],hasStation:!1},{id:"no-fuel-388",name:"VEERE SADAM",location:"Saare maakond",coordinates:[58.4616643503602,22.05045075745465],hasStation:!1},{id:"no-fuel-901",name:"VEERE VANASADAM",location:"Saare maakond",coordinates:[58.460906732883764,22.04877742773411],hasStation:!1},{id:"no-fuel-3870",name:"VEIBRI SADAM",location:"Tartu maakond",coordinates:[58.33766136986146,26.792575007800597],hasStation:!1},{id:"no-fuel-1150",name:"VERGI SADAM",location:"Lne-Viru maakond",coordinates:[59.59942875325675,26.101439794239237],hasStation:!1},{id:"no-fuel-2645",name:"VIINISTU SADAM",location:"Harju maakond",coordinates:[59.646704192089956,25.75353627355206],hasStation:!1},{id:"no-fuel-2551",name:"VIKATI SADAM",location:"Saare maakond",coordinates:[58.37183486965951,21.86242812338169],hasStation:!1},{id:"no-fuel-395",name:"VIRTSU KALASADAM",location:"Prnu maakond",coordinates:[58.58872092778278,23.525488549491424],hasStation:!1},{id:"no-fuel-394",name:"VIRTSU SADAM",location:"Prnu maakond",coordinates:[58.574979596464345,23.503157983475997],hasStation:!1},{id:"no-fuel-3811",name:"VPSU KLASADAM",location:"Vru maakond",coordinates:[58.07978519644125,27.544044310678082],hasStation:!1},{id:"no-fuel-1056",name:"VRSSU SADAM",location:"Hiiu maakond",coordinates:[58.933159290586694,22.955026035777763],hasStation:!1},{id:"no-fuel-403",name:"WESTMERI SADAM",location:"Lne maakond",coordinates:[58.95979075002165,23.524604057955777],hasStation:!1},{id:"no-fuel-405",name:"STERBY SADAM",location:"Lne maakond",coordinates:[58.9756951,23.518072],hasStation:!1},{id:"no-fuel-2669",name:"RGORU PAADISADAM",location:"Tartu maakond",coordinates:[58.37948574041217,26.989706925419874],hasStation:!1}],kg={class:"map-container"},Tg={key:0,class:"search-container"},Pg={class:"search-bar"},xg={key:0,class:"search-dropdown"},Eg=["onMousedown"],Lg={class:"dropdown-item-content"},Og={class:"station-name"},Cg={class:"station-meta"},Mg={class:"station-location"},Ig={key:1,class:"no-fuel-indicator"},Rg={key:1,class:"active-filters"},Dg=["onClick"],$g={key:2,class:"results-counter"},jg={class:"filter-header"},Ng={class:"filter-content"},Ug={class:"filter-section"},Bg={class:"radio-group"},Fg={class:"filter-section"},zg={class:"checkbox-group"},qg={class:"filter-section"},Vg={class:"price-range"},Hg={class:"price-display"},Zg={class:"filter-section"},Kg={class:"checkbox-group"},Wg={class:"filter-section"},Gg={class:"checkbox-group"},Jg={class:"filter-section"},Yg={class:"checkbox-group"},Xg={class:"filter-actions"},Qg={class:"filter-header"},ey={class:"map-type-content"},ty={class:"map-type-options"},iy={key:0,class:"active-indicator"},ny={key:0,class:"active-indicator"},sy={key:0,class:"active-indicator"},ry={key:0,class:"active-indicator"},oy={key:0,class:"active-indicator"},ay={key:0,class:"sea-marks-toggle"},ly={class:"toggle-label"},uy={key:5,class:"edit-buttons"},cy=["disabled"],dy=["disabled"],hy={key:6,class:"legend"},fy={key:7,class:"save-notification"},py={__name:"MapView",props:{guestMode:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},showFiltersFromParent:{type:Boolean,default:!1},showMapTypeFromParent:{type:Boolean,default:!1}},emits:["station-click","close-filters","close-map-type"],setup(i,{expose:e,emit:n}){const{user:r}=Ls(),o=i,a=n,u=re(null),d=re(null),h=re(""),m=re(!1),v=re(null),g=re(""),y=re(null),A=re([]),P=re([]),O=re([]),k=re({distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1}),N=re("street"),R=re(!1);let M=null,B=[],ue=null,le=null,ge={},Le=null,Oe=null,H=JSON.parse(JSON.stringify(zd)),E={center:null,zoom:null,focusedStation:null};const z=bt(()=>{if(!h.value)return[];const x=h.value.toLowerCase();return H.filter(S=>S.name.toLowerCase().includes(x)||S.location.toLowerCase().includes(x)).slice(0,8)}),F=re(null),Y=bt(()=>{let x=0;return k.value.distance!=="any"&&x++,k.value.fuelTypes.length>0&&(x+=k.value.fuelTypes.length),k.value.maxPrice<3&&x++,k.value.fuelLevels.length>0&&(x+=k.value.fuelLevels.length),k.value.providers.length>0&&(x+=k.value.providers.length),k.value.hasStation&&x++,x}),j=bt(()=>{const x=[];return k.value.distance!=="any"&&x.push({label:`Distance <${k.value.distance}km`,type:"distance",value:"any"}),k.value.fuelTypes.forEach(S=>{x.push({label:S.toUpperCase(),type:"fuelTypes",value:S})}),k.value.maxPrice<3&&x.push({label:`Price ${k.value.maxPrice}`,type:"maxPrice",value:3}),k.value.fuelLevels.forEach(S=>{const $={available:"Available >20%",low:"Low <20%",empty:"Empty"};x.push({label:$[S],type:"fuelLevels",value:S})}),k.value.providers.forEach(S=>{x.push({label:S,type:"providers",value:S})}),k.value.hasStation&&x.push({label:"Active stations only",type:"hasStation",value:!1}),x}),J=bt(()=>Q().length),ke=bt(()=>H.length);Nn(async()=>{lt(),be(),ie(),await ht(),window.exportStationCoordinates=()=>(console.log("=== UPDATED STATION COORDINATES ==="),console.log(JSON.stringify(H,null,2)),console.log("=== Copy the above JSON to update stations.json ==="),H),console.log("%c EDIT MODE ENABLED","color: red; font-size: 16px; font-weight: bold"),console.log("Drag markers to update positions."),console.log('Click "Save Coordinates" button or run exportStationCoordinates() in console.')});function ie(){navigator.geolocation?navigator.geolocation.getCurrentPosition(x=>{F.value={lat:x.coords.latitude,lng:x.coords.longitude}},x=>{console.log("Location access denied:",x),F.value={lat:58.5953,lng:25.0136}}):F.value={lat:58.5953,lng:25.0136}}async function ht(){if(!(!r.value||o.guestMode))try{const{data:x,error:S}=await yt.from("favorites").select("station_id").eq("user_id",r.value.id);if(S){console.error("Error loading favorites:",S);return}A.value=x.map($=>$.station_id)}catch(x){console.error("Error loading favorites:",x)}}function pe(x){return A.value.includes(x)}function Re(){M&&E.center&&E.zoom&&M.setView(E.center,E.zoom,{animate:!1})}function ze(){M&&M.invalidateSize()}e({restoreMapView:Re,invalidateMapSize:ze,refreshFavorites:async()=>{await ht(),be()}});function lt(){const x=E.center&&E.zoom?[E.center,E.zoom]:[[58.5953,25.0136],7];M=Kt.map(u.value).setView(x[0],x[1]),ge={street:Kt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),satellite:Kt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),terrain:Kt.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:" OpenTopoMap",maxZoom:17}),cartoVoyager:Kt.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:" OpenStreetMap,  CARTO",maxZoom:19})},Oe=Kt.tileLayer("https://t1.openseamap.org/seamark/{z}/{x}/{y}.png",{attribution:" OpenSeaMap contributors",maxZoom:18,transparent:!0}),Le=ge.street,Le.addTo(M),ue=Kt.layerGroup().addTo(M),o.guestMode||(o.isAdmin&&(u.value.style.border="4px solid red"),le=Kt.control({position:"bottomleft"}),le.onAdd=function(){const S=Kt.DomUtil.create("div","coordinate-display");return S.style.cssText=`
        background: rgba(255, 255, 255, 0.95);
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        font-family: monospace;
        font-size: 14px;
        display: none;
      `,S.innerHTML="Drag a marker to see coordinates",S},le.addTo(M))}function Fe(x){if(M){if(M.hasLayer(Oe)&&M.removeLayer(Oe),Le&&M.removeLayer(Le),x==="nautical")Le=ge.street,Le.addTo(M),Oe.addTo(M),R.value=!0;else if(x==="nautical-dark")Le=ge.cartoVoyager,Le.addTo(M),Oe.addTo(M),R.value=!0;else{if(!ge[x])return;Le=ge[x],Le.addTo(M),R.value=!1}N.value=x,a("close-map-type")}}function De(){R.value=!R.value,R.value?M.hasLayer(Oe)||Oe.addTo(M):M.hasLayer(Oe)&&M.removeLayer(Oe)}function be(){Ui(),H.forEach(x=>{const S=vt(x);B.push({marker:S,station:x}),ue.addLayer(S)})}function vt(x){const S=de(x),$=pe(x.id),Ve={icon:me(S,x===v.value,$),draggable:o.isAdmin&&!o.guestMode};o.isAdmin&&!o.guestMode&&(Ve.autoPan=!0,Ve.autoPanPadding=[50,50]);const Me=Kt.marker(x.coordinates,Ve).on("click",()=>Lt(x));return o.isAdmin&&!o.guestMode&&(Me.on("dragstart",function(Ye){const Se=document.querySelector(".coordinate-display");if(Se){Se.style.display="block",Se.style.background="rgba(255, 255, 100, 0.95)";const $e=H.find(et=>et.id===x.id);Se.innerHTML=`
          <strong>Dragging: ${$e?$e.name:x.name}</strong><br>
          Original: [${x.coordinates[0].toFixed(6)}, ${x.coordinates[1].toFixed(6)}]
        `}}),Me.on("drag",function(Ye){const Se=Ye.target.getLatLng(),$e=document.querySelector(".coordinate-display");if($e){const et=H.find(_t=>_t.id===x.id);$e.innerHTML=`
          <strong>${et?et.name:x.name}</strong><br>
          Lat: ${Se.lat.toFixed(6)}<br>
          Lng: ${Se.lng.toFixed(6)}
        `}}),Me.on("dragend",function(Ye){const Se=Ye.target.getLatLng(),$e=H.findIndex(_t=>_t.id===x.id);if($e!==-1){const _t=[...H[$e].coordinates],on=[Se.lat,Se.lng];P.value.push({id:x.id,name:H[$e].name,previousCoordinates:_t,newCoordinates:on}),O.value=[],y.value={id:x.id,previousCoordinates:_t,newCoordinates:on},H[$e].coordinates=on;const qn=B.find(Os=>Os.station.id===x.id);qn&&(qn.station.coordinates=on)}const et=document.querySelector(".coordinate-display");if(et){const _t=H[$e];et.style.background="rgba(16, 185, 129, 0.95)",et.innerHTML=`
          <strong>${_t?_t.name:x.name}</strong><br>
           Updated: [${Se.lat.toFixed(6)}, ${Se.lng.toFixed(6)}]<br>
          <small>Click "Save Coordinates" button</small>
        `,setTimeout(()=>{et.style.display="none",et.style.background="rgba(255, 255, 255, 0.95)"},5e3)}}),Me.on("mouseover",function(Ye){u.value.style.cursor="grab"}),Me.on("mouseout",function(Ye){u.value.style.cursor=""})),o.guestMode||(Me.on("mouseover",function(Ye){const Se=Ye.target.getLatLng(),$e=document.querySelector(".coordinate-display");if($e){const et=H.find(_t=>_t.id===x.id);$e.style.display="block",$e.style.background="rgba(255, 255, 255, 0.95)",$e.innerHTML=`
          <strong>${et?et.name:x.name}</strong><br>
          Lat: ${Se.lat.toFixed(6)}<br>
          Lng: ${Se.lng.toFixed(6)}
        `}}),Me.on("mouseout",function(Ye){const Se=document.querySelector(".coordinate-display");Se&&(Se.style.display="none")})),Me}async function Lt(x){var S;if(M.flyTo(x.coordinates,14,{animate:!0,duration:2}),await new Promise($=>setTimeout($,2e3)),E.center=M.getCenter(),E.zoom=M.getZoom(),E.focusedStation=x,x.hasStation)a("station-click",x);else{const $=(S=B.find(Te=>Te.station.id===x.id))==null?void 0:S.marker;$&&$.bindPopup(`
        <div style="text-align: center;">
          <b>${x.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup()}}function Ui(){ue&&ue.clearLayers(),B=[]}function Vt(){if(P.value.length===0)return;const x=P.value.pop(),S=H.findIndex($=>$.id===x.id);if(S!==-1){O.value.push(x),H[S].coordinates=[...x.previousCoordinates];const $=B.find(Te=>Te.station.id===x.id);$&&($.station.coordinates=[...x.previousCoordinates],$.marker.setLatLng(x.previousCoordinates)),P.value.length>0?y.value=P.value[P.value.length-1]:y.value=null,g.value=` Undone: ${x.name}`,setTimeout(()=>{g.value=""},2e3)}}function rn(){if(O.value.length===0)return;const x=O.value.pop(),S=H.findIndex($=>$.id===x.id);if(S!==-1){P.value.push(x),H[S].coordinates=[...x.newCoordinates];const $=B.find(Te=>Te.station.id===x.id);$&&($.station.coordinates=[...x.newCoordinates],$.marker.setLatLng(x.newCoordinates)),y.value=x,g.value=` Redone: ${x.name}`,setTimeout(()=>{g.value=""},2e3)}}async function b(){try{const S=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(H)})).json();if(S.success)g.value=" Saved! stations.json updated successfully",setTimeout(()=>{g.value=""},4e3);else throw new Error(S.message)}catch(x){console.error("Save error:",x),g.value=" Error saving file. Is the save server running?",setTimeout(()=>{g.value=""},5e3)}}function T(){m.value=!0,h.value?U():B.forEach(({marker:x})=>{x.setOpacity(1)})}function D(){setTimeout(()=>{m.value=!1},200)}async function W(x){h.value=x.name,m.value=!1,v.value=x,M.flyTo(x.coordinates,14,{animate:!0,duration:2}),U(),await new Promise($=>setTimeout($,3e3)),E.center=M.getCenter(),E.zoom=M.getZoom(),E.focusedStation=x;const S=B.find($=>$.station.id===x.id);S&&(x.hasStation?a("station-click",x):S.marker.bindPopup(`
        <div style="text-align: center;">
          <b>${x.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup())}function q(){h.value="",v.value=null,m.value=!1,B.forEach(({marker:x})=>{x.setOpacity(1)}),E.focusedStation||M.setView([58.5953,25.0136],7,{animate:!0,duration:.5})}function U(){const x=Q(),S=new Set(x.map(Te=>Te.id)),$=h.value.toLowerCase();B.forEach(({marker:Te,station:Ve})=>{const Me=H.find($e=>$e.id===Ve.id),Ye=!$||Me&&(Me.name.toLowerCase().includes($)||Me.location.toLowerCase().includes($)),Se=S.has(Ve.id);Te.setOpacity(Ye&&Se?1:.3)})}function ee(x,S,$,Te){const Me=($-x)*Math.PI/180,Ye=(Te-S)*Math.PI/180,Se=Math.sin(Me/2)*Math.sin(Me/2)+Math.cos(x*Math.PI/180)*Math.cos($*Math.PI/180)*Math.sin(Ye/2)*Math.sin(Ye/2);return 6371*(2*Math.atan2(Math.sqrt(Se),Math.sqrt(1-Se)))}function Q(){let x=[...H];if(k.value.hasStation&&(x=x.filter(S=>S.hasStation)),k.value.providers.length>0&&(x=x.filter(S=>S.stationType?k.value.providers.includes(S.stationType):k.value.providers.includes("Other"))),k.value.fuelLevels.length>0&&(x=x.filter(S=>!!(k.value.fuelLevels.includes("available")&&S.fuelLevel>=20||k.value.fuelLevels.includes("low")&&S.fuelLevel<20&&S.fuelLevel>0||k.value.fuelLevels.includes("empty")&&S.fuelLevel===0))),k.value.fuelTypes.length>0&&(x=x.filter(S=>S.fuels?k.value.fuelTypes.some($=>{var Te;return(Te=S.fuels[$])==null?void 0:Te.available}):!1)),k.value.maxPrice<3&&(x=x.filter(S=>{if(!S.fuels)return!1;const $=Object.values(S.fuels).map(Te=>Te.price).filter(Te=>Te>0);return $.length>0&&Math.min(...$)<=k.value.maxPrice})),k.value.distance!=="any"&&F.value){const S=parseFloat(k.value.distance);x=x.filter($=>ee(F.value.lat,F.value.lng,$.coordinates[0],$.coordinates[1])<=S)}return F.value&&x.sort((S,$)=>{const Te=ee(F.value.lat,F.value.lng,S.coordinates[0],S.coordinates[1]),Ve=ee(F.value.lat,F.value.lng,$.coordinates[0],$.coordinates[1]);return Te-Ve}),x}function X(){return Q().length}function K(){a("close-filters"),U()}function ce(){k.value={distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1},U()}function ne(x,S){if(x==="distance")k.value.distance=S;else if(x==="maxPrice")k.value.maxPrice=S;else if(x==="hasStation")k.value.hasStation=S;else if(Array.isArray(k.value[x])){const $=k.value[x].indexOf(S);$>-1&&k.value[x].splice($,1)}U()}function de(x){return o.guestMode?"purple":x.hasStation?x.fuelLevel===0?"gray":x.fuelLevel<20?"yellow":"green":"red"}function me(x,S=!1,$=!1){const Te={green:"#10b981",yellow:"#fbbf24",gray:"#9ca3af",red:"#ef4444",purple:"#a855f7"},Ve=o.guestMode||x==="red"?10:15,Me=S?Ve+40:Ve,Ye=S?4:2,Se=$&&!o.guestMode?`
    <div style="
      position: absolute;
      top: -4px;
      right: -4px;
      background: #fbbf24;
      color: white;
      width: ${Math.max(12,Me*.5)}px;
      height: ${Math.max(12,Me*.5)}px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: ${Math.max(8,Me*.4)}px;
      border: 1px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.4);
      z-index: 10;
    "></div>
  `:"";return Kt.divIcon({className:"custom-marker",html:`
      <div style="position: relative; width: ${Me}px; height: ${Me}px;">
        <div style="
          background: ${Te[x]};
          width: ${Me}px;
          height: ${Me}px;
          border-radius: 50%;
          border: ${Ye}px solid ${S?"#1e40af":"white"};
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>
        ${Se}
      </div>
    `,iconSize:[Me,Me],iconAnchor:[Me/2,Me/2]})}function xe(x){return x.fuelLevel===0?"fuel-empty":x.fuelLevel<20?"fuel-low":"fuel-good"}function Ne(x){return x.fuelLevel===0?"Empty":x.fuelLevel<20?`${x.fuelLevel}% Low`:`${x.fuelLevel}%`}return(x,S)=>(Z(),G("div",kg,[i.guestMode?oe("",!0):(Z(),G("div",Tg,[p("div",Pg,[we(p("input",{ref_key:"searchInput",ref:d,"onUpdate:modelValue":S[0]||(S[0]=$=>h.value=$),onInput:T,onFocus:S[1]||(S[1]=$=>m.value=!0),onBlur:D,placeholder:" Search marina...",class:"search-input"},null,544),[[ot,h.value]]),m.value&&z.value.length>0?(Z(),G("div",xg,[(Z(!0),G(it,null,Qt(z.value,$=>(Z(),G("div",{key:$.id,onMousedown:Te=>W($),class:Je(["dropdown-item",{"has-fuel":$.hasStation}])},[p("div",Lg,[p("div",Og,te($.name),1),p("div",Cg,[p("span",Mg,te($.location),1),$.hasStation?(Z(),G("span",{key:0,class:Je(["fuel-indicator",xe($)])},te(Ne($)),3)):(Z(),G("span",Ig,"No fuel"))])])],42,Eg))),128))])):oe("",!0)]),h.value?(Z(),G("button",{key:0,onClick:q,class:"clear-button",title:"Clear search"},"  ")):oe("",!0)])),!i.guestMode&&Y.value>0?(Z(),G("div",Rg,[S[30]||(S[30]=p("span",{class:"active-filters-label"},"Active:",-1)),(Z(!0),G(it,null,Qt(j.value,($,Te)=>(Z(),G("span",{key:Te,class:"filter-chip"},[Ke(te($.label)+" ",1),p("button",{onClick:Ve=>ne($.type,$.value),class:"chip-remove"},"",8,Dg)]))),128)),p("button",{onClick:ce,class:"clear-all-btn"},"Clear all")])):oe("",!0),!i.guestMode&&Y.value>0?(Z(),G("div",$g," Showing "+te(J.value)+" of "+te(ke.value)+" stations ",1)):oe("",!0),i.showFiltersFromParent?(Z(),G("div",{key:3,class:"filter-overlay",onClick:S[20]||(S[20]=$=>a("close-filters"))},[p("div",{class:"filter-panel",onClick:S[19]||(S[19]=Mt(()=>{},["stop"]))},[p("div",jg,[S[31]||(S[31]=p("h3",null," Filters",-1)),p("button",{onClick:S[2]||(S[2]=$=>a("close-filters")),class:"close-panel-btn"},"")]),p("div",Ng,[p("div",Ug,[S[36]||(S[36]=p("h4",null," Distance",-1)),p("div",Bg,[p("label",null,[we(p("input",{type:"radio","onUpdate:modelValue":S[3]||(S[3]=$=>k.value.distance=$),value:"any"},null,512),[[Oi,k.value.distance]]),S[32]||(S[32]=Ke(" Any distance ",-1))]),p("label",null,[we(p("input",{type:"radio","onUpdate:modelValue":S[4]||(S[4]=$=>k.value.distance=$),value:"10"},null,512),[[Oi,k.value.distance]]),S[33]||(S[33]=Ke(" Within 10 km ",-1))]),p("label",null,[we(p("input",{type:"radio","onUpdate:modelValue":S[5]||(S[5]=$=>k.value.distance=$),value:"25"},null,512),[[Oi,k.value.distance]]),S[34]||(S[34]=Ke(" Within 25 km ",-1))]),p("label",null,[we(p("input",{type:"radio","onUpdate:modelValue":S[6]||(S[6]=$=>k.value.distance=$),value:"50"},null,512),[[Oi,k.value.distance]]),S[35]||(S[35]=Ke(" Within 50 km ",-1))])])]),p("div",Fg,[S[40]||(S[40]=p("h4",null," Fuel Type",-1)),p("div",zg,[p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[7]||(S[7]=$=>k.value.fuelTypes=$),value:"diesel"},null,512),[[It,k.value.fuelTypes]]),S[37]||(S[37]=Ke(" Diesel ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[8]||(S[8]=$=>k.value.fuelTypes=$),value:"e95"},null,512),[[It,k.value.fuelTypes]]),S[38]||(S[38]=Ke(" E95 ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[9]||(S[9]=$=>k.value.fuelTypes=$),value:"e98"},null,512),[[It,k.value.fuelTypes]]),S[39]||(S[39]=Ke(" E98 ",-1))])])]),p("div",qg,[S[41]||(S[41]=p("h4",null," Price Range",-1)),p("div",Vg,[we(p("input",{type:"range","onUpdate:modelValue":S[10]||(S[10]=$=>k.value.maxPrice=$),min:"1.0",max:"3.0",step:"0.1",class:"price-slider"},null,512),[[ot,k.value.maxPrice]]),p("div",Hg," Max: "+te(k.value.maxPrice)+"/L ",1)])]),p("div",Zg,[S[45]||(S[45]=p("h4",null," Fuel Level",-1)),p("div",Kg,[p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[11]||(S[11]=$=>k.value.fuelLevels=$),value:"available"},null,512),[[It,k.value.fuelLevels]]),S[42]||(S[42]=Ke(" Available (>20%) ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[12]||(S[12]=$=>k.value.fuelLevels=$),value:"low"},null,512),[[It,k.value.fuelLevels]]),S[43]||(S[43]=Ke(" Low (<20%) ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[13]||(S[13]=$=>k.value.fuelLevels=$),value:"empty"},null,512),[[It,k.value.fuelLevels]]),S[44]||(S[44]=Ke(" Empty (0%) ",-1))])])]),p("div",Wg,[S[50]||(S[50]=p("h4",null," Provider",-1)),p("div",Gg,[p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[14]||(S[14]=$=>k.value.providers=$),value:"Olerex"},null,512),[[It,k.value.providers]]),S[46]||(S[46]=Ke(" Olerex ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[15]||(S[15]=$=>k.value.providers=$),value:"Circle K"},null,512),[[It,k.value.providers]]),S[47]||(S[47]=Ke(" Circle K ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[16]||(S[16]=$=>k.value.providers=$),value:"Alexela"},null,512),[[It,k.value.providers]]),S[48]||(S[48]=Ke(" Alexela ",-1))]),p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[17]||(S[17]=$=>k.value.providers=$),value:"Other"},null,512),[[It,k.value.providers]]),S[49]||(S[49]=Ke(" Other ",-1))])])]),p("div",Jg,[S[52]||(S[52]=p("h4",null," Station Status",-1)),p("div",Yg,[p("label",null,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[18]||(S[18]=$=>k.value.hasStation=$)},null,512),[[It,k.value.hasStation]]),S[51]||(S[51]=Ke(" Only show active fuel stations ",-1))])])])]),p("div",Xg,[p("button",{onClick:ce,class:"clear-filters-btn"},"Clear All"),p("button",{onClick:K,class:"apply-filters-btn"}," Apply ("+te(X())+") ",1)])])])):oe("",!0),i.showMapTypeFromParent?(Z(),G("div",{key:4,class:"filter-overlay",onClick:S[29]||(S[29]=$=>a("close-map-type"))},[p("div",{class:"map-type-panel",onClick:S[28]||(S[28]=Mt(()=>{},["stop"]))},[p("div",Qg,[S[53]||(S[53]=p("h3",null," Map Type",-1)),p("button",{onClick:S[21]||(S[21]=$=>a("close-map-type")),class:"close-panel-btn"},"")]),p("div",ey,[p("div",ty,[p("div",{onClick:S[22]||(S[22]=$=>Fe("street")),class:Je(["map-type-option",{active:N.value==="street"}])},[S[54]||(S[54]=p("div",{class:"map-type-icon"},"",-1)),S[55]||(S[55]=p("div",{class:"map-type-info"},[p("h4",null,"Street Map"),p("p",null,"Standard OpenStreetMap view")],-1)),N.value==="street"?(Z(),G("div",iy,"")):oe("",!0)],2),p("div",{onClick:S[23]||(S[23]=$=>Fe("satellite")),class:Je(["map-type-option",{active:N.value==="satellite"}])},[S[56]||(S[56]=p("div",{class:"map-type-icon"},"",-1)),S[57]||(S[57]=p("div",{class:"map-type-info"},[p("h4",null,"Satellite"),p("p",null,"Aerial imagery view")],-1)),N.value==="satellite"?(Z(),G("div",ny,"")):oe("",!0)],2),p("div",{onClick:S[24]||(S[24]=$=>Fe("nautical")),class:Je(["map-type-option",{active:N.value==="nautical"}])},[S[58]||(S[58]=p("div",{class:"map-type-icon"},"",-1)),S[59]||(S[59]=p("div",{class:"map-type-info"},[p("h4",null,"Nautical"),p("p",null,"Light nautical chart with sea marks")],-1)),N.value==="nautical"?(Z(),G("div",sy,"")):oe("",!0)],2),p("div",{onClick:S[25]||(S[25]=$=>Fe("nautical-dark")),class:Je(["map-type-option",{active:N.value==="nautical-dark"}])},[S[60]||(S[60]=p("div",{class:"map-type-icon"},"",-1)),S[61]||(S[61]=p("div",{class:"map-type-info"},[p("h4",null,"Nautical+"),p("p",null,"Enhanced nautical with better contrast")],-1)),N.value==="nautical-dark"?(Z(),G("div",ry,"")):oe("",!0)],2),p("div",{onClick:S[26]||(S[26]=$=>Fe("terrain")),class:Je(["map-type-option",{active:N.value==="terrain"}])},[S[62]||(S[62]=p("div",{class:"map-type-icon"},"",-1)),S[63]||(S[63]=p("div",{class:"map-type-info"},[p("h4",null,"Terrain"),p("p",null,"Topographic map with elevation")],-1)),N.value==="terrain"?(Z(),G("div",oy,"")):oe("",!0)],2)]),N.value!=="nautical"&&N.value!=="nautical-dark"?(Z(),G("div",ay,[p("label",ly,[we(p("input",{type:"checkbox","onUpdate:modelValue":S[27]||(S[27]=$=>R.value=$),onChange:De},null,544),[[It,R.value]]),S[64]||(S[64]=p("span",null,"Show Nautical Markers",-1)),S[65]||(S[65]=p("small",null,"Overlay sea marks on current map",-1))])])):oe("",!0)])])])):oe("",!0),i.isAdmin&&!i.guestMode?(Z(),G("div",uy,[p("button",{onClick:Vt,disabled:P.value.length===0,class:"undo-btn",title:"Undo last marker move"},"  ",8,cy),p("button",{onClick:rn,disabled:O.value.length===0,class:"redo-btn",title:"Redo last undone move"},"  ",8,dy),p("button",{onClick:b,class:"save-coordinates-btn",title:"Save updated coordinates"},"  Save Coordinates ")])):oe("",!0),p("div",{ref_key:"mapRef",ref:u,class:"map"},null,512),i.guestMode?oe("",!0):(Z(),G("div",hy,[...S[66]||(S[66]=[p("div",null,[p("span",{class:"dot green"}),Ke(" Fuel >20%")],-1),p("div",null,[p("span",{class:"dot yellow"}),Ke(" Fuel <20%")],-1),p("div",null,[p("span",{class:"dot red"}),Ke(" No station")],-1)])])),g.value?(Z(),G("div",fy,te(g.value),1)):oe("",!0)]))}},my=Ni(py,[["__scopeId","data-v-426b654f"]]),vy={class:"header"},_y={class:"header-actions"},gy=["disabled","title"],yy={class:"content"},by={class:"info-card"},wy={class:"info-row"},Sy={class:"value"},Ay={class:"info-row"},ky={class:"value"},Ty={class:"info-row"},Py={class:"value coordinates"},xy={class:"info-row"},Ey={class:"info-row"},Ly={class:"value"},Oy={class:"prices-card"},Cy={class:"fuel-type"},My={class:"price"},Iy={class:"info-card"},Ry={class:"info-row"},Dy={class:"value"},$y={class:"info-row"},jy={class:"value"},Ny={__name:"StationDetail",props:{station:{type:Object,required:!0}},emits:["back","pay"],setup(i){const e=i,{user:n}=Ls(),r=re(!1),o=re(null),a=re(!1),u=re(null),d=bt(()=>Math.round(e.station.capacity*e.station.fuelLevel/100)),h=bt(()=>{const[A,P]=e.station.coordinates;return`${A.toFixed(6)}, ${P.toFixed(6)}`}),m=bt(()=>e.station.fuelLevel===0?" OUT OF FUEL":e.station.fuelLevel<20?" LOW FUEL":" AVAILABLE"),v=bt(()=>e.station.fuelLevel===0?"text-red-600":e.station.fuelLevel<20?"text-yellow-600":"text-green-600");Nn(async()=>{if(n.value)try{const{data:A,error:P}=await yt.from("favorites").select("id").eq("user_id",n.value.id).eq("station_id",e.station.id).maybeSingle();if(P&&P.code!=="PGRST116"){console.error("Error checking favorite:",P);return}A&&(r.value=!0,o.value=A.id)}catch(A){console.error("Error checking favorite:",A)}});async function g(){if(!(!n.value||a.value)){a.value=!0;try{if(r.value){const{error:A}=await yt.from("favorites").delete().eq("id",o.value).eq("user_id",n.value.id);if(A)throw A;r.value=!1,o.value=null,y("Removed from favorites")}else{const{data:A,error:P}=await yt.from("favorites").insert({user_id:n.value.id,station_id:e.station.id,name:e.station.name,location:e.station.location,coordinates:e.station.coordinates,station_type:e.station.stationType,fuel_level:e.station.fuelLevel,capacity:e.station.capacity,fuels:e.station.fuels}).select().single();if(P)throw P;r.value=!0,o.value=A.id,y("Added to favorites!")}}catch(A){console.error("Error toggling favorite:",A),y("Error updating favorites",!0)}finally{a.value=!1}}}function y(A,P=!1){u.value={message:A,isError:P},setTimeout(()=>{u.value=null},3e3)}return(A,P)=>(Z(),G("div",{class:"modal-overlay",onClick:P[3]||(P[3]=O=>A.$emit("back"))},[p("div",{class:"modal-content",onClick:P[2]||(P[2]=Mt(()=>{},["stop"]))},[p("header",vy,[p("h2",null,te(i.station.name),1),p("div",_y,[dt(n)?(Z(),G("button",{key:0,onClick:g,disabled:a.value,class:Je(["favorite-btn",{"is-favorite":r.value}]),title:r.value?"Remove from favorites":"Add to favorites"},te(r.value?"":""),11,gy)):oe("",!0),p("button",{onClick:P[0]||(P[0]=O=>A.$emit("back")),class:"close-btn"},"")])]),p("div",yy,[p("div",by,[p("div",wy,[P[4]||(P[4]=p("span",{class:"label"},"Provider:",-1)),p("span",Sy," "+te(i.station.stationType),1)]),p("div",Ay,[P[5]||(P[5]=p("span",{class:"label"},"Location:",-1)),p("span",ky," "+te(i.station.location),1)]),p("div",Ty,[P[6]||(P[6]=p("span",{class:"label"},"Coordinates:",-1)),p("span",Py,te(h.value),1)]),p("div",xy,[P[7]||(P[7]=p("span",{class:"label"},"Status:",-1)),p("span",{class:Je(["value",v.value])},te(m.value),3)]),p("div",Ey,[P[8]||(P[8]=p("span",{class:"label"},"Fuel Level:",-1)),p("span",Ly,te(d.value)+"L / "+te(i.station.capacity)+"L",1)])]),p("div",Oy,[P[9]||(P[9]=p("h3",null,"Fuel Prices",-1)),(Z(!0),G(it,null,Qt(i.station.fuels,(O,k)=>(Z(),G("div",{key:k,class:"price-row"},[p("span",Cy,te(k.toUpperCase()),1),p("span",My,te(O.price.toFixed(2))+"/L",1)]))),128))]),p("div",Iy,[p("div",Ry,[P[10]||(P[10]=p("span",{class:"label"},"Hours:",-1)),p("span",Dy," "+te(i.station.hours),1)]),p("div",$y,[P[11]||(P[11]=p("span",{class:"label"},"Payment:",-1)),p("span",jy," "+te(i.station.payment.join(", ")),1)])]),p("button",{onClick:P[1]||(P[1]=O=>A.$emit("pay",i.station)),class:"fuel-btn"}," START FUELING ")])]),u.value?(Z(),G("div",{key:0,class:Je(["notification",{error:u.value.isError}])},te(u.value.message),3)):oe("",!0)]))}},Uy=Ni(Ny,[["__scopeId","data-v-008fa4dc"]]),By={class:"payment-page"},Fy={class:"header"},zy={class:"content"},qy={key:0},Vy={class:"card station-info"},Hy={class:"station-location"},Zy={class:"card"},Ky={class:"fuel-options"},Wy=["value"],Gy={class:"fuel-details"},Jy={class:"fuel-name"},Yy={class:"fuel-price"},Xy={class:"card"},Qy={class:"preset-buttons"},e0=["onClick"],t0={class:"price-breakdown"},i0={class:"price-row"},n0={class:"price-row total"},s0={key:0,class:"error-message"},r0={class:"card"},o0={class:"payment-methods"},a0={class:"payment-method-card"},l0={class:"payment-method-card"},u0={class:"payment-method-card"},c0={key:1,class:"processing-screen"},d0={class:"processing-animation"},h0={key:2,class:"refueling-screen"},f0={class:"refueling-animation"},p0={class:"progress-bar"},m0={class:"progress-text"},v0={class:"liters-dispensed"},_0={key:3,class:"receipt-screen"},g0={class:"receipt-card"},y0={class:"receipt-header"},b0={class:"transaction-id"},w0={class:"timestamp"},S0={class:"receipt-details"},A0={class:"receipt-row"},k0={class:"receipt-row"},T0={class:"receipt-row"},P0={class:"receipt-row"},x0={class:"receipt-row"},E0={class:"receipt-total"},L0={__name:"PaymentScreen",props:{station:{type:Object,required:!0}},emits:["back","complete"],setup(i,{emit:e}){const n=i,r=e,o=re("selection"),a=re(Object.keys(n.station.fuels)[0]),u=re(50),d=re("card"),h=re(""),m=re({});Object.keys(n.station.fuels).forEach(H=>{m.value[H]=Math.floor(Math.random()*400)+100});const v=re("Connecting to payment gateway..."),g=re(0),y=re(0),A=re(""),P=re(""),O=bt(()=>{var H;return((H=n.station.fuels[a.value])==null?void 0:H.price)||0}),k=bt(()=>O.value*u.value);function N(H){return m.value[H]||0}function R(){switch(o.value){case"selection":return"Payment";case"processing":return"Processing Payment";case"refueling":return"Refueling";case"receipt":return"Receipt";default:return"Payment"}}function M(){return{card:"Credit Card",mobile:"Mobile Pay",qr:"QR Code"}[d.value]||d.value}function B(){o.value==="selection"?r("back"):o.value==="receipt"&&Oe()}function ue(){if(h.value="",!u.value||u.value<=0){h.value="Please enter a valid amount";return}const H=N(a.value);if(u.value>H){h.value=`Only ${H}L of ${a.value.toUpperCase()} available`;return}if(u.value<5){h.value="Minimum fuel amount is 5L";return}o.value="processing",le()}async function le(){const H=["Connecting to payment gateway...","Verifying payment method...","Authorizing transaction...","Payment confirmed!"];for(let E=0;E<H.length;E++)v.value=H[E],await new Promise(z=>setTimeout(z,800));A.value="FD"+Date.now().toString().slice(-8),P.value=new Date().toLocaleString("et-EE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),o.value="refueling",ge()}async function ge(){for(let F=0;F<=60;F++)g.value=Math.round(F/60*100),y.value=u.value*F/60,await new Promise(Y=>setTimeout(Y,50));m.value[a.value]-=u.value,o.value="receipt"}function Le(){const H=`
=================================
      FUELDOCK ESTONIA
=================================

Transaction #${A.value}
${P.value}

---------------------------------
Station: ${n.station.name}
Fuel Type: ${a.value.toUpperCase()}
Amount: ${u.value}L
Price/L: ${O.value.toFixed(2)}
Payment: ${M()}
---------------------------------
TOTAL: ${k.value.toFixed(2)}
=================================

Thank you for using FuelDock!
  `.trim(),E=new Blob([H],{type:"text/plain"}),z=URL.createObjectURL(E),F=document.createElement("a");F.href=z,F.download=`receipt-${A.value}.txt`,F.click(),URL.revokeObjectURL(z)}function Oe(){r("complete",{station:n.station.name,fuelType:a.value.toUpperCase(),liters:u.value,cost:k.value,transactionId:A.value,timestamp:P.value,paymentMethod:M(),date:new Date().toISOString()})}return(H,E)=>(Z(),G("div",By,[p("header",Fy,[p("button",{onClick:B,class:"back-btn"}," Back"),p("h2",null,te(R()),1)]),p("div",zy,[o.value==="selection"?(Z(),G("div",qy,[p("div",Vy,[p("h3",null,te(i.station.name),1),p("p",Hy,te(i.station.location),1)]),p("div",Zy,[E[5]||(E[5]=p("h3",null,"Select Fuel Type",-1)),p("div",Ky,[(Z(!0),G(it,null,Qt(i.station.fuels,(z,F)=>(Z(),G("label",{key:F,class:Je(["fuel-option",{"low-stock":N(F)<100}])},[we(p("input",{type:"radio",value:F,"onUpdate:modelValue":E[0]||(E[0]=Y=>a.value=Y)},null,8,Wy),[[Oi,a.value]]),p("div",Gy,[p("span",Jy,te(F.toUpperCase()),1),p("span",Yy,te(z.price.toFixed(2))+"/L",1),p("span",{class:Je(["fuel-stock",{warning:N(F)<100}])},te(N(F))+"L available ",3)])],2))),128))])]),p("div",Xy,[E[8]||(E[8]=p("h3",null,"Fuel Amount",-1)),p("div",Qy,[(Z(),G(it,null,Qt([25,50,75,100],z=>p("button",{key:z,onClick:F=>u.value=z,class:Je(["preset-btn",{active:u.value===z}])},te(z)+"L ",11,e0)),64))]),we(p("input",{type:"number","onUpdate:modelValue":E[1]||(E[1]=z=>u.value=z),placeholder:"50",class:"input",min:"1"},null,512),[[ot,u.value,void 0,{number:!0}]]),p("div",t0,[p("div",i0,[E[6]||(E[6]=p("span",null,"Price per liter:",-1)),p("span",null,te(O.value.toFixed(2))+"",1)]),p("div",n0,[E[7]||(E[7]=p("span",null,"Total Cost:",-1)),p("strong",null,te(k.value.toFixed(2))+"",1)])]),h.value?(Z(),G("div",s0,"  "+te(h.value),1)):oe("",!0)]),p("div",r0,[E[12]||(E[12]=p("h3",null,"Payment Method",-1)),p("div",o0,[p("label",a0,[we(p("input",{type:"radio",value:"card","onUpdate:modelValue":E[2]||(E[2]=z=>d.value=z)},null,512),[[Oi,d.value]]),E[9]||(E[9]=p("div",{class:"method-content"},[p("span",{class:"method-icon"},""),p("span",{class:"method-name"},"Credit Card")],-1))]),p("label",l0,[we(p("input",{type:"radio",value:"mobile","onUpdate:modelValue":E[3]||(E[3]=z=>d.value=z)},null,512),[[Oi,d.value]]),E[10]||(E[10]=p("div",{class:"method-content"},[p("span",{class:"method-icon"},""),p("span",{class:"method-name"},"Mobile Pay")],-1))]),p("label",u0,[we(p("input",{type:"radio",value:"qr","onUpdate:modelValue":E[4]||(E[4]=z=>d.value=z)},null,512),[[Oi,d.value]]),E[11]||(E[11]=Vp('<div class="method-content" data-v-5ebfec41><div class="method-icon qr-icon" data-v-5ebfec41><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-5ebfec41><rect x="5" y="5" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="12" y="12" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="5" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="67" y="12" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="5" y="60" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="12" y="67" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="84" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="60" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="60" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="84" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="84" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="84" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect></svg></div><span class="method-name" data-v-5ebfec41>QR Code</span></div>',1))])])]),p("button",{onClick:ue,class:"confirm-btn"},"PROCEED TO PAYMENT")])):oe("",!0),o.value==="processing"?(Z(),G("div",c0,[p("div",d0,[E[13]||(E[13]=p("div",{class:"spinner"},null,-1)),p("h3",null,te(v.value),1),E[14]||(E[14]=p("p",null,"Please wait...",-1))])])):oe("",!0),o.value==="refueling"?(Z(),G("div",h0,[p("div",f0,[E[15]||(E[15]=p("div",{class:"fuel-pump-icon"},"",-1)),E[16]||(E[16]=p("h3",null,"Refueling in Progress",-1)),p("div",p0,[p("div",{class:"progress-fill",style:jn({width:g.value+"%"})},null,4)]),p("p",m0,te(g.value)+"%",1),p("p",v0,te(y.value.toFixed(1))+"L / "+te(u.value)+"L",1)])])):oe("",!0),o.value==="receipt"?(Z(),G("div",_0,[E[26]||(E[26]=p("div",{class:"success-animation"},[p("div",{class:"checkmark"},""),p("h3",null,"Payment Successful!")],-1)),p("div",g0,[p("div",y0,[E[17]||(E[17]=p("h3",null,"Receipt",-1)),p("p",b0,"Transaction #"+te(A.value),1),p("p",w0,te(P.value),1)]),E[24]||(E[24]=p("div",{class:"receipt-divider"},null,-1)),p("div",S0,[p("div",A0,[E[18]||(E[18]=p("span",null,"Station:",-1)),p("span",null,te(i.station.name),1)]),p("div",k0,[E[19]||(E[19]=p("span",null,"Fuel Type:",-1)),p("span",null,te(a.value.toUpperCase()),1)]),p("div",T0,[E[20]||(E[20]=p("span",null,"Amount:",-1)),p("span",null,te(u.value)+"L",1)]),p("div",P0,[E[21]||(E[21]=p("span",null,"Price per liter:",-1)),p("span",null,te(O.value.toFixed(2))+"",1)]),p("div",x0,[E[22]||(E[22]=p("span",null,"Payment Method:",-1)),p("span",null,te(M()),1)])]),E[25]||(E[25]=p("div",{class:"receipt-divider"},null,-1)),p("div",E0,[E[23]||(E[23]=p("span",null,"Total Paid:",-1)),p("strong",null,te(k.value.toFixed(2))+"",1)])]),p("div",{class:"receipt-actions"},[p("button",{onClick:Le,class:"download-btn"},"  Download Receipt "),p("button",{onClick:Oe,class:"finish-btn"}," Done ")])])):oe("",!0)])]))}},O0=Ni(L0,[["__scopeId","data-v-5ebfec41"]]),C0={class:"history-page"},M0={class:"header"},I0={class:"content"},R0={key:0,class:"empty"},D0={key:1,class:"history-list"},$0={class:"item-header"},j0={class:"date"},N0={class:"cost"},U0={class:"item-details"},B0={key:2,class:"summary"},F0={class:"total-spent"},z0={class:"modal-actions"},q0={__name:"HistoryScreen",emits:["back"],setup(i){const e=re([]),n=re(!1);Nn(()=>{e.value=JSON.parse(localStorage.getItem("fuelHistory")||"[]")});const r=bt(()=>e.value.reduce((d,h)=>d+h.cost,0));function o(d){return new Date(d).toLocaleDateString("et-EE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function a(){n.value=!0}function u(){localStorage.removeItem("fuelHistory"),e.value=[],n.value=!1}return(d,h)=>(Z(),G("div",C0,[p("header",M0,[p("button",{onClick:h[0]||(h[0]=m=>d.$emit("back")),class:"back-btn"}," Back"),h[4]||(h[4]=p("h2",null,"Fuel History",-1))]),p("div",I0,[e.value.length===0?(Z(),G("div",R0,[...h[5]||(h[5]=[p("p",null,"No transactions yet",-1)])])):(Z(),G("div",D0,[(Z(!0),G(it,null,Qt(e.value,(m,v)=>(Z(),G("div",{key:v,class:"history-item"},[p("div",$0,[p("span",j0,te(o(m.date)),1),p("span",N0,te(m.cost.toFixed(2))+"",1)]),p("div",U0,[p("p",null,[p("strong",null,te(m.station),1)]),p("p",null,te(m.liters)+"L "+te(m.fuelType),1)])]))),128))])),e.value.length>0?(Z(),G("div",B0,[p("button",{onClick:a,class:"reset-btn"},"  Clear History "),p("div",F0,[p("p",null,[h[6]||(h[6]=Ke("Total spent: ",-1)),p("strong",null,te(r.value.toFixed(2))+"",1)])])])):oe("",!0),n.value?(Z(),G("div",{key:3,class:"modal-overlay",onClick:h[3]||(h[3]=m=>n.value=!1)},[p("div",{class:"confirm-modal",onClick:h[2]||(h[2]=Mt(()=>{},["stop"]))},[h[7]||(h[7]=p("div",{class:"modal-icon"},"",-1)),h[8]||(h[8]=p("h3",null,"Clear History?",-1)),h[9]||(h[9]=p("p",null,"This will permanently delete all fuel history records.",-1)),p("div",z0,[p("button",{onClick:h[1]||(h[1]=m=>n.value=!1),class:"cancel-btn"},"Cancel"),p("button",{onClick:u,class:"confirm-btn"},"Clear All")])])])):oe("",!0)])]))}},V0=Ni(q0,[["__scopeId","data-v-1dd5308e"]]),H0={class:"favorites-container"},Z0={class:"favorites-header"},K0={class:"favorites-content"},W0={key:0,class:"empty-state"},G0={key:1,class:"favorites-list"},J0={class:"favorites-actions"},Y0={class:"sort-options"},X0={class:"favorite-cards"},Q0={class:"card-header"},eb={class:"card-badges"},tb={class:"card-body"},ib={class:"info-row"},nb={class:"info-row"},sb={key:0,class:"info-row"},rb={class:"info-row"},ob={key:0,class:"card-notes"},ab={class:"notes-text"},lb={key:1,class:"card-tags"},ub={class:"card-actions"},cb=["onClick"],db=["onClick"],hb=["onClick"],fb={class:"modal-subtitle"},pb={class:"form-group"},mb={class:"form-group"},vb={class:"tags-input"},_b={key:0,class:"current-tags"},gb=["onClick"],yb={class:"modal-actions"},bb={__name:"FavoritesScreen",emits:["back","view-station","show-on-map"],setup(i,{emit:e}){const{user:n}=Ls(),r=e,o=re([]),a=re("distance"),u=re(null),d=re(""),h=re([]),m=re(""),v=re(null);Nn(async()=>{await P(),g()});function g(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(H=>{v.value={lat:H.coords.latitude,lng:H.coords.longitude},A()},()=>{v.value={lat:58.5953,lng:25.0136},A()})}function y(H,E,z,F){const j=(z-H)*Math.PI/180,J=(F-E)*Math.PI/180,ke=Math.sin(j/2)*Math.sin(j/2)+Math.cos(H*Math.PI/180)*Math.cos(z*Math.PI/180)*Math.sin(J/2)*Math.sin(J/2);return(6371*(2*Math.atan2(Math.sqrt(ke),Math.sqrt(1-ke)))).toFixed(1)}function A(){v.value&&o.value.forEach(H=>{H.distance=y(v.value.lat,v.value.lng,H.coordinates[0],H.coordinates[1])})}async function P(){if(!n.value)return;const{data:H,error:E}=await yt.from("favorites").select("*").eq("user_id",n.value.id);E?console.error("Error loading favorites:",E):o.value=H||[]}const O=bt(()=>{const H=[...o.value];return a.value==="distance"?H.sort((E,z)=>parseFloat(E.distance||999)-parseFloat(z.distance||999)):a.value==="name"?H.sort((E,z)=>E.name.localeCompare(z.name)):a.value==="fuelLevel"?H.sort((E,z)=>z.fuelLevel-E.fuelLevel):a.value==="dateAdded"&&H.sort((E,z)=>new Date(z.created_at)-new Date(E.created_at)),H});function k(H){return H.fuelLevel===0?"fuel-empty":H.fuelLevel<20?"fuel-low":"fuel-good"}function N(H){return H.fuelLevel===0?"Empty":H.fuelLevel<20?`${H.fuelLevel}% Low`:`${H.fuelLevel}%`}function R(H){if(!H.fuels)return"N/A";const E=Object.values(H.fuels).map(z=>z.price).filter(z=>z>0);return E.length===0?"N/A":`From ${Math.min(...E).toFixed(2)}/L`}function M(H){r("view-station",H)}function B(){r("show-on-map",o.value)}function ue(H){u.value=H,d.value=H.notes||"",h.value=H.tags||[]}function le(){m.value.trim()&&!h.value.includes(m.value.trim())&&(h.value.push(m.value.trim()),m.value="")}function ge(H){h.value.splice(H,1)}async function Le(){const{error:H}=await yt.from("favorites").update({notes:d.value,tags:h.value}).eq("id",u.value.id).eq("user_id",n.value.id);if(H)console.error("Error saving notes:",H);else{const E=o.value.findIndex(z=>z.id===u.value.id);E!==-1&&(o.value[E].notes=d.value,o.value[E].tags=h.value),u.value=null}}async function Oe(H){if(!confirm(`Remove ${H.name} from favorites?`))return;const{error:E}=await yt.from("favorites").delete().eq("id",H.id).eq("user_id",n.value.id);E?console.error("Error removing favorite:",E):o.value=o.value.filter(z=>z.id!==H.id)}return(H,E)=>(Z(),G("div",H0,[p("header",Z0,[p("button",{onClick:E[0]||(E[0]=z=>H.$emit("back")),class:"back-btn"}," Back to Map"),E[8]||(E[8]=p("h2",null," My Favorites",-1))]),p("div",K0,[o.value.length===0?(Z(),G("div",W0,[E[9]||(E[9]=p("div",{class:"empty-icon"},"",-1)),E[10]||(E[10]=p("h3",null,"No Favorites Yet",-1)),E[11]||(E[11]=p("p",null,"Start adding marinas to your favorites from the map!",-1)),p("button",{onClick:E[1]||(E[1]=z=>H.$emit("back")),class:"browse-btn"}," Browse Marinas ")])):(Z(),G("div",G0,[p("div",J0,[p("button",{onClick:B,class:"show-all-btn"},"  Show All on Map "),p("div",Y0,[E[13]||(E[13]=p("label",null,"Sort by:",-1)),we(p("select",{"onUpdate:modelValue":E[2]||(E[2]=z=>a.value=z),class:"sort-select"},[...E[12]||(E[12]=[p("option",{value:"distance"},"Distance",-1),p("option",{value:"name"},"Name",-1),p("option",{value:"fuelLevel"},"Fuel Level",-1),p("option",{value:"dateAdded"},"Recently Added",-1)])],512),[[Sm,a.value]])])]),p("div",X0,[(Z(!0),G(it,null,Qt(O.value,z=>(Z(),G("div",{key:z.id,class:"favorite-card"},[p("div",Q0,[p("h3",null,te(z.name),1),p("div",eb,[p("span",{class:Je(["fuel-badge",k(z)])},te(N(z)),3)])]),p("div",tb,[p("div",ib,[E[14]||(E[14]=p("span",{class:"icon"},"",-1)),p("span",null,te(z.location),1)]),p("div",nb,[E[15]||(E[15]=p("span",{class:"icon"},"",-1)),p("span",null,te(z.stationType),1)]),z.distance?(Z(),G("div",sb,[E[16]||(E[16]=p("span",{class:"icon"},"",-1)),p("span",null,te(z.distance)+" km away",1)])):oe("",!0),p("div",rb,[E[17]||(E[17]=p("span",{class:"icon"},"",-1)),p("span",null,te(R(z)),1)])]),z.notes?(Z(),G("div",ob,[E[18]||(E[18]=p("div",{class:"notes-label"}," My Notes:",-1)),p("div",ab,te(z.notes),1)])):oe("",!0),z.tags&&z.tags.length>0?(Z(),G("div",lb,[(Z(!0),G(it,null,Qt(z.tags,F=>(Z(),G("span",{key:F,class:"tag"},te(F),1))),128))])):oe("",!0),p("div",ub,[p("button",{onClick:F=>M(z),class:"action-btn view-btn"},"  View ",8,cb),p("button",{onClick:F=>ue(z),class:"action-btn edit-btn"},"  Edit Notes ",8,db),p("button",{onClick:F=>Oe(z),class:"action-btn remove-btn"},"  Remove ",8,hb)])]))),128))])]))]),u.value?(Z(),G("div",{key:0,class:"modal-overlay",onClick:E[7]||(E[7]=z=>u.value=null)},[p("div",{class:"modal-content",onClick:E[6]||(E[6]=Mt(()=>{},["stop"]))},[E[21]||(E[21]=p("h3",null," Edit Notes",-1)),p("p",fb,te(u.value.name),1),p("div",pb,[E[19]||(E[19]=p("label",null," Personal Notes",-1)),we(p("textarea",{"onUpdate:modelValue":E[3]||(E[3]=z=>d.value=z),placeholder:"Add your personal notes about this marina...",rows:"4",class:"notes-textarea"},null,512),[[ot,d.value]])]),p("div",mb,[E[20]||(E[20]=p("label",null," Tags",-1)),p("div",vb,[we(p("input",{"onUpdate:modelValue":E[4]||(E[4]=z=>m.value=z),onKeyup:Pm(le,["enter"]),placeholder:"Add a tag and press Enter",class:"tag-input"},null,544),[[ot,m.value]])]),h.value.length>0?(Z(),G("div",_b,[(Z(!0),G(it,null,Qt(h.value,(z,F)=>(Z(),G("span",{key:F,class:"edit-tag"},[Ke(te(z)+" ",1),p("button",{onClick:Y=>ge(F),class:"remove-tag-btn"},"",8,gb)]))),128))])):oe("",!0)]),p("div",yb,[p("button",{onClick:E[5]||(E[5]=z=>u.value=null),class:"cancel-btn"},"Cancel"),p("button",{onClick:Le,class:"save-btn"},"Save")])])])):oe("",!0)]))}},wb=Ni(bb,[["__scopeId","data-v-f33f546b"]]),Sb={class:"admin-container"},Ab={class:"admin-header"},kb={class:"tabs"},Tb={key:0,class:"tab-content"},Pb={class:"toolbar"},xb={class:"table-container"},Eb={class:"data-table"},Lb={class:"fuel-indicator"},Ob={class:"fuel-bar"},Cb={class:"action-buttons"},Mb=["onClick"],Ib=["onClick"],Rb={key:1,class:"tab-content"},Db={class:"toolbar"},$b={class:"table-container"},jb={class:"data-table"},Nb={class:"action-buttons"},Ub=["onClick","title"],Bb=["onClick"],Fb={class:"form-row"},zb={class:"form-group"},qb={class:"form-group"},Vb={class:"form-row"},Hb={class:"form-group"},Zb={class:"form-group"},Kb={class:"form-row"},Wb={class:"form-group"},Gb={class:"form-group"},Jb={class:"form-row"},Yb={class:"form-group"},Xb={class:"form-group"},Qb={class:"form-actions"},ew={type:"submit",class:"save-btn"},tw={class:"modal-actions"},iw={key:4,class:"loading-overlay"},nw={__name:"AdminPanel",emits:["back"],setup(i,{emit:e}){const n=re("marinas"),r=re(""),o=re(""),a=re(!1),u=re(null),d=re(!1),h=re(null),m=re(null),v=re([...zd]),g=re([]),y=re({id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}),A=bt(()=>{if(!r.value)return v.value;const Y=r.value.toLowerCase();return v.value.filter(j=>{var J;return j.name.toLowerCase().includes(Y)||j.location.toLowerCase().includes(Y)||((J=j.stationType)==null?void 0:J.toLowerCase().includes(Y))})}),P=bt(()=>{if(!o.value)return g.value;const Y=o.value.toLowerCase();return g.value.filter(j=>j.email.toLowerCase().includes(Y))});cr(n,async Y=>{Y==="users"&&g.value.length===0&&await O()});async function O(){d.value=!0;try{const{data:Y,error:j}=await yt.auth.admin.listUsers();if(j)throw j;g.value=Y.users||[]}catch(Y){F("Failed to load users: "+Y.message,"error")}finally{d.value=!1}}function k(Y){u.value=Y,y.value={...Y}}function N(Y){Y.target.classList.contains("modal-overlay")&&R()}function R(){a.value=!1,u.value=null,m.value=null,M()}function M(){y.value={id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}}async function B(){if(u.value){const Y=v.value.findIndex(j=>j.id===u.value.id);Y!==-1&&(v.value[Y]={...y.value})}else y.value.id=`station-${Date.now()}`,v.value.push({...y.value});await H(),R()}function ue(Y){m.value={type:"marina",item:Y}}async function le(){if(m.value){if(m.value.type==="marina"){const Y=m.value.item;v.value=v.value.filter(j=>j.id!==Y.id),F("Marina deleted successfully","success"),await H()}m.value=null}}async function ge(Y){if(confirm(`Delete user ${Y.email}?`)){d.value=!0;try{const{error:j}=await yt.auth.admin.deleteUser(Y.id);if(j)throw j;g.value=g.value.filter(J=>J.id!==Y.id),F("User deleted successfully","success")}catch(j){F("Failed to delete user: "+j.message,"error")}finally{d.value=!1}}}async function Le(Y){var ke;const J=((ke=Y.user_metadata)==null?void 0:ke.role)==="admin"?"user":"admin";d.value=!0;try{const{error:ie}=await yt.auth.admin.updateUserById(Y.id,{user_metadata:{role:J}});if(ie)throw ie;const ht=g.value.findIndex(pe=>pe.id===Y.id);ht!==-1&&(g.value[ht].user_metadata={...g.value[ht].user_metadata,role:J}),F(`User ${J==="admin"?"promoted to":"removed from"} admin`,"success")}catch(ie){F("Failed to update role: "+ie.message,"error")}finally{d.value=!1}}function Oe(Y){var j;return((j=Y.user_metadata)==null?void 0:j.role)==="admin"||Y.email==="admin@fueldock.ee"}async function H(){d.value=!0;try{const j=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v.value)})).json();if(j.success)F(" Marinas saved successfully!","success");else throw new Error(j.message)}catch(Y){console.error("Save error:",Y),F(" Error saving marinas. Is the save server running?","error")}finally{d.value=!1}}function E(Y){return Y===0?"empty":Y<20?"low":"good"}function z(Y){return Y?new Date(Y).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}function F(Y,j="success"){h.value={message:Y,type:j},setTimeout(()=>{h.value=null},3e3)}return(Y,j)=>(Z(),G("div",Sb,[p("header",Ab,[p("button",{onClick:j[0]||(j[0]=J=>Y.$emit("back")),class:"back-btn"}," Back to Map"),j[19]||(j[19]=p("h2",null,"Admin Panel",-1))]),p("div",kb,[p("button",{class:Je({active:n.value==="marinas"}),onClick:j[1]||(j[1]=J=>n.value="marinas")}," Marina Management ",2),p("button",{class:Je({active:n.value==="users"}),onClick:j[2]||(j[2]=J=>n.value="users")}," User Management ",2)]),n.value==="marinas"?(Z(),G("div",Tb,[p("div",Pb,[we(p("input",{"onUpdate:modelValue":j[3]||(j[3]=J=>r.value=J),placeholder:" Search marinas...",class:"search-input"},null,512),[[ot,r.value]]),p("button",{onClick:j[4]||(j[4]=J=>a.value=!0),class:"add-btn"}," + Add Marina ")]),p("div",xb,[p("table",Eb,[j[20]||(j[20]=p("thead",null,[p("tr",null,[p("th",null,"Name"),p("th",null,"Location"),p("th",null,"Provider"),p("th",null,"Fuel Level"),p("th",null,"Capacity"),p("th",null,"Status"),p("th",null,"Actions")])],-1)),p("tbody",null,[(Z(!0),G(it,null,Qt(A.value,J=>(Z(),G("tr",{key:J.id},[p("td",null,te(J.name),1),p("td",null,te(J.location),1),p("td",null,te(J.stationType),1),p("td",null,[p("div",Lb,[p("div",Ob,[p("div",{class:Je(["fuel-fill",E(J.fuelLevel)]),style:jn({width:J.fuelLevel+"%"})},null,6)]),p("span",null,te(J.fuelLevel)+"%",1)])]),p("td",null,te(J.capacity)+"L",1),p("td",null,[p("span",{class:Je(["status-badge",J.hasStation?"active":"inactive"])},te(J.hasStation?"Active":"Inactive"),3)]),p("td",null,[p("div",Cb,[p("button",{onClick:ke=>k(J),class:"edit-btn",title:"Edit"},"  ",8,Mb),p("button",{onClick:ke=>ue(J),class:"delete-btn",title:"Delete"},"  ",8,Ib)])])]))),128))])])])])):oe("",!0),n.value==="users"?(Z(),G("div",Rb,[p("div",Db,[we(p("input",{"onUpdate:modelValue":j[5]||(j[5]=J=>o.value=J),placeholder:" Search users...",class:"search-input"},null,512),[[ot,o.value]])]),p("div",$b,[p("table",jb,[j[21]||(j[21]=p("thead",null,[p("tr",null,[p("th",null,"Email"),p("th",null,"Created"),p("th",null,"Last Sign In"),p("th",null,"Status"),p("th",null,"Actions")])],-1)),p("tbody",null,[(Z(!0),G(it,null,Qt(P.value,J=>(Z(),G("tr",{key:J.id},[p("td",null,te(J.email),1),p("td",null,te(z(J.created_at)),1),p("td",null,te(z(J.last_sign_in_at)),1),p("td",null,[p("span",{class:Je(["status-badge",J.email_confirmed_at?"active":"pending"])},te(J.email_confirmed_at?"Verified":"Pending"),3)]),p("td",null,[p("div",Nb,[p("button",{onClick:ke=>Le(J),class:"role-btn",title:Oe(J)?"Remove Admin":"Make Admin"},te(Oe(J)?"":""),9,Ub),p("button",{onClick:ke=>ge(J),class:"delete-btn",title:"Delete User"},"  ",8,Bb)])])]))),128))])])])])):oe("",!0),a.value||u.value?(Z(),G("div",{key:2,class:"modal-overlay",onMousedown:N},[p("div",{class:"modal-content",onClick:j[14]||(j[14]=Mt(()=>{},["stop"])),onMousedown:j[15]||(j[15]=Mt(()=>{},["stop"]))},[p("h3",null,te(u.value?"Edit Marina":"Add New Marina"),1),p("form",{onSubmit:Mt(B,["prevent"]),class:"marina-form"},[p("div",Fb,[p("div",zb,[j[22]||(j[22]=p("label",null,"Marina Name *",-1)),we(p("input",{"onUpdate:modelValue":j[6]||(j[6]=J=>y.value.name=J),type:"text",required:"",placeholder:"e.g., DIRHAMI SADAM"},null,512),[[ot,y.value.name]])]),p("div",qb,[j[23]||(j[23]=p("label",null,"Location *",-1)),we(p("input",{"onUpdate:modelValue":j[7]||(j[7]=J=>y.value.location=J),type:"text",required:"",placeholder:"e.g., Lne maakond"},null,512),[[ot,y.value.location]])])]),p("div",Vb,[p("div",Hb,[j[24]||(j[24]=p("label",null,"Latitude *",-1)),we(p("input",{"onUpdate:modelValue":j[8]||(j[8]=J=>y.value.coordinates[0]=J),type:"number",step:"any",required:""},null,512),[[ot,y.value.coordinates[0],void 0,{number:!0}]])]),p("div",Zb,[j[25]||(j[25]=p("label",null,"Longitude *",-1)),we(p("input",{"onUpdate:modelValue":j[9]||(j[9]=J=>y.value.coordinates[1]=J),type:"number",step:"any",required:""},null,512),[[ot,y.value.coordinates[1],void 0,{number:!0}]])])]),p("div",Kb,[p("div",Wb,[j[26]||(j[26]=p("label",null,"Station Type",-1)),we(p("input",{"onUpdate:modelValue":j[10]||(j[10]=J=>y.value.stationType=J),type:"text",placeholder:"e.g., Olerex"},null,512),[[ot,y.value.stationType]])]),p("div",Gb,[p("label",null,[we(p("input",{"onUpdate:modelValue":j[11]||(j[11]=J=>y.value.hasStation=J),type:"checkbox"},null,512),[[It,y.value.hasStation]]),j[27]||(j[27]=Ke(" Has Fuel Station ",-1))])])]),p("div",Jb,[p("div",Yb,[j[28]||(j[28]=p("label",null,"Fuel Level (%)",-1)),we(p("input",{"onUpdate:modelValue":j[12]||(j[12]=J=>y.value.fuelLevel=J),type:"number",min:"0",max:"100"},null,512),[[ot,y.value.fuelLevel,void 0,{number:!0}]])]),p("div",Xb,[j[29]||(j[29]=p("label",null,"Capacity (L)",-1)),we(p("input",{"onUpdate:modelValue":j[13]||(j[13]=J=>y.value.capacity=J),type:"number",min:"0"},null,512),[[ot,y.value.capacity,void 0,{number:!0}]])])]),p("div",Qb,[p("button",{type:"button",onClick:R,class:"cancel-btn"}," Cancel "),p("button",ew,te(u.value?"Update":"Add")+" Marina ",1)])],32)],32)],32)):oe("",!0),m.value?(Z(),G("div",{key:3,class:"modal-overlay",onClick:j[18]||(j[18]=J=>m.value=null)},[p("div",{class:"login-prompt-modal",onClick:j[17]||(j[17]=Mt(()=>{},["stop"]))},[j[35]||(j[35]=p("div",{class:"modal-icon"},"",-1)),j[36]||(j[36]=p("h3",null,"Confirm Delete",-1)),p("p",null,[j[30]||(j[30]=Ke(" Are you sure you want to delete",-1)),j[31]||(j[31]=p("br",null,null,-1)),p("strong",null,te(m.value.item.name||m.value.item.email),1),j[32]||(j[32]=Ke("? ",-1)),j[33]||(j[33]=p("br",null,null,-1)),j[34]||(j[34]=Ke("This action cannot be undone. ",-1))]),p("div",tw,[p("button",{onClick:le,class:"delete-confirm-btn"}," Delete "),p("button",{onClick:j[16]||(j[16]=J=>m.value=null),class:"cancel-btn"}," Cancel ")])])])):oe("",!0),d.value?(Z(),G("div",iw,[...j[37]||(j[37]=[p("div",{class:"spinner"},null,-1)])])):oe("",!0),h.value?(Z(),G("div",{key:5,class:Je(["notification",h.value.type])},te(h.value.message),3)):oe("",!0)]))}},sw=Ni(nw,[["__scopeId","data-v-e78266fb"]]),rw={key:1,class:"app"},ow={class:"header-fixed"},aw={class:"flex justify-between items-center w-full"},lw={class:"text-2xl font-bold flex items-center gap-2"},uw={key:0,class:"guest-badge"},cw={class:"header-actions desktop-actions"},dw={class:"h-[calc(100vh-80px)]"},hw={class:"modal-actions"},fw={key:3,class:"loading-screen"},pw={class:"progress-bar"},mw={__name:"App",setup(i){const{user:e,loading:n,isAdmin:r,checkUser:o,signOut:a,initAuthListener:u}=Ls(),d=re(0),h=re("map"),m=re(null),v=re(null),g=re(null),y=re(!1),A=re(!1),P=re(!1),O=re(!1),k=re(!1);Nn(async()=>{const z=setInterval(()=>{d.value+=5,d.value>=100&&clearInterval(z)},100);await o(),u()});function N(){y.value=!0}async function R(){try{await a(),y.value=!1,h.value="map",m.value=null}catch(z){console.error("Logout error:",z)}}function M(z){if(y.value){A.value=!0;return}z.hasStation&&(m.value=z)}function B(){y.value=!1,A.value=!1}function ue(z){v.value=z,h.value="payment",m.value=null}function le(){h.value="map",m.value=null,v.value=null,g.value&&setTimeout(()=>{g.value.invalidateMapSize()},50)}async function ge(){m.value=null,g.value&&setTimeout(async()=>{g.value.restoreMapView(),await g.value.refreshFavorites()},50)}function Le(z){const F=JSON.parse(localStorage.getItem("fuelHistory")||"[]");F.unshift({...z,date:new Date().toISOString()}),localStorage.setItem("fuelHistory",JSON.stringify(F)),le()}async function Oe(z){h.value="map",g.value&&setTimeout(async()=>{await g.value.refreshFavorites()},50)}function H(){P.value=!P.value}function E(){O.value=!O.value}return(z,F)=>(Z(),G(it,null,[!dt(e)&&!y.value&&!dt(n)?(Z(),Ji(Sg,{key:0,onGuestMode:N})):(Z(),G("div",rw,[p("header",ow,[p("div",aw,[p("h1",lw,[F[18]||(F[18]=p("img",{src:zo,alt:"Logo",class:"w-16 h-16"},null,-1)),F[19]||(F[19]=p("span",{class:"app-title"},"FuelDock Estonia",-1)),y.value?(Z(),G("span",uw,"Guest")):oe("",!0)]),p("div",cw,[!y.value&&dt(e)?(Z(),G("button",{key:0,onClick:F[0]||(F[0]=Y=>h.value="favorites"),class:"favorites-btn",title:"My Favorites"},"  ")):oe("",!0),!y.value&&dt(e)?(Z(),G("button",{key:1,onClick:F[1]||(F[1]=Y=>h.value="history"),class:"history-btn",title:"Fuel History"},"  ")):oe("",!0),!y.value&&dt(e)&&h.value==="map"?(Z(),G("button",{key:2,onClick:H,class:"filters-btn",title:"Filters"},"  ")):oe("",!0),!y.value&&dt(e)&&h.value==="map"?(Z(),G("button",{key:3,onClick:E,class:"map-type-btn-header",title:"Map Type"},"  ")):oe("",!0),dt(r)&&!y.value?(Z(),G("button",{key:4,onClick:F[2]||(F[2]=Y=>h.value="admin"),class:"admin-btn",title:"Admin Panel"},"  ")):oe("",!0),y.value?(Z(),G("button",{key:5,onClick:B,class:"guest-login-btn",title:"Login"},"  Login ")):oe("",!0),dt(e)?(Z(),G("button",{key:6,onClick:R,class:"logout-btn",title:"Logout"},"  Logout ")):oe("",!0)]),p("button",{onClick:F[3]||(F[3]=Y=>k.value=!k.value),class:"hamburger-btn mobile-only"},"  ")]),k.value?(Z(),G("div",{key:0,class:"mobile-menu-overlay",onClick:F[12]||(F[12]=Y=>k.value=!1)},[p("div",{class:"mobile-menu",onClick:F[11]||(F[11]=Mt(()=>{},["stop"]))},[!y.value&&dt(e)?(Z(),G("button",{key:0,onClick:F[4]||(F[4]=Y=>{h.value="favorites",k.value=!1}),class:"mobile-menu-item"},"  Favorites ")):oe("",!0),!y.value&&dt(e)?(Z(),G("button",{key:1,onClick:F[5]||(F[5]=Y=>{h.value="history",k.value=!1}),class:"mobile-menu-item"},"  History ")):oe("",!0),!y.value&&dt(e)&&h.value==="map"?(Z(),G("button",{key:2,onClick:F[6]||(F[6]=Y=>{H(),k.value=!1}),class:"mobile-menu-item"},"  Filters ")):oe("",!0),!y.value&&dt(e)&&h.value==="map"?(Z(),G("button",{key:3,onClick:F[7]||(F[7]=Y=>{E(),k.value=!1}),class:"mobile-menu-item"},"  Map Type ")):oe("",!0),dt(r)&&!y.value?(Z(),G("button",{key:4,onClick:F[8]||(F[8]=Y=>{h.value="admin",k.value=!1}),class:"mobile-menu-item"},"  Admin ")):oe("",!0),y.value?(Z(),G("button",{key:5,onClick:F[9]||(F[9]=Y=>{B(),k.value=!1}),class:"mobile-menu-item login-item"},"  Login ")):oe("",!0),dt(e)?(Z(),G("button",{key:6,onClick:F[10]||(F[10]=Y=>{R(),k.value=!1}),class:"mobile-menu-item logout-item"},"  Logout ")):oe("",!0)])])):oe("",!0)]),p("main",dw,[h.value==="favorites"?(Z(),Ji(wb,{key:0,onBack:le,onViewStation:M,onShowOnMap:Oe})):h.value==="history"?(Z(),Ji(V0,{key:1,onBack:le})):h.value==="payment"?(Z(),Ji(O0,{key:2,station:v.value,onBack:le,onComplete:Le},null,8,["station"])):h.value==="admin"?(Z(),Ji(sw,{key:3,onBack:le})):oe("",!0),we(ei(my,{ref_key:"mapViewRef",ref:g,"guest-mode":y.value,"is-admin":dt(r),"show-filters-from-parent":P.value,"show-map-type-from-parent":O.value,onStationClick:M,onCloseFilters:F[13]||(F[13]=Y=>P.value=!1),onCloseMapType:F[14]||(F[14]=Y=>O.value=!1)},null,8,["guest-mode","is-admin","show-filters-from-parent","show-map-type-from-parent"]),[[am,h.value==="map"]])]),m.value?(Z(),Ji(Uy,{key:0,station:m.value,onBack:ge,onPay:ue},null,8,["station"])):oe("",!0)])),A.value?(Z(),G("div",{key:2,class:"modal-overlay",onClick:F[17]||(F[17]=Y=>A.value=!1)},[p("div",{class:"login-prompt-modal",onClick:F[16]||(F[16]=Mt(()=>{},["stop"]))},[F[20]||(F[20]=p("div",{class:"modal-icon"},"",-1)),F[21]||(F[21]=p("h3",null,"Login Required",-1)),F[22]||(F[22]=p("p",null,"Please login to see marina details and fuel information",-1)),p("div",hw,[p("button",{onClick:B,class:"login-btn"}," Login / Sign Up "),p("button",{onClick:F[15]||(F[15]=Y=>A.value=!1),class:"cancel-btn"}," Continue Browsing ")])])])):oe("",!0),dt(n)?(Z(),G("div",fw,[F[23]||(F[23]=p("img",{src:zo,alt:"FuelDock",class:"loading-logo"},null,-1)),p("div",pw,[p("div",{class:"progress-fill",style:jn({width:d.value+"%"})},null,4)])])):oe("",!0)],64))}},vw=Ni(mw,[["__scopeId","data-v-b1465ad9"]]);Lm(vw).mount("#app");
