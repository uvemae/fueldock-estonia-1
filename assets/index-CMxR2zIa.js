function rf(i,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in i)){const a=Object.getOwnPropertyDescriptor(r,o);a&&Object.defineProperty(i,o,a.get?a:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const u of a.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function sa(i){const e=Object.create(null);for(const n of i.split(","))e[n]=1;return n=>n in e}const Ve={},xn=[],ui=()=>{},Cu=()=>!1,Lr=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),ra=i=>i.startsWith("onUpdate:"),Et=Object.assign,oa=(i,e)=>{const n=i.indexOf(e);n>-1&&i.splice(n,1)},of=Object.prototype.hasOwnProperty,Fe=(i,e)=>of.call(i,e),_e=Array.isArray,En=i=>Ps(i)==="[object Map]",jn=i=>Ps(i)==="[object Set]",Pl=i=>Ps(i)==="[object Date]",ke=i=>typeof i=="function",at=i=>typeof i=="string",ci=i=>typeof i=="symbol",Ge=i=>i!==null&&typeof i=="object",Mu=i=>(Ge(i)||ke(i))&&ke(i.then)&&ke(i.catch),Iu=Object.prototype.toString,Ps=i=>Iu.call(i),af=i=>Ps(i).slice(8,-1),Du=i=>Ps(i)==="[object Object]",aa=i=>at(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,ls=sa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Or=i=>{const e=Object.create(null);return n=>e[n]||(e[n]=i(n))},lf=/-\w/g,Ii=Or(i=>i.replace(lf,e=>e.slice(1).toUpperCase())),uf=/\B([A-Z])/g,ji=Or(i=>i.replace(uf,"-$1").toLowerCase()),Ru=Or(i=>i.charAt(0).toUpperCase()+i.slice(1)),po=Or(i=>i?`on${Ru(i)}`:""),Mi=(i,e)=>!Object.is(i,e),ur=(i,...e)=>{for(let n=0;n<i.length;n++)i[n](...e)},$u=(i,e,n,r=!1)=>{Object.defineProperty(i,e,{configurable:!0,enumerable:!1,writable:r,value:n})},mr=i=>{const e=parseFloat(i);return isNaN(e)?i:e};let xl;const Cr=()=>xl||(xl=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Nn(i){if(_e(i)){const e={};for(let n=0;n<i.length;n++){const r=i[n],o=at(r)?ff(r):Nn(r);if(o)for(const a in o)e[a]=o[a]}return e}else if(at(i)||Ge(i))return i}const cf=/;(?![^(]*\))/g,df=/:([^]+)/,hf=/\/\*[^]*?\*\//g;function ff(i){const e={};return i.replace(hf,"").split(cf).forEach(n=>{if(n){const r=n.split(df);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Je(i){let e="";if(at(i))e=i;else if(_e(i))for(let n=0;n<i.length;n++){const r=Je(i[n]);r&&(e+=r+" ")}else if(Ge(i))for(const n in i)i[n]&&(e+=n+" ");return e.trim()}const pf="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mf=sa(pf);function ju(i){return!!i||i===""}function vf(i,e){if(i.length!==e.length)return!1;let n=!0;for(let r=0;n&&r<i.length;r++)n=rn(i[r],e[r]);return n}function rn(i,e){if(i===e)return!0;let n=Pl(i),r=Pl(e);if(n||r)return n&&r?i.getTime()===e.getTime():!1;if(n=ci(i),r=ci(e),n||r)return i===e;if(n=_e(i),r=_e(e),n||r)return n&&r?vf(i,e):!1;if(n=Ge(i),r=Ge(e),n||r){if(!n||!r)return!1;const o=Object.keys(i).length,a=Object.keys(e).length;if(o!==a)return!1;for(const u in i){const d=i.hasOwnProperty(u),h=e.hasOwnProperty(u);if(d&&!h||!d&&h||!rn(i[u],e[u]))return!1}}return String(i)===String(e)}function la(i,e){return i.findIndex(n=>rn(n,e))}const Nu=i=>!!(i&&i.__v_isRef===!0),ee=i=>at(i)?i:i==null?"":_e(i)||Ge(i)&&(i.toString===Iu||!ke(i.toString))?Nu(i)?ee(i.value):JSON.stringify(i,Uu,2):String(i),Uu=(i,e)=>Nu(e)?Uu(i,e.value):En(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,o],a)=>(n[mo(r,a)+" =>"]=o,n),{})}:jn(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>mo(n))}:ci(e)?mo(e):Ge(e)&&!_e(e)&&!Du(e)?String(e):e,mo=(i,e="")=>{var n;return ci(i)?`Symbol(${(n=i.description)!=null?n:e})`:i};/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ct;class _f{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ct,!e&&Ct&&(this.index=(Ct.scopes||(Ct.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=Ct;try{return Ct=this,e()}finally{Ct=n}}}on(){++this._on===1&&(this.prevScope=Ct,Ct=this)}off(){this._on>0&&--this._on===0&&(Ct=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const o=this.parent.scopes.pop();o&&o!==this&&(this.parent.scopes[this.index]=o,o.index=this.index)}this.parent=void 0}}}function gf(){return Ct}let We;const vo=new WeakSet;class Bu{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ct&&Ct.active&&Ct.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,vo.has(this)&&(vo.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||zu(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,El(this),qu(this);const e=We,n=Qt;We=this,Qt=!0;try{return this.fn()}finally{Vu(this),We=e,Qt=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)da(e);this.deps=this.depsTail=void 0,El(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?vo.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mo(this)&&this.run()}get dirty(){return Mo(this)}}let Fu=0,us,cs;function zu(i,e=!1){if(i.flags|=8,e){i.next=cs,cs=i;return}i.next=us,us=i}function ua(){Fu++}function ca(){if(--Fu>0)return;if(cs){let e=cs;for(cs=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let i;for(;us;){let e=us;for(us=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){i||(i=r)}e=n}}if(i)throw i}function qu(i){for(let e=i.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Vu(i){let e,n=i.depsTail,r=n;for(;r;){const o=r.prevDep;r.version===-1?(r===n&&(n=o),da(r),yf(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=o}i.deps=e,i.depsTail=n}function Mo(i){for(let e=i.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Hu(e.dep.computed)||e.dep.version!==e.version))return!0;return!!i._dirty}function Hu(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===gs)||(i.globalVersion=gs,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!Mo(i))))return;i.flags|=2;const e=i.dep,n=We,r=Qt;We=i,Qt=!0;try{qu(i);const o=i.fn(i._value);(e.version===0||Mi(o,i._value))&&(i.flags|=128,i._value=o,e.version++)}catch(o){throw e.version++,o}finally{We=n,Qt=r,Vu(i),i.flags&=-3}}function da(i,e=!1){const{dep:n,prevSub:r,nextSub:o}=i;if(r&&(r.nextSub=o,i.prevSub=void 0),o&&(o.prevSub=r,i.nextSub=void 0),n.subs===i&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let a=n.computed.deps;a;a=a.nextDep)da(a,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function yf(i){const{prevDep:e,nextDep:n}=i;e&&(e.nextDep=n,i.prevDep=void 0),n&&(n.prevDep=e,i.nextDep=void 0)}let Qt=!0;const Zu=[];function Si(){Zu.push(Qt),Qt=!1}function Ai(){const i=Zu.pop();Qt=i===void 0?!0:i}function El(i){const{cleanup:e}=i;if(i.cleanup=void 0,e){const n=We;We=void 0;try{e()}finally{We=n}}}let gs=0;class bf{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ha{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!We||!Qt||We===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==We)n=this.activeLink=new bf(We,this),We.deps?(n.prevDep=We.depsTail,We.depsTail.nextDep=n,We.depsTail=n):We.deps=We.depsTail=n,Ku(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=We.depsTail,n.nextDep=void 0,We.depsTail.nextDep=n,We.depsTail=n,We.deps===n&&(We.deps=r)}return n}trigger(e){this.version++,gs++,this.notify(e)}notify(e){ua();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{ca()}}}function Ku(i){if(i.dep.sc++,i.sub.flags&4){const e=i.dep.computed;if(e&&!i.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Ku(r)}const n=i.dep.subs;n!==i&&(i.prevSub=n,n&&(n.nextSub=i)),i.dep.subs=i}}const Io=new WeakMap,sn=Symbol(""),Do=Symbol(""),ys=Symbol("");function gt(i,e,n){if(Qt&&We){let r=Io.get(i);r||Io.set(i,r=new Map);let o=r.get(n);o||(r.set(n,o=new ha),o.map=r,o.key=n),o.track()}}function yi(i,e,n,r,o,a){const u=Io.get(i);if(!u){gs++;return}const d=h=>{h&&h.trigger()};if(ua(),e==="clear")u.forEach(d);else{const h=_e(i),m=h&&aa(n);if(h&&n==="length"){const v=Number(r);u.forEach((g,y)=>{(y==="length"||y===ys||!ci(y)&&y>=v)&&d(g)})}else switch((n!==void 0||u.has(void 0))&&d(u.get(n)),m&&d(u.get(ys)),e){case"add":h?m&&d(u.get("length")):(d(u.get(sn)),En(i)&&d(u.get(Do)));break;case"delete":h||(d(u.get(sn)),En(i)&&d(u.get(Do)));break;case"set":En(i)&&d(u.get(sn));break}}ca()}function _n(i){const e=Be(i);return e===i?e:(gt(e,"iterate",ys),qt(i)?e:e.map(_t))}function Mr(i){return gt(i=Be(i),"iterate",ys),i}const wf={__proto__:null,[Symbol.iterator](){return _o(this,Symbol.iterator,_t)},concat(...i){return _n(this).concat(...i.map(e=>_e(e)?_n(e):e))},entries(){return _o(this,"entries",i=>(i[1]=_t(i[1]),i))},every(i,e){return vi(this,"every",i,e,void 0,arguments)},filter(i,e){return vi(this,"filter",i,e,n=>n.map(_t),arguments)},find(i,e){return vi(this,"find",i,e,_t,arguments)},findIndex(i,e){return vi(this,"findIndex",i,e,void 0,arguments)},findLast(i,e){return vi(this,"findLast",i,e,_t,arguments)},findLastIndex(i,e){return vi(this,"findLastIndex",i,e,void 0,arguments)},forEach(i,e){return vi(this,"forEach",i,e,void 0,arguments)},includes(...i){return go(this,"includes",i)},indexOf(...i){return go(this,"indexOf",i)},join(i){return _n(this).join(i)},lastIndexOf(...i){return go(this,"lastIndexOf",i)},map(i,e){return vi(this,"map",i,e,void 0,arguments)},pop(){return ns(this,"pop")},push(...i){return ns(this,"push",i)},reduce(i,...e){return Ll(this,"reduce",i,e)},reduceRight(i,...e){return Ll(this,"reduceRight",i,e)},shift(){return ns(this,"shift")},some(i,e){return vi(this,"some",i,e,void 0,arguments)},splice(...i){return ns(this,"splice",i)},toReversed(){return _n(this).toReversed()},toSorted(i){return _n(this).toSorted(i)},toSpliced(...i){return _n(this).toSpliced(...i)},unshift(...i){return ns(this,"unshift",i)},values(){return _o(this,"values",_t)}};function _o(i,e,n){const r=Mr(i),o=r[e]();return r!==i&&!qt(i)&&(o._next=o.next,o.next=()=>{const a=o._next();return a.done||(a.value=n(a.value)),a}),o}const Sf=Array.prototype;function vi(i,e,n,r,o,a){const u=Mr(i),d=u!==i&&!qt(i),h=u[e];if(h!==Sf[e]){const g=h.apply(i,a);return d?_t(g):g}let m=n;u!==i&&(d?m=function(g,y){return n.call(this,_t(g),y,i)}:n.length>2&&(m=function(g,y){return n.call(this,g,y,i)}));const v=h.call(u,m,r);return d&&o?o(v):v}function Ll(i,e,n,r){const o=Mr(i);let a=n;return o!==i&&(qt(i)?n.length>3&&(a=function(u,d,h){return n.call(this,u,d,h,i)}):a=function(u,d,h){return n.call(this,u,_t(d),h,i)}),o[e](a,...r)}function go(i,e,n){const r=Be(i);gt(r,"iterate",ys);const o=r[e](...n);return(o===-1||o===!1)&&va(n[0])?(n[0]=Be(n[0]),r[e](...n)):o}function ns(i,e,n=[]){Si(),ua();const r=Be(i)[e].apply(i,n);return ca(),Ai(),r}const Af=sa("__proto__,__v_isRef,__isVue"),Wu=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(ci));function kf(i){ci(i)||(i=String(i));const e=Be(this);return gt(e,"has",i),e.hasOwnProperty(i)}class Gu{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const o=this._isReadonly,a=this._isShallow;if(n==="__v_isReactive")return!o;if(n==="__v_isReadonly")return o;if(n==="__v_isShallow")return a;if(n==="__v_raw")return r===(o?a?Df:Qu:a?Xu:Yu).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const u=_e(e);if(!o){let h;if(u&&(h=wf[n]))return h;if(n==="hasOwnProperty")return kf}const d=Reflect.get(e,n,wt(e)?e:r);if((ci(n)?Wu.has(n):Af(n))||(o||gt(e,"get",n),a))return d;if(wt(d)){const h=u&&aa(n)?d:d.value;return o&&Ge(h)?$o(h):h}return Ge(d)?o?$o(d):pa(d):d}}class Ju extends Gu{constructor(e=!1){super(!1,e)}set(e,n,r,o){let a=e[n];if(!this._isShallow){const h=Di(a);if(!qt(r)&&!Di(r)&&(a=Be(a),r=Be(r)),!_e(e)&&wt(a)&&!wt(r))return h||(a.value=r),!0}const u=_e(e)&&aa(n)?Number(n)<e.length:Fe(e,n),d=Reflect.set(e,n,r,wt(e)?e:o);return e===Be(o)&&(u?Mi(r,a)&&yi(e,"set",n,r):yi(e,"add",n,r)),d}deleteProperty(e,n){const r=Fe(e,n);e[n];const o=Reflect.deleteProperty(e,n);return o&&r&&yi(e,"delete",n,void 0),o}has(e,n){const r=Reflect.has(e,n);return(!ci(n)||!Wu.has(n))&&gt(e,"has",n),r}ownKeys(e){return gt(e,"iterate",_e(e)?"length":sn),Reflect.ownKeys(e)}}class Tf extends Gu{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Pf=new Ju,xf=new Tf,Ef=new Ju(!0);const Ro=i=>i,Js=i=>Reflect.getPrototypeOf(i);function Lf(i,e,n){return function(...r){const o=this.__v_raw,a=Be(o),u=En(a),d=i==="entries"||i===Symbol.iterator&&u,h=i==="keys"&&u,m=o[i](...r),v=n?Ro:e?vr:_t;return!e&&gt(a,"iterate",h?Do:sn),{next(){const{value:g,done:y}=m.next();return y?{value:g,done:y}:{value:d?[v(g[0]),v(g[1])]:v(g),done:y}},[Symbol.iterator](){return this}}}}function Ys(i){return function(...e){return i==="delete"?!1:i==="clear"?void 0:this}}function Of(i,e){const n={get(o){const a=this.__v_raw,u=Be(a),d=Be(o);i||(Mi(o,d)&&gt(u,"get",o),gt(u,"get",d));const{has:h}=Js(u),m=e?Ro:i?vr:_t;if(h.call(u,o))return m(a.get(o));if(h.call(u,d))return m(a.get(d));a!==u&&a.get(o)},get size(){const o=this.__v_raw;return!i&&gt(Be(o),"iterate",sn),o.size},has(o){const a=this.__v_raw,u=Be(a),d=Be(o);return i||(Mi(o,d)&&gt(u,"has",o),gt(u,"has",d)),o===d?a.has(o):a.has(o)||a.has(d)},forEach(o,a){const u=this,d=u.__v_raw,h=Be(d),m=e?Ro:i?vr:_t;return!i&&gt(h,"iterate",sn),d.forEach((v,g)=>o.call(a,m(v),m(g),u))}};return Et(n,i?{add:Ys("add"),set:Ys("set"),delete:Ys("delete"),clear:Ys("clear")}:{add(o){!e&&!qt(o)&&!Di(o)&&(o=Be(o));const a=Be(this);return Js(a).has.call(a,o)||(a.add(o),yi(a,"add",o,o)),this},set(o,a){!e&&!qt(a)&&!Di(a)&&(a=Be(a));const u=Be(this),{has:d,get:h}=Js(u);let m=d.call(u,o);m||(o=Be(o),m=d.call(u,o));const v=h.call(u,o);return u.set(o,a),m?Mi(a,v)&&yi(u,"set",o,a):yi(u,"add",o,a),this},delete(o){const a=Be(this),{has:u,get:d}=Js(a);let h=u.call(a,o);h||(o=Be(o),h=u.call(a,o)),d&&d.call(a,o);const m=a.delete(o);return h&&yi(a,"delete",o,void 0),m},clear(){const o=Be(this),a=o.size!==0,u=o.clear();return a&&yi(o,"clear",void 0,void 0),u}}),["keys","values","entries",Symbol.iterator].forEach(o=>{n[o]=Lf(o,i,e)}),n}function fa(i,e){const n=Of(i,e);return(r,o,a)=>o==="__v_isReactive"?!i:o==="__v_isReadonly"?i:o==="__v_raw"?r:Reflect.get(Fe(n,o)&&o in r?n:r,o,a)}const Cf={get:fa(!1,!1)},Mf={get:fa(!1,!0)},If={get:fa(!0,!1)};const Yu=new WeakMap,Xu=new WeakMap,Qu=new WeakMap,Df=new WeakMap;function Rf(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function $f(i){return i.__v_skip||!Object.isExtensible(i)?0:Rf(af(i))}function pa(i){return Di(i)?i:ma(i,!1,Pf,Cf,Yu)}function jf(i){return ma(i,!1,Ef,Mf,Xu)}function $o(i){return ma(i,!0,xf,If,Qu)}function ma(i,e,n,r,o){if(!Ge(i)||i.__v_raw&&!(e&&i.__v_isReactive))return i;const a=$f(i);if(a===0)return i;const u=o.get(i);if(u)return u;const d=new Proxy(i,a===2?r:n);return o.set(i,d),d}function Ln(i){return Di(i)?Ln(i.__v_raw):!!(i&&i.__v_isReactive)}function Di(i){return!!(i&&i.__v_isReadonly)}function qt(i){return!!(i&&i.__v_isShallow)}function va(i){return i?!!i.__v_raw:!1}function Be(i){const e=i&&i.__v_raw;return e?Be(e):i}function Nf(i){return!Fe(i,"__v_skip")&&Object.isExtensible(i)&&$u(i,"__v_skip",!0),i}const _t=i=>Ge(i)?pa(i):i,vr=i=>Ge(i)?$o(i):i;function wt(i){return i?i.__v_isRef===!0:!1}function se(i){return Uf(i,!1)}function Uf(i,e){return wt(i)?i:new Bf(i,e)}class Bf{constructor(e,n){this.dep=new ha,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:Be(e),this._value=n?e:_t(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||qt(e)||Di(e);e=r?e:Be(e),Mi(e,n)&&(this._rawValue=e,this._value=r?e:_t(e),this.dep.trigger())}}function ht(i){return wt(i)?i.value:i}const Ff={get:(i,e,n)=>e==="__v_raw"?i:ht(Reflect.get(i,e,n)),set:(i,e,n,r)=>{const o=i[e];return wt(o)&&!wt(n)?(o.value=n,!0):Reflect.set(i,e,n,r)}};function ec(i){return Ln(i)?i:new Proxy(i,Ff)}class zf{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new ha(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&We!==this)return zu(this,!0),!0}get value(){const e=this.dep.track();return Hu(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function qf(i,e,n=!1){let r,o;return ke(i)?r=i:(r=i.get,o=i.set),new zf(r,o,n)}const Xs={},_r=new WeakMap;let Yi;function Vf(i,e=!1,n=Yi){if(n){let r=_r.get(n);r||_r.set(n,r=[]),r.push(i)}}function Hf(i,e,n=Ve){const{immediate:r,deep:o,once:a,scheduler:u,augmentJob:d,call:h}=n,m=B=>o?B:qt(B)||o===!1||o===0?bi(B,1):bi(B);let v,g,y,A,P=!1,E=!1;if(wt(i)?(g=()=>i.value,P=qt(i)):Ln(i)?(g=()=>m(i),P=!0):_e(i)?(E=!0,P=i.some(B=>Ln(B)||qt(B)),g=()=>i.map(B=>{if(wt(B))return B.value;if(Ln(B))return m(B);if(ke(B))return h?h(B,2):B()})):ke(i)?e?g=h?()=>h(i,2):i:g=()=>{if(y){Si();try{y()}finally{Ai()}}const B=Yi;Yi=v;try{return h?h(i,3,[A]):i(A)}finally{Yi=B}}:g=ui,e&&o){const B=g,ue=o===!0?1/0:o;g=()=>bi(B(),ue)}const k=gf(),U=()=>{v.stop(),k&&k.active&&oa(k.effects,v)};if(a&&e){const B=e;e=(...ue)=>{B(...ue),U()}}let D=E?new Array(i.length).fill(Xs):Xs;const M=B=>{if(!(!(v.flags&1)||!v.dirty&&!B))if(e){const ue=v.run();if(o||P||(E?ue.some((le,ge)=>Mi(le,D[ge])):Mi(ue,D))){y&&y();const le=Yi;Yi=v;try{const ge=[ue,D===Xs?void 0:E&&D[0]===Xs?[]:D,A];D=ue,h?h(e,3,ge):e(...ge)}finally{Yi=le}}}else v.run()};return d&&d(M),v=new Bu(g),v.scheduler=u?()=>u(M,!1):M,A=B=>Vf(B,!1,v),y=v.onStop=()=>{const B=_r.get(v);if(B){if(h)h(B,4);else for(const ue of B)ue();_r.delete(v)}},e?r?M(!0):D=v.run():u?u(M.bind(null,!0),!0):v.run(),U.pause=v.pause.bind(v),U.resume=v.resume.bind(v),U.stop=U,U}function bi(i,e=1/0,n){if(e<=0||!Ge(i)||i.__v_skip||(n=n||new Map,(n.get(i)||0)>=e))return i;if(n.set(i,e),e--,wt(i))bi(i.value,e,n);else if(_e(i))for(let r=0;r<i.length;r++)bi(i[r],e,n);else if(jn(i)||En(i))i.forEach(r=>{bi(r,e,n)});else if(Du(i)){for(const r in i)bi(i[r],e,n);for(const r of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,r)&&bi(i[r],e,n)}return i}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function xs(i,e,n,r){try{return r?i(...r):i()}catch(o){Ir(o,e,n)}}function di(i,e,n,r){if(ke(i)){const o=xs(i,e,n,r);return o&&Mu(o)&&o.catch(a=>{Ir(a,e,n)}),o}if(_e(i)){const o=[];for(let a=0;a<i.length;a++)o.push(di(i[a],e,n,r));return o}}function Ir(i,e,n,r=!0){const o=e?e.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:u}=e&&e.appContext.config||Ve;if(e){let d=e.parent;const h=e.proxy,m=`https://vuejs.org/error-reference/#runtime-${n}`;for(;d;){const v=d.ec;if(v){for(let g=0;g<v.length;g++)if(v[g](i,h,m)===!1)return}d=d.parent}if(a){Si(),xs(a,null,10,[i,h,m]),Ai();return}}Zf(i,n,o,r,u)}function Zf(i,e,n,r=!0,o=!1){if(o)throw i;console.error(i)}const Tt=[];let ai=-1;const On=[];let Ei=null,kn=0;const tc=Promise.resolve();let gr=null;function ic(i){const e=gr||tc;return i?e.then(this?i.bind(this):i):e}function Kf(i){let e=ai+1,n=Tt.length;for(;e<n;){const r=e+n>>>1,o=Tt[r],a=bs(o);a<i||a===i&&o.flags&2?e=r+1:n=r}return e}function _a(i){if(!(i.flags&1)){const e=bs(i),n=Tt[Tt.length-1];!n||!(i.flags&2)&&e>=bs(n)?Tt.push(i):Tt.splice(Kf(e),0,i),i.flags|=1,nc()}}function nc(){gr||(gr=tc.then(rc))}function Wf(i){_e(i)?On.push(...i):Ei&&i.id===-1?Ei.splice(kn+1,0,i):i.flags&1||(On.push(i),i.flags|=1),nc()}function Ol(i,e,n=ai+1){for(;n<Tt.length;n++){const r=Tt[n];if(r&&r.flags&2){if(i&&r.id!==i.uid)continue;Tt.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sc(i){if(On.length){const e=[...new Set(On)].sort((n,r)=>bs(n)-bs(r));if(On.length=0,Ei){Ei.push(...e);return}for(Ei=e,kn=0;kn<Ei.length;kn++){const n=Ei[kn];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}Ei=null,kn=0}}const bs=i=>i.id==null?i.flags&2?-1:1/0:i.id;function rc(i){try{for(ai=0;ai<Tt.length;ai++){const e=Tt[ai];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),xs(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ai<Tt.length;ai++){const e=Tt[ai];e&&(e.flags&=-2)}ai=-1,Tt.length=0,sc(),gr=null,(Tt.length||On.length)&&rc()}}let zt=null,oc=null;function yr(i){const e=zt;return zt=i,oc=i&&i.type.__scopeId||null,e}function Gf(i,e=zt,n){if(!e||i._n)return i;const r=(...o)=>{r._d&&Bl(-1);const a=yr(e);let u;try{u=i(...o)}finally{yr(a),r._d&&Bl(1)}return u};return r._n=!0,r._c=!0,r._d=!0,r}function be(i,e){if(zt===null)return i;const n=jr(zt),r=i.dirs||(i.dirs=[]);for(let o=0;o<e.length;o++){let[a,u,d,h=Ve]=e[o];a&&(ke(a)&&(a={mounted:a,updated:a}),a.deep&&bi(u),r.push({dir:a,instance:n,value:u,oldValue:void 0,arg:d,modifiers:h}))}return i}function Ki(i,e,n,r){const o=i.dirs,a=e&&e.dirs;for(let u=0;u<o.length;u++){const d=o[u];a&&(d.oldValue=a[u].value);let h=d.dir[r];h&&(Si(),di(h,n,8,[i.el,d,i,e]),Ai())}}const Jf=Symbol("_vte"),Yf=i=>i.__isTeleport,Xf=Symbol("_leaveCb");function ga(i,e){i.shapeFlag&6&&i.component?(i.transition=e,ga(i.component.subTree,e)):i.shapeFlag&128?(i.ssContent.transition=e.clone(i.ssContent),i.ssFallback.transition=e.clone(i.ssFallback)):i.transition=e}function ac(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}const br=new WeakMap;function ds(i,e,n,r,o=!1){if(_e(i)){i.forEach((P,E)=>ds(P,e&&(_e(e)?e[E]:e),n,r,o));return}if(hs(r)&&!o){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&ds(i,e,n,r.component.subTree);return}const a=r.shapeFlag&4?jr(r.component):r.el,u=o?null:a,{i:d,r:h}=i,m=e&&e.r,v=d.refs===Ve?d.refs={}:d.refs,g=d.setupState,y=Be(g),A=g===Ve?Cu:P=>Fe(y,P);if(m!=null&&m!==h){if(Cl(e),at(m))v[m]=null,A(m)&&(g[m]=null);else if(wt(m)){m.value=null;const P=e;P.k&&(v[P.k]=null)}}if(ke(h))xs(h,d,12,[u,v]);else{const P=at(h),E=wt(h);if(P||E){const k=()=>{if(i.f){const U=P?A(h)?g[h]:v[h]:h.value;if(o)_e(U)&&oa(U,a);else if(_e(U))U.includes(a)||U.push(a);else if(P)v[h]=[a],A(h)&&(g[h]=v[h]);else{const D=[a];h.value=D,i.k&&(v[i.k]=D)}}else P?(v[h]=u,A(h)&&(g[h]=u)):E&&(h.value=u,i.k&&(v[i.k]=u))};if(u){const U=()=>{k(),br.delete(i)};U.id=-1,br.set(i,U),Rt(U,n)}else Cl(i),k()}}}function Cl(i){const e=br.get(i);e&&(e.flags|=8,br.delete(i))}Cr().requestIdleCallback;Cr().cancelIdleCallback;const hs=i=>!!i.type.__asyncLoader,lc=i=>i.type.__isKeepAlive;function Qf(i,e){uc(i,"a",e)}function ep(i,e){uc(i,"da",e)}function uc(i,e,n=xt){const r=i.__wdc||(i.__wdc=()=>{let o=n;for(;o;){if(o.isDeactivated)return;o=o.parent}return i()});if(Dr(e,r,n),n){let o=n.parent;for(;o&&o.parent;)lc(o.parent.vnode)&&tp(r,e,n,o),o=o.parent}}function tp(i,e,n,r){const o=Dr(e,i,r,!0);cc(()=>{oa(r[e],o)},n)}function Dr(i,e,n=xt,r=!1){if(n){const o=n[i]||(n[i]=[]),a=e.__weh||(e.__weh=(...u)=>{Si();const d=Es(n),h=di(e,n,i,u);return d(),Ai(),h});return r?o.unshift(a):o.push(a),a}}const ki=i=>(e,n=xt)=>{(!Ss||i==="sp")&&Dr(i,(...r)=>e(...r),n)},ip=ki("bm"),Un=ki("m"),np=ki("bu"),sp=ki("u"),rp=ki("bum"),cc=ki("um"),op=ki("sp"),ap=ki("rtg"),lp=ki("rtc");function up(i,e=xt){Dr("ec",i,e)}const cp=Symbol.for("v-ndc");function ei(i,e,n,r){let o;const a=n,u=_e(i);if(u||at(i)){const d=u&&Ln(i);let h=!1,m=!1;d&&(h=!qt(i),m=Di(i),i=Mr(i)),o=new Array(i.length);for(let v=0,g=i.length;v<g;v++)o[v]=e(h?m?vr(_t(i[v])):_t(i[v]):i[v],v,void 0,a)}else if(typeof i=="number"){o=new Array(i);for(let d=0;d<i;d++)o[d]=e(d+1,d,void 0,a)}else if(Ge(i))if(i[Symbol.iterator])o=Array.from(i,(d,h)=>e(d,h,void 0,a));else{const d=Object.keys(i);o=new Array(d.length);for(let h=0,m=d.length;h<m;h++){const v=d[h];o[h]=e(i[v],v,h,a)}}else o=[];return o}const jo=i=>i?Cc(i)?jr(i):jo(i.parent):null,fs=Et(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>jo(i.parent),$root:i=>jo(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>hc(i),$forceUpdate:i=>i.f||(i.f=()=>{_a(i.update)}),$nextTick:i=>i.n||(i.n=ic.bind(i.proxy)),$watch:i=>Mp.bind(i)}),yo=(i,e)=>i!==Ve&&!i.__isScriptSetup&&Fe(i,e),dp={get({_:i},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:o,props:a,accessCache:u,type:d,appContext:h}=i;let m;if(e[0]!=="$"){const A=u[e];if(A!==void 0)switch(A){case 1:return r[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(yo(r,e))return u[e]=1,r[e];if(o!==Ve&&Fe(o,e))return u[e]=2,o[e];if((m=i.propsOptions[0])&&Fe(m,e))return u[e]=3,a[e];if(n!==Ve&&Fe(n,e))return u[e]=4,n[e];No&&(u[e]=0)}}const v=fs[e];let g,y;if(v)return e==="$attrs"&&gt(i.attrs,"get",""),v(i);if((g=d.__cssModules)&&(g=g[e]))return g;if(n!==Ve&&Fe(n,e))return u[e]=4,n[e];if(y=h.config.globalProperties,Fe(y,e))return y[e]},set({_:i},e,n){const{data:r,setupState:o,ctx:a}=i;return yo(o,e)?(o[e]=n,!0):r!==Ve&&Fe(r,e)?(r[e]=n,!0):Fe(i.props,e)||e[0]==="$"&&e.slice(1)in i?!1:(a[e]=n,!0)},has({_:{data:i,setupState:e,accessCache:n,ctx:r,appContext:o,propsOptions:a,type:u}},d){let h,m;return!!(n[d]||i!==Ve&&d[0]!=="$"&&Fe(i,d)||yo(e,d)||(h=a[0])&&Fe(h,d)||Fe(r,d)||Fe(fs,d)||Fe(o.config.globalProperties,d)||(m=u.__cssModules)&&m[d])},defineProperty(i,e,n){return n.get!=null?i._.accessCache[e]=0:Fe(n,"value")&&this.set(i,e,n.value,null),Reflect.defineProperty(i,e,n)}};function Ml(i){return _e(i)?i.reduce((e,n)=>(e[n]=null,e),{}):i}let No=!0;function hp(i){const e=hc(i),n=i.proxy,r=i.ctx;No=!1,e.beforeCreate&&Il(e.beforeCreate,i,"bc");const{data:o,computed:a,methods:u,watch:d,provide:h,inject:m,created:v,beforeMount:g,mounted:y,beforeUpdate:A,updated:P,activated:E,deactivated:k,beforeDestroy:U,beforeUnmount:D,destroyed:M,unmounted:B,render:ue,renderTracked:le,renderTriggered:ge,errorCaptured:Ee,serverPrefetch:Le,expose:V,inheritAttrs:x,components:W,directives:re,filters:N}=e;if(m&&fp(m,r,null),u)for(const Ae in u){const te=u[Ae];ke(te)&&(r[Ae]=te.bind(n))}if(o){const Ae=o.call(n,n);Ge(Ae)&&(i.data=pa(Ae))}if(No=!0,a)for(const Ae in a){const te=a[Ae],ft=ke(te)?te.bind(n,n):ke(te.get)?te.get.bind(n,n):ui,pe=!ke(te)&&ke(te.set)?te.set.bind(n):ui,$e=bt({get:ft,set:pe});Object.defineProperty(r,Ae,{enumerable:!0,configurable:!0,get:()=>$e.value,set:qe=>$e.value=qe})}if(d)for(const Ae in d)dc(d[Ae],r,n,Ae);if(h){const Ae=ke(h)?h.call(n):h;Reflect.ownKeys(Ae).forEach(te=>{yp(te,Ae[te])})}v&&Il(v,i,"c");function J(Ae,te){_e(te)?te.forEach(ft=>Ae(ft.bind(n))):te&&Ae(te.bind(n))}if(J(ip,g),J(Un,y),J(np,A),J(sp,P),J(Qf,E),J(ep,k),J(up,Ee),J(lp,le),J(ap,ge),J(rp,D),J(cc,B),J(op,Le),_e(V))if(V.length){const Ae=i.exposed||(i.exposed={});V.forEach(te=>{Object.defineProperty(Ae,te,{get:()=>n[te],set:ft=>n[te]=ft,enumerable:!0})})}else i.exposed||(i.exposed={});ue&&i.render===ui&&(i.render=ue),x!=null&&(i.inheritAttrs=x),W&&(i.components=W),re&&(i.directives=re),Le&&ac(i)}function fp(i,e,n=ui){_e(i)&&(i=Uo(i));for(const r in i){const o=i[r];let a;Ge(o)?"default"in o?a=cr(o.from||r,o.default,!0):a=cr(o.from||r):a=cr(o),wt(a)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>a.value,set:u=>a.value=u}):e[r]=a}}function Il(i,e,n){di(_e(i)?i.map(r=>r.bind(e.proxy)):i.bind(e.proxy),e,n)}function dc(i,e,n,r){let o=r.includes(".")?Tc(n,r):()=>n[r];if(at(i)){const a=e[i];ke(a)&&dr(o,a)}else if(ke(i))dr(o,i.bind(n));else if(Ge(i))if(_e(i))i.forEach(a=>dc(a,e,n,r));else{const a=ke(i.handler)?i.handler.bind(n):e[i.handler];ke(a)&&dr(o,a,i)}}function hc(i){const e=i.type,{mixins:n,extends:r}=e,{mixins:o,optionsCache:a,config:{optionMergeStrategies:u}}=i.appContext,d=a.get(e);let h;return d?h=d:!o.length&&!n&&!r?h=e:(h={},o.length&&o.forEach(m=>wr(h,m,u,!0)),wr(h,e,u)),Ge(e)&&a.set(e,h),h}function wr(i,e,n,r=!1){const{mixins:o,extends:a}=e;a&&wr(i,a,n,!0),o&&o.forEach(u=>wr(i,u,n,!0));for(const u in e)if(!(r&&u==="expose")){const d=pp[u]||n&&n[u];i[u]=d?d(i[u],e[u]):e[u]}return i}const pp={data:Dl,props:Rl,emits:Rl,methods:os,computed:os,beforeCreate:At,created:At,beforeMount:At,mounted:At,beforeUpdate:At,updated:At,beforeDestroy:At,beforeUnmount:At,destroyed:At,unmounted:At,activated:At,deactivated:At,errorCaptured:At,serverPrefetch:At,components:os,directives:os,watch:vp,provide:Dl,inject:mp};function Dl(i,e){return e?i?function(){return Et(ke(i)?i.call(this,this):i,ke(e)?e.call(this,this):e)}:e:i}function mp(i,e){return os(Uo(i),Uo(e))}function Uo(i){if(_e(i)){const e={};for(let n=0;n<i.length;n++)e[i[n]]=i[n];return e}return i}function At(i,e){return i?[...new Set([].concat(i,e))]:e}function os(i,e){return i?Et(Object.create(null),i,e):e}function Rl(i,e){return i?_e(i)&&_e(e)?[...new Set([...i,...e])]:Et(Object.create(null),Ml(i),Ml(e??{})):e}function vp(i,e){if(!i)return e;if(!e)return i;const n=Et(Object.create(null),i);for(const r in e)n[r]=At(i[r],e[r]);return n}function fc(){return{app:null,config:{isNativeTag:Cu,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let _p=0;function gp(i,e){return function(r,o=null){ke(r)||(r=Et({},r)),o!=null&&!Ge(o)&&(o=null);const a=fc(),u=new WeakSet,d=[];let h=!1;const m=a.app={_uid:_p++,_component:r,_props:o,_container:null,_context:a,_instance:null,version:tm,get config(){return a.config},set config(v){},use(v,...g){return u.has(v)||(v&&ke(v.install)?(u.add(v),v.install(m,...g)):ke(v)&&(u.add(v),v(m,...g))),m},mixin(v){return a.mixins.includes(v)||a.mixins.push(v),m},component(v,g){return g?(a.components[v]=g,m):a.components[v]},directive(v,g){return g?(a.directives[v]=g,m):a.directives[v]},mount(v,g,y){if(!h){const A=m._ceVNode||ti(r,o);return A.appContext=a,y===!0?y="svg":y===!1&&(y=void 0),i(A,v,y),h=!0,m._container=v,v.__vue_app__=m,jr(A.component)}},onUnmount(v){d.push(v)},unmount(){h&&(di(d,m._instance,16),i(null,m._container),delete m._container.__vue_app__)},provide(v,g){return a.provides[v]=g,m},runWithContext(v){const g=Cn;Cn=m;try{return v()}finally{Cn=g}}};return m}}let Cn=null;function yp(i,e){if(xt){let n=xt.provides;const r=xt.parent&&xt.parent.provides;r===n&&(n=xt.provides=Object.create(r)),n[i]=e}}function cr(i,e,n=!1){const r=Gp();if(r||Cn){let o=Cn?Cn._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(o&&i in o)return o[i];if(arguments.length>1)return n&&ke(e)?e.call(r&&r.proxy):e}}const pc={},mc=()=>Object.create(pc),vc=i=>Object.getPrototypeOf(i)===pc;function bp(i,e,n,r=!1){const o={},a=mc();i.propsDefaults=Object.create(null),_c(i,e,o,a);for(const u in i.propsOptions[0])u in o||(o[u]=void 0);n?i.props=r?o:jf(o):i.type.props?i.props=o:i.props=a,i.attrs=a}function wp(i,e,n,r){const{props:o,attrs:a,vnode:{patchFlag:u}}=i,d=Be(o),[h]=i.propsOptions;let m=!1;if((r||u>0)&&!(u&16)){if(u&8){const v=i.vnode.dynamicProps;for(let g=0;g<v.length;g++){let y=v[g];if(Rr(i.emitsOptions,y))continue;const A=e[y];if(h)if(Fe(a,y))A!==a[y]&&(a[y]=A,m=!0);else{const P=Ii(y);o[P]=Bo(h,d,P,A,i,!1)}else A!==a[y]&&(a[y]=A,m=!0)}}}else{_c(i,e,o,a)&&(m=!0);let v;for(const g in d)(!e||!Fe(e,g)&&((v=ji(g))===g||!Fe(e,v)))&&(h?n&&(n[g]!==void 0||n[v]!==void 0)&&(o[g]=Bo(h,d,g,void 0,i,!0)):delete o[g]);if(a!==d)for(const g in a)(!e||!Fe(e,g))&&(delete a[g],m=!0)}m&&yi(i.attrs,"set","")}function _c(i,e,n,r){const[o,a]=i.propsOptions;let u=!1,d;if(e)for(let h in e){if(ls(h))continue;const m=e[h];let v;o&&Fe(o,v=Ii(h))?!a||!a.includes(v)?n[v]=m:(d||(d={}))[v]=m:Rr(i.emitsOptions,h)||(!(h in r)||m!==r[h])&&(r[h]=m,u=!0)}if(a){const h=Be(n),m=d||Ve;for(let v=0;v<a.length;v++){const g=a[v];n[g]=Bo(o,h,g,m[g],i,!Fe(m,g))}}return u}function Bo(i,e,n,r,o,a){const u=i[n];if(u!=null){const d=Fe(u,"default");if(d&&r===void 0){const h=u.default;if(u.type!==Function&&!u.skipFactory&&ke(h)){const{propsDefaults:m}=o;if(n in m)r=m[n];else{const v=Es(o);r=m[n]=h.call(null,e),v()}}else r=h;o.ce&&o.ce._setProp(n,r)}u[0]&&(a&&!d?r=!1:u[1]&&(r===""||r===ji(n))&&(r=!0))}return r}const Sp=new WeakMap;function gc(i,e,n=!1){const r=n?Sp:e.propsCache,o=r.get(i);if(o)return o;const a=i.props,u={},d=[];let h=!1;if(!ke(i)){const v=g=>{h=!0;const[y,A]=gc(g,e,!0);Et(u,y),A&&d.push(...A)};!n&&e.mixins.length&&e.mixins.forEach(v),i.extends&&v(i.extends),i.mixins&&i.mixins.forEach(v)}if(!a&&!h)return Ge(i)&&r.set(i,xn),xn;if(_e(a))for(let v=0;v<a.length;v++){const g=Ii(a[v]);$l(g)&&(u[g]=Ve)}else if(a)for(const v in a){const g=Ii(v);if($l(g)){const y=a[v],A=u[g]=_e(y)||ke(y)?{type:y}:Et({},y),P=A.type;let E=!1,k=!0;if(_e(P))for(let U=0;U<P.length;++U){const D=P[U],M=ke(D)&&D.name;if(M==="Boolean"){E=!0;break}else M==="String"&&(k=!1)}else E=ke(P)&&P.name==="Boolean";A[0]=E,A[1]=k,(E||Fe(A,"default"))&&d.push(g)}}const m=[u,d];return Ge(i)&&r.set(i,m),m}function $l(i){return i[0]!=="$"&&!ls(i)}const ya=i=>i==="_"||i==="_ctx"||i==="$stable",ba=i=>_e(i)?i.map(li):[li(i)],Ap=(i,e,n)=>{if(e._n)return e;const r=Gf((...o)=>ba(e(...o)),n);return r._c=!1,r},yc=(i,e,n)=>{const r=i._ctx;for(const o in i){if(ya(o))continue;const a=i[o];if(ke(a))e[o]=Ap(o,a,r);else if(a!=null){const u=ba(a);e[o]=()=>u}}},bc=(i,e)=>{const n=ba(e);i.slots.default=()=>n},wc=(i,e,n)=>{for(const r in e)(n||!ya(r))&&(i[r]=e[r])},kp=(i,e,n)=>{const r=i.slots=mc();if(i.vnode.shapeFlag&32){const o=e._;o?(wc(r,e,n),n&&$u(r,"_",o,!0)):yc(e,r)}else e&&bc(i,e)},Tp=(i,e,n)=>{const{vnode:r,slots:o}=i;let a=!0,u=Ve;if(r.shapeFlag&32){const d=e._;d?n&&d===1?a=!1:wc(o,e,n):(a=!e.$stable,yc(e,o)),u=e}else e&&(bc(i,e),u={default:1});if(a)for(const d in o)!ya(d)&&u[d]==null&&delete o[d]},Rt=Bp;function Pp(i){return xp(i)}function xp(i,e){const n=Cr();n.__VUE__=!0;const{insert:r,remove:o,patchProp:a,createElement:u,createText:d,createComment:h,setText:m,setElementText:v,parentNode:g,nextSibling:y,setScopeId:A=ui,insertStaticContent:P}=i,E=(b,T,$,K=null,F=null,z=null,X=void 0,Q=null,Y=!!T.dynamicChildren)=>{if(b===T)return;b&&!ss(b,T)&&(K=pt(b),qe(b,F,z,!0),b=null),T.patchFlag===-2&&(Y=!1,T.dynamicChildren=null);const{type:Z,ref:fe,shapeFlag:ie}=T;switch(Z){case $r:k(b,T,$,K);break;case Ri:U(b,T,$,K);break;case hr:b==null&&D(T,$,K,X);break;case it:W(b,T,$,K,F,z,X,Q,Y);break;default:ie&1?ue(b,T,$,K,F,z,X,Q,Y):ie&6?re(b,T,$,K,F,z,X,Q,Y):(ie&64||ie&128)&&Z.process(b,T,$,K,F,z,X,Q,Y,Ht)}fe!=null&&F?ds(fe,b&&b.ref,z,T||b,!T):fe==null&&b&&b.ref!=null&&ds(b.ref,null,z,b,!0)},k=(b,T,$,K)=>{if(b==null)r(T.el=d(T.children),$,K);else{const F=T.el=b.el;T.children!==b.children&&m(F,T.children)}},U=(b,T,$,K)=>{b==null?r(T.el=h(T.children||""),$,K):T.el=b.el},D=(b,T,$,K)=>{[b.el,b.anchor]=P(b.children,T,$,K,b.el,b.anchor)},M=({el:b,anchor:T},$,K)=>{let F;for(;b&&b!==T;)F=y(b),r(b,$,K),b=F;r(T,$,K)},B=({el:b,anchor:T})=>{let $;for(;b&&b!==T;)$=y(b),o(b),b=$;o(T)},ue=(b,T,$,K,F,z,X,Q,Y)=>{T.type==="svg"?X="svg":T.type==="math"&&(X="mathml"),b==null?le(T,$,K,F,z,X,Q,Y):Le(b,T,F,z,X,Q,Y)},le=(b,T,$,K,F,z,X,Q)=>{let Y,Z;const{props:fe,shapeFlag:ie,transition:ce,dirs:me}=b;if(Y=b.el=u(b.type,z,fe&&fe.is,fe),ie&8?v(Y,b.children):ie&16&&Ee(b.children,Y,null,K,F,bo(b,z),X,Q),me&&Ki(b,null,K,"created"),ge(Y,b,b.scopeId,X,K),fe){for(const Ue in fe)Ue!=="value"&&!ls(Ue)&&a(Y,Ue,null,fe[Ue],z,K);"value"in fe&&a(Y,"value",null,fe.value,z),(Z=fe.onVnodeBeforeMount)&&oi(Z,K,b)}me&&Ki(b,null,K,"beforeMount");const Te=Ep(F,ce);Te&&ce.beforeEnter(Y),r(Y,T,$),((Z=fe&&fe.onVnodeMounted)||Te||me)&&Rt(()=>{Z&&oi(Z,K,b),Te&&ce.enter(Y),me&&Ki(b,null,K,"mounted")},F)},ge=(b,T,$,K,F)=>{if($&&A(b,$),K)for(let z=0;z<K.length;z++)A(b,K[z]);if(F){let z=F.subTree;if(T===z||xc(z.type)&&(z.ssContent===T||z.ssFallback===T)){const X=F.vnode;ge(b,X,X.scopeId,X.slotScopeIds,F.parent)}}},Ee=(b,T,$,K,F,z,X,Q,Y=0)=>{for(let Z=Y;Z<b.length;Z++){const fe=b[Z]=Q?Li(b[Z]):li(b[Z]);E(null,fe,T,$,K,F,z,X,Q)}},Le=(b,T,$,K,F,z,X)=>{const Q=T.el=b.el;let{patchFlag:Y,dynamicChildren:Z,dirs:fe}=T;Y|=b.patchFlag&16;const ie=b.props||Ve,ce=T.props||Ve;let me;if($&&Wi($,!1),(me=ce.onVnodeBeforeUpdate)&&oi(me,$,T,b),fe&&Ki(T,b,$,"beforeUpdate"),$&&Wi($,!0),(ie.innerHTML&&ce.innerHTML==null||ie.textContent&&ce.textContent==null)&&v(Q,""),Z?V(b.dynamicChildren,Z,Q,$,K,bo(T,F),z):X||te(b,T,Q,null,$,K,bo(T,F),z,!1),Y>0){if(Y&16)x(Q,ie,ce,$,F);else if(Y&2&&ie.class!==ce.class&&a(Q,"class",null,ce.class,F),Y&4&&a(Q,"style",ie.style,ce.style,F),Y&8){const Te=T.dynamicProps;for(let Ue=0;Ue<Te.length;Ue++){const Ie=Te[Ue],C=ie[Ie],w=ce[Ie];(w!==C||Ie==="value")&&a(Q,Ie,C,w,F,$)}}Y&1&&b.children!==T.children&&v(Q,T.children)}else!X&&Z==null&&x(Q,ie,ce,$,F);((me=ce.onVnodeUpdated)||fe)&&Rt(()=>{me&&oi(me,$,T,b),fe&&Ki(T,b,$,"updated")},K)},V=(b,T,$,K,F,z,X)=>{for(let Q=0;Q<T.length;Q++){const Y=b[Q],Z=T[Q],fe=Y.el&&(Y.type===it||!ss(Y,Z)||Y.shapeFlag&198)?g(Y.el):$;E(Y,Z,fe,null,K,F,z,X,!0)}},x=(b,T,$,K,F)=>{if(T!==$){if(T!==Ve)for(const z in T)!ls(z)&&!(z in $)&&a(b,z,T[z],null,F,K);for(const z in $){if(ls(z))continue;const X=$[z],Q=T[z];X!==Q&&z!=="value"&&a(b,z,Q,X,F,K)}"value"in $&&a(b,"value",T.value,$.value,F)}},W=(b,T,$,K,F,z,X,Q,Y)=>{const Z=T.el=b?b.el:d(""),fe=T.anchor=b?b.anchor:d("");let{patchFlag:ie,dynamicChildren:ce,slotScopeIds:me}=T;me&&(Q=Q?Q.concat(me):me),b==null?(r(Z,$,K),r(fe,$,K),Ee(T.children||[],$,fe,F,z,X,Q,Y)):ie>0&&ie&64&&ce&&b.dynamicChildren?(V(b.dynamicChildren,ce,$,F,z,X,Q),(T.key!=null||F&&T===F.subTree)&&Sc(b,T,!0)):te(b,T,$,fe,F,z,X,Q,Y)},re=(b,T,$,K,F,z,X,Q,Y)=>{T.slotScopeIds=Q,b==null?T.shapeFlag&512?F.ctx.activate(T,$,K,X,Y):N(T,$,K,F,z,X,Y):R(b,T,Y)},N=(b,T,$,K,F,z,X)=>{const Q=b.component=Wp(b,K,F);if(lc(b)&&(Q.ctx.renderer=Ht),Jp(Q,!1,X),Q.asyncDep){if(F&&F.registerDep(Q,J,X),!b.el){const Y=Q.subTree=ti(Ri);U(null,Y,T,$),b.placeholder=Y.el}}else J(Q,b,T,$,F,z,X)},R=(b,T,$)=>{const K=T.component=b.component;if(Np(b,T,$))if(K.asyncDep&&!K.asyncResolved){Ae(K,T,$);return}else K.next=T,K.update();else T.el=b.el,K.vnode=T},J=(b,T,$,K,F,z,X)=>{const Q=()=>{if(b.isMounted){let{next:ie,bu:ce,u:me,parent:Te,vnode:Ue}=b;{const Pe=Ac(b);if(Pe){ie&&(ie.el=Ue.el,Ae(b,ie,X)),Pe.asyncDep.then(()=>{b.isUnmounted||Q()});return}}let Ie=ie,C;Wi(b,!1),ie?(ie.el=Ue.el,Ae(b,ie,X)):ie=Ue,ce&&ur(ce),(C=ie.props&&ie.props.onVnodeBeforeUpdate)&&oi(C,Te,ie,Ue),Wi(b,!0);const w=Nl(b),j=b.subTree;b.subTree=w,E(j,w,g(j.el),pt(j),b,F,z),ie.el=w.el,Ie===null&&Up(b,w.el),me&&Rt(me,F),(C=ie.props&&ie.props.onVnodeUpdated)&&Rt(()=>oi(C,Te,ie,Ue),F)}else{let ie;const{el:ce,props:me}=T,{bm:Te,m:Ue,parent:Ie,root:C,type:w}=b,j=hs(T);Wi(b,!1),Te&&ur(Te),!j&&(ie=me&&me.onVnodeBeforeMount)&&oi(ie,Ie,T),Wi(b,!0);{C.ce&&C.ce._def.shadowRoot!==!1&&C.ce._injectChildStyle(w);const Pe=b.subTree=Nl(b);E(null,Pe,$,K,b,F,z),T.el=Pe.el}if(Ue&&Rt(Ue,F),!j&&(ie=me&&me.onVnodeMounted)){const Pe=T;Rt(()=>oi(ie,Ie,Pe),F)}(T.shapeFlag&256||Ie&&hs(Ie.vnode)&&Ie.vnode.shapeFlag&256)&&b.a&&Rt(b.a,F),b.isMounted=!0,T=$=K=null}};b.scope.on();const Y=b.effect=new Bu(Q);b.scope.off();const Z=b.update=Y.run.bind(Y),fe=b.job=Y.runIfDirty.bind(Y);fe.i=b,fe.id=b.uid,Y.scheduler=()=>_a(fe),Wi(b,!0),Z()},Ae=(b,T,$)=>{T.component=b;const K=b.vnode.props;b.vnode=T,b.next=null,wp(b,T.props,K,$),Tp(b,T.children,$),Si(),Ol(b),Ai()},te=(b,T,$,K,F,z,X,Q,Y=!1)=>{const Z=b&&b.children,fe=b?b.shapeFlag:0,ie=T.children,{patchFlag:ce,shapeFlag:me}=T;if(ce>0){if(ce&128){pe(Z,ie,$,K,F,z,X,Q,Y);return}else if(ce&256){ft(Z,ie,$,K,F,z,X,Q,Y);return}}me&8?(fe&16&&we(Z,F,z),ie!==Z&&v($,ie)):fe&16?me&16?pe(Z,ie,$,K,F,z,X,Q,Y):we(Z,F,z,!0):(fe&8&&v($,""),me&16&&Ee(ie,$,K,F,z,X,Q,Y))},ft=(b,T,$,K,F,z,X,Q,Y)=>{b=b||xn,T=T||xn;const Z=b.length,fe=T.length,ie=Math.min(Z,fe);let ce;for(ce=0;ce<ie;ce++){const me=T[ce]=Y?Li(T[ce]):li(T[ce]);E(b[ce],me,$,null,F,z,X,Q,Y)}Z>fe?we(b,F,z,!0,!1,ie):Ee(T,$,K,F,z,X,Q,Y,ie)},pe=(b,T,$,K,F,z,X,Q,Y)=>{let Z=0;const fe=T.length;let ie=b.length-1,ce=fe-1;for(;Z<=ie&&Z<=ce;){const me=b[Z],Te=T[Z]=Y?Li(T[Z]):li(T[Z]);if(ss(me,Te))E(me,Te,$,null,F,z,X,Q,Y);else break;Z++}for(;Z<=ie&&Z<=ce;){const me=b[ie],Te=T[ce]=Y?Li(T[ce]):li(T[ce]);if(ss(me,Te))E(me,Te,$,null,F,z,X,Q,Y);else break;ie--,ce--}if(Z>ie){if(Z<=ce){const me=ce+1,Te=me<fe?T[me].el:K;for(;Z<=ce;)E(null,T[Z]=Y?Li(T[Z]):li(T[Z]),$,Te,F,z,X,Q,Y),Z++}}else if(Z>ce)for(;Z<=ie;)qe(b[Z],F,z,!0),Z++;else{const me=Z,Te=Z,Ue=new Map;for(Z=Te;Z<=ce;Z++){const je=T[Z]=Y?Li(T[Z]):li(T[Z]);je.key!=null&&Ue.set(je.key,Z)}let Ie,C=0;const w=ce-Te+1;let j=!1,Pe=0;const et=new Array(w);for(Z=0;Z<w;Z++)et[Z]=0;for(Z=me;Z<=ie;Z++){const je=b[Z];if(C>=w){qe(je,F,z,!0);continue}let Oe;if(je.key!=null)Oe=Ue.get(je.key);else for(Ie=Te;Ie<=ce;Ie++)if(et[Ie-Te]===0&&ss(je,T[Ie])){Oe=Ie;break}Oe===void 0?qe(je,F,z,!0):(et[Oe-Te]=Z+1,Oe>=Pe?Pe=Oe:j=!0,E(je,T[Oe],$,null,F,z,X,Q,Y),C++)}const De=j?Lp(et):xn;for(Ie=De.length-1,Z=w-1;Z>=0;Z--){const je=Te+Z,Oe=T[je],ze=T[je+1],ct=je+1<fe?ze.el||ze.placeholder:K;et[Z]===0?E(null,Oe,$,ct,F,z,X,Q,Y):j&&(Ie<0||Z!==De[Ie]?$e(Oe,$,ct,2):Ie--)}}},$e=(b,T,$,K,F=null)=>{const{el:z,type:X,transition:Q,children:Y,shapeFlag:Z}=b;if(Z&6){$e(b.component.subTree,T,$,K);return}if(Z&128){b.suspense.move(T,$,K);return}if(Z&64){X.move(b,T,$,Ht);return}if(X===it){r(z,T,$);for(let ie=0;ie<Y.length;ie++)$e(Y[ie],T,$,K);r(b.anchor,T,$);return}if(X===hr){M(b,T,$);return}if(K!==2&&Z&1&&Q)if(K===0)Q.beforeEnter(z),r(z,T,$),Rt(()=>Q.enter(z),F);else{const{leave:ie,delayLeave:ce,afterLeave:me}=Q,Te=()=>{b.ctx.isUnmounted?o(z):r(z,T,$)},Ue=()=>{z._isLeaving&&z[Xf](!0),ie(z,()=>{Te(),me&&me()})};ce?ce(z,Te,Ue):Ue()}else r(z,T,$)},qe=(b,T,$,K=!1,F=!1)=>{const{type:z,props:X,ref:Q,children:Y,dynamicChildren:Z,shapeFlag:fe,patchFlag:ie,dirs:ce,cacheIndex:me}=b;if(ie===-2&&(F=!1),Q!=null&&(Si(),ds(Q,null,$,b,!0),Ai()),me!=null&&(T.renderCache[me]=void 0),fe&256){T.ctx.deactivate(b);return}const Te=fe&1&&ce,Ue=!hs(b);let Ie;if(Ue&&(Ie=X&&X.onVnodeBeforeUnmount)&&oi(Ie,T,b),fe&6)Me(b.component,$,K);else{if(fe&128){b.suspense.unmount($,K);return}Te&&Ki(b,null,T,"beforeUnmount"),fe&64?b.type.remove(b,T,$,Ht,K):Z&&!Z.hasOnce&&(z!==it||ie>0&&ie&64)?we(Z,T,$,!1,!0):(z===it&&ie&384||!F&&fe&16)&&we(Y,T,$),K&&lt(b)}(Ue&&(Ie=X&&X.onVnodeUnmounted)||Te)&&Rt(()=>{Ie&&oi(Ie,T,b),Te&&Ki(b,null,T,"unmounted")},$)},lt=b=>{const{type:T,el:$,anchor:K,transition:F}=b;if(T===it){Ye($,K);return}if(T===hr){B(b);return}const z=()=>{o($),F&&!F.persisted&&F.afterLeave&&F.afterLeave()};if(b.shapeFlag&1&&F&&!F.persisted){const{leave:X,delayLeave:Q}=F,Y=()=>X($,z);Q?Q(b.el,z,Y):Y()}else z()},Ye=(b,T)=>{let $;for(;b!==T;)$=y(b),o(b),b=$;o(T)},Me=(b,T,$)=>{const{bum:K,scope:F,job:z,subTree:X,um:Q,m:Y,a:Z}=b;jl(Y),jl(Z),K&&ur(K),F.stop(),z&&(z.flags|=8,qe(X,b,T,$)),Q&&Rt(Q,T),Rt(()=>{b.isUnmounted=!0},T)},we=(b,T,$,K=!1,F=!1,z=0)=>{for(let X=z;X<b.length;X++)qe(b[X],T,$,K,F)},pt=b=>{if(b.shapeFlag&6)return pt(b.component.subTree);if(b.shapeFlag&128)return b.suspense.next();const T=y(b.anchor||b.el),$=T&&T[Jf];return $?y($):T};let Lt=!1;const Bi=(b,T,$)=>{b==null?T._vnode&&qe(T._vnode,null,null,!0):E(T._vnode||null,b,T,null,null,null,$),T._vnode=b,Lt||(Lt=!0,Ol(),sc(),Lt=!1)},Ht={p:E,um:qe,m:$e,r:lt,mt:N,mc:Ee,pc:te,pbc:V,n:pt,o:i};return{render:Bi,hydrate:void 0,createApp:gp(Bi)}}function bo({type:i,props:e},n){return n==="svg"&&i==="foreignObject"||n==="mathml"&&i==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Wi({effect:i,job:e},n){n?(i.flags|=32,e.flags|=4):(i.flags&=-33,e.flags&=-5)}function Ep(i,e){return(!i||i&&!i.pendingBranch)&&e&&!e.persisted}function Sc(i,e,n=!1){const r=i.children,o=e.children;if(_e(r)&&_e(o))for(let a=0;a<r.length;a++){const u=r[a];let d=o[a];d.shapeFlag&1&&!d.dynamicChildren&&((d.patchFlag<=0||d.patchFlag===32)&&(d=o[a]=Li(o[a]),d.el=u.el),!n&&d.patchFlag!==-2&&Sc(u,d)),d.type===$r&&d.patchFlag!==-1&&(d.el=u.el),d.type===Ri&&!d.el&&(d.el=u.el)}}function Lp(i){const e=i.slice(),n=[0];let r,o,a,u,d;const h=i.length;for(r=0;r<h;r++){const m=i[r];if(m!==0){if(o=n[n.length-1],i[o]<m){e[r]=o,n.push(r);continue}for(a=0,u=n.length-1;a<u;)d=a+u>>1,i[n[d]]<m?a=d+1:u=d;m<i[n[a]]&&(a>0&&(e[r]=n[a-1]),n[a]=r)}}for(a=n.length,u=n[a-1];a-- >0;)n[a]=u,u=e[u];return n}function Ac(i){const e=i.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Ac(e)}function jl(i){if(i)for(let e=0;e<i.length;e++)i[e].flags|=8}const Op=Symbol.for("v-scx"),Cp=()=>cr(Op);function dr(i,e,n){return kc(i,e,n)}function kc(i,e,n=Ve){const{immediate:r,deep:o,flush:a,once:u}=n,d=Et({},n),h=e&&r||!e&&a!=="post";let m;if(Ss){if(a==="sync"){const A=Cp();m=A.__watcherHandles||(A.__watcherHandles=[])}else if(!h){const A=()=>{};return A.stop=ui,A.resume=ui,A.pause=ui,A}}const v=xt;d.call=(A,P,E)=>di(A,v,P,E);let g=!1;a==="post"?d.scheduler=A=>{Rt(A,v&&v.suspense)}:a!=="sync"&&(g=!0,d.scheduler=(A,P)=>{P?A():_a(A)}),d.augmentJob=A=>{e&&(A.flags|=4),g&&(A.flags|=2,v&&(A.id=v.uid,A.i=v))};const y=Hf(i,e,d);return Ss&&(m?m.push(y):h&&y()),y}function Mp(i,e,n){const r=this.proxy,o=at(i)?i.includes(".")?Tc(r,i):()=>r[i]:i.bind(r,r);let a;ke(e)?a=e:(a=e.handler,n=e);const u=Es(this),d=kc(o,a.bind(r),n);return u(),d}function Tc(i,e){const n=e.split(".");return()=>{let r=i;for(let o=0;o<n.length&&r;o++)r=r[n[o]];return r}}const Ip=(i,e)=>e==="modelValue"||e==="model-value"?i.modelModifiers:i[`${e}Modifiers`]||i[`${Ii(e)}Modifiers`]||i[`${ji(e)}Modifiers`];function Dp(i,e,...n){if(i.isUnmounted)return;const r=i.vnode.props||Ve;let o=n;const a=e.startsWith("update:"),u=a&&Ip(r,e.slice(7));u&&(u.trim&&(o=n.map(v=>at(v)?v.trim():v)),u.number&&(o=n.map(mr)));let d,h=r[d=po(e)]||r[d=po(Ii(e))];!h&&a&&(h=r[d=po(ji(e))]),h&&di(h,i,6,o);const m=r[d+"Once"];if(m){if(!i.emitted)i.emitted={};else if(i.emitted[d])return;i.emitted[d]=!0,di(m,i,6,o)}}const Rp=new WeakMap;function Pc(i,e,n=!1){const r=n?Rp:e.emitsCache,o=r.get(i);if(o!==void 0)return o;const a=i.emits;let u={},d=!1;if(!ke(i)){const h=m=>{const v=Pc(m,e,!0);v&&(d=!0,Et(u,v))};!n&&e.mixins.length&&e.mixins.forEach(h),i.extends&&h(i.extends),i.mixins&&i.mixins.forEach(h)}return!a&&!d?(Ge(i)&&r.set(i,null),null):(_e(a)?a.forEach(h=>u[h]=null):Et(u,a),Ge(i)&&r.set(i,u),u)}function Rr(i,e){return!i||!Lr(e)?!1:(e=e.slice(2).replace(/Once$/,""),Fe(i,e[0].toLowerCase()+e.slice(1))||Fe(i,ji(e))||Fe(i,e))}function Nl(i){const{type:e,vnode:n,proxy:r,withProxy:o,propsOptions:[a],slots:u,attrs:d,emit:h,render:m,renderCache:v,props:g,data:y,setupState:A,ctx:P,inheritAttrs:E}=i,k=yr(i);let U,D;try{if(n.shapeFlag&4){const B=o||r,ue=B;U=li(m.call(ue,B,v,g,A,y,P)),D=d}else{const B=e;U=li(B.length>1?B(g,{attrs:d,slots:u,emit:h}):B(g,null)),D=e.props?d:$p(d)}}catch(B){ps.length=0,Ir(B,i,1),U=ti(Ri)}let M=U;if(D&&E!==!1){const B=Object.keys(D),{shapeFlag:ue}=M;B.length&&ue&7&&(a&&B.some(ra)&&(D=jp(D,a)),M=In(M,D,!1,!0))}return n.dirs&&(M=In(M,null,!1,!0),M.dirs=M.dirs?M.dirs.concat(n.dirs):n.dirs),n.transition&&ga(M,n.transition),U=M,yr(k),U}const $p=i=>{let e;for(const n in i)(n==="class"||n==="style"||Lr(n))&&((e||(e={}))[n]=i[n]);return e},jp=(i,e)=>{const n={};for(const r in i)(!ra(r)||!(r.slice(9)in e))&&(n[r]=i[r]);return n};function Np(i,e,n){const{props:r,children:o,component:a}=i,{props:u,children:d,patchFlag:h}=e,m=a.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&h>=0){if(h&1024)return!0;if(h&16)return r?Ul(r,u,m):!!u;if(h&8){const v=e.dynamicProps;for(let g=0;g<v.length;g++){const y=v[g];if(u[y]!==r[y]&&!Rr(m,y))return!0}}}else return(o||d)&&(!d||!d.$stable)?!0:r===u?!1:r?u?Ul(r,u,m):!0:!!u;return!1}function Ul(i,e,n){const r=Object.keys(e);if(r.length!==Object.keys(i).length)return!0;for(let o=0;o<r.length;o++){const a=r[o];if(e[a]!==i[a]&&!Rr(n,a))return!0}return!1}function Up({vnode:i,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===i&&(r.el=i.el),r===i)(i=e.vnode).el=n,e=e.parent;else break}}const xc=i=>i.__isSuspense;function Bp(i,e){e&&e.pendingBranch?_e(i)?e.effects.push(...i):e.effects.push(i):Wf(i)}const it=Symbol.for("v-fgt"),$r=Symbol.for("v-txt"),Ri=Symbol.for("v-cmt"),hr=Symbol.for("v-stc"),ps=[];let Nt=null;function H(i=!1){ps.push(Nt=i?null:[])}function Fp(){ps.pop(),Nt=ps[ps.length-1]||null}let ws=1;function Bl(i,e=!1){ws+=i,i<0&&Nt&&e&&(Nt.hasOnce=!0)}function Ec(i){return i.dynamicChildren=ws>0?Nt||xn:null,Fp(),ws>0&&Nt&&Nt.push(i),i}function G(i,e,n,r,o,a){return Ec(p(i,e,n,r,o,a,!0))}function Xi(i,e,n,r,o){return Ec(ti(i,e,n,r,o,!0))}function Lc(i){return i?i.__v_isVNode===!0:!1}function ss(i,e){return i.type===e.type&&i.key===e.key}const Oc=({key:i})=>i??null,fr=({ref:i,ref_key:e,ref_for:n})=>(typeof i=="number"&&(i=""+i),i!=null?at(i)||wt(i)||ke(i)?{i:zt,r:i,k:e,f:!!n}:i:null);function p(i,e=null,n=null,r=0,o=null,a=i===it?0:1,u=!1,d=!1){const h={__v_isVNode:!0,__v_skip:!0,type:i,props:e,key:e&&Oc(e),ref:e&&fr(e),scopeId:oc,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:o,dynamicChildren:null,appContext:null,ctx:zt};return d?(wa(h,n),a&128&&i.normalize(h)):n&&(h.shapeFlag|=at(n)?8:16),ws>0&&!u&&Nt&&(h.patchFlag>0||a&6)&&h.patchFlag!==32&&Nt.push(h),h}const ti=zp;function zp(i,e=null,n=null,r=0,o=null,a=!1){if((!i||i===cp)&&(i=Ri),Lc(i)){const d=In(i,e,!0);return n&&wa(d,n),ws>0&&!a&&Nt&&(d.shapeFlag&6?Nt[Nt.indexOf(i)]=d:Nt.push(d)),d.patchFlag=-2,d}if(em(i)&&(i=i.__vccOpts),e){e=qp(e);let{class:d,style:h}=e;d&&!at(d)&&(e.class=Je(d)),Ge(h)&&(va(h)&&!_e(h)&&(h=Et({},h)),e.style=Nn(h))}const u=at(i)?1:xc(i)?128:Yf(i)?64:Ge(i)?4:ke(i)?2:0;return p(i,e,n,r,o,u,a,!0)}function qp(i){return i?va(i)||vc(i)?Et({},i):i:null}function In(i,e,n=!1,r=!1){const{props:o,ref:a,patchFlag:u,children:d,transition:h}=i,m=e?Hp(o||{},e):o,v={__v_isVNode:!0,__v_skip:!0,type:i.type,props:m,key:m&&Oc(m),ref:e&&e.ref?n&&a?_e(a)?a.concat(fr(e)):[a,fr(e)]:fr(e):a,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:d,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:e&&i.type!==it?u===-1?16:u|16:u,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:h,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&In(i.ssContent),ssFallback:i.ssFallback&&In(i.ssFallback),placeholder:i.placeholder,el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return h&&r&&ga(v,h.clone(v)),v}function Ke(i=" ",e=0){return ti($r,null,i,e)}function Vp(i,e){const n=ti(hr,null,i);return n.staticCount=e,n}function oe(i="",e=!1){return e?(H(),Xi(Ri,null,i)):ti(Ri,null,i)}function li(i){return i==null||typeof i=="boolean"?ti(Ri):_e(i)?ti(it,null,i.slice()):Lc(i)?Li(i):ti($r,null,String(i))}function Li(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:In(i)}function wa(i,e){let n=0;const{shapeFlag:r}=i;if(e==null)e=null;else if(_e(e))n=16;else if(typeof e=="object")if(r&65){const o=e.default;o&&(o._c&&(o._d=!1),wa(i,o()),o._c&&(o._d=!0));return}else{n=32;const o=e._;!o&&!vc(e)?e._ctx=zt:o===3&&zt&&(zt.slots._===1?e._=1:(e._=2,i.patchFlag|=1024))}else ke(e)?(e={default:e,_ctx:zt},n=32):(e=String(e),r&64?(n=16,e=[Ke(e)]):n=8);i.children=e,i.shapeFlag|=n}function Hp(...i){const e={};for(let n=0;n<i.length;n++){const r=i[n];for(const o in r)if(o==="class")e.class!==r.class&&(e.class=Je([e.class,r.class]));else if(o==="style")e.style=Nn([e.style,r.style]);else if(Lr(o)){const a=e[o],u=r[o];u&&a!==u&&!(_e(a)&&a.includes(u))&&(e[o]=a?[].concat(a,u):u)}else o!==""&&(e[o]=r[o])}return e}function oi(i,e,n,r=null){di(i,e,7,[n,r])}const Zp=fc();let Kp=0;function Wp(i,e,n){const r=i.type,o=(e?e.appContext:i.appContext)||Zp,a={uid:Kp++,vnode:i,type:r,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new _f(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:gc(r,o),emitsOptions:Pc(r,o),emit:null,emitted:null,propsDefaults:Ve,inheritAttrs:r.inheritAttrs,ctx:Ve,data:Ve,props:Ve,attrs:Ve,slots:Ve,refs:Ve,setupState:Ve,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=Dp.bind(null,a),i.ce&&i.ce(a),a}let xt=null;const Gp=()=>xt||zt;let Sr,Fo;{const i=Cr(),e=(n,r)=>{let o;return(o=i[n])||(o=i[n]=[]),o.push(r),a=>{o.length>1?o.forEach(u=>u(a)):o[0](a)}};Sr=e("__VUE_INSTANCE_SETTERS__",n=>xt=n),Fo=e("__VUE_SSR_SETTERS__",n=>Ss=n)}const Es=i=>{const e=xt;return Sr(i),i.scope.on(),()=>{i.scope.off(),Sr(e)}},Fl=()=>{xt&&xt.scope.off(),Sr(null)};function Cc(i){return i.vnode.shapeFlag&4}let Ss=!1;function Jp(i,e=!1,n=!1){e&&Fo(e);const{props:r,children:o}=i.vnode,a=Cc(i);bp(i,r,a,e),kp(i,o,n||e);const u=a?Yp(i,e):void 0;return e&&Fo(!1),u}function Yp(i,e){const n=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,dp);const{setup:r}=n;if(r){Si();const o=i.setupContext=r.length>1?Qp(i):null,a=Es(i),u=xs(r,i,0,[i.props,o]),d=Mu(u);if(Ai(),a(),(d||i.sp)&&!hs(i)&&ac(i),d){if(u.then(Fl,Fl),e)return u.then(h=>{zl(i,h)}).catch(h=>{Ir(h,i,0)});i.asyncDep=u}else zl(i,u)}else Mc(i)}function zl(i,e,n){ke(e)?i.type.__ssrInlineRender?i.ssrRender=e:i.render=e:Ge(e)&&(i.setupState=ec(e)),Mc(i)}function Mc(i,e,n){const r=i.type;i.render||(i.render=r.render||ui);{const o=Es(i);Si();try{hp(i)}finally{Ai(),o()}}}const Xp={get(i,e){return gt(i,"get",""),i[e]}};function Qp(i){const e=n=>{i.exposed=n||{}};return{attrs:new Proxy(i.attrs,Xp),slots:i.slots,emit:i.emit,expose:e}}function jr(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(ec(Nf(i.exposed)),{get(e,n){if(n in e)return e[n];if(n in fs)return fs[n](i)},has(e,n){return n in e||n in fs}})):i.proxy}function em(i){return ke(i)&&"__vccOpts"in i}const bt=(i,e)=>qf(i,e,Ss),tm="3.5.22";/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let zo;const ql=typeof window<"u"&&window.trustedTypes;if(ql)try{zo=ql.createPolicy("vue",{createHTML:i=>i})}catch{}const Ic=zo?i=>zo.createHTML(i):i=>i,im="http://www.w3.org/2000/svg",nm="http://www.w3.org/1998/Math/MathML",_i=typeof document<"u"?document:null,Vl=_i&&_i.createElement("template"),sm={insert:(i,e,n)=>{e.insertBefore(i,n||null)},remove:i=>{const e=i.parentNode;e&&e.removeChild(i)},createElement:(i,e,n,r)=>{const o=e==="svg"?_i.createElementNS(im,i):e==="mathml"?_i.createElementNS(nm,i):n?_i.createElement(i,{is:n}):_i.createElement(i);return i==="select"&&r&&r.multiple!=null&&o.setAttribute("multiple",r.multiple),o},createText:i=>_i.createTextNode(i),createComment:i=>_i.createComment(i),setText:(i,e)=>{i.nodeValue=e},setElementText:(i,e)=>{i.textContent=e},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>_i.querySelector(i),setScopeId(i,e){i.setAttribute(e,"")},insertStaticContent(i,e,n,r,o,a){const u=n?n.previousSibling:e.lastChild;if(o&&(o===a||o.nextSibling))for(;e.insertBefore(o.cloneNode(!0),n),!(o===a||!(o=o.nextSibling)););else{Vl.innerHTML=Ic(r==="svg"?`<svg>${i}</svg>`:r==="mathml"?`<math>${i}</math>`:i);const d=Vl.content;if(r==="svg"||r==="mathml"){const h=d.firstChild;for(;h.firstChild;)d.appendChild(h.firstChild);d.removeChild(h)}e.insertBefore(d,n)}return[u?u.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},rm=Symbol("_vtc");function om(i,e,n){const r=i[rm];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?i.removeAttribute("class"):n?i.setAttribute("class",e):i.className=e}const Ar=Symbol("_vod"),Dc=Symbol("_vsh"),am={name:"show",beforeMount(i,{value:e},{transition:n}){i[Ar]=i.style.display==="none"?"":i.style.display,n&&e?n.beforeEnter(i):rs(i,e)},mounted(i,{value:e},{transition:n}){n&&e&&n.enter(i)},updated(i,{value:e,oldValue:n},{transition:r}){!e!=!n&&(r?e?(r.beforeEnter(i),rs(i,!0),r.enter(i)):r.leave(i,()=>{rs(i,!1)}):rs(i,e))},beforeUnmount(i,{value:e}){rs(i,e)}};function rs(i,e){i.style.display=e?i[Ar]:"none",i[Dc]=!e}const lm=Symbol(""),um=/(?:^|;)\s*display\s*:/;function cm(i,e,n){const r=i.style,o=at(n);let a=!1;if(n&&!o){if(e)if(at(e))for(const u of e.split(";")){const d=u.slice(0,u.indexOf(":")).trim();n[d]==null&&pr(r,d,"")}else for(const u in e)n[u]==null&&pr(r,u,"");for(const u in n)u==="display"&&(a=!0),pr(r,u,n[u])}else if(o){if(e!==n){const u=r[lm];u&&(n+=";"+u),r.cssText=n,a=um.test(n)}}else e&&i.removeAttribute("style");Ar in i&&(i[Ar]=a?r.display:"",i[Dc]&&(r.display="none"))}const Hl=/\s*!important$/;function pr(i,e,n){if(_e(n))n.forEach(r=>pr(i,e,r));else if(n==null&&(n=""),e.startsWith("--"))i.setProperty(e,n);else{const r=dm(i,e);Hl.test(n)?i.setProperty(ji(r),n.replace(Hl,""),"important"):i[r]=n}}const Zl=["Webkit","Moz","ms"],wo={};function dm(i,e){const n=wo[e];if(n)return n;let r=Ii(e);if(r!=="filter"&&r in i)return wo[e]=r;r=Ru(r);for(let o=0;o<Zl.length;o++){const a=Zl[o]+r;if(a in i)return wo[e]=a}return e}const Kl="http://www.w3.org/1999/xlink";function Wl(i,e,n,r,o,a=mf(e)){r&&e.startsWith("xlink:")?n==null?i.removeAttributeNS(Kl,e.slice(6,e.length)):i.setAttributeNS(Kl,e,n):n==null||a&&!ju(n)?i.removeAttribute(e):i.setAttribute(e,a?"":ci(n)?String(n):n)}function Gl(i,e,n,r,o){if(e==="innerHTML"||e==="textContent"){n!=null&&(i[e]=e==="innerHTML"?Ic(n):n);return}const a=i.tagName;if(e==="value"&&a!=="PROGRESS"&&!a.includes("-")){const d=a==="OPTION"?i.getAttribute("value")||"":i.value,h=n==null?i.type==="checkbox"?"on":"":String(n);(d!==h||!("_value"in i))&&(i.value=h),n==null&&i.removeAttribute(e),i._value=n;return}let u=!1;if(n===""||n==null){const d=typeof i[e];d==="boolean"?n=ju(n):n==null&&d==="string"?(n="",u=!0):d==="number"&&(n=0,u=!0)}try{i[e]=n}catch{}u&&i.removeAttribute(o||e)}function wi(i,e,n,r){i.addEventListener(e,n,r)}function hm(i,e,n,r){i.removeEventListener(e,n,r)}const Jl=Symbol("_vei");function fm(i,e,n,r,o=null){const a=i[Jl]||(i[Jl]={}),u=a[e];if(r&&u)u.value=r;else{const[d,h]=pm(e);if(r){const m=a[e]=_m(r,o);wi(i,d,m,h)}else u&&(hm(i,d,u,h),a[e]=void 0)}}const Yl=/(?:Once|Passive|Capture)$/;function pm(i){let e;if(Yl.test(i)){e={};let r;for(;r=i.match(Yl);)i=i.slice(0,i.length-r[0].length),e[r[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):ji(i.slice(2)),e]}let So=0;const mm=Promise.resolve(),vm=()=>So||(mm.then(()=>So=0),So=Date.now());function _m(i,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;di(gm(r,n.value),e,5,[r])};return n.value=i,n.attached=vm(),n}function gm(i,e){if(_e(e)){const n=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{n.call(i),i._stopped=!0},e.map(r=>o=>!o._stopped&&r&&r(o))}else return e}const Xl=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,ym=(i,e,n,r,o,a)=>{const u=o==="svg";e==="class"?om(i,r,u):e==="style"?cm(i,n,r):Lr(e)?ra(e)||fm(i,e,n,r,a):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):bm(i,e,r,u))?(Gl(i,e,r),!i.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Wl(i,e,r,u,a,e!=="value")):i._isVueCE&&(/[A-Z]/.test(e)||!at(r))?Gl(i,Ii(e),r,a,e):(e==="true-value"?i._trueValue=r:e==="false-value"&&(i._falseValue=r),Wl(i,e,r,u))};function bm(i,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in i&&Xl(e)&&ke(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&i.tagName==="INPUT"||e==="type"&&i.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const o=i.tagName;if(o==="IMG"||o==="VIDEO"||o==="CANVAS"||o==="SOURCE")return!1}return Xl(e)&&at(n)?!1:e in i}const $i=i=>{const e=i.props["onUpdate:modelValue"]||!1;return _e(e)?n=>ur(e,n):e};function wm(i){i.target.composing=!0}function Ql(i){const e=i.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Vt=Symbol("_assign"),ot={created(i,{modifiers:{lazy:e,trim:n,number:r}},o){i[Vt]=$i(o);const a=r||o.props&&o.props.type==="number";wi(i,e?"change":"input",u=>{if(u.target.composing)return;let d=i.value;n&&(d=d.trim()),a&&(d=mr(d)),i[Vt](d)}),n&&wi(i,"change",()=>{i.value=i.value.trim()}),e||(wi(i,"compositionstart",wm),wi(i,"compositionend",Ql),wi(i,"change",Ql))},mounted(i,{value:e}){i.value=e??""},beforeUpdate(i,{value:e,oldValue:n,modifiers:{lazy:r,trim:o,number:a}},u){if(i[Vt]=$i(u),i.composing)return;const d=(a||i.type==="number")&&!/^0\d/.test(i.value)?mr(i.value):i.value,h=e??"";d!==h&&(document.activeElement===i&&i.type!=="range"&&(r&&e===n||o&&i.value.trim()===h)||(i.value=h))}},Dt={deep:!0,created(i,e,n){i[Vt]=$i(n),wi(i,"change",()=>{const r=i._modelValue,o=Dn(i),a=i.checked,u=i[Vt];if(_e(r)){const d=la(r,o),h=d!==-1;if(a&&!h)u(r.concat(o));else if(!a&&h){const m=[...r];m.splice(d,1),u(m)}}else if(jn(r)){const d=new Set(r);a?d.add(o):d.delete(o),u(d)}else u(Rc(i,a))})},mounted:eu,beforeUpdate(i,e,n){i[Vt]=$i(n),eu(i,e,n)}};function eu(i,{value:e,oldValue:n},r){i._modelValue=e;let o;if(_e(e))o=la(e,r.props.value)>-1;else if(jn(e))o=e.has(r.props.value);else{if(e===n)return;o=rn(e,Rc(i,!0))}i.checked!==o&&(i.checked=o)}const Ci={created(i,{value:e},n){i.checked=rn(e,n.props.value),i[Vt]=$i(n),wi(i,"change",()=>{i[Vt](Dn(i))})},beforeUpdate(i,{value:e,oldValue:n},r){i[Vt]=$i(r),e!==n&&(i.checked=rn(e,r.props.value))}},Sm={deep:!0,created(i,{value:e,modifiers:{number:n}},r){const o=jn(e);wi(i,"change",()=>{const a=Array.prototype.filter.call(i.options,u=>u.selected).map(u=>n?mr(Dn(u)):Dn(u));i[Vt](i.multiple?o?new Set(a):a:a[0]),i._assigning=!0,ic(()=>{i._assigning=!1})}),i[Vt]=$i(r)},mounted(i,{value:e}){tu(i,e)},beforeUpdate(i,e,n){i[Vt]=$i(n)},updated(i,{value:e}){i._assigning||tu(i,e)}};function tu(i,e){const n=i.multiple,r=_e(e);if(!(n&&!r&&!jn(e))){for(let o=0,a=i.options.length;o<a;o++){const u=i.options[o],d=Dn(u);if(n)if(r){const h=typeof d;h==="string"||h==="number"?u.selected=e.some(m=>String(m)===String(d)):u.selected=la(e,d)>-1}else u.selected=e.has(d);else if(rn(Dn(u),e)){i.selectedIndex!==o&&(i.selectedIndex=o);return}}!n&&i.selectedIndex!==-1&&(i.selectedIndex=-1)}}function Dn(i){return"_value"in i?i._value:i.value}function Rc(i,e){const n=e?"_trueValue":"_falseValue";return n in i?i[n]:e}const Am=["ctrl","shift","alt","meta"],km={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,e)=>Am.some(n=>i[`${n}Key`]&&!e.includes(n))},Mt=(i,e)=>{const n=i._withMods||(i._withMods={}),r=e.join(".");return n[r]||(n[r]=(o,...a)=>{for(let u=0;u<e.length;u++){const d=km[e[u]];if(d&&d(o,e))return}return i(o,...a)})},Tm={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Pm=(i,e)=>{const n=i._withKeys||(i._withKeys={}),r=e.join(".");return n[r]||(n[r]=o=>{if(!("key"in o))return;const a=ji(o.key);if(e.some(u=>u===a||Tm[u]===a))return i(o)})},xm=Et({patchProp:ym},sm);let iu;function Em(){return iu||(iu=Pp(xm))}const Lm=(...i)=>{const e=Em().createApp(...i),{mount:n}=e;return e.mount=r=>{const o=Cm(r);if(!o)return;const a=e._component;!ke(a)&&!a.render&&!a.template&&(a.template=o.innerHTML),o.nodeType===1&&(o.textContent="");const u=n(o,!1,Om(o));return o instanceof Element&&(o.removeAttribute("v-cloak"),o.setAttribute("data-v-app","")),u},e};function Om(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function Cm(i){return at(i)?document.querySelector(i):i}const qo="/fueldock-estonia-1/pic/FuelDock-1_no_bg_s.png";var Vo=function(i,e){return Vo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(n[o]=r[o])},Vo(i,e)};function $c(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Vo(i,e);function n(){this.constructor=i}i.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var kr=function(){return kr=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},kr.apply(this,arguments)};function Bn(i,e){var n={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(n[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(i);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(i,r[o])&&(n[r[o]]=i[r[o]]);return n}function jc(i,e,n,r){var o=arguments.length,a=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,n):r,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(i,e,n,r);else for(var d=i.length-1;d>=0;d--)(u=i[d])&&(a=(o<3?u(a):o>3?u(e,n,a):u(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function Nc(i,e){return function(n,r){e(n,r,i)}}function Uc(i,e,n,r,o,a){function u(U){if(U!==void 0&&typeof U!="function")throw new TypeError("Function expected");return U}for(var d=r.kind,h=d==="getter"?"get":d==="setter"?"set":"value",m=!e&&i?r.static?i:i.prototype:null,v=e||(m?Object.getOwnPropertyDescriptor(m,r.name):{}),g,y=!1,A=n.length-1;A>=0;A--){var P={};for(var E in r)P[E]=E==="access"?{}:r[E];for(var E in r.access)P.access[E]=r.access[E];P.addInitializer=function(U){if(y)throw new TypeError("Cannot add initializers after decoration has completed");a.push(u(U||null))};var k=(0,n[A])(d==="accessor"?{get:v.get,set:v.set}:v[h],P);if(d==="accessor"){if(k===void 0)continue;if(k===null||typeof k!="object")throw new TypeError("Object expected");(g=u(k.get))&&(v.get=g),(g=u(k.set))&&(v.set=g),(g=u(k.init))&&o.unshift(g)}else(g=u(k))&&(d==="field"?o.unshift(g):v[h]=g)}m&&Object.defineProperty(m,r.name,v),y=!0}function Bc(i,e,n){for(var r=arguments.length>2,o=0;o<e.length;o++)n=r?e[o].call(i,n):e[o].call(i);return r?n:void 0}function Fc(i){return typeof i=="symbol"?i:"".concat(i)}function zc(i,e,n){return typeof e=="symbol"&&(e=e.description?"[".concat(e.description,"]"):""),Object.defineProperty(i,"name",{configurable:!0,value:n?"".concat(n," ",e):e})}function qc(i,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(i,e)}function ae(i,e,n,r){function o(a){return a instanceof n?a:new n(function(u){u(a)})}return new(n||(n=Promise))(function(a,u){function d(v){try{m(r.next(v))}catch(g){u(g)}}function h(v){try{m(r.throw(v))}catch(g){u(g)}}function m(v){v.done?a(v.value):o(v.value).then(d,h)}m((r=r.apply(i,e||[])).next())})}function Vc(i,e){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,o,a,u=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return u.next=d(0),u.throw=d(1),u.return=d(2),typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function d(m){return function(v){return h([m,v])}}function h(m){if(r)throw new TypeError("Generator is already executing.");for(;u&&(u=0,m[0]&&(n=0)),n;)try{if(r=1,o&&(a=m[0]&2?o.return:m[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,m[1])).done)return a;switch(o=0,a&&(m=[m[0]&2,a.value]),m[0]){case 0:case 1:a=m;break;case 4:return n.label++,{value:m[1],done:!1};case 5:n.label++,o=m[1],m=[0];continue;case 7:m=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(m[0]===6||m[0]===2)){n=0;continue}if(m[0]===3&&(!a||m[1]>a[0]&&m[1]<a[3])){n.label=m[1];break}if(m[0]===6&&n.label<a[1]){n.label=a[1],a=m;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(m);break}a[2]&&n.ops.pop(),n.trys.pop();continue}m=e.call(i,n)}catch(v){m=[6,v],o=0}finally{r=a=0}if(m[0]&5)throw m[1];return{value:m[0]?m[1]:void 0,done:!0}}}var Nr=Object.create?function(i,e,n,r){r===void 0&&(r=n);var o=Object.getOwnPropertyDescriptor(e,n);(!o||("get"in o?!e.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(i,r,o)}:function(i,e,n,r){r===void 0&&(r=n),i[r]=e[n]};function Hc(i,e){for(var n in i)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Nr(e,i,n)}function Tr(i){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&i[e],r=0;if(n)return n.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&r>=i.length&&(i=void 0),{value:i&&i[r++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Sa(i,e){var n=typeof Symbol=="function"&&i[Symbol.iterator];if(!n)return i;var r=n.call(i),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)a.push(o.value)}catch(d){u={error:d}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(u)throw u.error}}return a}function Zc(){for(var i=[],e=0;e<arguments.length;e++)i=i.concat(Sa(arguments[e]));return i}function Kc(){for(var i=0,e=0,n=arguments.length;e<n;e++)i+=arguments[e].length;for(var r=Array(i),o=0,e=0;e<n;e++)for(var a=arguments[e],u=0,d=a.length;u<d;u++,o++)r[o]=a[u];return r}function Wc(i,e,n){if(n||arguments.length===2)for(var r=0,o=e.length,a;r<o;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))}function Rn(i){return this instanceof Rn?(this.v=i,this):new Rn(i)}function Gc(i,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(i,e||[]),o,a=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",u),o[Symbol.asyncIterator]=function(){return this},o;function u(A){return function(P){return Promise.resolve(P).then(A,g)}}function d(A,P){r[A]&&(o[A]=function(E){return new Promise(function(k,U){a.push([A,E,k,U])>1||h(A,E)})},P&&(o[A]=P(o[A])))}function h(A,P){try{m(r[A](P))}catch(E){y(a[0][3],E)}}function m(A){A.value instanceof Rn?Promise.resolve(A.value.v).then(v,g):y(a[0][2],A)}function v(A){h("next",A)}function g(A){h("throw",A)}function y(A,P){A(P),a.shift(),a.length&&h(a[0][0],a[0][1])}}function Jc(i){var e,n;return e={},r("next"),r("throw",function(o){throw o}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(o,a){e[o]=i[o]?function(u){return(n=!n)?{value:Rn(i[o](u)),done:!1}:a?a(u):u}:a}}function Yc(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],n;return e?e.call(i):(i=typeof Tr=="function"?Tr(i):i[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(a){n[a]=i[a]&&function(u){return new Promise(function(d,h){u=i[a](u),o(d,h,u.done,u.value)})}}function o(a,u,d,h){Promise.resolve(h).then(function(m){a({value:m,done:d})},u)}}function Xc(i,e){return Object.defineProperty?Object.defineProperty(i,"raw",{value:e}):i.raw=e,i}var Mm=Object.create?function(i,e){Object.defineProperty(i,"default",{enumerable:!0,value:e})}:function(i,e){i.default=e},Ho=function(i){return Ho=Object.getOwnPropertyNames||function(e){var n=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[n.length]=r);return n},Ho(i)};function Qc(i){if(i&&i.__esModule)return i;var e={};if(i!=null)for(var n=Ho(i),r=0;r<n.length;r++)n[r]!=="default"&&Nr(e,i,n[r]);return Mm(e,i),e}function ed(i){return i&&i.__esModule?i:{default:i}}function td(i,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?i!==e||!r:!e.has(i))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(i):r?r.value:e.get(i)}function id(i,e,n,r,o){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?i!==e||!o:!e.has(i))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?o.call(i,n):o?o.value=n:e.set(i,n),n}function nd(i,e){if(e===null||typeof e!="object"&&typeof e!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof i=="function"?e===i:i.has(e)}function sd(i,e,n){if(e!=null){if(typeof e!="object"&&typeof e!="function")throw new TypeError("Object expected.");var r,o;if(n){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=e[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=e[Symbol.dispose],n&&(o=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");o&&(r=function(){try{o.call(this)}catch(a){return Promise.reject(a)}}),i.stack.push({value:e,dispose:r,async:n})}else n&&i.stack.push({async:!0});return e}var Im=typeof SuppressedError=="function"?SuppressedError:function(i,e,n){var r=new Error(n);return r.name="SuppressedError",r.error=i,r.suppressed=e,r};function rd(i){function e(a){i.error=i.hasError?new Im(a,i.error,"An error was suppressed during disposal."):a,i.hasError=!0}var n,r=0;function o(){for(;n=i.stack.pop();)try{if(!n.async&&r===1)return r=0,i.stack.push(n),Promise.resolve().then(o);if(n.dispose){var a=n.dispose.call(n.value);if(n.async)return r|=2,Promise.resolve(a).then(o,function(u){return e(u),o()})}else r|=1}catch(u){e(u)}if(r===1)return i.hasError?Promise.reject(i.error):Promise.resolve();if(i.hasError)throw i.error}return o()}function od(i,e){return typeof i=="string"&&/^\.\.?\//.test(i)?i.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(n,r,o,a,u){return r?e?".jsx":".js":o&&(!a||!u)?n:o+a+"."+u.toLowerCase()+"js"}):i}const Dm={__extends:$c,__assign:kr,__rest:Bn,__decorate:jc,__param:Nc,__esDecorate:Uc,__runInitializers:Bc,__propKey:Fc,__setFunctionName:zc,__metadata:qc,__awaiter:ae,__generator:Vc,__createBinding:Nr,__exportStar:Hc,__values:Tr,__read:Sa,__spread:Zc,__spreadArrays:Kc,__spreadArray:Wc,__await:Rn,__asyncGenerator:Gc,__asyncDelegator:Jc,__asyncValues:Yc,__makeTemplateObject:Xc,__importStar:Qc,__importDefault:ed,__classPrivateFieldGet:td,__classPrivateFieldSet:id,__classPrivateFieldIn:nd,__addDisposableResource:sd,__disposeResources:rd,__rewriteRelativeImportExtension:od},Rm=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:sd,get __assign(){return kr},__asyncDelegator:Jc,__asyncGenerator:Gc,__asyncValues:Yc,__await:Rn,__awaiter:ae,__classPrivateFieldGet:td,__classPrivateFieldIn:nd,__classPrivateFieldSet:id,__createBinding:Nr,__decorate:jc,__disposeResources:rd,__esDecorate:Uc,__exportStar:Hc,__extends:$c,__generator:Vc,__importDefault:ed,__importStar:Qc,__makeTemplateObject:Xc,__metadata:qc,__param:Nc,__propKey:Fc,__read:Sa,__rest:Bn,__rewriteRelativeImportExtension:od,__runInitializers:Bc,__setFunctionName:zc,__spread:Zc,__spreadArray:Wc,__spreadArrays:Kc,__values:Tr,default:Dm},Symbol.toStringTag,{value:"Module"})),$m="modulepreload",jm=function(i){return"/fueldock-estonia-1/"+i},nu={},Fn=function(e,n,r){let o=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),d=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));o=Promise.allSettled(n.map(h=>{if(h=jm(h),h in nu)return;nu[h]=!0;const m=h.endsWith(".css"),v=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${v}`))return;const g=document.createElement("link");if(g.rel=m?"stylesheet":$m,m||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),m)return new Promise((y,A)=>{g.addEventListener("load",y),g.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(u){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=u,window.dispatchEvent(d),!d.defaultPrevented)throw u}return o.then(u=>{for(const d of u||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})},Nm=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Fn(async()=>{const{default:r}=await Promise.resolve().then(()=>on);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)};class Aa extends Error{constructor(e,n="FunctionsError",r){super(e),this.name=n,this.context=r}}class su extends Aa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class ru extends Aa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ou extends Aa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Zo;(function(i){i.Any="any",i.ApNortheast1="ap-northeast-1",i.ApNortheast2="ap-northeast-2",i.ApSouth1="ap-south-1",i.ApSoutheast1="ap-southeast-1",i.ApSoutheast2="ap-southeast-2",i.CaCentral1="ca-central-1",i.EuCentral1="eu-central-1",i.EuWest1="eu-west-1",i.EuWest2="eu-west-2",i.EuWest3="eu-west-3",i.SaEast1="sa-east-1",i.UsEast1="us-east-1",i.UsWest1="us-west-1",i.UsWest2="us-west-2"})(Zo||(Zo={}));class Um{constructor(e,{headers:n={},customFetch:r,region:o=Zo.Any}={}){this.url=e,this.headers=n,this.region=o,this.fetch=Nm(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return ae(this,arguments,void 0,function*(n,r={}){var o;try{const{headers:a,method:u,body:d,signal:h}=r;let m={},{region:v}=r;v||(v=this.region);const g=new URL(`${this.url}/${n}`);v&&v!=="any"&&(m["x-region"]=v,g.searchParams.set("forceFunctionRegion",v));let y;d&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&d instanceof Blob||d instanceof ArrayBuffer?(m["Content-Type"]="application/octet-stream",y=d):typeof d=="string"?(m["Content-Type"]="text/plain",y=d):typeof FormData<"u"&&d instanceof FormData?y=d:(m["Content-Type"]="application/json",y=JSON.stringify(d)):y=d;const A=yield this.fetch(g.toString(),{method:u||"POST",headers:Object.assign(Object.assign(Object.assign({},m),this.headers),a),body:y,signal:h}).catch(U=>{throw U.name==="AbortError"?U:new su(U)}),P=A.headers.get("x-relay-error");if(P&&P==="true")throw new ru(A);if(!A.ok)throw new ou(A);let E=((o=A.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),k;return E==="application/json"?k=yield A.json():E==="application/octet-stream"||E==="application/pdf"?k=yield A.blob():E==="text/event-stream"?k=A:E==="multipart/form-data"?k=yield A.formData():k=yield A.text(),{data:k,error:null,response:A}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new su(a)}:{data:null,error:a,response:a instanceof ou||a instanceof ru?a.context:void 0}}})}}var Bm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Fm(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function ad(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(i).forEach(function(r){var o=Object.getOwnPropertyDescriptor(i,r);Object.defineProperty(n,r,o.get?o:{enumerable:!0,get:function(){return i[r]}})}),n}var Pt={};const zn=ad(Rm);var Qs={},er={},tr={},ir={},nr={},zm=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},$n=zm();const qm=$n.fetch,ld=$n.fetch.bind($n),ud=$n.Headers,Vm=$n.Request,Hm=$n.Response,on=Object.freeze(Object.defineProperty({__proto__:null,Headers:ud,Request:Vm,Response:Hm,default:ld,fetch:qm},Symbol.toStringTag,{value:"Module"})),Zm=ad(on);var sr={},au;function cd(){if(au)return sr;au=1,Object.defineProperty(sr,"__esModule",{value:!0});class i extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}}return sr.default=i,sr}var lu;function dd(){if(lu)return nr;lu=1,Object.defineProperty(nr,"__esModule",{value:!0});const i=zn,e=i.__importDefault(Zm),n=i.__importDefault(cd());class r{constructor(a){var u,d;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(u=a.shouldThrowOnError)!==null&&u!==void 0?u:!1,this.signal=a.signal,this.isMaybeSingle=(d=a.isMaybeSingle)!==null&&d!==void 0?d:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,u){return this.headers=new Headers(this.headers),this.headers.set(a,u),this}then(a,u){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let h=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{var v,g,y,A;let P=null,E=null,k=null,U=m.status,D=m.statusText;if(m.ok){if(this.method!=="HEAD"){const le=await m.text();le===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((v=this.headers.get("Accept"))===null||v===void 0)&&v.includes("application/vnd.pgrst.plan+text"))?E=le:E=JSON.parse(le))}const B=(g=this.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),ue=(y=m.headers.get("content-range"))===null||y===void 0?void 0:y.split("/");B&&ue&&ue.length>1&&(k=parseInt(ue[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(E)&&(E.length>1?(P={code:"PGRST116",details:`Results contain ${E.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},E=null,k=null,U=406,D="Not Acceptable"):E.length===1?E=E[0]:E=null)}else{const B=await m.text();try{P=JSON.parse(B),Array.isArray(P)&&m.status===404&&(E=[],P=null,U=200,D="OK")}catch{m.status===404&&B===""?(U=204,D="No Content"):P={message:B}}if(P&&this.isMaybeSingle&&(!((A=P==null?void 0:P.details)===null||A===void 0)&&A.includes("0 rows"))&&(P=null,U=200,D="OK"),P&&this.shouldThrowOnError)throw new n.default(P)}return{error:P,data:E,count:k,status:U,statusText:D}});return this.shouldThrowOnError||(h=h.catch(m=>{var v,g,y;return{error:{message:`${(v=m==null?void 0:m.name)!==null&&v!==void 0?v:"FetchError"}: ${m==null?void 0:m.message}`,details:`${(g=m==null?void 0:m.stack)!==null&&g!==void 0?g:""}`,hint:"",code:`${(y=m==null?void 0:m.code)!==null&&y!==void 0?y:""}`},data:null,count:null,status:0,statusText:""}})),h.then(a,u)}returns(){return this}overrideTypes(){return this}}return nr.default=r,nr}var uu;function hd(){if(uu)return ir;uu=1,Object.defineProperty(ir,"__esModule",{value:!0});const e=zn.__importDefault(dd());class n extends e.default{select(o){let a=!1;const u=(o??"*").split("").map(d=>/\s/.test(d)&&!a?"":(d==='"'&&(a=!a),d)).join("");return this.url.searchParams.set("select",u),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:a=!0,nullsFirst:u,foreignTable:d,referencedTable:h=d}={}){const m=h?`${h}.order`:"order",v=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${v?`${v},`:""}${o}.${a?"asc":"desc"}${u===void 0?"":u?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:a,referencedTable:u=a}={}){const d=typeof u>"u"?"limit":`${u}.limit`;return this.url.searchParams.set(d,`${o}`),this}range(o,a,{foreignTable:u,referencedTable:d=u}={}){const h=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(h,`${o}`),this.url.searchParams.set(m,`${a-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:a=!1,settings:u=!1,buffers:d=!1,wal:h=!1,format:m="text"}={}){var v;const g=[o?"analyze":null,a?"verbose":null,u?"settings":null,d?"buffers":null,h?"wal":null].filter(Boolean).join("|"),y=(v=this.headers.get("Accept"))!==null&&v!==void 0?v:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${y}"; options=${g};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return ir.default=n,ir}var cu;function ka(){if(cu)return tr;cu=1,Object.defineProperty(tr,"__esModule",{value:!0});const e=zn.__importDefault(hd()),n=new RegExp("[,()]");class r extends e.default{eq(a,u){return this.url.searchParams.append(a,`eq.${u}`),this}neq(a,u){return this.url.searchParams.append(a,`neq.${u}`),this}gt(a,u){return this.url.searchParams.append(a,`gt.${u}`),this}gte(a,u){return this.url.searchParams.append(a,`gte.${u}`),this}lt(a,u){return this.url.searchParams.append(a,`lt.${u}`),this}lte(a,u){return this.url.searchParams.append(a,`lte.${u}`),this}like(a,u){return this.url.searchParams.append(a,`like.${u}`),this}likeAllOf(a,u){return this.url.searchParams.append(a,`like(all).{${u.join(",")}}`),this}likeAnyOf(a,u){return this.url.searchParams.append(a,`like(any).{${u.join(",")}}`),this}ilike(a,u){return this.url.searchParams.append(a,`ilike.${u}`),this}ilikeAllOf(a,u){return this.url.searchParams.append(a,`ilike(all).{${u.join(",")}}`),this}ilikeAnyOf(a,u){return this.url.searchParams.append(a,`ilike(any).{${u.join(",")}}`),this}is(a,u){return this.url.searchParams.append(a,`is.${u}`),this}in(a,u){const d=Array.from(new Set(u)).map(h=>typeof h=="string"&&n.test(h)?`"${h}"`:`${h}`).join(",");return this.url.searchParams.append(a,`in.(${d})`),this}contains(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cs.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cs.{${u.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(u)}`),this}containedBy(a,u){return typeof u=="string"?this.url.searchParams.append(a,`cd.${u}`):Array.isArray(u)?this.url.searchParams.append(a,`cd.{${u.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(u)}`),this}rangeGt(a,u){return this.url.searchParams.append(a,`sr.${u}`),this}rangeGte(a,u){return this.url.searchParams.append(a,`nxl.${u}`),this}rangeLt(a,u){return this.url.searchParams.append(a,`sl.${u}`),this}rangeLte(a,u){return this.url.searchParams.append(a,`nxr.${u}`),this}rangeAdjacent(a,u){return this.url.searchParams.append(a,`adj.${u}`),this}overlaps(a,u){return typeof u=="string"?this.url.searchParams.append(a,`ov.${u}`):this.url.searchParams.append(a,`ov.{${u.join(",")}}`),this}textSearch(a,u,{config:d,type:h}={}){let m="";h==="plain"?m="pl":h==="phrase"?m="ph":h==="websearch"&&(m="w");const v=d===void 0?"":`(${d})`;return this.url.searchParams.append(a,`${m}fts${v}.${u}`),this}match(a){return Object.entries(a).forEach(([u,d])=>{this.url.searchParams.append(u,`eq.${d}`)}),this}not(a,u,d){return this.url.searchParams.append(a,`not.${u}.${d}`),this}or(a,{foreignTable:u,referencedTable:d=u}={}){const h=d?`${d}.or`:"or";return this.url.searchParams.append(h,`(${a})`),this}filter(a,u,d){return this.url.searchParams.append(a,`${u}.${d}`),this}}return tr.default=r,tr}var du;function fd(){if(du)return er;du=1,Object.defineProperty(er,"__esModule",{value:!0});const e=zn.__importDefault(ka());class n{constructor(o,{headers:a={},schema:u,fetch:d}){this.url=o,this.headers=new Headers(a),this.schema=u,this.fetch=d}select(o,a){const{head:u=!1,count:d}=a??{},h=u?"HEAD":"GET";let m=!1;const v=(o??"*").split("").map(g=>/\s/.test(g)&&!m?"":(g==='"'&&(m=!m),g)).join("");return this.url.searchParams.set("select",v),d&&this.headers.append("Prefer",`count=${d}`),new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:a,defaultToNull:u=!0}={}){var d;const h="POST";if(a&&this.headers.append("Prefer",`count=${a}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const m=o.reduce((v,g)=>v.concat(Object.keys(g)),[]);if(m.length>0){const v=[...new Set(m)].map(g=>`"${g}"`);this.url.searchParams.set("columns",v.join(","))}}return new e.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch})}upsert(o,{onConflict:a,ignoreDuplicates:u=!1,count:d,defaultToNull:h=!0}={}){var m;const v="POST";if(this.headers.append("Prefer",`resolution=${u?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),d&&this.headers.append("Prefer",`count=${d}`),h||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const g=o.reduce((y,A)=>y.concat(Object.keys(A)),[]);if(g.length>0){const y=[...new Set(g)].map(A=>`"${A}"`);this.url.searchParams.set("columns",y.join(","))}}return new e.default({method:v,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch})}update(o,{count:a}={}){var u;const d="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}delete({count:o}={}){var a;const u="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return er.default=n,er}var hu;function Km(){if(hu)return Qs;hu=1,Object.defineProperty(Qs,"__esModule",{value:!0});const i=zn,e=i.__importDefault(fd()),n=i.__importDefault(ka());class r{constructor(a,{headers:u={},schema:d,fetch:h}={}){this.url=a,this.headers=new Headers(u),this.schemaName=d,this.fetch=h}from(a){const u=new URL(`${this.url}/${a}`);return new e.default(u,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new r(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,u={},{head:d=!1,get:h=!1,count:m}={}){var v;let g;const y=new URL(`${this.url}/rpc/${a}`);let A;d||h?(g=d?"HEAD":"GET",Object.entries(u).filter(([E,k])=>k!==void 0).map(([E,k])=>[E,Array.isArray(k)?`{${k.join(",")}}`:`${k}`]).forEach(([E,k])=>{y.searchParams.append(E,k)})):(g="POST",A=u);const P=new Headers(this.headers);return m&&P.set("Prefer",`count=${m}`),new n.default({method:g,url:y,headers:P,schema:this.schemaName,body:A,fetch:(v=this.fetch)!==null&&v!==void 0?v:fetch})}}return Qs.default=r,Qs}Object.defineProperty(Pt,"__esModule",{value:!0});var pd=Pt.PostgrestError=kd=Pt.PostgrestBuilder=Sd=Pt.PostgrestTransformBuilder=bd=Pt.PostgrestFilterBuilder=gd=Pt.PostgrestQueryBuilder=vd=Pt.PostgrestClient=void 0;const qn=zn,md=qn.__importDefault(Km());var vd=Pt.PostgrestClient=md.default;const _d=qn.__importDefault(fd());var gd=Pt.PostgrestQueryBuilder=_d.default;const yd=qn.__importDefault(ka());var bd=Pt.PostgrestFilterBuilder=yd.default;const wd=qn.__importDefault(hd());var Sd=Pt.PostgrestTransformBuilder=wd.default;const Ad=qn.__importDefault(dd());var kd=Pt.PostgrestBuilder=Ad.default;const Td=qn.__importDefault(cd());pd=Pt.PostgrestError=Td.default;var Pd=Pt.default={PostgrestClient:md.default,PostgrestQueryBuilder:_d.default,PostgrestFilterBuilder:yd.default,PostgrestTransformBuilder:wd.default,PostgrestBuilder:Ad.default,PostgrestError:Td.default};const Wm=rf({__proto__:null,get PostgrestBuilder(){return kd},get PostgrestClient(){return vd},get PostgrestError(){return pd},get PostgrestFilterBuilder(){return bd},get PostgrestQueryBuilder(){return gd},get PostgrestTransformBuilder(){return Sd},default:Pd},[Pt]),{PostgrestClient:Gm,PostgrestQueryBuilder:_w,PostgrestFilterBuilder:gw,PostgrestTransformBuilder:yw,PostgrestBuilder:bw,PostgrestError:ww}=Pd||Wm;class Jm{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const n=process.versions;if(n&&n.node){const r=n.node,o=parseInt(r.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let n=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(n+=`

Suggested solution: ${e.workaround}`),new Error(n)}static createWebSocket(e,n){const r=this.getWebSocketConstructor();return new r(e,n)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ym="2.78.0",Xm=`realtime-js/${Ym}`,Qm="1.0.0",Ko=1e4,ev=1e3,tv=100;var ms;(function(i){i[i.connecting=0]="connecting",i[i.open=1]="open",i[i.closing=2]="closing",i[i.closed=3]="closed"})(ms||(ms={}));var ut;(function(i){i.closed="closed",i.errored="errored",i.joined="joined",i.joining="joining",i.leaving="leaving"})(ut||(ut={}));var Xt;(function(i){i.close="phx_close",i.error="phx_error",i.join="phx_join",i.reply="phx_reply",i.leave="phx_leave",i.access_token="access_token"})(Xt||(Xt={}));var Wo;(function(i){i.websocket="websocket"})(Wo||(Wo={}));var en;(function(i){i.Connecting="connecting",i.Open="open",i.Closing="closing",i.Closed="closed"})(en||(en={}));class iv{constructor(){this.HEADER_LENGTH=1}decode(e,n){return e.constructor===ArrayBuffer?n(this._binaryDecode(e)):n(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const n=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,n,r)}_decodeBroadcast(e,n,r){const o=n.getUint8(1),a=n.getUint8(2);let u=this.HEADER_LENGTH+2;const d=r.decode(e.slice(u,u+o));u=u+o;const h=r.decode(e.slice(u,u+a));u=u+a;const m=JSON.parse(r.decode(e.slice(u,e.byteLength)));return{ref:null,topic:d,event:h,payload:m}}}class xd{constructor(e,n){this.callback=e,this.timerCalc=n,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=n}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ze;(function(i){i.abstime="abstime",i.bool="bool",i.date="date",i.daterange="daterange",i.float4="float4",i.float8="float8",i.int2="int2",i.int4="int4",i.int4range="int4range",i.int8="int8",i.int8range="int8range",i.json="json",i.jsonb="jsonb",i.money="money",i.numeric="numeric",i.oid="oid",i.reltime="reltime",i.text="text",i.time="time",i.timestamp="timestamp",i.timestamptz="timestamptz",i.timetz="timetz",i.tsrange="tsrange",i.tstzrange="tstzrange"})(Ze||(Ze={}));const fu=(i,e,n={})=>{var r;const o=(r=n.skipTypes)!==null&&r!==void 0?r:[];return e?Object.keys(e).reduce((a,u)=>(a[u]=nv(u,i,e,o),a),{}):{}},nv=(i,e,n,r)=>{const o=e.find(d=>d.name===i),a=o==null?void 0:o.type,u=n[i];return a&&!r.includes(a)?Ed(a,u):Go(u)},Ed=(i,e)=>{if(i.charAt(0)==="_"){const n=i.slice(1,i.length);return av(e,n)}switch(i){case Ze.bool:return sv(e);case Ze.float4:case Ze.float8:case Ze.int2:case Ze.int4:case Ze.int8:case Ze.numeric:case Ze.oid:return rv(e);case Ze.json:case Ze.jsonb:return ov(e);case Ze.timestamp:return lv(e);case Ze.abstime:case Ze.date:case Ze.daterange:case Ze.int4range:case Ze.int8range:case Ze.money:case Ze.reltime:case Ze.text:case Ze.time:case Ze.timestamptz:case Ze.timetz:case Ze.tsrange:case Ze.tstzrange:return Go(e);default:return Go(e)}},Go=i=>i,sv=i=>{switch(i){case"t":return!0;case"f":return!1;default:return i}},rv=i=>{if(typeof i=="string"){const e=parseFloat(i);if(!Number.isNaN(e))return e}return i},ov=i=>{if(typeof i=="string")try{return JSON.parse(i)}catch(e){return console.log(`JSON parse error: ${e}`),i}return i},av=(i,e)=>{if(typeof i!="string")return i;const n=i.length-1,r=i[n];if(i[0]==="{"&&r==="}"){let a;const u=i.slice(1,n);try{a=JSON.parse("["+u+"]")}catch{a=u?u.split(","):[]}return a.map(d=>Ed(e,d))}return i},lv=i=>typeof i=="string"?i.replace(" ","T"):i,Ld=i=>{const e=new URL(i);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class Ao{constructor(e,n,r={},o=Ko){this.channel=e,this.event=n,this.payload=r,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,n){var r;return this._hasReceived(e)&&n((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:n}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=n=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=n,this._matchReceive(n)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,n){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:n})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:n}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(n))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var pu;(function(i){i.SYNC="sync",i.JOIN="join",i.LEAVE="leave"})(pu||(pu={}));class vs{constructor(e,n){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(n==null?void 0:n.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.joinRef=this.channel._joinRef(),this.state=vs.syncState(this.state,o,a,u),this.pendingDiffs.forEach(h=>{this.state=vs.syncDiff(this.state,h,a,u)}),this.pendingDiffs=[],d()}),this.channel._on(r.diff,{},o=>{const{onJoin:a,onLeave:u,onSync:d}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=vs.syncDiff(this.state,o,a,u),d())}),this.onJoin((o,a,u)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:a,newPresences:u})}),this.onLeave((o,a,u)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:a,leftPresences:u})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,n,r,o){const a=this.cloneDeep(e),u=this.transformState(n),d={},h={};return this.map(a,(m,v)=>{u[m]||(h[m]=v)}),this.map(u,(m,v)=>{const g=a[m];if(g){const y=v.map(k=>k.presence_ref),A=g.map(k=>k.presence_ref),P=v.filter(k=>A.indexOf(k.presence_ref)<0),E=g.filter(k=>y.indexOf(k.presence_ref)<0);P.length>0&&(d[m]=P),E.length>0&&(h[m]=E)}else d[m]=v}),this.syncDiff(a,{joins:d,leaves:h},r,o)}static syncDiff(e,n,r,o){const{joins:a,leaves:u}={joins:this.transformState(n.joins),leaves:this.transformState(n.leaves)};return r||(r=()=>{}),o||(o=()=>{}),this.map(a,(d,h)=>{var m;const v=(m=e[d])!==null&&m!==void 0?m:[];if(e[d]=this.cloneDeep(h),v.length>0){const g=e[d].map(A=>A.presence_ref),y=v.filter(A=>g.indexOf(A.presence_ref)<0);e[d].unshift(...y)}r(d,v,h)}),this.map(u,(d,h)=>{let m=e[d];if(!m)return;const v=h.map(g=>g.presence_ref);m=m.filter(g=>v.indexOf(g.presence_ref)<0),e[d]=m,o(d,m,h),m.length===0&&delete e[d]}),e}static map(e,n){return Object.getOwnPropertyNames(e).map(r=>n(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((n,r)=>{const o=e[r];return"metas"in o?n[r]=o.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):n[r]=o,n},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var mu;(function(i){i.ALL="*",i.INSERT="INSERT",i.UPDATE="UPDATE",i.DELETE="DELETE"})(mu||(mu={}));var _s;(function(i){i.BROADCAST="broadcast",i.PRESENCE="presence",i.POSTGRES_CHANGES="postgres_changes",i.SYSTEM="system"})(_s||(_s={}));var gi;(function(i){i.SUBSCRIBED="SUBSCRIBED",i.TIMED_OUT="TIMED_OUT",i.CLOSED="CLOSED",i.CHANNEL_ERROR="CHANNEL_ERROR"})(gi||(gi={}));class Ta{constructor(e,n={config:{}},r){var o,a;if(this.topic=e,this.params=n,this.socket=r,this.bindings={},this.state=ut.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},n.config),this.timeout=this.socket.timeout,this.joinPush=new Ao(this,Xt.join,this.params,this.timeout),this.rejoinTimer=new xd(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ut.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(u=>u.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ut.closed,this.socket._remove(this)}),this._onError(u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",u=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,u),this.state=ut.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xt.reply,{},(u,d)=>{this._trigger(this._replyEventName(d),u)}),this.presence=new vs(this),this.broadcastEndpointURL=Ld(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,n=this.timeout){var r,o,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ut.closed){const{config:{broadcast:u,presence:d,private:h}}=this.params,m=(o=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(A=>A.filter))!==null&&o!==void 0?o:[],v=!!this.bindings[_s.PRESENCE]&&this.bindings[_s.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},y={broadcast:u,presence:Object.assign(Object.assign({},d),{enabled:v}),postgres_changes:m,private:h};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(A=>e==null?void 0:e(gi.CHANNEL_ERROR,A)),this._onClose(()=>e==null?void 0:e(gi.CLOSED)),this.updateJoinPayload(Object.assign({config:y},g)),this.joinedOnce=!0,this._rejoin(n),this.joinPush.receive("ok",async({postgres_changes:A})=>{var P;if(this.socket.setAuth(),A===void 0){e==null||e(gi.SUBSCRIBED);return}else{const E=this.bindings.postgres_changes,k=(P=E==null?void 0:E.length)!==null&&P!==void 0?P:0,U=[];for(let D=0;D<k;D++){const M=E[D],{filter:{event:B,schema:ue,table:le,filter:ge}}=M,Ee=A&&A[D];if(Ee&&Ee.event===B&&Ee.schema===ue&&Ee.table===le&&Ee.filter===ge)U.push(Object.assign(Object.assign({},M),{id:Ee.id}));else{this.unsubscribe(),this.state=ut.errored,e==null||e(gi.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=U,e&&e(gi.SUBSCRIBED);return}}).receive("error",A=>{this.state=ut.errored,e==null||e(gi.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(A).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(gi.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,n={}){return await this.send({type:"presence",event:"track",payload:e},n.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,n,r){return this.state===ut.joined&&e===_s.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,n,r)}async httpSend(e,n,r={}){var o;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(n==null)return Promise.reject("Payload is required for httpSend()");const u={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:n,private:this.private}]})},d=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(o=r.timeout)!==null&&o!==void 0?o:this.timeout);if(d.status===202)return{success:!0};let h=d.statusText;try{const m=await d.json();h=m.error||m.message||h}catch{}return Promise.reject(new Error(h))}async send(e,n={}){var r,o;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:u}=e,h={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:u,private:this.private}]})};try{const m=await this._fetchWithTimeout(this.broadcastEndpointURL,h,(r=n.timeout)!==null&&r!==void 0?r:this.timeout);return await((o=m.body)===null||o===void 0?void 0:o.cancel()),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var u,d,h;const m=this._push(e.type,e,n.timeout||this.timeout);e.type==="broadcast"&&!(!((h=(d=(u=this.params)===null||u===void 0?void 0:u.config)===null||d===void 0?void 0:d.broadcast)===null||h===void 0)&&h.ack)&&a("ok"),m.receive("ok",()=>a("ok")),m.receive("error",()=>a("error")),m.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ut.leaving;const n=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xt.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(o=>{r=new Ao(this,Xt.leave,{},e),r.receive("ok",()=>{n(),o("ok")}).receive("timeout",()=>{n(),o("timed out")}).receive("error",()=>{o("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r==null||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ut.closed,this.bindings={}}async _fetchWithTimeout(e,n,r){const o=new AbortController,a=setTimeout(()=>o.abort(),r),u=await this.socket.fetch(e,Object.assign(Object.assign({},n),{signal:o.signal}));return clearTimeout(a),u}_push(e,n,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new Ao(this,e,n,r);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>tv){const n=this.pushBuffer.shift();n&&(n.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${n.event}`,n.payload))}}_onMessage(e,n,r){return n}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,n,r){var o,a;const u=e.toLocaleLowerCase(),{close:d,error:h,leave:m,join:v}=Xt;if(r&&[d,h,m,v].indexOf(u)>=0&&r!==this._joinRef())return;let y=this._onMessage(u,n,r);if(n&&!y)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(u)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(A=>{var P,E,k;return((P=A.filter)===null||P===void 0?void 0:P.event)==="*"||((k=(E=A.filter)===null||E===void 0?void 0:E.event)===null||k===void 0?void 0:k.toLocaleLowerCase())===u}).map(A=>A.callback(y,r)):(a=this.bindings[u])===null||a===void 0||a.filter(A=>{var P,E,k,U,D,M;if(["broadcast","presence","postgres_changes"].includes(u))if("id"in A){const B=A.id,ue=(P=A.filter)===null||P===void 0?void 0:P.event;return B&&((E=n.ids)===null||E===void 0?void 0:E.includes(B))&&(ue==="*"||(ue==null?void 0:ue.toLocaleLowerCase())===((k=n.data)===null||k===void 0?void 0:k.type.toLocaleLowerCase()))}else{const B=(D=(U=A==null?void 0:A.filter)===null||U===void 0?void 0:U.event)===null||D===void 0?void 0:D.toLocaleLowerCase();return B==="*"||B===((M=n==null?void 0:n.event)===null||M===void 0?void 0:M.toLocaleLowerCase())}else return A.type.toLocaleLowerCase()===u}).map(A=>{if(typeof y=="object"&&"ids"in y){const P=y.data,{schema:E,table:k,commit_timestamp:U,type:D,errors:M}=P;y=Object.assign(Object.assign({},{schema:E,table:k,commit_timestamp:U,eventType:D,new:{},old:{},errors:M}),this._getPayloadRecords(P))}A.callback(y,r)})}_isClosed(){return this.state===ut.closed}_isJoined(){return this.state===ut.joined}_isJoining(){return this.state===ut.joining}_isLeaving(){return this.state===ut.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,n,r){const o=e.toLocaleLowerCase(),a={type:o,filter:n,callback:r};return this.bindings[o]?this.bindings[o].push(a):this.bindings[o]=[a],this}_off(e,n){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(o=>{var a;return!(((a=o.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===r&&Ta.isEqual(o.filter,n))})),this}static isEqual(e,n){if(Object.keys(e).length!==Object.keys(n).length)return!1;for(const r in e)if(e[r]!==n[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Xt.close,{},e)}_onError(e){this._on(Xt.error,{},n=>e(n))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ut.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const n={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(n.new=fu(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(n.old=fu(e.columns,e.old_record)),n}}const ko=()=>{},rr={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},uv=[1e3,2e3,5e3,1e4],cv=1e4,dv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class hv{constructor(e,n){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Ko,this.transport=null,this.heartbeatIntervalMs=rr.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ko,this.ref=0,this.reconnectTimer=null,this.logger=ko,this.conn=null,this.sendBuffer=[],this.serializer=new iv,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>{let a;return o?a=o:typeof fetch>"u"?a=(...u)=>Fn(async()=>{const{default:d}=await Promise.resolve().then(()=>on);return{default:d}},void 0).then(({default:d})=>d(...u)).catch(d=>{throw new Error(`Failed to load @supabase/node-fetch: ${d.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...u)=>a(...u)},!(!((r=n==null?void 0:n.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=n.params.apikey,this.endPoint=`${e}/${Wo.websocket}`,this.httpEndpoint=Ld(e),this._initializeOptions(n),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(n==null?void 0:n.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Jm.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const n=e.message;throw n.includes("Node.js")?new Error(`${n}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${n}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Qm}))}disconnect(e,n){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,n??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const n=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),n}async removeAllChannels(){const e=await Promise.all(this.channels.map(n=>n.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,n,r){this.logger(e,n,r)}connectionState(){switch(this.conn&&this.conn.readyState){case ms.connecting:return en.Connecting;case ms.open:return en.Open;case ms.closing:return en.Closing;default:return en.Closed}}isConnected(){return this.connectionState()===en.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,n={config:{}}){const r=`realtime:${e}`,o=this.getChannels().find(a=>a.topic===r);if(o)return o;{const a=new Ta(`realtime:${e}`,n,this);return this.channels.push(a),a}}push(e){const{topic:n,event:r,payload:o,ref:a}=e,u=()=>{this.encode(e,d=>{var h;(h=this.conn)===null||h===void 0||h.send(d)})};this.log("push",`${n} ${r} (${a})`,o),this.isConnected()?u():this.sendBuffer.push(u)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(n){this.log("error","error in heartbeat callback",n)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(n){this.log("error","error in heartbeat callback",n)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ev,"heartbeat timeout"),setTimeout(()=>{var n;this.isConnected()||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout()},rr.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(n){this.log("error","error in heartbeat callback",n)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let n=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));n&&(this.log("transport",`leaving duplicate topic "${e}"`),n.unsubscribe())}_remove(e){this.channels=this.channels.filter(n=>n.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,n=>{if(n.topic==="phoenix"&&n.event==="phx_reply")try{this.heartbeatCallback(n.payload.status==="ok"?"ok":"error")}catch(m){this.log("error","error in heartbeat callback",m)}n.ref&&n.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:o,payload:a,ref:u}=n,d=u?`(${u})`:"",h=a.status||"";this.log("receive",`${h} ${r} ${o} ${d}`.trim(),a),this.channels.filter(m=>m._isMember(r)).forEach(m=>m._trigger(o,a,u)),this._triggerStateCallbacks("message",n)})}_clearTimer(e){var n;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((n=this.reconnectTimer)===null||n===void 0||n.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=n=>{this.log("worker","worker error",n.message),this.workerRef.terminate()},this.workerRef.onmessage=n=>{n.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var n;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(n=this.reconnectTimer)===null||n===void 0||n.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Xt.error))}_appendParams(e,n){if(Object.keys(n).length===0)return e;const r=e.match(/\?/)?"&":"?",o=new URLSearchParams(n);return`${e}${r}${o}`}_workerObjectUrl(e){let n;if(e)n=e;else{const r=new Blob([dv],{type:"application/javascript"});n=URL.createObjectURL(r)}return n}_setConnectionState(e,n=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=n)}async _performAuth(e=null){let n;e?n=e:this.accessToken?n=await this.accessToken():n=this.accessTokenValue,this.accessTokenValue!=n&&(this.accessTokenValue=n,this.channels.forEach(r=>{const o={access_token:n,version:Xm};n&&r.updateJoinPayload(o),r.joinedOnce&&r._isJoined()&&r._push(Xt.access_token,{access_token:n})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(n=>{this.log("error",`error setting auth in ${e}`,n)})}_triggerStateCallbacks(e,n){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(n)}catch(o){this.log("error",`error in ${e} callback`,o)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new xd(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},rr.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var n,r,o,a,u,d,h,m,v;if(this.transport=(n=e==null?void 0:e.transport)!==null&&n!==void 0?n:null,this.timeout=(r=e==null?void 0:e.timeout)!==null&&r!==void 0?r:Ko,this.heartbeatIntervalMs=(o=e==null?void 0:e.heartbeatIntervalMs)!==null&&o!==void 0?o:rr.HEARTBEAT_INTERVAL,this.worker=(a=e==null?void 0:e.worker)!==null&&a!==void 0?a:!1,this.accessToken=(u=e==null?void 0:e.accessToken)!==null&&u!==void 0?u:null,this.heartbeatCallback=(d=e==null?void 0:e.heartbeatCallback)!==null&&d!==void 0?d:ko,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(h=e==null?void 0:e.reconnectAfterMs)!==null&&h!==void 0?h:g=>uv[g-1]||cv,this.encode=(m=e==null?void 0:e.encode)!==null&&m!==void 0?m:(g,y)=>y(JSON.stringify(g)),this.decode=(v=e==null?void 0:e.decode)!==null&&v!==void 0?v:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class Pa extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Qe(i){return typeof i=="object"&&i!==null&&"__isStorageError"in i}class fv extends Pa{constructor(e,n,r){super(e),this.name="StorageApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Jo extends Pa{constructor(e,n){super(e),this.name="StorageUnknownError",this.originalError=n}}const xa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Fn(async()=>{const{default:r}=await Promise.resolve().then(()=>on);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},pv=()=>ae(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Fn(()=>Promise.resolve().then(()=>on),void 0)).Response:Response}),Yo=i=>{if(Array.isArray(i))return i.map(n=>Yo(n));if(typeof i=="function"||i!==Object(i))return i;const e={};return Object.entries(i).forEach(([n,r])=>{const o=n.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[o]=Yo(r)}),e},mv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},To=i=>{var e;return i.msg||i.message||i.error_description||(typeof i.error=="string"?i.error:(e=i.error)===null||e===void 0?void 0:e.message)||JSON.stringify(i)},vv=(i,e,n)=>ae(void 0,void 0,void 0,function*(){const r=yield pv();i instanceof r&&!(n!=null&&n.noResolveJson)?i.json().then(o=>{const a=i.status||500,u=(o==null?void 0:o.statusCode)||a+"";e(new fv(To(o),a,u))}).catch(o=>{e(new Jo(To(o),o))}):e(new Jo(To(i),i))}),_v=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"||!r?o:(mv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,e!=null&&e.duplex&&(o.duplex=e.duplex),Object.assign(Object.assign({},o),n))};function Ls(i,e,n,r,o,a){return ae(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,_v(e,r,o,a)).then(h=>{if(!h.ok)throw h;return r!=null&&r.noResolveJson?h:h.json()}).then(h=>u(h)).catch(h=>vv(h,d,r))})})}function As(i,e,n,r){return ae(this,void 0,void 0,function*(){return Ls(i,"GET",e,n,r)})}function Yt(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Ls(i,"POST",e,r,o,n)})}function Xo(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Ls(i,"PUT",e,r,o,n)})}function gv(i,e,n,r){return ae(this,void 0,void 0,function*(){return Ls(i,"HEAD",e,Object.assign(Object.assign({},n),{noResolveJson:!0}),r)})}function Ea(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Ls(i,"DELETE",e,r,o,n)})}class yv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n}then(e,n){return this.execute().then(e,n)}execute(){return ae(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}var Od;class bv{constructor(e,n){this.downloadFn=e,this.shouldThrowOnError=n,this[Od]="BlobDownloadBuilder",this.promise=null}asStream(){return new yv(this.downloadFn,this.shouldThrowOnError)}then(e,n){return this.getPromise().then(e,n)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return ae(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Qe(e))return{data:null,error:e};throw e}})}}Od=Symbol.toStringTag;const wv={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},vu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Sv{constructor(e,n={},r,o){this.shouldThrowOnError=!1,this.url=e,this.headers=n,this.bucketId=r,this.fetch=xa(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,n,r,o){return ae(this,void 0,void 0,function*(){try{let a;const u=Object.assign(Object.assign({},vu),o);let d=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(u.upsert)});const h=u.metadata;typeof Blob<"u"&&r instanceof Blob?(a=new FormData,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h)),a.append("",r)):typeof FormData<"u"&&r instanceof FormData?(a=r,a.append("cacheControl",u.cacheControl),h&&a.append("metadata",this.encodeMetadata(h))):(a=r,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType,h&&(d["x-metadata"]=this.toBase64(this.encodeMetadata(h)))),o!=null&&o.headers&&(d=Object.assign(Object.assign({},d),o.headers));const m=this._removeEmptyFolders(n),v=this._getFinalPath(m),g=yield(e=="PUT"?Xo:Yt)(this.fetch,`${this.url}/object/${v}`,a,Object.assign({headers:d},u!=null&&u.duplex?{duplex:u.duplex}:{}));return{data:{path:m,id:g.Id,fullPath:g.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Qe(a))return{data:null,error:a};throw a}})}upload(e,n,r){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,n,r)})}uploadToSignedUrl(e,n,r,o){return ae(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),u=this._getFinalPath(a),d=new URL(this.url+`/object/upload/sign/${u}`);d.searchParams.set("token",n);try{let h;const m=Object.assign({upsert:vu.upsert},o),v=Object.assign(Object.assign({},this.headers),{"x-upsert":String(m.upsert)});typeof Blob<"u"&&r instanceof Blob?(h=new FormData,h.append("cacheControl",m.cacheControl),h.append("",r)):typeof FormData<"u"&&r instanceof FormData?(h=r,h.append("cacheControl",m.cacheControl)):(h=r,v["cache-control"]=`max-age=${m.cacheControl}`,v["content-type"]=m.contentType);const g=yield Xo(this.fetch,d.toString(),h,{headers:v});return{data:{path:a,fullPath:g.Key},error:null}}catch(h){if(this.shouldThrowOnError)throw h;if(Qe(h))return{data:null,error:h};throw h}})}createSignedUploadUrl(e,n){return ae(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const o=Object.assign({},this.headers);n!=null&&n.upsert&&(o["x-upsert"]="true");const a=yield Yt(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:o}),u=new URL(this.url+a.url),d=u.searchParams.get("token");if(!d)throw new Pa("No token returned by API");return{data:{signedUrl:u.toString(),path:e,token:d},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}update(e,n,r){return ae(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,n,r)})}move(e,n,r){return ae(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}copy(e,n,r){return ae(this,void 0,void 0,function*(){try{return{data:{path:(yield Yt(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:n,destinationBucket:r==null?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrl(e,n,r){return ae(this,void 0,void 0,function*(){try{let o=this._getFinalPath(e),a=yield Yt(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:n},r!=null&&r.transform?{transform:r.transform}:{}),{headers:this.headers});const u=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${u}`)},{data:a,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}createSignedUrls(e,n,r){return ae(this,void 0,void 0,function*(){try{const o=yield Yt(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:n,paths:e},{headers:this.headers}),a=r!=null&&r.download?`&download=${r.download===!0?"":r.download}`:"";return{data:o.map(u=>Object.assign(Object.assign({},u),{signedUrl:u.signedURL?encodeURI(`${this.url}${u.signedURL}${a}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}download(e,n){const o=typeof(n==null?void 0:n.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((n==null?void 0:n.transform)||{}),u=a?`?${a}`:"",d=this._getFinalPath(e),h=()=>As(this.fetch,`${this.url}/${o}/${d}${u}`,{headers:this.headers,noResolveJson:!0});return new bv(h,this.shouldThrowOnError)}info(e){return ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{const r=yield As(this.fetch,`${this.url}/object/info/${n}`,{headers:this.headers});return{data:Yo(r),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}exists(e){return ae(this,void 0,void 0,function*(){const n=this._getFinalPath(e);try{return yield gv(this.fetch,`${this.url}/object/${n}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r)&&r instanceof Jo){const o=r.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,n){const r=this._getFinalPath(e),o=[],a=n!=null&&n.download?`download=${n.download===!0?"":n.download}`:"";a!==""&&o.push(a);const d=typeof(n==null?void 0:n.transform)<"u"?"render/image":"object",h=this.transformOptsToQueryString((n==null?void 0:n.transform)||{});h!==""&&o.push(h);let m=o.join("&");return m!==""&&(m=`?${m}`),{data:{publicUrl:encodeURI(`${this.url}/${d}/public/${r}${m}`)}}}remove(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}list(e,n,r){return ae(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},wv),n),{prefix:e||""});return{data:yield Yt(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},r),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}listV2(e,n){return ae(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Yt(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const n=[];return e.width&&n.push(`width=${e.width}`),e.height&&n.push(`height=${e.height}`),e.resize&&n.push(`resize=${e.resize}`),e.format&&n.push(`format=${e.format}`),e.quality&&n.push(`quality=${e.quality}`),n.join("&")}}const Cd="2.78.0",Md={"X-Client-Info":`storage-js/${Cd}`};class Av{constructor(e,n={},r,o){this.shouldThrowOnError=!1;const a=new URL(e);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=xa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const n=this.listBucketOptionsToQueryString(e);return{data:yield As(this.fetch,`${this.url}/bucket${n}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield As(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}createBucket(e){return ae(this,arguments,void 0,function*(n,r={public:!1}){try{return{data:yield Yt(this.fetch,`${this.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(Qe(o))return{data:null,error:o};throw o}})}updateBucket(e,n){return ae(this,void 0,void 0,function*(){try{return{data:yield Xo(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Qe(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}listBucketOptionsToQueryString(e){const n={};return e&&("limit"in e&&(n.limit=String(e.limit)),"offset"in e&&(n.offset=String(e.offset)),e.search&&(n.search=e.search),e.sortColumn&&(n.sortColumn=e.sortColumn),e.sortOrder&&(n.sortOrder=e.sortOrder)),Object.keys(n).length>0?"?"+new URLSearchParams(n).toString():""}}class kv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Md),n),this.fetch=xa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Yt(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}listBuckets(e){return ae(this,void 0,void 0,function*(){try{const n=new URLSearchParams;(e==null?void 0:e.limit)!==void 0&&n.set("limit",e.limit.toString()),(e==null?void 0:e.offset)!==void 0&&n.set("offset",e.offset.toString()),e!=null&&e.sortColumn&&n.set("sortColumn",e.sortColumn),e!=null&&e.sortOrder&&n.set("sortOrder",e.sortOrder),e!=null&&e.search&&n.set("search",e.search);const r=n.toString(),o=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield As(this.fetch,o,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield Ea(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Qe(n))return{data:null,error:n};throw n}})}}const La={"X-Client-Info":`storage-js/${Cd}`,"Content-Type":"application/json"};class Id extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function $t(i){return typeof i=="object"&&i!==null&&"__isStorageVectorsError"in i}class Po extends Id{constructor(e,n,r){super(e),this.name="StorageVectorsApiError",this.status=n,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Tv extends Id{constructor(e,n){super(e),this.name="StorageVectorsUnknownError",this.originalError=n}}var _u;(function(i){i.InternalError="InternalError",i.S3VectorConflictException="S3VectorConflictException",i.S3VectorNotFoundException="S3VectorNotFoundException",i.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",i.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",i.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_u||(_u={}));const Oa=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Fn(async()=>{const{default:r}=await Promise.resolve().then(()=>on);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},Pv=i=>{if(typeof i!="object"||i===null)return!1;const e=Object.getPrototypeOf(i);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in i)&&!(Symbol.iterator in i)},gu=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),xv=(i,e,n)=>ae(void 0,void 0,void 0,function*(){if(i&&typeof i=="object"&&"status"in i&&"ok"in i&&typeof i.status=="number"&&!(n!=null&&n.noResolveJson)){const o=i.status||500,a=i;if(typeof a.json=="function")a.json().then(u=>{const d=(u==null?void 0:u.statusCode)||(u==null?void 0:u.code)||o+"";e(new Po(gu(u),o,d))}).catch(()=>{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new Po(d,o,u))});else{const u=o+"",d=a.statusText||`HTTP ${o} error`;e(new Po(d,o,u))}}else e(new Tv(gu(i),i))}),Ev=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return r?(Pv(r)?(o.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),o.body=JSON.stringify(r)):o.body=r,Object.assign(Object.assign({},o),n)):o};function Lv(i,e,n,r,o,a){return ae(this,void 0,void 0,function*(){return new Promise((u,d)=>{i(n,Ev(e,r,o,a)).then(h=>{if(!h.ok)throw h;if(r!=null&&r.noResolveJson)return h;const m=h.headers.get("content-type");return!m||!m.includes("application/json")?{}:h.json()}).then(h=>u(h)).catch(h=>xv(h,d,r))})})}function jt(i,e,n,r,o){return ae(this,void 0,void 0,function*(){return Lv(i,"POST",e,r,o,n)})}class Ov{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},La),n),this.fetch=Oa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}getIndex(e,n){return ae(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}listIndexes(e){return ae(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}deleteIndex(e,n){return ae(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:n},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($t(r))return{data:null,error:r};throw r}})}}class Cv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},La),n),this.fetch=Oa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield jt(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}getVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}listVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield jt(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}queryVectors(e){return ae(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}deleteVectors(e){return ae(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield jt(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}}class Mv{constructor(e,n={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},La),n),this.fetch=Oa(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}getBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:yield jt(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}listBuckets(){return ae(this,arguments,void 0,function*(e={}){try{return{data:yield jt(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}deleteBucket(e){return ae(this,void 0,void 0,function*(){try{return{data:(yield jt(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($t(n))return{data:null,error:n};throw n}})}}class Iv extends Mv{constructor(e,n={}){super(e,n.headers||{},n.fetch)}from(e){return new Dv(this.url,this.headers,e,this.fetch)}}class Dv extends Ov{constructor(e,n,r,o){super(e,n,o),this.vectorBucketName=r}createIndex(e){const n=Object.create(null,{createIndex:{get:()=>super.createIndex}});return ae(this,void 0,void 0,function*(){return n.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return ae(this,arguments,void 0,function*(n={}){return e.listIndexes.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const n=Object.create(null,{getIndex:{get:()=>super.getIndex}});return ae(this,void 0,void 0,function*(){return n.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const n=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return ae(this,void 0,void 0,function*(){return n.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new Rv(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class Rv extends Cv{constructor(e,n,r,o,a){super(e,n,a),this.vectorBucketName=r,this.indexName=o}putVectors(e){const n=Object.create(null,{putVectors:{get:()=>super.putVectors}});return ae(this,void 0,void 0,function*(){return n.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const n=Object.create(null,{getVectors:{get:()=>super.getVectors}});return ae(this,void 0,void 0,function*(){return n.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return ae(this,arguments,void 0,function*(n={}){return e.listVectors.call(this,Object.assign(Object.assign({},n),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const n=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return ae(this,void 0,void 0,function*(){return n.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const n=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return ae(this,void 0,void 0,function*(){return n.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $v extends Av{constructor(e,n={},r,o){super(e,n,r,o)}from(e){return new Sv(this.url,this.headers,e,this.fetch)}get vectors(){return new Iv(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new kv(this.url+"/iceberg",this.headers,this.fetch)}}const jv="2.78.0";let as="";typeof Deno<"u"?as="deno":typeof document<"u"?as="web":typeof navigator<"u"&&navigator.product==="ReactNative"?as="react-native":as="node";const Nv={"X-Client-Info":`supabase-js-${as}/${jv}`},Uv={headers:Nv},Bv={schema:"public"},Fv={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},zv={},qv=i=>{let e;return i?e=i:typeof fetch>"u"?e=ld:e=fetch,(...n)=>e(...n)},Vv=()=>typeof Headers>"u"?ud:Headers,Hv=(i,e,n)=>{const r=qv(n),o=Vv();return async(a,u)=>{var d;const h=(d=await e())!==null&&d!==void 0?d:i;let m=new o(u==null?void 0:u.headers);return m.has("apikey")||m.set("apikey",i),m.has("Authorization")||m.set("Authorization",`Bearer ${h}`),r(a,Object.assign(Object.assign({},u),{headers:m}))}};function Zv(i){return i.endsWith("/")?i:i+"/"}function Kv(i,e){var n,r;const{db:o,auth:a,realtime:u,global:d}=i,{db:h,auth:m,realtime:v,global:g}=e,y={db:Object.assign(Object.assign({},h),o),auth:Object.assign(Object.assign({},m),a),realtime:Object.assign(Object.assign({},v),u),storage:{},global:Object.assign(Object.assign(Object.assign({},g),d),{headers:Object.assign(Object.assign({},(n=g==null?void 0:g.headers)!==null&&n!==void 0?n:{}),(r=d==null?void 0:d.headers)!==null&&r!==void 0?r:{})}),accessToken:async()=>""};return i.accessToken?y.accessToken=i.accessToken:delete y.accessToken,y}function Wv(i){const e=i==null?void 0:i.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Zv(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Dd="2.78.0",Tn=30*1e3,Qo=3,xo=Qo*Tn,Gv="http://localhost:9999",Jv="supabase.auth.token",Yv={"X-Client-Info":`gotrue-js/${Dd}`},ea="X-Supabase-Api-Version",Rd={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Xv=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Qv=10*60*1e3;class ks extends Error{constructor(e,n,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=n,this.code=r}}function he(i){return typeof i=="object"&&i!==null&&"__isAuthError"in i}class e_ extends ks{constructor(e,n,r){super(e,n,r),this.name="AuthApiError",this.status=n,this.code=r}}function t_(i){return he(i)&&i.name==="AuthApiError"}class tn extends ks{constructor(e,n){super(e),this.name="AuthUnknownError",this.originalError=n}}class Ni extends ks{constructor(e,n,r,o){super(e,r,o),this.name=n,this.status=r}}class Gt extends Ni{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function i_(i){return he(i)&&i.name==="AuthSessionMissingError"}class gn extends Ni{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class or extends Ni{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ar extends Ni{constructor(e,n=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function n_(i){return he(i)&&i.name==="AuthImplicitGrantRedirectError"}class yu extends Ni{constructor(e,n=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=n}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ta extends Ni{constructor(e,n){super(e,"AuthRetryableFetchError",n,void 0)}}function Eo(i){return he(i)&&i.name==="AuthRetryableFetchError"}class bu extends Ni{constructor(e,n,r){super(e,"AuthWeakPasswordError",n,"weak_password"),this.reasons=r}}class ia extends Ni{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Pr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),wu=` 	
\r=`.split(""),s_=(()=>{const i=new Array(128);for(let e=0;e<i.length;e+=1)i[e]=-1;for(let e=0;e<wu.length;e+=1)i[wu[e].charCodeAt(0)]=-2;for(let e=0;e<Pr.length;e+=1)i[Pr[e].charCodeAt(0)]=e;return i})();function Su(i,e,n){if(i!==null)for(e.queue=e.queue<<8|i,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pr[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;n(Pr[r]),e.queuedBits-=6}}function $d(i,e,n){const r=s_[i];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)n(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(i)}"`)}}function Au(i){const e=[],n=u=>{e.push(String.fromCodePoint(u))},r={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},a=u=>{a_(u,r,n)};for(let u=0;u<i.length;u+=1)$d(i.charCodeAt(u),o,a);return e.join("")}function r_(i,e){if(i<=127){e(i);return}else if(i<=2047){e(192|i>>6),e(128|i&63);return}else if(i<=65535){e(224|i>>12),e(128|i>>6&63),e(128|i&63);return}else if(i<=1114111){e(240|i>>18),e(128|i>>12&63),e(128|i>>6&63),e(128|i&63);return}throw new Error(`Unrecognized Unicode codepoint: ${i.toString(16)}`)}function o_(i,e){for(let n=0;n<i.length;n+=1){let r=i.charCodeAt(n);if(r>55295&&r<=56319){const o=(r-55296)*1024&65535;r=(i.charCodeAt(n+1)-56320&65535|o)+65536,n+=1}r_(r,e)}}function a_(i,e,n){if(e.utf8seq===0){if(i<=127){n(i);return}for(let r=1;r<6;r+=1)if(!(i>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=i&31;else if(e.utf8seq===3)e.codepoint=i&15;else if(e.utf8seq===4)e.codepoint=i&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(i<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|i&63,e.utf8seq-=1,e.utf8seq===0&&n(e.codepoint)}}function Mn(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};for(let o=0;o<i.length;o+=1)$d(i.charCodeAt(o),n,r);return new Uint8Array(e)}function l_(i){const e=[];return o_(i,n=>e.push(n)),new Uint8Array(e)}function nn(i){const e=[],n={queue:0,queuedBits:0},r=o=>{e.push(o)};return i.forEach(o=>Su(o,n,r)),Su(null,n,r),e.join("")}function u_(i){return Math.round(Date.now()/1e3)+i}function c_(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(i){const e=Math.random()*16|0;return(i=="x"?e:e&3|8).toString(16)})}const kt=()=>typeof window<"u"&&typeof document<"u",Gi={tested:!1,writable:!1},jd=()=>{if(!kt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Gi.tested)return Gi.writable;const i=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(i,i),globalThis.localStorage.removeItem(i),Gi.tested=!0,Gi.writable=!0}catch{Gi.tested=!0,Gi.writable=!1}return Gi.writable};function d_(i){const e={},n=new URL(i);if(n.hash&&n.hash[0]==="#")try{new URLSearchParams(n.hash.substring(1)).forEach((o,a)=>{e[a]=o})}catch{}return n.searchParams.forEach((r,o)=>{e[o]=r}),e}const Nd=i=>{let e;return i?e=i:typeof fetch>"u"?e=(...n)=>Fn(async()=>{const{default:r}=await Promise.resolve().then(()=>on);return{default:r}},void 0).then(({default:r})=>r(...n)):e=fetch,(...n)=>e(...n)},h_=i=>typeof i=="object"&&i!==null&&"status"in i&&"ok"in i&&"json"in i&&typeof i.json=="function",Pn=async(i,e,n)=>{await i.setItem(e,JSON.stringify(n))},Ji=async(i,e)=>{const n=await i.getItem(e);if(!n)return null;try{return JSON.parse(n)}catch{return n}},xi=async(i,e)=>{await i.removeItem(e)};class Ur{constructor(){this.promise=new Ur.promiseConstructor((e,n)=>{this.resolve=e,this.reject=n})}}Ur.promiseConstructor=Promise;function Lo(i){const e=i.split(".");if(e.length!==3)throw new ia("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!Xv.test(e[r]))throw new ia("JWT not in base64url format");return{header:JSON.parse(Au(e[0])),payload:JSON.parse(Au(e[1])),signature:Mn(e[2]),raw:{header:e[0],payload:e[1]}}}async function f_(i){return await new Promise(e=>{setTimeout(()=>e(null),i)})}function p_(i,e){return new Promise((r,o)=>{(async()=>{for(let a=0;a<1/0;a++)try{const u=await i(a);if(!e(a,null,u)){r(u);return}}catch(u){if(!e(a,u)){o(u);return}}})()})}function m_(i){return("0"+i.toString(16)).substr(-2)}function v_(){const e=new Uint32Array(56);if(typeof crypto>"u"){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=n.length;let o="";for(let a=0;a<56;a++)o+=n.charAt(Math.floor(Math.random()*r));return o}return crypto.getRandomValues(e),Array.from(e,m_).join("")}async function __(i){const n=new TextEncoder().encode(i),r=await crypto.subtle.digest("SHA-256",n),o=new Uint8Array(r);return Array.from(o).map(a=>String.fromCharCode(a)).join("")}async function g_(i){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),i;const n=await __(i);return btoa(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yn(i,e,n=!1){const r=v_();let o=r;n&&(o+="/PASSWORD_RECOVERY"),await Pn(i,`${e}-code-verifier`,o);const a=await g_(r);return[a,r===a?"plain":"s256"]}const y_=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function b_(i){const e=i.headers.get(ea);if(!e||!e.match(y_))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function w_(i){if(!i)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(i<=e)throw new Error("JWT has expired")}function S_(i){switch(i){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const A_=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function bn(i){if(!A_.test(i))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Oo(){const i={};return new Proxy(i,{get:(e,n)=>{if(n==="__isUserNotAvailableProxy")return!0;if(typeof n=="symbol"){const r=n.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${n}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,n)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${n}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function k_(i,e){return new Proxy(i,{get:(n,r,o)=>{if(r==="__isInsecureUserWarningProxy")return!0;if(typeof r=="symbol"){const a=r.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(n,r,o)}return!e.value&&typeof r=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(n,r,o)}})}function ku(i){return JSON.parse(JSON.stringify(i))}const Qi=i=>i.msg||i.message||i.error_description||i.error||JSON.stringify(i),T_=[502,503,504];async function Tu(i){var e;if(!h_(i))throw new ta(Qi(i),0);if(T_.includes(i.status))throw new ta(Qi(i),i.status);let n;try{n=await i.json()}catch(a){throw new tn(Qi(a),a)}let r;const o=b_(i);if(o&&o.getTime()>=Rd["2024-01-01"].timestamp&&typeof n=="object"&&n&&typeof n.code=="string"?r=n.code:typeof n=="object"&&n&&typeof n.error_code=="string"&&(r=n.error_code),r){if(r==="weak_password")throw new bu(Qi(n),i.status,((e=n.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Gt}else if(typeof n=="object"&&n&&typeof n.weak_password=="object"&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((a,u)=>a&&typeof u=="string",!0))throw new bu(Qi(n),i.status,n.weak_password.reasons);throw new e_(Qi(n),i.status||500,r)}const P_=(i,e,n,r)=>{const o={method:i,headers:(e==null?void 0:e.headers)||{}};return i==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),o.body=JSON.stringify(r),Object.assign(Object.assign({},o),n))};async function ye(i,e,n,r){var o;const a=Object.assign({},r==null?void 0:r.headers);a[ea]||(a[ea]=Rd["2024-01-01"].name),r!=null&&r.jwt&&(a.Authorization=`Bearer ${r.jwt}`);const u=(o=r==null?void 0:r.query)!==null&&o!==void 0?o:{};r!=null&&r.redirectTo&&(u.redirect_to=r.redirectTo);const d=Object.keys(u).length?"?"+new URLSearchParams(u).toString():"",h=await x_(i,e,n+d,{headers:a,noResolveJson:r==null?void 0:r.noResolveJson},{},r==null?void 0:r.body);return r!=null&&r.xform?r==null?void 0:r.xform(h):{data:Object.assign({},h),error:null}}async function x_(i,e,n,r,o,a){const u=P_(e,r,o,a);let d;try{d=await i(n,Object.assign({},u))}catch(h){throw console.error(h),new ta(Qi(h),0)}if(d.ok||await Tu(d),r!=null&&r.noResolveJson)return d;try{return await d.json()}catch(h){await Tu(h)}}function Jt(i){var e;let n=null;O_(i)&&(n=Object.assign({},i),i.expires_at||(n.expires_at=u_(i.expires_in)));const r=(e=i.user)!==null&&e!==void 0?e:i;return{data:{session:n,user:r},error:null}}function Pu(i){const e=Jt(i);return!e.error&&i.weak_password&&typeof i.weak_password=="object"&&Array.isArray(i.weak_password.reasons)&&i.weak_password.reasons.length&&i.weak_password.message&&typeof i.weak_password.message=="string"&&i.weak_password.reasons.reduce((n,r)=>n&&typeof r=="string",!0)&&(e.data.weak_password=i.weak_password),e}function Oi(i){var e;return{data:{user:(e=i.user)!==null&&e!==void 0?e:i},error:null}}function E_(i){return{data:i,error:null}}function L_(i){const{action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a}=i,u=Bn(i,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),d={action_link:e,email_otp:n,hashed_token:r,redirect_to:o,verification_type:a},h=Object.assign({},u);return{data:{properties:d,user:h},error:null}}function xu(i){return i}function O_(i){return i.access_token&&i.refresh_token&&i.expires_in}const Co=["global","local","others"];class C_{constructor({url:e="",headers:n={},fetch:r}){this.url=e,this.headers=n,this.fetch=Nd(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,n=Co[0]){if(Co.indexOf(n)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Co.join(", ")}`);try{return await ye(this.fetch,"POST",`${this.url}/logout?scope=${n}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,n={}){try{return await ye(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:n.data},headers:this.headers,redirectTo:n.redirectTo,xform:Oi})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:n}=e,r=Bn(e,["options"]),o=Object.assign(Object.assign({},r),n);return"newEmail"in r&&(o.new_email=r==null?void 0:r.newEmail,delete o.newEmail),await ye(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:L_,redirectTo:n==null?void 0:n.redirectTo})}catch(n){if(he(n))return{data:{properties:null,user:null},error:n};throw n}}async createUser(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Oi})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async listUsers(e){var n,r,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:xu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const E=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);m[`${k}Page`]=E}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(he(m))return{data:{users:[]},error:m};throw m}}async getUserById(e){bn(e);try{return await ye(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Oi})}catch(n){if(he(n))return{data:{user:null},error:n};throw n}}async updateUserById(e,n){bn(e);try{return await ye(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:n,headers:this.headers,xform:Oi})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,n=!1){bn(e);try{return await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:n},xform:Oi})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){bn(e.userId);try{const{data:n,error:r}=await ye(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:n,error:r}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _deleteFactor(e){bn(e.userId),bn(e.id);try{return{data:await ye(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _listOAuthClients(e){var n,r,o,a,u,d,h;try{const m={nextPage:null,lastPage:0,total:0},v=await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(n=e==null?void 0:e.page)===null||n===void 0?void 0:n.toString())!==null&&r!==void 0?r:"",per_page:(a=(o=e==null?void 0:e.perPage)===null||o===void 0?void 0:o.toString())!==null&&a!==void 0?a:""},xform:xu});if(v.error)throw v.error;const g=await v.json(),y=(u=v.headers.get("x-total-count"))!==null&&u!==void 0?u:0,A=(h=(d=v.headers.get("link"))===null||d===void 0?void 0:d.split(","))!==null&&h!==void 0?h:[];return A.length>0&&(A.forEach(P=>{const E=parseInt(P.split(";")[0].split("=")[1].substring(0,1)),k=JSON.parse(P.split(";")[1].split("=")[1]);m[`${k}Page`]=E}),m.total=parseInt(y)),{data:Object.assign(Object.assign({},g),m),error:null}}catch(m){if(he(m))return{data:{clients:[]},error:m};throw m}}async _createOAuthClient(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _getOAuthClient(e){try{return await ye(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _updateOAuthClient(e,n){try{return await ye(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:n,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ye(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async _regenerateOAuthClientSecret(e){try{return await ye(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}}function Eu(i={}){return{getItem:e=>i[e]||null,setItem:(e,n)=>{i[e]=n},removeItem:e=>{delete i[e]}}}const wn={debug:!!(globalThis&&jd()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ud extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class M_ extends Ud{}async function I_(i,e,n){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",i,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),wn.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",i)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(i,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async o=>{if(o){wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",i,o.name);try{return await n()}finally{wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",i,o.name)}}else{if(e===0)throw wn.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",i),new M_(`Acquiring an exclusive Navigator LockManager lock "${i}" immediately failed`);if(wn.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await n()}}))}function D_(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Bd(i){if(!/^0x[a-fA-F0-9]{40}$/.test(i))throw new Error(`@supabase/auth-js: Address "${i}" is invalid.`);return i.toLowerCase()}function R_(i){return parseInt(i,16)}function $_(i){const e=new TextEncoder().encode(i);return"0x"+Array.from(e,r=>r.toString(16).padStart(2,"0")).join("")}function j_(i){var e;const{chainId:n,domain:r,expirationTime:o,issuedAt:a=new Date,nonce:u,notBefore:d,requestId:h,resources:m,scheme:v,uri:g,version:y}=i;{if(!Number.isInteger(n))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${n}`);if(!r)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(u&&u.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${u}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(y!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${y}`);if(!((e=i.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${i.statement}`)}const A=Bd(i.address),P=v?`${v}://${r}`:r,E=i.statement?`${i.statement}
`:"",k=`${P} wants you to sign in with your Ethereum account:
${A}

${E}`;let U=`URI: ${g}
Version: ${y}
Chain ID: ${n}${u?`
Nonce: ${u}`:""}
Issued At: ${a.toISOString()}`;if(o&&(U+=`
Expiration Time: ${o.toISOString()}`),d&&(U+=`
Not Before: ${d.toISOString()}`),h&&(U+=`
Request ID: ${h}`),m){let D=`
Resources:`;for(const M of m){if(!M||typeof M!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${M}`);D+=`
- ${M}`}U+=D}return`${k}
${U}`}class rt extends Error{constructor({message:e,code:n,cause:r,name:o}){var a;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=(a=o??(r instanceof Error?r.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=n}}class xr extends rt{constructor(e,n){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n,message:e}),this.name="WebAuthnUnknownError",this.originalError=n}}function N_({error:i,options:e}){var n,r,o;const{publicKey:a}=e;if(!a)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else if(i.name==="ConstraintError"){if(((n=a.authenticatorSelection)===null||n===void 0?void 0:n.requireResidentKey)===!0)return new rt({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:i});if(e.mediation==="conditional"&&((r=a.authenticatorSelection)===null||r===void 0?void 0:r.userVerification)==="required")return new rt({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:i});if(((o=a.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new rt({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:i})}else{if(i.name==="InvalidStateError")return new rt({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:i});if(i.name==="NotAllowedError")return new rt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="NotSupportedError")return a.pubKeyCredParams.filter(d=>d.type==="public-key").length===0?new rt({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:i}):new rt({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:i});if(i.name==="SecurityError"){const u=window.location.hostname;if(Fd(u)){if(a.rp.id!==u)return new rt({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new rt({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:i})}else if(i.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}function U_({error:i,options:e}){const{publicKey:n}=e;if(!n)throw Error("options was missing required publicKey property");if(i.name==="AbortError"){if(e.signal instanceof AbortSignal)return new rt({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:i})}else{if(i.name==="NotAllowedError")return new rt({message:i.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i});if(i.name==="SecurityError"){const r=window.location.hostname;if(Fd(r)){if(n.rpId!==r)return new rt({message:`The RP ID "${n.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:i})}else return new rt({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:i})}else if(i.name==="UnknownError")return new rt({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:i})}return new rt({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:i})}class B_{createNewAbortSignal(){if(this.controller){const n=new Error("Cancelling existing WebAuthn API call for new one");n.name="AbortError",this.controller.abort(n)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const F_=new B_;function z_(i){if(!i)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(i);const{challenge:e,user:n,excludeCredentials:r}=i,o=Bn(i,["challenge","user","excludeCredentials"]),a=Mn(e).buffer,u=Object.assign(Object.assign({},n),{id:Mn(n.id).buffer}),d=Object.assign(Object.assign({},o),{challenge:a,user:u});if(r&&r.length>0){d.excludeCredentials=new Array(r.length);for(let h=0;h<r.length;h++){const m=r[h];d.excludeCredentials[h]=Object.assign(Object.assign({},m),{id:Mn(m.id).buffer,type:m.type||"public-key",transports:m.transports})}}return d}function q_(i){if(!i)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(i);const{challenge:e,allowCredentials:n}=i,r=Bn(i,["challenge","allowCredentials"]),o=Mn(e).buffer,a=Object.assign(Object.assign({},r),{challenge:o});if(n&&n.length>0){a.allowCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const d=n[u];a.allowCredentials[u]=Object.assign(Object.assign({},d),{id:Mn(d.id).buffer,type:d.type||"public-key",transports:d.transports})}}return a}function V_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i;return{id:i.id,rawId:i.id,response:{attestationObject:nn(new Uint8Array(i.response.attestationObject)),clientDataJSON:nn(new Uint8Array(i.response.clientDataJSON))},type:"public-key",clientExtensionResults:i.getClientExtensionResults(),authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function H_(i){var e;if("toJSON"in i&&typeof i.toJSON=="function")return i.toJSON();const n=i,r=i.getClientExtensionResults(),o=i.response;return{id:i.id,rawId:i.id,response:{authenticatorData:nn(new Uint8Array(o.authenticatorData)),clientDataJSON:nn(new Uint8Array(o.clientDataJSON)),signature:nn(new Uint8Array(o.signature)),userHandle:o.userHandle?nn(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:r,authenticatorAttachment:(e=n.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Fd(i){return i==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(i)}function Lu(){var i,e;return!!(kt()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((i=navigator==null?void 0:navigator.credentials)===null||i===void 0?void 0:i.create)=="function"&&typeof((e=navigator==null?void 0:navigator.credentials)===null||e===void 0?void 0:e.get)=="function")}async function Z_(i){try{const e=await navigator.credentials.create(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xr("Browser returned unexpected credential type",e)}:{data:null,error:new xr("Empty credential response",e)}}catch(e){return{data:null,error:N_({error:e,options:i})}}}async function K_(i){try{const e=await navigator.credentials.get(i);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new xr("Browser returned unexpected credential type",e)}:{data:null,error:new xr("Empty credential response",e)}}catch(e){return{data:null,error:U_({error:e,options:i})}}}const W_={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},G_={userVerification:"preferred",hints:["security-key"]};function Er(...i){const e=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),n=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),r={};for(const o of i)if(o)for(const a in o){const u=o[a];if(u!==void 0)if(Array.isArray(u))r[a]=u;else if(n(u))r[a]=u;else if(e(u)){const d=r[a];e(d)?r[a]=Er(d,u):r[a]=Er(u)}else r[a]=u}return r}function J_(i,e){return Er(W_,i,e||{})}function Y_(i,e){return Er(G_,i,e||{})}class X_{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:n,friendlyName:r,signal:o},a){try{const{data:u,error:d}=await this.client.mfa.challenge({factorId:e,webauthn:n});if(!u)return{data:null,error:d};const h=o??F_.createNewAbortSignal();if(u.webauthn.type==="create"){const{user:m}=u.webauthn.credential_options.publicKey;m.name||(m.name=`${m.id}:${r}`),m.displayName||(m.displayName=m.name)}switch(u.webauthn.type){case"create":{const m=J_(u.webauthn.credential_options.publicKey,a==null?void 0:a.create),{data:v,error:g}=await Z_({publicKey:m,signal:h});return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}case"request":{const m=Y_(u.webauthn.credential_options.publicKey,a==null?void 0:a.request),{data:v,error:g}=await K_(Object.assign(Object.assign({},u.webauthn.credential_options),{publicKey:m,signal:h}));return v?{data:{factorId:e,challengeId:u.id,webauthn:{type:u.webauthn.type,credential_response:v}},error:null}:{data:null,error:g}}}}catch(u){return he(u)?{data:null,error:u}:{data:null,error:new tn("Unexpected error in challenge",u)}}}async _verify({challengeId:e,factorId:n,webauthn:r}){return this.client.mfa.verify({factorId:n,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o}},a){if(!n)return{data:null,error:new ks("rpId is required for WebAuthn authentication")};try{if(!Lu())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this.challenge({factorId:e,webauthn:{rpId:n,rpOrigins:r},signal:o},{request:a});if(!u)return{data:null,error:d};const{webauthn:h}=u;return this._verify({factorId:e,challengeId:u.challengeId,webauthn:{type:h.type,rpId:n,rpOrigins:r,credential_response:h.credential_response}})}catch(u){return he(u)?{data:null,error:u}:{data:null,error:new tn("Unexpected error in authenticate",u)}}}async _register({friendlyName:e,rpId:n=typeof window<"u"?window.location.hostname:void 0,rpOrigins:r=typeof window<"u"?[window.location.origin]:void 0,signal:o},a){if(!n)return{data:null,error:new ks("rpId is required for WebAuthn registration")};try{if(!Lu())return{data:null,error:new tn("Browser does not support WebAuthn",null)};const{data:u,error:d}=await this._enroll({friendlyName:e});if(!u)return await this.client.mfa.listFactors().then(v=>{var g;return(g=v.data)===null||g===void 0?void 0:g.all.find(y=>y.factor_type==="webauthn"&&y.friendly_name===e&&y.status!=="unverified")}).then(v=>v?this.client.mfa.unenroll({factorId:v==null?void 0:v.id}):void 0),{data:null,error:d};const{data:h,error:m}=await this._challenge({factorId:u.id,friendlyName:u.friendly_name,webauthn:{rpId:n,rpOrigins:r},signal:o},{create:a});return h?this._verify({factorId:u.id,challengeId:h.challengeId,webauthn:{rpId:n,rpOrigins:r,type:h.webauthn.type,credential_response:h.webauthn.credential_response}}):{data:null,error:m}}catch(u){return he(u)?{data:null,error:u}:{data:null,error:new tn("Unexpected error in register",u)}}}}D_();const Q_={url:Gv,storageKey:Jv,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Yv,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Ou(i,e,n){return await n()}const Sn={};class Ts{get jwks(){var e,n;return(n=(e=Sn[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&n!==void 0?n:{keys:[]}}set jwks(e){Sn[this.storageKey]=Object.assign(Object.assign({},Sn[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,n;return(n=(e=Sn[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&n!==void 0?n:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Sn[this.storageKey]=Object.assign(Object.assign({},Sn[this.storageKey]),{cachedAt:e})}constructor(e){var n,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ts.nextInstanceID,Ts.nextInstanceID+=1,this.instanceID>0&&kt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const o=Object.assign(Object.assign({},Q_),e);if(this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.persistSession=o.persistSession,this.storageKey=o.storageKey,this.autoRefreshToken=o.autoRefreshToken,this.admin=new C_({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=Nd(o.fetch),this.lock=o.lock||Ou,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,o.lock?this.lock=o.lock:kt()&&(!((n=globalThis==null?void 0:globalThis.navigator)===null||n===void 0)&&n.locks)?this.lock=I_:this.lock=Ou,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new X_(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:jd()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Eu(this.memoryStorage)),kt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Dd}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const n=d_(window.location.href);let r="none";if(this._isImplicitGrantCallback(n)?r="implicit":await this._isPKCECallback(n)&&(r="pkce"),kt()&&this.detectSessionInUrl&&r!=="none"){const{data:o,error:a}=await this._getSessionFromURL(n,r);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),n_(a)){const h=(e=a.details)===null||e===void 0?void 0:e.code;if(h==="identity_already_exists"||h==="identity_not_found"||h==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:u,redirectType:d}=o;return this._debug("#_initialize()","detected session in URL",u,"redirect type",d),await this._saveSession(u),setTimeout(async()=>{d==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",u):await this._notifyAllSubscribers("SIGNED_IN",u)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(n){return he(n)?{error:n}:{error:new tn("Unexpected error during initialization",n)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var n,r,o;try{const a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(n=e==null?void 0:e.options)===null||n===void 0?void 0:n.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(o=e==null?void 0:e.options)===null||o===void 0?void 0:o.captchaToken}},xform:Jt}),{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(he(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var n,r,o;try{let a;if("email"in e){const{email:v,password:g,options:y}=e;let A=null,P=null;this.flowType==="pkce"&&([A,P]=await yn(this.storage,this.storageKey)),a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:y==null?void 0:y.emailRedirectTo,body:{email:v,password:g,data:(n=y==null?void 0:y.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken},code_challenge:A,code_challenge_method:P},xform:Jt})}else if("phone"in e){const{phone:v,password:g,options:y}=e;a=await ye(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:v,password:g,data:(r=y==null?void 0:y.data)!==null&&r!==void 0?r:{},channel:(o=y==null?void 0:y.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:y==null?void 0:y.captchaToken}},xform:Jt})}else throw new or("You must provide either an email or phone number and a password");const{data:u,error:d}=a;if(d||!u)return{data:{user:null,session:null},error:d};const h=u.session,m=u.user;return u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(a){if(he(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let n;if("email"in e){const{email:a,password:u,options:d}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else if("phone"in e){const{phone:a,password:u,options:d}=e;n=await ye(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:u,gotrue_meta_security:{captcha_token:d==null?void 0:d.captchaToken}},xform:Pu})}else throw new or("You must provide either an email or phone number and a password");const{data:r,error:o}=n;return o?{data:{user:null,session:null},error:o}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new gn}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:o})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOAuth(e){var n,r,o,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(o=e.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:n}=e;switch(n){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${n}"`)}}async signInWithEthereum(e){var n,r,o,a,u,d,h,m,v,g,y;let A,P;if("message"in e)A=e.message,P=e.signature;else{const{chain:E,wallet:k,statement:U,options:D}=e;let M;if(kt())if(typeof k=="object")M=k;else{const Le=window;if("ethereum"in Le&&typeof Le.ethereum=="object"&&"request"in Le.ethereum&&typeof Le.ethereum.request=="function")M=Le.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!(D!=null&&D.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");M=k}const B=new URL((n=D==null?void 0:D.url)!==null&&n!==void 0?n:window.location.href),ue=await M.request({method:"eth_requestAccounts"}).then(Le=>Le).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ue||ue.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const le=Bd(ue[0]);let ge=(r=D==null?void 0:D.signInWithEthereum)===null||r===void 0?void 0:r.chainId;if(!ge){const Le=await M.request({method:"eth_chainId"});ge=R_(Le)}const Ee={domain:B.host,address:le,statement:U,uri:B.href,version:"1",chainId:ge,nonce:(o=D==null?void 0:D.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(u=(a=D==null?void 0:D.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&u!==void 0?u:new Date,expirationTime:(d=D==null?void 0:D.signInWithEthereum)===null||d===void 0?void 0:d.expirationTime,notBefore:(h=D==null?void 0:D.signInWithEthereum)===null||h===void 0?void 0:h.notBefore,requestId:(m=D==null?void 0:D.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(v=D==null?void 0:D.signInWithEthereum)===null||v===void 0?void 0:v.resources};A=j_(Ee),P=await M.request({method:"personal_sign",params:[$_(A),le]})}try{const{data:E,error:k}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:A,signature:P},!((g=e.options)===null||g===void 0)&&g.captchaToken?{gotrue_meta_security:{captcha_token:(y=e.options)===null||y===void 0?void 0:y.captchaToken}}:null),xform:Jt});if(k)throw k;return!E||!E.session||!E.user?{data:{user:null,session:null},error:new gn}:(E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",E.session)),{data:Object.assign({},E),error:k})}catch(E){if(he(E))return{data:{user:null,session:null},error:E};throw E}}async signInWithSolana(e){var n,r,o,a,u,d,h,m,v,g,y,A;let P,E;if("message"in e)P=e.message,E=e.signature;else{const{chain:k,wallet:U,statement:D,options:M}=e;let B;if(kt())if(typeof U=="object")B=U;else{const le=window;if("solana"in le&&typeof le.solana=="object"&&("signIn"in le.solana&&typeof le.solana.signIn=="function"||"signMessage"in le.solana&&typeof le.solana.signMessage=="function"))B=le.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof U!="object"||!(M!=null&&M.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");B=U}const ue=new URL((n=M==null?void 0:M.url)!==null&&n!==void 0?n:window.location.href);if("signIn"in B&&B.signIn){const le=await B.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},M==null?void 0:M.signInWithSolana),{version:"1",domain:ue.host,uri:ue.href}),D?{statement:D}:null));let ge;if(Array.isArray(le)&&le[0]&&typeof le[0]=="object")ge=le[0];else if(le&&typeof le=="object"&&"signedMessage"in le&&"signature"in le)ge=le;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ge&&"signature"in ge&&(typeof ge.signedMessage=="string"||ge.signedMessage instanceof Uint8Array)&&ge.signature instanceof Uint8Array)P=typeof ge.signedMessage=="string"?ge.signedMessage:new TextDecoder().decode(ge.signedMessage),E=ge.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in B)||typeof B.signMessage!="function"||!("publicKey"in B)||typeof B!="object"||!B.publicKey||!("toBase58"in B.publicKey)||typeof B.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");P=[`${ue.host} wants you to sign in with your Solana account:`,B.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${ue.href}`,`Issued At: ${(o=(r=M==null?void 0:M.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((a=M==null?void 0:M.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${M.signInWithSolana.notBefore}`]:[],...!((u=M==null?void 0:M.signInWithSolana)===null||u===void 0)&&u.expirationTime?[`Expiration Time: ${M.signInWithSolana.expirationTime}`]:[],...!((d=M==null?void 0:M.signInWithSolana)===null||d===void 0)&&d.chainId?[`Chain ID: ${M.signInWithSolana.chainId}`]:[],...!((h=M==null?void 0:M.signInWithSolana)===null||h===void 0)&&h.nonce?[`Nonce: ${M.signInWithSolana.nonce}`]:[],...!((m=M==null?void 0:M.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${M.signInWithSolana.requestId}`]:[],...!((g=(v=M==null?void 0:M.signInWithSolana)===null||v===void 0?void 0:v.resources)===null||g===void 0)&&g.length?["Resources",...M.signInWithSolana.resources.map(ge=>`- ${ge}`)]:[]].join(`
`);const le=await B.signMessage(new TextEncoder().encode(P),"utf8");if(!le||!(le instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");E=le}}try{const{data:k,error:U}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:P,signature:nn(E)},!((y=e.options)===null||y===void 0)&&y.captchaToken?{gotrue_meta_security:{captcha_token:(A=e.options)===null||A===void 0?void 0:A.captchaToken}}:null),xform:Jt});if(U)throw U;return!k||!k.session||!k.user?{data:{user:null,session:null},error:new gn}:(k.session&&(await this._saveSession(k.session),await this._notifyAllSubscribers("SIGNED_IN",k.session)),{data:Object.assign({},k),error:U})}catch(k){if(he(k))return{data:{user:null,session:null},error:k};throw k}}async _exchangeCodeForSession(e){const n=await Ji(this.storage,`${this.storageKey}-code-verifier`),[r,o]=(n??"").split("/");try{const{data:a,error:u}=await ye(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Jt});if(await xi(this.storage,`${this.storageKey}-code-verifier`),u)throw u;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new gn}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:o??null}),error:u})}catch(a){if(he(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:n,provider:r,token:o,access_token:a,nonce:u}=e,d=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:o,access_token:a,nonce:u,gotrue_meta_security:{captcha_token:n==null?void 0:n.captchaToken}},xform:Jt}),{data:h,error:m}=d;return m?{data:{user:null,session:null},error:m}:!h||!h.session||!h.user?{data:{user:null,session:null},error:new gn}:(h.session&&(await this._saveSession(h.session),await this._notifyAllSubscribers("SIGNED_IN",h.session)),{data:h,error:m})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async signInWithOtp(e){var n,r,o,a,u;try{if("email"in e){const{email:d,options:h}=e;let m=null,v=null;this.flowType==="pkce"&&([m,v]=await yn(this.storage,this.storageKey));const{error:g}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:d,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},create_user:(r=h==null?void 0:h.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:m,code_challenge_method:v},redirectTo:h==null?void 0:h.emailRedirectTo});return{data:{user:null,session:null},error:g}}if("phone"in e){const{phone:d,options:h}=e,{data:m,error:v}=await ye(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:d,data:(o=h==null?void 0:h.data)!==null&&o!==void 0?o:{},create_user:(a=h==null?void 0:h.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},channel:(u=h==null?void 0:h.channel)!==null&&u!==void 0?u:"sms"}});return{data:{user:null,session:null,messageId:m==null?void 0:m.message_id},error:v}}throw new or("You must provide either an email or phone number.")}catch(d){if(he(d))return{data:{user:null,session:null},error:d};throw d}}async verifyOtp(e){var n,r;try{let o,a;"options"in e&&(o=(n=e.options)===null||n===void 0?void 0:n.redirectTo,a=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:u,error:d}=await ye(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:o,xform:Jt});if(d)throw d;if(!u)throw new Error("An error occurred on token verification.");const h=u.session,m=u.user;return h!=null&&h.access_token&&(await this._saveSession(h),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",h)),{data:{user:m,session:h},error:null}}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}}async signInWithSSO(e){var n,r,o;try{let a=null,u=null;return this.flowType==="pkce"&&([a,u]=await yn(this.storage,this.storageKey)),await ye(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&r!==void 0?r:void 0}),!((o=e==null?void 0:e.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:u}),headers:this.headers,xform:E_})}catch(a){if(he(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:n},error:r}=e;if(r)throw r;if(!n)throw new Gt;const{error:o}=await ye(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:o}})}catch(e){if(he(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const n=`${this.url}/resend`;if("email"in e){const{email:r,type:o,options:a}=e,{error:u}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{email:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:u}}else if("phone"in e){const{phone:r,type:o,options:a}=e,{data:u,error:d}=await ye(this.fetch,"POST",n,{headers:this.headers,body:{phone:r,type:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new or("You must provide either an email or phone number and a type")}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async n=>n))}async _acquireLock(e,n){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await r,await n()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=n();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const n=await this.__loadSession();return await e(n)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const n=await Ji(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<xo:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const u=await Ji(this.userStorage,this.storageKey+"-user");u!=null&&u.user?e.user=u.user:e.user=Oo()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const u={value:this.suppressGetSessionWarning};e.user=k_(e.user,u),u.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:o},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Oi}):await this._useSession(async n=>{var r,o,a;const{data:u,error:d}=n;if(d)throw d;return!(!((r=u.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Gt}:await ye(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(o=u.session)===null||o===void 0?void 0:o.access_token)!==null&&a!==void 0?a:void 0,xform:Oi})})}catch(n){if(he(n))return i_(n)&&(await this._removeSession(),await xi(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:n};throw n}}async updateUser(e,n={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,n))}async _updateUser(e,n={}){try{return await this._useSession(async r=>{const{data:o,error:a}=r;if(a)throw a;if(!o.session)throw new Gt;const u=o.session;let d=null,h=null;this.flowType==="pkce"&&e.email!=null&&([d,h]=await yn(this.storage,this.storageKey));const{data:m,error:v}=await ye(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n==null?void 0:n.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:d,code_challenge_method:h}),jwt:u.access_token,xform:Oi});if(v)throw v;return u.user=m.user,await this._saveSession(u),await this._notifyAllSubscribers("USER_UPDATED",u),{data:{user:u.user},error:null}})}catch(r){if(he(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Gt;const n=Date.now()/1e3;let r=n,o=!0,a=null;const{payload:u}=Lo(e.access_token);if(u.exp&&(r=u.exp,o=r<=n),o){const{data:d,error:h}=await this._callRefreshToken(e.refresh_token);if(h)return{data:{user:null,session:null},error:h};if(!d)return{data:{user:null,session:null},error:null};a=d}else{const{data:d,error:h}=await this._getUser(e.access_token);if(h)throw h;a={access_token:e.access_token,refresh_token:e.refresh_token,user:d.user,token_type:"bearer",expires_in:r-n,expires_at:r},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(n){if(he(n))return{data:{session:null,user:null},error:n};throw n}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async n=>{var r;if(!e){const{data:u,error:d}=n;if(d)throw d;e=(r=u.session)!==null&&r!==void 0?r:void 0}if(!(e!=null&&e.refresh_token))throw new Gt;const{data:o,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:o?{data:{user:o.user,session:o},error:null}:{data:{user:null,session:null},error:null}})}catch(n){if(he(n))return{data:{user:null,session:null},error:n};throw n}}async _getSessionFromURL(e,n){try{if(!kt())throw new ar("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ar(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(n){case"implicit":if(this.flowType==="pkce")throw new yu("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ar("Not a valid implicit grant flow url.");break;default:}if(n==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new yu("No code detected.");const{data:D,error:M}=await this._exchangeCodeForSession(e.code);if(M)throw M;const B=new URL(window.location.href);return B.searchParams.delete("code"),window.history.replaceState(window.history.state,"",B.toString()),{data:{session:D.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:o,access_token:a,refresh_token:u,expires_in:d,expires_at:h,token_type:m}=e;if(!a||!d||!u||!m)throw new ar("No session defined in URL");const v=Math.round(Date.now()/1e3),g=parseInt(d);let y=v+g;h&&(y=parseInt(h));const A=y-v;A*1e3<=Tn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${A}s, should have been closer to ${g}s`);const P=y-g;v-P>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",P,y,v):v-P<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",P,y,v);const{data:E,error:k}=await this._getUser(a);if(k)throw k;const U={provider_token:r,provider_refresh_token:o,access_token:a,expires_in:g,expires_at:y,refresh_token:u,token_type:m,user:E.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:U,redirectType:e.type},error:null}}catch(r){if(he(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const n=await Ji(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{error:a};const u=(r=o.session)===null||r===void 0?void 0:r.access_token;if(u){const{error:d}=await this.admin.signOut(u,e);if(d&&!(t_(d)&&(d.status===404||d.status===401||d.status===403)))return{error:d}}return e!=="others"&&(await this._removeSession(),await xi(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const n=c_(),r={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(n)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async n=>{var r,o;try{const{data:{session:a},error:u}=n;if(u)throw u;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((o=this.stateChangeEmitters.get(e))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,n={}){let r=null,o=null;this.flowType==="pkce"&&([r,o]=await yn(this.storage,this.storageKey,!0));try{return await ye(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(he(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:n,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(he(n))return{data:null,error:n};throw n}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var n;try{const{data:r,error:o}=await this._useSession(async a=>{var u,d,h,m,v;const{data:g,error:y}=a;if(y)throw y;const A=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(u=e.options)===null||u===void 0?void 0:u.redirectTo,scopes:(d=e.options)===null||d===void 0?void 0:d.scopes,queryParams:(h=e.options)===null||h===void 0?void 0:h.queryParams,skipBrowserRedirect:!0});return await ye(this.fetch,"GET",A,{headers:this.headers,jwt:(v=(m=g.session)===null||m===void 0?void 0:m.access_token)!==null&&v!==void 0?v:void 0})});if(o)throw o;return kt()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(r==null?void 0:r.url),{data:{provider:e.provider,url:r==null?void 0:r.url},error:null}}catch(r){if(he(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async linkIdentityIdToken(e){return await this._useSession(async n=>{var r;try{const{error:o,data:{session:a}}=n;if(o)throw o;const{options:u,provider:d,token:h,access_token:m,nonce:v}=e,g=await ye(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(r=a==null?void 0:a.access_token)!==null&&r!==void 0?r:void 0,body:{provider:d,id_token:h,access_token:m,nonce:v,link_identity:!0,gotrue_meta_security:{captcha_token:u==null?void 0:u.captchaToken}},xform:Jt}),{data:y,error:A}=g;return A?{data:{user:null,session:null},error:A}:!y||!y.session||!y.user?{data:{user:null,session:null},error:new gn}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("USER_UPDATED",y.session)),{data:y,error:A})}catch(o){if(he(o))return{data:{user:null,session:null},error:o};throw o}})}async unlinkIdentity(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)throw u;return await ye(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(o=(r=a.session)===null||r===void 0?void 0:r.access_token)!==null&&o!==void 0?o:void 0})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _refreshAccessToken(e){const n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{const r=Date.now();return await p_(async o=>(o>0&&await f_(200*Math.pow(2,o-1)),this._debug(n,"refreshing attempt",o),await ye(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Jt})),(o,a)=>{const u=200*Math.pow(2,o);return a&&Eo(a)&&Date.now()+u-r<Tn})}catch(r){if(this._debug(n,"error",r),he(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(n,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,n){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",r),kt()&&!n.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,n;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const o=await Ji(this.storage,this.storageKey);if(o&&this.userStorage){let u=await Ji(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!u&&(u={user:o.user},await Pn(this.userStorage,this.storageKey+"-user",u)),o.user=(e=u==null?void 0:u.user)!==null&&e!==void 0?e:Oo()}else if(o&&!o.user&&!o.user){const u=await Ji(this.storage,this.storageKey+"-user");u&&(u!=null&&u.user)?(o.user=u.user,await xi(this.storage,this.storageKey+"-user"),await Pn(this.storage,this.storageKey,o)):o.user=Oo()}if(this._debug(r,"session from storage",o),!this._isValidSession(o)){this._debug(r,"session is not valid"),o!==null&&await this._removeSession();return}const a=((n=o.expires_at)!==null&&n!==void 0?n:1/0)*1e3-Date.now()<xo;if(this._debug(r,`session has${a?"":" not"} expired with margin of ${xo}s`),a){if(this.autoRefreshToken&&o.refresh_token){const{error:u}=await this._callRefreshToken(o.refresh_token);u&&(console.error(u),Eo(u)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",u),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:u,error:d}=await this._getUser(o.access_token);!d&&(u!=null&&u.user)?(o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(u){console.error("Error getting user data:",u),this._debug(r,"error getting user data, skipping SIGNED_IN notification",u)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(r,"error",o),console.error(o);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var n,r;if(!e)throw new Gt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Ur;const{data:a,error:u}=await this._refreshAccessToken(e);if(u)throw u;if(!a.session)throw new Gt;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const d={data:a.session,error:null};return this.refreshingDeferred.resolve(d),d}catch(a){if(this._debug(o,"error",a),he(a)){const u={data:null,error:a};return Eo(a)||await this._removeSession(),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(u),u}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(a),a}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(e,n,r=!0){const o=`#_notifyAllSubscribers(${e})`;this._debug(o,"begin",n,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:n});const a=[],u=Array.from(this.stateChangeEmitters.values()).map(async d=>{try{await d.callback(e,n)}catch(h){a.push(h)}});if(await Promise.all(u),a.length>0){for(let d=0;d<a.length;d+=1)console.error(a[d]);throw a[0]}}finally{this._debug(o,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const n=Object.assign({},e),r=n.user&&n.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&n.user&&await Pn(this.userStorage,this.storageKey+"-user",{user:n.user});const o=Object.assign({},n);delete o.user;const a=ku(o);await Pn(this.storage,this.storageKey,a)}else{const o=ku(n);await Pn(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await xi(this.storage,this.storageKey),await xi(this.storage,this.storageKey+"-code-verifier"),await xi(this.storage,this.storageKey+"-user"),this.userStorage&&await xi(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&kt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Tn);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async n=>{const{data:{session:r}}=n;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((r.expires_at*1e3-e)/Tn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Tn}ms, refresh threshold is ${Qo} ticks`),o<=Qo&&await this._callRefreshToken(r.refresh_token)})}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Ud)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,n,r){const o=[`provider=${encodeURIComponent(n)}`];if(r!=null&&r.redirectTo&&o.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r!=null&&r.scopes&&o.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[a,u]=await yn(this.storage,this.storageKey),d=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(u)}`});o.push(d.toString())}if(r!=null&&r.queryParams){const a=new URLSearchParams(r.queryParams);o.push(a.toString())}return r!=null&&r.skipBrowserRedirect&&o.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${o.join("&")}`}async _unenroll(e){try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;return a?{data:null,error:a}:await ye(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _enroll(e){try{return await this._useSession(async n=>{var r,o;const{data:a,error:u}=n;if(u)return{data:null,error:u};const d=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:h,error:m}=await ye(this.fetch,"POST",`${this.url}/factors`,{body:d,headers:this.headers,jwt:(r=a==null?void 0:a.session)===null||r===void 0?void 0:r.access_token});return m?{data:null,error:m}:(e.factorType==="totp"&&h.type==="totp"&&(!((o=h==null?void 0:h.totp)===null||o===void 0)&&o.qr_code)&&(h.totp.qr_code=`data:image/svg+xml;utf-8,${h.totp.qr_code}`),{data:h,error:null})})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?V_(e.webauthn.credential_response):H_(e.webauthn.credential_response)})}:{code:e.code}),{data:d,error:h}=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:u,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});return h?{data:null,error:h}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+d.expires_in},d)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",d),{data:d,error:h})})}catch(n){if(he(n))return{data:null,error:n};throw n}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async n=>{var r;const{data:o,error:a}=n;if(a)return{data:null,error:a};const u=await ye(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(r=o==null?void 0:o.session)===null||r===void 0?void 0:r.access_token});if(u.error)return u;const{data:d}=u;if(d.type!=="webauthn")return{data:d,error:null};switch(d.webauthn.type){case"create":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:z_(d.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},d),{webauthn:Object.assign(Object.assign({},d.webauthn),{credential_options:Object.assign(Object.assign({},d.webauthn.credential_options),{publicKey:q_(d.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(n){if(he(n))return{data:null,error:n};throw n}})}async _challengeAndVerify(e){const{data:n,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})}async _listFactors(){var e;const{data:{user:n},error:r}=await this.getUser();if(r)return{data:null,error:r};const o={all:[],phone:[],totp:[],webauthn:[]};for(const a of(e=n==null?void 0:n.factors)!==null&&e!==void 0?e:[])o.all.push(a),a.status==="verified"&&o[a.factor_type].push(a);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var e,n;const{data:{session:r},error:o}=await this.getSession();if(o)return{data:null,error:o};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Lo(r.access_token);let u=null;a.aal&&(u=a.aal);let d=u;((n=(e=r.user.factors)===null||e===void 0?void 0:e.filter(v=>v.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const m=a.amr||[];return{data:{currentLevel:u,nextLevel:d,currentAuthenticationMethods:m},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async n=>{const{data:{session:r},error:o}=n;return o?{data:null,error:o}:r?await ye(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:a=>({data:a,error:null})}):{data:null,error:new Gt}})}catch(n){if(he(n))return{data:null,error:n};throw n}}async _approveAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Gt};const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(he(r))return{data:null,error:r};throw r}}async _denyAuthorization(e,n){try{return await this._useSession(async r=>{const{data:{session:o},error:a}=r;if(a)return{data:null,error:a};if(!o)return{data:null,error:new Gt};const u=await ye(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:d=>({data:d,error:null})});return u.data&&u.data.redirect_url&&kt()&&!(n!=null&&n.skipBrowserRedirect)&&window.location.assign(u.data.redirect_url),u})}catch(r){if(he(r))return{data:null,error:r};throw r}}async fetchJwk(e,n={keys:[]}){let r=n.keys.find(d=>d.kid===e);if(r)return r;const o=Date.now();if(r=this.jwks.keys.find(d=>d.kid===e),r&&this.jwks_cached_at+Qv>o)return r;const{data:a,error:u}=await ye(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(u)throw u;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=o,r=a.keys.find(d=>d.kid===e),!r)?null:r}async getClaims(e,n={}){try{let r=e;if(!r){const{data:A,error:P}=await this.getSession();if(P||!A.session)return{data:null,error:P};r=A.session.access_token}const{header:o,payload:a,signature:u,raw:{header:d,payload:h}}=Lo(r);n!=null&&n.allowExpired||w_(a.exp);const m=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,n!=null&&n.keys?{keys:n.keys}:n==null?void 0:n.jwks);if(!m){const{error:A}=await this.getUser(r);if(A)throw A;return{data:{claims:a,header:o,signature:u},error:null}}const v=S_(o.alg),g=await crypto.subtle.importKey("jwk",m,v,!0,["verify"]);if(!await crypto.subtle.verify(v,g,u,l_(`${d}.${h}`)))throw new ia("Invalid JWT signature");return{data:{claims:a,header:o,signature:u},error:null}}catch(r){if(he(r))return{data:null,error:r};throw r}}}Ts.nextInstanceID=0;const eg=Ts;class tg extends eg{constructor(e){super(e)}}class ig{constructor(e,n,r){var o,a,u;this.supabaseUrl=e,this.supabaseKey=n;const d=Wv(e);if(!n)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",d),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",d),this.storageUrl=new URL("storage/v1",d),this.functionsUrl=new URL("functions/v1",d);const h=`sb-${d.hostname.split(".")[0]}-auth-token`,m={db:Bv,realtime:zv,auth:Object.assign(Object.assign({},Fv),{storageKey:h}),global:Uv},v=Kv(r??{},m);this.storageKey=(o=v.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(a=v.global.headers)!==null&&a!==void 0?a:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(g,y)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(y)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((u=v.auth)!==null&&u!==void 0?u:{},this.headers,v.global.fetch),this.fetch=Hv(n,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new Gm(new URL("rest/v1",d).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new $v(this.storageUrl.href,this.headers,this.fetch,r==null?void 0:r.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new Um(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,n={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,n,r)}channel(e,n={config:{}}){return this.realtime.channel(e,n)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,n;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return(n=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&n!==void 0?n:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,storageKey:u,flowType:d,lock:h,debug:m},v,g){const y={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new tg({url:this.authUrl.href,headers:Object.assign(Object.assign({},y),v),storageKey:u,autoRefreshToken:e,persistSession:n,detectSessionInUrl:r,storage:o,userStorage:a,flowType:d,lock:h,debug:m,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(A=>A.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new hv(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r==null?void 0:r.access_token)})}_handleTokenChanged(e,n,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?(this.changedAccessToken=r,this.realtime.setAuth(r)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),n=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const ng=(i,e,n)=>new ig(i,e,n);function sg(){if(typeof window<"u"||typeof process>"u")return!1;const i=process.version;if(i==null)return!1;const e=i.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sg()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const rg="https://mxcmguifgtbgcjiezqot.supabase.co",og="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im14Y21ndWlmZ3RiZ2NqaWV6cW90Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDMwMjAsImV4cCI6MjA3Nzc3OTAyMH0.s3voAwQsXQewcCIdMRzkuqQuncUAosBhmli3DVbCR8g",yt=ng(rg,og),vt=se(null),lr=se(!0),An=se(!1);function Os(){return{user:vt,loading:lr,isAdmin:An,checkUser:async(u=2e3)=>{var g;lr.value=!0;const d=Date.now(),{data:{session:h}}=await yt.auth.getSession();vt.value=(h==null?void 0:h.user)||null,vt.value&&(An.value=((g=vt.value.user_metadata)==null?void 0:g.role)==="admin"||vt.value.email==="admin@fueldock.ee"||vt.value.email==="uve.mae@gmail.com");const m=Date.now()-d,v=Math.max(0,u-m);await new Promise(y=>setTimeout(y,v)),lr.value=!1},signUp:async(u,d)=>{const{data:h,error:m}=await yt.auth.signUp({email:u,password:d,options:{emailRedirectTo:window.location.origin}});if(m)throw m;return h},signIn:async(u,d)=>{var v;const{data:h,error:m}=await yt.auth.signInWithPassword({email:u,password:d});if(m)throw m;return vt.value=h.user,vt.value&&(An.value=((v=vt.value.user_metadata)==null?void 0:v.role)==="admin"||vt.value.email==="admin@fueldock.ee"||vt.value.email==="uve.mae@gmail.com"),h},signOut:async()=>{const{error:u}=await yt.auth.signOut();if(u)throw u;vt.value=null,An.value=!1},resetPassword:async u=>{const{error:d}=await yt.auth.resetPasswordForEmail(u,{redirectTo:`${window.location.origin}/reset-password`});if(d)throw d},initAuthListener:()=>{yt.auth.onAuthStateChange((u,d)=>{var h;vt.value=(d==null?void 0:d.user)||null,vt.value?An.value=((h=vt.value.user_metadata)==null?void 0:h.role)==="admin"||vt.value.email==="admin@fueldock.ee"||vt.value.email==="uve.mae@gmail.com":An.value=!1,lr.value=!1})}}}const Ui=(i,e)=>{const n=i.__vccOpts||i;for(const[r,o]of e)n[r]=o;return n},ag={class:"login-container"},lg={class:"login-card"},ug={class:"mode-tabs"},cg={class:"form-group"},dg={class:"form-group"},hg=["disabled"],fg={class:"form-group"},pg={class:"form-group"},mg={class:"form-group"},vg=["disabled"],_g={class:"form-group"},gg=["disabled"],yg={key:3,class:"message error-message"},bg={key:4,class:"message success-message"},wg={__name:"LoginScreen",emits:["guest-mode"],setup(i,{emit:e}){const n=e,{signIn:r,signUp:o,resetPassword:a}=Os(),u=se("login"),d=se(""),h=se(""),m=se(""),v=se(!1),g=se(""),y=se("");async function A(){if(g.value="",y.value="",!d.value||!h.value){g.value="Please fill in all fields";return}v.value=!0;try{await r(d.value,h.value)}catch(U){g.value=U.message||"Login failed. Please check your credentials."}finally{v.value=!1}}async function P(){if(g.value="",y.value="",!d.value||!h.value||!m.value){g.value="Please fill in all fields";return}if(h.value!==m.value){g.value="Passwords do not match";return}if(h.value.length<6){g.value="Password must be at least 6 characters";return}v.value=!0;try{await o(d.value,h.value),y.value="Account created! Please check your email to confirm your account.",d.value="",h.value="",m.value="",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(U){g.value=U.message||"Signup failed. Please try again."}finally{v.value=!1}}async function E(){if(g.value="",y.value="",!d.value){g.value="Please enter your email address";return}v.value=!0;try{await a(d.value),y.value="Password reset link sent! Check your email.",setTimeout(()=>{u.value="login",y.value=""},3e3)}catch(U){g.value=U.message||"Failed to send reset link."}finally{v.value=!1}}function k(){n("guest-mode")}return(U,D)=>(H(),G("div",ag,[p("div",lg,[D[18]||(D[18]=p("div",{class:"logo-section"},[p("img",{src:qo,alt:"FuelDock",class:"logo"}),p("h1",null,"FuelDock Estonia"),p("p",{class:"tagline"},"Marina Fuel Station Locator")],-1)),p("div",ug,[p("button",{class:Je({active:u.value==="login"}),onClick:D[0]||(D[0]=M=>u.value="login")}," Login ",2),p("button",{class:Je({active:u.value==="signup"}),onClick:D[1]||(D[1]=M=>u.value="signup")}," Sign Up ",2)]),u.value==="login"?(H(),G("form",{key:0,onSubmit:Mt(A,["prevent"]),class:"auth-form"},[p("div",cg,[D[10]||(D[10]=p("label",null,"Email",-1)),be(p("input",{"onUpdate:modelValue":D[2]||(D[2]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[ot,d.value]])]),p("div",dg,[D[11]||(D[11]=p("label",null,"Password",-1)),be(p("input",{"onUpdate:modelValue":D[3]||(D[3]=M=>h.value=M),type:"password",placeholder:"",required:"",autocomplete:"current-password"},null,512),[[ot,h.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},ee(v.value?"Logging in...":"Login"),9,hg),p("button",{type:"button",onClick:D[4]||(D[4]=M=>u.value="forgot"),class:"link-btn"}," Forgot password? ")],32)):oe("",!0),u.value==="signup"?(H(),G("form",{key:1,onSubmit:Mt(P,["prevent"]),class:"auth-form"},[p("div",fg,[D[12]||(D[12]=p("label",null,"Email",-1)),be(p("input",{"onUpdate:modelValue":D[5]||(D[5]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:"",autocomplete:"email"},null,512),[[ot,d.value]])]),p("div",pg,[D[13]||(D[13]=p("label",null,"Password",-1)),be(p("input",{"onUpdate:modelValue":D[6]||(D[6]=M=>h.value=M),type:"password",placeholder:"",required:"",autocomplete:"new-password",minlength:"6"},null,512),[[ot,h.value]])]),p("div",mg,[D[14]||(D[14]=p("label",null,"Confirm Password",-1)),be(p("input",{"onUpdate:modelValue":D[7]||(D[7]=M=>m.value=M),type:"password",placeholder:"",required:"",autocomplete:"new-password"},null,512),[[ot,m.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},ee(v.value?"Creating account...":"Create Account"),9,vg),D[15]||(D[15]=p("p",{class:"info-text"}," You'll receive a confirmation email to activate your account. ",-1))],32)):oe("",!0),u.value==="forgot"?(H(),G("form",{key:2,onSubmit:Mt(E,["prevent"]),class:"auth-form"},[p("div",_g,[D[16]||(D[16]=p("label",null,"Email",-1)),be(p("input",{"onUpdate:modelValue":D[8]||(D[8]=M=>d.value=M),type:"email",placeholder:"your@email.com",required:""},null,512),[[ot,d.value]])]),p("button",{type:"submit",class:"submit-btn",disabled:v.value},ee(v.value?"Sending...":"Send Reset Link"),9,gg),p("button",{type:"button",onClick:D[9]||(D[9]=M=>u.value="login"),class:"link-btn"}," Back to Login ")],32)):oe("",!0),g.value?(H(),G("div",yg,ee(g.value),1)):oe("",!0),y.value?(H(),G("div",bg,ee(y.value),1)):oe("",!0),p("div",{class:"guest-section"},[p("button",{onClick:k,class:"guest-btn"}," Continue as Guest "),D[17]||(D[17]=p("p",{class:"guest-info"}," Limited view: See marina locations only ",-1))])])]))}},Sg=Ui(wg,[["__scopeId","data-v-e2058a05"]]);var na={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(i,e){(function(n,r){r(e)})(Bm,function(n){var r="1.9.4";function o(t){var s,l,c,f;for(l=1,c=arguments.length;l<c;l++){f=arguments[l];for(s in f)t[s]=f[s]}return t}var a=Object.create||function(){function t(){}return function(s){return t.prototype=s,new t}}();function u(t,s){var l=Array.prototype.slice;if(t.bind)return t.bind.apply(t,l.call(arguments,1));var c=l.call(arguments,2);return function(){return t.apply(s,c.length?c.concat(l.call(arguments)):arguments)}}var d=0;function h(t){return"_leaflet_id"in t||(t._leaflet_id=++d),t._leaflet_id}function m(t,s,l){var c,f,_,S;return S=function(){c=!1,f&&(_.apply(l,f),f=!1)},_=function(){c?f=arguments:(t.apply(l,arguments),setTimeout(S,s),c=!0)},_}function v(t,s,l){var c=s[1],f=s[0],_=c-f;return t===c&&l?t:((t-f)%_+_)%_+f}function g(){return!1}function y(t,s){if(s===!1)return t;var l=Math.pow(10,s===void 0?6:s);return Math.round(t*l)/l}function A(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function P(t){return A(t).split(/\s+/)}function E(t,s){Object.prototype.hasOwnProperty.call(t,"options")||(t.options=t.options?a(t.options):{});for(var l in s)t.options[l]=s[l];return t.options}function k(t,s,l){var c=[];for(var f in t)c.push(encodeURIComponent(l?f.toUpperCase():f)+"="+encodeURIComponent(t[f]));return(!s||s.indexOf("?")===-1?"?":"&")+c.join("&")}var U=/\{ *([\w_ -]+) *\}/g;function D(t,s){return t.replace(U,function(l,c){var f=s[c];if(f===void 0)throw new Error("No value provided for variable "+l);return typeof f=="function"&&(f=f(s)),f})}var M=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};function B(t,s){for(var l=0;l<t.length;l++)if(t[l]===s)return l;return-1}var ue="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function le(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}var ge=0;function Ee(t){var s=+new Date,l=Math.max(0,16-(s-ge));return ge=s+l,window.setTimeout(t,l)}var Le=window.requestAnimationFrame||le("RequestAnimationFrame")||Ee,V=window.cancelAnimationFrame||le("CancelAnimationFrame")||le("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)};function x(t,s,l){if(l&&Le===Ee)t.call(s);else return Le.call(window,u(t,s))}function W(t){t&&V.call(window,t)}var re={__proto__:null,extend:o,create:a,bind:u,get lastId(){return d},stamp:h,throttle:m,wrapNum:v,falseFn:g,formatNum:y,trim:A,splitWords:P,setOptions:E,getParamString:k,template:D,isArray:M,indexOf:B,emptyImageUrl:ue,requestFn:Le,cancelFn:V,requestAnimFrame:x,cancelAnimFrame:W};function N(){}N.extend=function(t){var s=function(){E(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},l=s.__super__=this.prototype,c=a(l);c.constructor=s,s.prototype=c;for(var f in this)Object.prototype.hasOwnProperty.call(this,f)&&f!=="prototype"&&f!=="__super__"&&(s[f]=this[f]);return t.statics&&o(s,t.statics),t.includes&&(R(t.includes),o.apply(null,[c].concat(t.includes))),o(c,t),delete c.statics,delete c.includes,c.options&&(c.options=l.options?a(l.options):{},o(c.options,t.options)),c._initHooks=[],c.callInitHooks=function(){if(!this._initHooksCalled){l.callInitHooks&&l.callInitHooks.call(this),this._initHooksCalled=!0;for(var _=0,S=c._initHooks.length;_<S;_++)c._initHooks[_].call(this)}},s},N.include=function(t){var s=this.prototype.options;return o(this.prototype,t),t.options&&(this.prototype.options=s,this.mergeOptions(t.options)),this},N.mergeOptions=function(t){return o(this.prototype.options,t),this},N.addInitHook=function(t){var s=Array.prototype.slice.call(arguments,1),l=typeof t=="function"?t:function(){this[t].apply(this,s)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(l),this};function R(t){if(!(typeof L>"u"||!L||!L.Mixin)){t=M(t)?t:[t];for(var s=0;s<t.length;s++)t[s]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var J={on:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l)}return this},off:function(t,s,l){if(!arguments.length)delete this._events;else if(typeof t=="object")for(var c in t)this._off(c,t[c],s);else{t=P(t);for(var f=arguments.length===1,_=0,S=t.length;_<S;_++)f?this._off(t[_]):this._off(t[_],s,l)}return this},_on:function(t,s,l,c){if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}if(this._listens(t,s,l)===!1){l===this&&(l=void 0);var f={fn:s,ctx:l};c&&(f.once=!0),this._events=this._events||{},this._events[t]=this._events[t]||[],this._events[t].push(f)}},_off:function(t,s,l){var c,f,_;if(this._events&&(c=this._events[t],!!c)){if(arguments.length===1){if(this._firingCount)for(f=0,_=c.length;f<_;f++)c[f].fn=g;delete this._events[t];return}if(typeof s!="function"){console.warn("wrong listener type: "+typeof s);return}var S=this._listens(t,s,l);if(S!==!1){var O=c[S];this._firingCount&&(O.fn=g,this._events[t]=c=c.slice()),c.splice(S,1)}}},fire:function(t,s,l){if(!this.listens(t,l))return this;var c=o({},s,{type:t,target:this,sourceTarget:s&&s.sourceTarget||this});if(this._events){var f=this._events[t];if(f){this._firingCount=this._firingCount+1||1;for(var _=0,S=f.length;_<S;_++){var O=f[_],I=O.fn;O.once&&this.off(t,I,O.ctx),I.call(O.ctx||this,c)}this._firingCount--}}return l&&this._propagateEvent(c),this},listens:function(t,s,l,c){typeof t!="string"&&console.warn('"string" type argument expected');var f=s;typeof s!="function"&&(c=!!s,f=void 0,l=void 0);var _=this._events&&this._events[t];if(_&&_.length&&this._listens(t,f,l)!==!1)return!0;if(c){for(var S in this._eventParents)if(this._eventParents[S].listens(t,s,l,c))return!0}return!1},_listens:function(t,s,l){if(!this._events)return!1;var c=this._events[t]||[];if(!s)return!!c.length;l===this&&(l=void 0);for(var f=0,_=c.length;f<_;f++)if(c[f].fn===s&&c[f].ctx===l)return f;return!1},once:function(t,s,l){if(typeof t=="object")for(var c in t)this._on(c,t[c],s,!0);else{t=P(t);for(var f=0,_=t.length;f<_;f++)this._on(t[f],s,l,!0)}return this},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[h(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[h(t)],this},_propagateEvent:function(t){for(var s in this._eventParents)this._eventParents[s].fire(t.type,o({layer:t.target,propagatedFrom:t.target},t),!0)}};J.addEventListener=J.on,J.removeEventListener=J.clearAllEventListeners=J.off,J.addOneTimeEventListener=J.once,J.fireEvent=J.fire,J.hasEventListeners=J.listens;var Ae=N.extend(J);function te(t,s,l){this.x=l?Math.round(t):t,this.y=l?Math.round(s):s}var ft=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};te.prototype={clone:function(){return new te(this.x,this.y)},add:function(t){return this.clone()._add(pe(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(pe(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new te(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new te(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=ft(this.x),this.y=ft(this.y),this},distanceTo:function(t){t=pe(t);var s=t.x-this.x,l=t.y-this.y;return Math.sqrt(s*s+l*l)},equals:function(t){return t=pe(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=pe(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function pe(t,s,l){return t instanceof te?t:M(t)?new te(t[0],t[1]):t==null?t:typeof t=="object"&&"x"in t&&"y"in t?new te(t.x,t.y):new te(t,s,l)}function $e(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}$e.prototype={extend:function(t){var s,l;if(!t)return this;if(t instanceof te||typeof t[0]=="number"||"x"in t)s=l=pe(t);else if(t=qe(t),s=t.min,l=t.max,!s||!l)return this;return!this.min&&!this.max?(this.min=s.clone(),this.max=l.clone()):(this.min.x=Math.min(s.x,this.min.x),this.max.x=Math.max(l.x,this.max.x),this.min.y=Math.min(s.y,this.min.y),this.max.y=Math.max(l.y,this.max.y)),this},getCenter:function(t){return pe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return pe(this.min.x,this.max.y)},getTopRight:function(){return pe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var s,l;return typeof t[0]=="number"||t instanceof te?t=pe(t):t=qe(t),t instanceof $e?(s=t.min,l=t.max):s=l=t,s.x>=this.min.x&&l.x<=this.max.x&&s.y>=this.min.y&&l.y<=this.max.y},intersects:function(t){t=qe(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>=s.x&&c.x<=l.x,S=f.y>=s.y&&c.y<=l.y;return _&&S},overlaps:function(t){t=qe(t);var s=this.min,l=this.max,c=t.min,f=t.max,_=f.x>s.x&&c.x<l.x,S=f.y>s.y&&c.y<l.y;return _&&S},isValid:function(){return!!(this.min&&this.max)},pad:function(t){var s=this.min,l=this.max,c=Math.abs(s.x-l.x)*t,f=Math.abs(s.y-l.y)*t;return qe(pe(s.x-c,s.y-f),pe(l.x+c,l.y+f))},equals:function(t){return t?(t=qe(t),this.min.equals(t.getTopLeft())&&this.max.equals(t.getBottomRight())):!1}};function qe(t,s){return!t||t instanceof $e?t:new $e(t,s)}function lt(t,s){if(t)for(var l=s?[t,s]:t,c=0,f=l.length;c<f;c++)this.extend(l[c])}lt.prototype={extend:function(t){var s=this._southWest,l=this._northEast,c,f;if(t instanceof Me)c=t,f=t;else if(t instanceof lt){if(c=t._southWest,f=t._northEast,!c||!f)return this}else return t?this.extend(we(t)||Ye(t)):this;return!s&&!l?(this._southWest=new Me(c.lat,c.lng),this._northEast=new Me(f.lat,f.lng)):(s.lat=Math.min(c.lat,s.lat),s.lng=Math.min(c.lng,s.lng),l.lat=Math.max(f.lat,l.lat),l.lng=Math.max(f.lng,l.lng)),this},pad:function(t){var s=this._southWest,l=this._northEast,c=Math.abs(s.lat-l.lat)*t,f=Math.abs(s.lng-l.lng)*t;return new lt(new Me(s.lat-c,s.lng-f),new Me(l.lat+c,l.lng+f))},getCenter:function(){return new Me((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Me(this.getNorth(),this.getWest())},getSouthEast:function(){return new Me(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){typeof t[0]=="number"||t instanceof Me||"lat"in t?t=we(t):t=Ye(t);var s=this._southWest,l=this._northEast,c,f;return t instanceof lt?(c=t.getSouthWest(),f=t.getNorthEast()):c=f=t,c.lat>=s.lat&&f.lat<=l.lat&&c.lng>=s.lng&&f.lng<=l.lng},intersects:function(t){t=Ye(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>=s.lat&&c.lat<=l.lat,S=f.lng>=s.lng&&c.lng<=l.lng;return _&&S},overlaps:function(t){t=Ye(t);var s=this._southWest,l=this._northEast,c=t.getSouthWest(),f=t.getNorthEast(),_=f.lat>s.lat&&c.lat<l.lat,S=f.lng>s.lng&&c.lng<l.lng;return _&&S},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,s){return t?(t=Ye(t),this._southWest.equals(t.getSouthWest(),s)&&this._northEast.equals(t.getNorthEast(),s)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ye(t,s){return t instanceof lt?t:new lt(t,s)}function Me(t,s,l){if(isNaN(t)||isNaN(s))throw new Error("Invalid LatLng object: ("+t+", "+s+")");this.lat=+t,this.lng=+s,l!==void 0&&(this.alt=+l)}Me.prototype={equals:function(t,s){if(!t)return!1;t=we(t);var l=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return l<=(s===void 0?1e-9:s)},toString:function(t){return"LatLng("+y(this.lat,t)+", "+y(this.lng,t)+")"},distanceTo:function(t){return Lt.distance(this,we(t))},wrap:function(){return Lt.wrapLatLng(this)},toBounds:function(t){var s=180*t/40075017,l=s/Math.cos(Math.PI/180*this.lat);return Ye([this.lat-s,this.lng-l],[this.lat+s,this.lng+l])},clone:function(){return new Me(this.lat,this.lng,this.alt)}};function we(t,s,l){return t instanceof Me?t:M(t)&&typeof t[0]!="object"?t.length===3?new Me(t[0],t[1],t[2]):t.length===2?new Me(t[0],t[1]):null:t==null?t:typeof t=="object"&&"lat"in t?new Me(t.lat,"lng"in t?t.lng:t.lon,t.alt):s===void 0?null:new Me(t,s,l)}var pt={latLngToPoint:function(t,s){var l=this.projection.project(t),c=this.scale(s);return this.transformation._transform(l,c)},pointToLatLng:function(t,s){var l=this.scale(s),c=this.transformation.untransform(t,l);return this.projection.unproject(c)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var s=this.projection.bounds,l=this.scale(t),c=this.transformation.transform(s.min,l),f=this.transformation.transform(s.max,l);return new $e(c,f)},infinite:!1,wrapLatLng:function(t){var s=this.wrapLng?v(t.lng,this.wrapLng,!0):t.lng,l=this.wrapLat?v(t.lat,this.wrapLat,!0):t.lat,c=t.alt;return new Me(l,s,c)},wrapLatLngBounds:function(t){var s=t.getCenter(),l=this.wrapLatLng(s),c=s.lat-l.lat,f=s.lng-l.lng;if(c===0&&f===0)return t;var _=t.getSouthWest(),S=t.getNorthEast(),O=new Me(_.lat-c,_.lng-f),I=new Me(S.lat-c,S.lng-f);return new lt(O,I)}},Lt=o({},pt,{wrapLng:[-180,180],R:6371e3,distance:function(t,s){var l=Math.PI/180,c=t.lat*l,f=s.lat*l,_=Math.sin((s.lat-t.lat)*l/2),S=Math.sin((s.lng-t.lng)*l/2),O=_*_+Math.cos(c)*Math.cos(f)*S*S,I=2*Math.atan2(Math.sqrt(O),Math.sqrt(1-O));return this.R*I}}),Bi=6378137,Ht={R:Bi,MAX_LATITUDE:85.0511287798,project:function(t){var s=Math.PI/180,l=this.MAX_LATITUDE,c=Math.max(Math.min(l,t.lat),-l),f=Math.sin(c*s);return new te(this.R*t.lng*s,this.R*Math.log((1+f)/(1-f))/2)},unproject:function(t){var s=180/Math.PI;return new Me((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*s,t.x*s/this.R)},bounds:function(){var t=Bi*Math.PI;return new $e([-t,-t],[t,t])}()};function an(t,s,l,c){if(M(t)){this._a=t[0],this._b=t[1],this._c=t[2],this._d=t[3];return}this._a=t,this._b=s,this._c=l,this._d=c}an.prototype={transform:function(t,s){return this._transform(t.clone(),s)},_transform:function(t,s){return s=s||1,t.x=s*(this._a*t.x+this._b),t.y=s*(this._c*t.y+this._d),t},untransform:function(t,s){return s=s||1,new te((t.x/s-this._b)/this._a,(t.y/s-this._d)/this._c)}};function b(t,s,l,c){return new an(t,s,l,c)}var T=o({},Lt,{code:"EPSG:3857",projection:Ht,transformation:function(){var t=.5/(Math.PI*Ht.R);return b(t,.5,-t,.5)}()}),$=o({},T,{code:"EPSG:900913"});function K(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function F(t,s){var l="",c,f,_,S,O,I;for(c=0,_=t.length;c<_;c++){for(O=t[c],f=0,S=O.length;f<S;f++)I=O[f],l+=(f?"L":"M")+I.x+" "+I.y;l+=s?de.svg?"z":"x":""}return l||"M0 0"}var z=document.documentElement.style,X="ActiveXObject"in window,Q=X&&!document.addEventListener,Y="msLaunchUri"in navigator&&!("documentMode"in document),Z=ii("webkit"),fe=ii("android"),ie=ii("android 2")||ii("android 3"),ce=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),me=fe&&ii("Google")&&ce<537&&!("AudioNode"in window),Te=!!window.opera,Ue=!Y&&ii("chrome"),Ie=ii("gecko")&&!Z&&!Te&&!X,C=!Ue&&ii("safari"),w=ii("phantom"),j="OTransition"in z,Pe=navigator.platform.indexOf("Win")===0,et=X&&"transition"in z,De="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ie,je="MozPerspective"in z,Oe=!window.L_DISABLE_3D&&(et||De||je)&&!j&&!w,ze=typeof orientation<"u"||ii("mobile"),ct=ze&&Z,It=ze&&De,Fi=!window.PointerEvent&&window.MSPointerEvent,Vn=!!(window.PointerEvent||Fi),Cs="ontouchstart"in window||!!window.TouchEvent,qd=!window.L_NO_TOUCH&&(Cs||Vn),Vd=ze&&Te,Hd=ze&&Ie,Zd=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Kd=function(){var t=!1;try{var s=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("testPassiveEventSupport",g,s),window.removeEventListener("testPassiveEventSupport",g,s)}catch{}return t}(),Wd=function(){return!!document.createElement("canvas").getContext}(),Br=!!(document.createElementNS&&K("svg").createSVGRect),Gd=!!Br&&function(){var t=document.createElement("div");return t.innerHTML="<svg/>",(t.firstChild&&t.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Jd=!Br&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var s=t.firstChild;return s.style.behavior="url(#default#VML)",s&&typeof s.adj=="object"}catch{return!1}}(),Yd=navigator.platform.indexOf("Mac")===0,Xd=navigator.platform.indexOf("Linux")===0;function ii(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}var de={ie:X,ielt9:Q,edge:Y,webkit:Z,android:fe,android23:ie,androidStock:me,opera:Te,chrome:Ue,gecko:Ie,safari:C,phantom:w,opera12:j,win:Pe,ie3d:et,webkit3d:De,gecko3d:je,any3d:Oe,mobile:ze,mobileWebkit:ct,mobileWebkit3d:It,msPointer:Fi,pointer:Vn,touch:qd,touchNative:Cs,mobileOpera:Vd,mobileGecko:Hd,retina:Zd,passiveEvents:Kd,canvas:Wd,svg:Br,vml:Jd,inlineSvg:Gd,mac:Yd,linux:Xd},Ca=de.msPointer?"MSPointerDown":"pointerdown",Ma=de.msPointer?"MSPointerMove":"pointermove",Ia=de.msPointer?"MSPointerUp":"pointerup",Da=de.msPointer?"MSPointerCancel":"pointercancel",Fr={touchstart:Ca,touchmove:Ma,touchend:Ia,touchcancel:Da},Ra={touchstart:sh,touchmove:Ms,touchend:Ms,touchcancel:Ms},ln={},$a=!1;function Qd(t,s,l){return s==="touchstart"&&nh(),Ra[s]?(l=Ra[s].bind(this,l),t.addEventListener(Fr[s],l,!1),l):(console.warn("wrong event specified:",s),g)}function eh(t,s,l){if(!Fr[s]){console.warn("wrong event specified:",s);return}t.removeEventListener(Fr[s],l,!1)}function th(t){ln[t.pointerId]=t}function ih(t){ln[t.pointerId]&&(ln[t.pointerId]=t)}function ja(t){delete ln[t.pointerId]}function nh(){$a||(document.addEventListener(Ca,th,!0),document.addEventListener(Ma,ih,!0),document.addEventListener(Ia,ja,!0),document.addEventListener(Da,ja,!0),$a=!0)}function Ms(t,s){if(s.pointerType!==(s.MSPOINTER_TYPE_MOUSE||"mouse")){s.touches=[];for(var l in ln)s.touches.push(ln[l]);s.changedTouches=[s],t(s)}}function sh(t,s){s.MSPOINTER_TYPE_TOUCH&&s.pointerType===s.MSPOINTER_TYPE_TOUCH&&mt(s),Ms(t,s)}function rh(t){var s={},l,c;for(c in t)l=t[c],s[c]=l&&l.bind?l.bind(t):l;return t=s,s.type="dblclick",s.detail=2,s.isTrusted=!1,s._simulated=!0,s}var oh=200;function ah(t,s){t.addEventListener("dblclick",s);var l=0,c;function f(_){if(_.detail!==1){c=_.detail;return}if(!(_.pointerType==="mouse"||_.sourceCapabilities&&!_.sourceCapabilities.firesTouchEvents)){var S=za(_);if(!(S.some(function(I){return I instanceof HTMLLabelElement&&I.attributes.for})&&!S.some(function(I){return I instanceof HTMLInputElement||I instanceof HTMLSelectElement}))){var O=Date.now();O-l<=oh?(c++,c===2&&s(rh(_))):c=1,l=O}}}return t.addEventListener("click",f),{dblclick:s,simDblclick:f}}function lh(t,s){t.removeEventListener("dblclick",s.dblclick),t.removeEventListener("click",s.simDblclick)}var zr=Rs(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Hn=Rs(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Na=Hn==="webkitTransition"||Hn==="OTransition"?Hn+"End":"transitionend";function Ua(t){return typeof t=="string"?document.getElementById(t):t}function Zn(t,s){var l=t.style[s]||t.currentStyle&&t.currentStyle[s];if((!l||l==="auto")&&document.defaultView){var c=document.defaultView.getComputedStyle(t,null);l=c?c[s]:null}return l==="auto"?null:l}function Ne(t,s,l){var c=document.createElement(t);return c.className=s||"",l&&l.appendChild(c),c}function Xe(t){var s=t.parentNode;s&&s.removeChild(t)}function Is(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function un(t){var s=t.parentNode;s&&s.lastChild!==t&&s.appendChild(t)}function cn(t){var s=t.parentNode;s&&s.firstChild!==t&&s.insertBefore(t,s.firstChild)}function qr(t,s){if(t.classList!==void 0)return t.classList.contains(s);var l=Ds(t);return l.length>0&&new RegExp("(^|\\s)"+s+"(\\s|$)").test(l)}function xe(t,s){if(t.classList!==void 0)for(var l=P(s),c=0,f=l.length;c<f;c++)t.classList.add(l[c]);else if(!qr(t,s)){var _=Ds(t);Vr(t,(_?_+" ":"")+s)}}function tt(t,s){t.classList!==void 0?t.classList.remove(s):Vr(t,A((" "+Ds(t)+" ").replace(" "+s+" "," ")))}function Vr(t,s){t.className.baseVal===void 0?t.className=s:t.className.baseVal=s}function Ds(t){return t.correspondingElement&&(t=t.correspondingElement),t.className.baseVal===void 0?t.className:t.className.baseVal}function Ut(t,s){"opacity"in t.style?t.style.opacity=s:"filter"in t.style&&uh(t,s)}function uh(t,s){var l=!1,c="DXImageTransform.Microsoft.Alpha";try{l=t.filters.item(c)}catch{if(s===1)return}s=Math.round(s*100),l?(l.Enabled=s!==100,l.Opacity=s):t.style.filter+=" progid:"+c+"(opacity="+s+")"}function Rs(t){for(var s=document.documentElement.style,l=0;l<t.length;l++)if(t[l]in s)return t[l];return!1}function zi(t,s,l){var c=s||new te(0,0);t.style[zr]=(de.ie3d?"translate("+c.x+"px,"+c.y+"px)":"translate3d("+c.x+"px,"+c.y+"px,0)")+(l?" scale("+l+")":"")}function nt(t,s){t._leaflet_pos=s,de.any3d?zi(t,s):(t.style.left=s.x+"px",t.style.top=s.y+"px")}function qi(t){return t._leaflet_pos||new te(0,0)}var Kn,Wn,Hr;if("onselectstart"in document)Kn=function(){Se(window,"selectstart",mt)},Wn=function(){He(window,"selectstart",mt)};else{var Gn=Rs(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Kn=function(){if(Gn){var t=document.documentElement.style;Hr=t[Gn],t[Gn]="none"}},Wn=function(){Gn&&(document.documentElement.style[Gn]=Hr,Hr=void 0)}}function Zr(){Se(window,"dragstart",mt)}function Kr(){He(window,"dragstart",mt)}var $s,Wr;function Gr(t){for(;t.tabIndex===-1;)t=t.parentNode;t.style&&(js(),$s=t,Wr=t.style.outlineStyle,t.style.outlineStyle="none",Se(window,"keydown",js))}function js(){$s&&($s.style.outlineStyle=Wr,$s=void 0,Wr=void 0,He(window,"keydown",js))}function Ba(t){do t=t.parentNode;while((!t.offsetWidth||!t.offsetHeight)&&t!==document.body);return t}function Jr(t){var s=t.getBoundingClientRect();return{x:s.width/t.offsetWidth||1,y:s.height/t.offsetHeight||1,boundingClientRect:s}}var ch={__proto__:null,TRANSFORM:zr,TRANSITION:Hn,TRANSITION_END:Na,get:Ua,getStyle:Zn,create:Ne,remove:Xe,empty:Is,toFront:un,toBack:cn,hasClass:qr,addClass:xe,removeClass:tt,setClass:Vr,getClass:Ds,setOpacity:Ut,testProp:Rs,setTransform:zi,setPosition:nt,getPosition:qi,get disableTextSelection(){return Kn},get enableTextSelection(){return Wn},disableImageDrag:Zr,enableImageDrag:Kr,preventOutline:Gr,restoreOutline:js,getSizedParentNode:Ba,getScale:Jr};function Se(t,s,l,c){if(s&&typeof s=="object")for(var f in s)Xr(t,f,s[f],l);else{s=P(s);for(var _=0,S=s.length;_<S;_++)Xr(t,s[_],l,c)}return this}var ni="_leaflet_events";function He(t,s,l,c){if(arguments.length===1)Fa(t),delete t[ni];else if(s&&typeof s=="object")for(var f in s)Qr(t,f,s[f],l);else if(s=P(s),arguments.length===2)Fa(t,function(O){return B(s,O)!==-1});else for(var _=0,S=s.length;_<S;_++)Qr(t,s[_],l,c);return this}function Fa(t,s){for(var l in t[ni]){var c=l.split(/\d/)[0];(!s||s(c))&&Qr(t,c,null,null,l)}}var Yr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Xr(t,s,l,c){var f=s+h(l)+(c?"_"+h(c):"");if(t[ni]&&t[ni][f])return this;var _=function(O){return l.call(c||t,O||window.event)},S=_;!de.touchNative&&de.pointer&&s.indexOf("touch")===0?_=Qd(t,s,_):de.touch&&s==="dblclick"?_=ah(t,_):"addEventListener"in t?s==="touchstart"||s==="touchmove"||s==="wheel"||s==="mousewheel"?t.addEventListener(Yr[s]||s,_,de.passiveEvents?{passive:!1}:!1):s==="mouseenter"||s==="mouseleave"?(_=function(O){O=O||window.event,to(t,O)&&S(O)},t.addEventListener(Yr[s],_,!1)):t.addEventListener(s,S,!1):t.attachEvent("on"+s,_),t[ni]=t[ni]||{},t[ni][f]=_}function Qr(t,s,l,c,f){f=f||s+h(l)+(c?"_"+h(c):"");var _=t[ni]&&t[ni][f];if(!_)return this;!de.touchNative&&de.pointer&&s.indexOf("touch")===0?eh(t,s,_):de.touch&&s==="dblclick"?lh(t,_):"removeEventListener"in t?t.removeEventListener(Yr[s]||s,_,!1):t.detachEvent("on"+s,_),t[ni][f]=null}function Vi(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,this}function eo(t){return Xr(t,"wheel",Vi),this}function Jn(t){return Se(t,"mousedown touchstart dblclick contextmenu",Vi),t._leaflet_disable_click=!0,this}function mt(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function Hi(t){return mt(t),Vi(t),this}function za(t){if(t.composedPath)return t.composedPath();for(var s=[],l=t.target;l;)s.push(l),l=l.parentNode;return s}function qa(t,s){if(!s)return new te(t.clientX,t.clientY);var l=Jr(s),c=l.boundingClientRect;return new te((t.clientX-c.left)/l.x-s.clientLeft,(t.clientY-c.top)/l.y-s.clientTop)}var dh=de.linux&&de.chrome?window.devicePixelRatio:de.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Va(t){return de.edge?t.wheelDeltaY/2:t.deltaY&&t.deltaMode===0?-t.deltaY/dh:t.deltaY&&t.deltaMode===1?-t.deltaY*20:t.deltaY&&t.deltaMode===2?-t.deltaY*60:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?-t.detail*20:t.detail?t.detail/-32765*60:0}function to(t,s){var l=s.relatedTarget;if(!l)return!0;try{for(;l&&l!==t;)l=l.parentNode}catch{return!1}return l!==t}var hh={__proto__:null,on:Se,off:He,stopPropagation:Vi,disableScrollPropagation:eo,disableClickPropagation:Jn,preventDefault:mt,stop:Hi,getPropagationPath:za,getMousePosition:qa,getWheelDelta:Va,isExternalTarget:to,addListener:Se,removeListener:He},Ha=Ae.extend({run:function(t,s,l,c){this.stop(),this._el=t,this._inProgress=!0,this._duration=l||.25,this._easeOutPower=1/Math.max(c||.5,.2),this._startPos=qi(t),this._offset=s.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=x(this._animate,this),this._step()},_step:function(t){var s=+new Date-this._startTime,l=this._duration*1e3;s<l?this._runFrame(this._easeOut(s/l),t):(this._runFrame(1),this._complete())},_runFrame:function(t,s){var l=this._startPos.add(this._offset.multiplyBy(t));s&&l._round(),nt(this._el,l),this.fire("step")},_complete:function(){W(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Re=Ae.extend({options:{crs:T,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,s){s=E(this,s),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(t),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),s.maxBounds&&this.setMaxBounds(s.maxBounds),s.zoom!==void 0&&(this._zoom=this._limitZoom(s.zoom)),s.center&&s.zoom!==void 0&&this.setView(we(s.center),s.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Hn&&de.any3d&&!de.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Se(this._proxy,Na,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,s,l){if(s=s===void 0?this._zoom:this._limitZoom(s),t=this._limitCenter(we(t),s,this.options.maxBounds),l=l||{},this._stop(),this._loaded&&!l.reset&&l!==!0){l.animate!==void 0&&(l.zoom=o({animate:l.animate},l.zoom),l.pan=o({animate:l.animate,duration:l.duration},l.pan));var c=this._zoom!==s?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,s,l.zoom):this._tryAnimatedPan(t,l.pan);if(c)return clearTimeout(this._sizeTimer),this}return this._resetView(t,s,l.pan&&l.pan.noMoveStart),this},setZoom:function(t,s){return this._loaded?this.setView(this.getCenter(),t,{zoom:s}):(this._zoom=t,this)},zoomIn:function(t,s){return t=t||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+t,s)},zoomOut:function(t,s){return t=t||(de.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-t,s)},setZoomAround:function(t,s,l){var c=this.getZoomScale(s),f=this.getSize().divideBy(2),_=t instanceof te?t:this.latLngToContainerPoint(t),S=_.subtract(f).multiplyBy(1-1/c),O=this.containerPointToLatLng(f.add(S));return this.setView(O,s,{zoom:l})},_getBoundsCenterZoom:function(t,s){s=s||{},t=t.getBounds?t.getBounds():Ye(t);var l=pe(s.paddingTopLeft||s.padding||[0,0]),c=pe(s.paddingBottomRight||s.padding||[0,0]),f=this.getBoundsZoom(t,!1,l.add(c));if(f=typeof s.maxZoom=="number"?Math.min(s.maxZoom,f):f,f===1/0)return{center:t.getCenter(),zoom:f};var _=c.subtract(l).divideBy(2),S=this.project(t.getSouthWest(),f),O=this.project(t.getNorthEast(),f),I=this.unproject(S.add(O).divideBy(2).add(_),f);return{center:I,zoom:f}},fitBounds:function(t,s){if(t=Ye(t),!t.isValid())throw new Error("Bounds are not valid.");var l=this._getBoundsCenterZoom(t,s);return this.setView(l.center,l.zoom,s)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,s){return this.setView(t,this._zoom,{pan:s})},panBy:function(t,s){if(t=pe(t).round(),s=s||{},!t.x&&!t.y)return this.fire("moveend");if(s.animate!==!0&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Ha,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),s.noMoveStart||this.fire("movestart"),s.animate!==!1){xe(this._mapPane,"leaflet-pan-anim");var l=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,l,s.duration||.25,s.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,s,l){if(l=l||{},l.animate===!1||!de.any3d)return this.setView(t,s,l);this._stop();var c=this.project(this.getCenter()),f=this.project(t),_=this.getSize(),S=this._zoom;t=we(t),s=s===void 0?S:s;var O=Math.max(_.x,_.y),I=O*this.getZoomScale(S,s),q=f.distanceTo(c)||1,ne=1.42,ve=ne*ne;function Ce(st){var Gs=st?-1:1,ef=st?I:O,tf=I*I-O*O+Gs*ve*ve*q*q,nf=2*ef*ve*q,fo=tf/nf,Tl=Math.sqrt(fo*fo+1)-fo,sf=Tl<1e-9?-18:Math.log(Tl);return sf}function St(st){return(Math.exp(st)-Math.exp(-st))/2}function dt(st){return(Math.exp(st)+Math.exp(-st))/2}function Ft(st){return St(st)/dt(st)}var Ot=Ce(0);function vn(st){return O*(dt(Ot)/dt(Ot+ne*st))}function Jh(st){return O*(dt(Ot)*Ft(Ot+ne*st)-St(Ot))/ve}function Yh(st){return 1-Math.pow(1-st,1.5)}var Xh=Date.now(),Al=(Ce(1)-Ot)/ne,Qh=l.duration?1e3*l.duration:1e3*Al*.8;function kl(){var st=(Date.now()-Xh)/Qh,Gs=Yh(st)*Al;st<=1?(this._flyToFrame=x(kl,this),this._move(this.unproject(c.add(f.subtract(c).multiplyBy(Jh(Gs)/q)),S),this.getScaleZoom(O/vn(Gs),S),{flyTo:!0})):this._move(t,s)._moveEnd(!0)}return this._moveStart(!0,l.noMoveStart),kl.call(this),this},flyToBounds:function(t,s){var l=this._getBoundsCenterZoom(t,s);return this.flyTo(l.center,l.zoom,s)},setMaxBounds:function(t){return t=Ye(t),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),t.isValid()?(this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(t){var s=this.options.minZoom;return this.options.minZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var s=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&s!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,s){this._enforcingBounds=!0;var l=this.getCenter(),c=this._limitCenter(l,this._zoom,Ye(t));return l.equals(c)||this.panTo(c,s),this._enforcingBounds=!1,this},panInside:function(t,s){s=s||{};var l=pe(s.paddingTopLeft||s.padding||[0,0]),c=pe(s.paddingBottomRight||s.padding||[0,0]),f=this.project(this.getCenter()),_=this.project(t),S=this.getPixelBounds(),O=qe([S.min.add(l),S.max.subtract(c)]),I=O.getSize();if(!O.contains(_)){this._enforcingBounds=!0;var q=_.subtract(O.getCenter()),ne=O.extend(_).getSize().subtract(I);f.x+=q.x<0?-ne.x:ne.x,f.y+=q.y<0?-ne.y:ne.y,this.panTo(this.unproject(f),s),this._enforcingBounds=!1}return this},invalidateSize:function(t){if(!this._loaded)return this;t=o({animate:!1,pan:!0},t===!0?{animate:!0}:t);var s=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var l=this.getSize(),c=s.divideBy(2).round(),f=l.divideBy(2).round(),_=c.subtract(f);return!_.x&&!_.y?this:(t.animate&&t.pan?this.panBy(_):(t.pan&&this._rawPanBy(_),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:s,newSize:l}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=o({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var s=u(this._handleGeolocationResponse,this),l=u(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(s,l,t):navigator.geolocation.getCurrentPosition(s,l,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){if(this._container._leaflet_id){var s=t.code,l=t.message||(s===1?"permission denied":s===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:s,message:"Geolocation error: "+l+"."})}},_handleGeolocationResponse:function(t){if(this._container._leaflet_id){var s=t.coords.latitude,l=t.coords.longitude,c=new Me(s,l),f=c.toBounds(t.coords.accuracy*2),_=this._locateOptions;if(_.setView){var S=this.getBoundsZoom(f);this.setView(c,_.maxZoom?Math.min(S,_.maxZoom):S)}var O={latlng:c,bounds:f,timestamp:t.timestamp};for(var I in t.coords)typeof t.coords[I]=="number"&&(O[I]=t.coords[I]);this.fire("locationfound",O)}},addHandler:function(t,s){if(!s)return this;var l=this[t]=new s(this);return this._handlers.push(l),this.options[t]&&l.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Xe(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(W(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)Xe(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,s){var l="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),c=Ne("div",l,s||this._mapPane);return t&&(this._panes[t]=c),c},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),s=this.unproject(t.getBottomLeft()),l=this.unproject(t.getTopRight());return new lt(s,l)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,s,l){t=Ye(t),l=pe(l||[0,0]);var c=this.getZoom()||0,f=this.getMinZoom(),_=this.getMaxZoom(),S=t.getNorthWest(),O=t.getSouthEast(),I=this.getSize().subtract(l),q=qe(this.project(O,c),this.project(S,c)).getSize(),ne=de.any3d?this.options.zoomSnap:1,ve=I.x/q.x,Ce=I.y/q.y,St=s?Math.max(ve,Ce):Math.min(ve,Ce);return c=this.getScaleZoom(St,c),ne&&(c=Math.round(c/(ne/100))*(ne/100),c=s?Math.ceil(c/ne)*ne:Math.floor(c/ne)*ne),Math.max(f,Math.min(_,c))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new te(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,s){var l=this._getTopLeftPoint(t,s);return new $e(l,l.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(t===void 0?this.getZoom():t)},getPane:function(t){return typeof t=="string"?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,s){var l=this.options.crs;return s=s===void 0?this._zoom:s,l.scale(t)/l.scale(s)},getScaleZoom:function(t,s){var l=this.options.crs;s=s===void 0?this._zoom:s;var c=l.zoom(t*l.scale(s));return isNaN(c)?1/0:c},project:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.latLngToPoint(we(t),s)},unproject:function(t,s){return s=s===void 0?this._zoom:s,this.options.crs.pointToLatLng(pe(t),s)},layerPointToLatLng:function(t){var s=pe(t).add(this.getPixelOrigin());return this.unproject(s)},latLngToLayerPoint:function(t){var s=this.project(we(t))._round();return s._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(we(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(Ye(t))},distance:function(t,s){return this.options.crs.distance(we(t),we(s))},containerPointToLayerPoint:function(t){return pe(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return pe(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var s=this.containerPointToLayerPoint(pe(t));return this.layerPointToLatLng(s)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(t)))},mouseEventToContainerPoint:function(t){return qa(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var s=this._container=Ua(t);if(s){if(s._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Se(s,"scroll",this._onScroll,this),this._containerId=h(s)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&de.any3d,xe(t,"leaflet-container"+(de.touch?" leaflet-touch":"")+(de.retina?" leaflet-retina":"")+(de.ielt9?" leaflet-oldie":"")+(de.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var s=Zn(t,"position");s!=="absolute"&&s!=="relative"&&s!=="fixed"&&s!=="sticky"&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),nt(this._mapPane,new te(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(xe(t.markerPane,"leaflet-zoom-hide"),xe(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,s,l){nt(this._mapPane,new te(0,0));var c=!this._loaded;this._loaded=!0,s=this._limitZoom(s),this.fire("viewprereset");var f=this._zoom!==s;this._moveStart(f,l)._move(t,s)._moveEnd(f),this.fire("viewreset"),c&&this.fire("load")},_moveStart:function(t,s){return t&&this.fire("zoomstart"),s||this.fire("movestart"),this},_move:function(t,s,l,c){s===void 0&&(s=this._zoom);var f=this._zoom!==s;return this._zoom=s,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),c?l&&l.pinch&&this.fire("zoom",l):((f||l&&l.pinch)&&this.fire("zoom",l),this.fire("move",l)),this},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return W(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){nt(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[h(this._container)]=this;var s=t?He:Se;s(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&s(window,"resize",this._onResize,this),de.any3d&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){W(this._resizeRequest),this._resizeRequest=x(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,s){for(var l=[],c,f=s==="mouseout"||s==="mouseover",_=t.target||t.srcElement,S=!1;_;){if(c=this._targets[h(_)],c&&(s==="click"||s==="preclick")&&this._draggableMoved(c)){S=!0;break}if(c&&c.listens(s,!0)&&(f&&!to(_,t)||(l.push(c),f))||_===this._container)break;_=_.parentNode}return!l.length&&!S&&!f&&this.listens(s,!0)&&(l=[this]),l},_isClickDisabled:function(t){for(;t&&t!==this._container;){if(t._leaflet_disable_click)return!0;t=t.parentNode}},_handleDOMEvent:function(t){var s=t.target||t.srcElement;if(!(!this._loaded||s._leaflet_disable_events||t.type==="click"&&this._isClickDisabled(s))){var l=t.type;l==="mousedown"&&Gr(s),this._fireDOMEvent(t,l)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,s,l){if(t.type==="click"){var c=o({},t);c.type="preclick",this._fireDOMEvent(c,c.type,l)}var f=this._findEventTargets(t,s);if(l){for(var _=[],S=0;S<l.length;S++)l[S].listens(s,!0)&&_.push(l[S]);f=_.concat(f)}if(f.length){s==="contextmenu"&&mt(t);var O=f[0],I={originalEvent:t};if(t.type!=="keypress"&&t.type!=="keydown"&&t.type!=="keyup"){var q=O.getLatLng&&(!O._radius||O._radius<=10);I.containerPoint=q?this.latLngToContainerPoint(O.getLatLng()):this.mouseEventToContainerPoint(t),I.layerPoint=this.containerPointToLayerPoint(I.containerPoint),I.latlng=q?O.getLatLng():this.layerPointToLatLng(I.layerPoint)}for(S=0;S<f.length;S++)if(f[S].fire(s,I,!0),I.originalEvent._stopped||f[S].options.bubblingMouseEvents===!1&&B(this._mouseEvents,s)!==-1)return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,s=this._handlers.length;t<s;t++)this._handlers[t].disable()},whenReady:function(t,s){return this._loaded?t.call(s||this,{target:this}):this.on("load",t,s),this},_getMapPanePos:function(){return qi(this._mapPane)||new te(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,s){var l=t&&s!==void 0?this._getNewPixelOrigin(t,s):this.getPixelOrigin();return l.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,s){var l=this.getSize()._divideBy(2);return this.project(t,s)._subtract(l)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return this.project(t,s)._subtract(c)},_latLngBoundsToNewLayerBounds:function(t,s,l){var c=this._getNewPixelOrigin(l,s);return qe([this.project(t.getSouthWest(),s)._subtract(c),this.project(t.getNorthWest(),s)._subtract(c),this.project(t.getSouthEast(),s)._subtract(c),this.project(t.getNorthEast(),s)._subtract(c)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,s,l){if(!l)return t;var c=this.project(t,s),f=this.getSize().divideBy(2),_=new $e(c.subtract(f),c.add(f)),S=this._getBoundsOffset(_,l,s);return Math.abs(S.x)<=1&&Math.abs(S.y)<=1?t:this.unproject(c.add(S),s)},_limitOffset:function(t,s){if(!s)return t;var l=this.getPixelBounds(),c=new $e(l.min.add(t),l.max.add(t));return t.add(this._getBoundsOffset(c,s))},_getBoundsOffset:function(t,s,l){var c=qe(this.project(s.getNorthEast(),l),this.project(s.getSouthWest(),l)),f=c.min.subtract(t.min),_=c.max.subtract(t.max),S=this._rebound(f.x,-_.x),O=this._rebound(f.y,-_.y);return new te(S,O)},_rebound:function(t,s){return t+s>0?Math.round(t-s)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(s))},_limitZoom:function(t){var s=this.getMinZoom(),l=this.getMaxZoom(),c=de.any3d?this.options.zoomSnap:1;return c&&(t=Math.round(t/c)*c),Math.max(s,Math.min(l,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){tt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,s){var l=this._getCenterOffset(t)._trunc();return(s&&s.animate)!==!0&&!this.getSize().contains(l)?!1:(this.panBy(l,s),!0)},_createAnimProxy:function(){var t=this._proxy=Ne("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(s){var l=zr,c=this._proxy.style[l];zi(this._proxy,this.project(s.center,s.zoom),this.getZoomScale(s.zoom,1)),c===this._proxy.style[l]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Xe(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var t=this.getCenter(),s=this.getZoom();zi(this._proxy,this.project(t,s),this.getZoomScale(s,1))},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,s,l){if(this._animatingZoom)return!0;if(l=l||{},!this._zoomAnimated||l.animate===!1||this._nothingToAnimate()||Math.abs(s-this._zoom)>this.options.zoomAnimationThreshold)return!1;var c=this.getZoomScale(s),f=this._getCenterOffset(t)._divideBy(1-1/c);return l.animate!==!0&&!this.getSize().contains(f)?!1:(x(function(){this._moveStart(!0,l.noMoveStart||!1)._animateZoom(t,s,!0)},this),!0)},_animateZoom:function(t,s,l,c){this._mapPane&&(l&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=s,xe(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:s,noUpdate:c}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&tt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function fh(t,s){return new Re(t,s)}var Zt=N.extend({options:{position:"topright"},initialize:function(t){E(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var s=this._map;return s&&s.removeControl(this),this.options.position=t,s&&s.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var s=this._container=this.onAdd(t),l=this.getPosition(),c=t._controlCorners[l];return xe(s,"leaflet-control"),l.indexOf("bottom")!==-1?c.insertBefore(s,c.firstChild):c.appendChild(s),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Xe(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Yn=function(t){return new Zt(t)};Re.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){var t=this._controlCorners={},s="leaflet-",l=this._controlContainer=Ne("div",s+"control-container",this._container);function c(f,_){var S=s+f+" "+s+_;t[f+_]=Ne("div",S,l)}c("top","left"),c("top","right"),c("bottom","left"),c("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)Xe(this._controlCorners[t]);Xe(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Za=Zt.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,s,l,c){return l<c?-1:c<l?1:0}},initialize:function(t,s,l){E(this,l),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var c in t)this._addLayer(t[c],c);for(c in s)this._addLayer(s[c],c,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var s=0;s<this._layers.length;s++)this._layers[s].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return Zt.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,s){return this._addLayer(t,s),this._map?this._update():this},addOverlay:function(t,s){return this._addLayer(t,s,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var s=this._getLayer(h(t));return s&&this._layers.splice(this._layers.indexOf(s),1),this._map?this._update():this},expand:function(){xe(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._section.clientHeight?(xe(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=t+"px"):tt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return tt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",s=this._container=Ne("div",t),l=this.options.collapsed;s.setAttribute("aria-haspopup",!0),Jn(s),eo(s);var c=this._section=Ne("section",t+"-list");l&&(this._map.on("click",this.collapse,this),Se(s,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var f=this._layersLink=Ne("a",t+"-toggle",s);f.href="#",f.title="Layers",f.setAttribute("role","button"),Se(f,{keydown:function(_){_.keyCode===13&&this._expandSafely()},click:function(_){mt(_),this._expandSafely()}},this),l||this.expand(),this._baseLayersList=Ne("div",t+"-base",c),this._separator=Ne("div",t+"-separator",c),this._overlaysList=Ne("div",t+"-overlays",c),s.appendChild(c)},_getLayer:function(t){for(var s=0;s<this._layers.length;s++)if(this._layers[s]&&h(this._layers[s].layer)===t)return this._layers[s]},_addLayer:function(t,s,l){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:s,overlay:l}),this.options.sortLayers&&this._layers.sort(u(function(c,f){return this.options.sortFunction(c.layer,f.layer,c.name,f.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Is(this._baseLayersList),Is(this._overlaysList),this._layerControlInputs=[];var t,s,l,c,f=0;for(l=0;l<this._layers.length;l++)c=this._layers[l],this._addItem(c),s=s||c.overlay,t=t||!c.overlay,f+=c.overlay?0:1;return this.options.hideSingleBase&&(t=t&&f>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=s&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var s=this._getLayer(h(t.target)),l=s.overlay?t.type==="add"?"overlayadd":"overlayremove":t.type==="add"?"baselayerchange":null;l&&this._map.fire(l,s)},_createRadioElement:function(t,s){var l='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(s?' checked="checked"':"")+"/>",c=document.createElement("div");return c.innerHTML=l,c.firstChild},_addItem:function(t){var s=document.createElement("label"),l=this._map.hasLayer(t.layer),c;t.overlay?(c=document.createElement("input"),c.type="checkbox",c.className="leaflet-control-layers-selector",c.defaultChecked=l):c=this._createRadioElement("leaflet-base-layers_"+h(this),l),this._layerControlInputs.push(c),c.layerId=h(t.layer),Se(c,"click",this._onInputClick,this);var f=document.createElement("span");f.innerHTML=" "+t.name;var _=document.createElement("span");s.appendChild(_),_.appendChild(c),_.appendChild(f);var S=t.overlay?this._overlaysList:this._baseLayersList;return S.appendChild(s),this._checkDisabledLayers(),s},_onInputClick:function(){if(!this._preventClick){var t=this._layerControlInputs,s,l,c=[],f=[];this._handlingClick=!0;for(var _=t.length-1;_>=0;_--)s=t[_],l=this._getLayer(s.layerId).layer,s.checked?c.push(l):s.checked||f.push(l);for(_=0;_<f.length;_++)this._map.hasLayer(f[_])&&this._map.removeLayer(f[_]);for(_=0;_<c.length;_++)this._map.hasLayer(c[_])||this._map.addLayer(c[_]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var t=this._layerControlInputs,s,l,c=this._map.getZoom(),f=t.length-1;f>=0;f--)s=t[f],l=this._getLayer(s.layerId).layer,s.disabled=l.options.minZoom!==void 0&&c<l.options.minZoom||l.options.maxZoom!==void 0&&c>l.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var t=this._section;this._preventClick=!0,Se(t,"click",mt),this.expand();var s=this;setTimeout(function(){He(t,"click",mt),s._preventClick=!1})}}),ph=function(t,s,l){return new Za(t,s,l)},io=Zt.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(t){var s="leaflet-control-zoom",l=Ne("div",s+" leaflet-bar"),c=this.options;return this._zoomInButton=this._createButton(c.zoomInText,c.zoomInTitle,s+"-in",l,this._zoomIn),this._zoomOutButton=this._createButton(c.zoomOutText,c.zoomOutTitle,s+"-out",l,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),l},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,s,l,c,f){var _=Ne("a",l,c);return _.innerHTML=t,_.href="#",_.title=s,_.setAttribute("role","button"),_.setAttribute("aria-label",s),Jn(_),Se(_,"click",Hi),Se(_,"click",f,this),Se(_,"click",this._refocusOnMap,this),_},_updateDisabled:function(){var t=this._map,s="leaflet-disabled";tt(this._zoomInButton,s),tt(this._zoomOutButton,s),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||t._zoom===t.getMinZoom())&&(xe(this._zoomOutButton,s),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||t._zoom===t.getMaxZoom())&&(xe(this._zoomInButton,s),this._zoomInButton.setAttribute("aria-disabled","true"))}});Re.mergeOptions({zoomControl:!0}),Re.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new io,this.addControl(this.zoomControl))});var mh=function(t){return new io(t)},Ka=Zt.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var s="leaflet-control-scale",l=Ne("div",s),c=this.options;return this._addScales(c,s+"-line",l),t.on(c.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),l},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,s,l){t.metric&&(this._mScale=Ne("div",s,l)),t.imperial&&(this._iScale=Ne("div",s,l))},_update:function(){var t=this._map,s=t.getSize().y/2,l=t.distance(t.containerPointToLatLng([0,s]),t.containerPointToLatLng([this.options.maxWidth,s]));this._updateScales(l)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var s=this._getRoundNum(t),l=s<1e3?s+" m":s/1e3+" km";this._updateScale(this._mScale,l,s/t)},_updateImperial:function(t){var s=t*3.2808399,l,c,f;s>5280?(l=s/5280,c=this._getRoundNum(l),this._updateScale(this._iScale,c+" mi",c/l)):(f=this._getRoundNum(s),this._updateScale(this._iScale,f+" ft",f/s))},_updateScale:function(t,s,l){t.style.width=Math.round(this.options.maxWidth*l)+"px",t.innerHTML=s},_getRoundNum:function(t){var s=Math.pow(10,(Math.floor(t)+"").length-1),l=t/s;return l=l>=10?10:l>=5?5:l>=3?3:l>=2?2:1,s*l}}),vh=function(t){return new Ka(t)},_h='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',no=Zt.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(de.inlineSvg?_h+" ":"")+"Leaflet</a>"},initialize:function(t){E(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=Ne("div","leaflet-control-attribution"),Jn(this._container);for(var s in t._layers)t._layers[s].getAttribution&&this.addAttribution(t._layers[s].getAttribution());return this._update(),t.on("layeradd",this._addAttribution,this),this._container},onRemove:function(t){t.off("layeradd",this._addAttribution,this)},_addAttribution:function(t){t.layer.getAttribution&&(this.addAttribution(t.layer.getAttribution()),t.layer.once("remove",function(){this.removeAttribution(t.layer.getAttribution())},this))},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var s in this._attributions)this._attributions[s]&&t.push(s);var l=[];this.options.prefix&&l.push(this.options.prefix),t.length&&l.push(t.join(", ")),this._container.innerHTML=l.join(' <span aria-hidden="true">|</span> ')}}});Re.mergeOptions({attributionControl:!0}),Re.addInitHook(function(){this.options.attributionControl&&new no().addTo(this)});var gh=function(t){return new no(t)};Zt.Layers=Za,Zt.Zoom=io,Zt.Scale=Ka,Zt.Attribution=no,Yn.layers=ph,Yn.zoom=mh,Yn.scale=vh,Yn.attribution=gh;var si=N.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});si.addTo=function(t,s){return t.addHandler(s,this),this};var yh={Events:J},Wa=de.touch?"touchstart mousedown":"mousedown",Ti=Ae.extend({options:{clickTolerance:3},initialize:function(t,s,l,c){E(this,c),this._element=t,this._dragStartTarget=s||t,this._preventOutline=l},enable:function(){this._enabled||(Se(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ti._dragging===this&&this.finishDrag(!0),He(this._dragStartTarget,Wa,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(this._enabled&&(this._moved=!1,!qr(this._element,"leaflet-zoom-anim"))){if(t.touches&&t.touches.length!==1){Ti._dragging===this&&this.finishDrag();return}if(!(Ti._dragging||t.shiftKey||t.which!==1&&t.button!==1&&!t.touches)&&(Ti._dragging=this,this._preventOutline&&Gr(this._element),Zr(),Kn(),!this._moving)){this.fire("down");var s=t.touches?t.touches[0]:t,l=Ba(this._element);this._startPoint=new te(s.clientX,s.clientY),this._startPos=qi(this._element),this._parentScale=Jr(l);var c=t.type==="mousedown";Se(document,c?"mousemove":"touchmove",this._onMove,this),Se(document,c?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(t){if(this._enabled){if(t.touches&&t.touches.length>1){this._moved=!0;return}var s=t.touches&&t.touches.length===1?t.touches[0]:t,l=new te(s.clientX,s.clientY)._subtract(this._startPoint);!l.x&&!l.y||Math.abs(l.x)+Math.abs(l.y)<this.options.clickTolerance||(l.x/=this._parentScale.x,l.y/=this._parentScale.y,mt(t),this._moved||(this.fire("dragstart"),this._moved=!0,xe(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),xe(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(l),this._moving=!0,this._lastEvent=t,this._updatePosition())}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),nt(this._element,this._newPos),this.fire("drag",t)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(t){tt(document.body,"leaflet-dragging"),this._lastTarget&&(tt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),He(document,"mousemove touchmove",this._onMove,this),He(document,"mouseup touchend touchcancel",this._onUp,this),Kr(),Wn();var s=this._moved&&this._moving;this._moving=!1,Ti._dragging=!1,s&&this.fire("dragend",{noInertia:t,distance:this._newPos.distanceTo(this._startPos)})}});function Ga(t,s,l){var c,f=[1,4,2,8],_,S,O,I,q,ne,ve,Ce;for(_=0,ne=t.length;_<ne;_++)t[_]._code=Zi(t[_],s);for(O=0;O<4;O++){for(ve=f[O],c=[],_=0,ne=t.length,S=ne-1;_<ne;S=_++)I=t[_],q=t[S],I._code&ve?q._code&ve||(Ce=Ns(q,I,ve,s,l),Ce._code=Zi(Ce,s),c.push(Ce)):(q._code&ve&&(Ce=Ns(q,I,ve,s,l),Ce._code=Zi(Ce,s),c.push(Ce)),c.push(I));t=c}return t}function Ja(t,s){var l,c,f,_,S,O,I,q,ne;if(!t||t.length===0)throw new Error("latlngs not passed");Bt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ve=we([0,0]),Ce=Ye(t),St=Ce.getNorthWest().distanceTo(Ce.getSouthWest())*Ce.getNorthEast().distanceTo(Ce.getNorthWest());St<1700&&(ve=so(t));var dt=t.length,Ft=[];for(l=0;l<dt;l++){var Ot=we(t[l]);Ft.push(s.project(we([Ot.lat-ve.lat,Ot.lng-ve.lng])))}for(O=I=q=0,l=0,c=dt-1;l<dt;c=l++)f=Ft[l],_=Ft[c],S=f.y*_.x-_.y*f.x,I+=(f.x+_.x)*S,q+=(f.y+_.y)*S,O+=S*3;O===0?ne=Ft[0]:ne=[I/O,q/O];var vn=s.unproject(pe(ne));return we([vn.lat+ve.lat,vn.lng+ve.lng])}function so(t){for(var s=0,l=0,c=0,f=0;f<t.length;f++){var _=we(t[f]);s+=_.lat,l+=_.lng,c++}return we([s/c,l/c])}var bh={__proto__:null,clipPolygon:Ga,polygonCenter:Ja,centroid:so};function Ya(t,s){if(!s||!t.length)return t.slice();var l=s*s;return t=Ah(t,l),t=Sh(t,l),t}function Xa(t,s,l){return Math.sqrt(Xn(t,s,l,!0))}function wh(t,s,l){return Xn(t,s,l)}function Sh(t,s){var l=t.length,c=typeof Uint8Array<"u"?Uint8Array:Array,f=new c(l);f[0]=f[l-1]=1,ro(t,f,s,0,l-1);var _,S=[];for(_=0;_<l;_++)f[_]&&S.push(t[_]);return S}function ro(t,s,l,c,f){var _=0,S,O,I;for(O=c+1;O<=f-1;O++)I=Xn(t[O],t[c],t[f],!0),I>_&&(S=O,_=I);_>l&&(s[S]=1,ro(t,s,l,c,S),ro(t,s,l,S,f))}function Ah(t,s){for(var l=[t[0]],c=1,f=0,_=t.length;c<_;c++)kh(t[c],t[f])>s&&(l.push(t[c]),f=c);return f<_-1&&l.push(t[_-1]),l}var Qa;function el(t,s,l,c,f){var _=c?Qa:Zi(t,l),S=Zi(s,l),O,I,q;for(Qa=S;;){if(!(_|S))return[t,s];if(_&S)return!1;O=_||S,I=Ns(t,s,O,l,f),q=Zi(I,l),O===_?(t=I,_=q):(s=I,S=q)}}function Ns(t,s,l,c,f){var _=s.x-t.x,S=s.y-t.y,O=c.min,I=c.max,q,ne;return l&8?(q=t.x+_*(I.y-t.y)/S,ne=I.y):l&4?(q=t.x+_*(O.y-t.y)/S,ne=O.y):l&2?(q=I.x,ne=t.y+S*(I.x-t.x)/_):l&1&&(q=O.x,ne=t.y+S*(O.x-t.x)/_),new te(q,ne,f)}function Zi(t,s){var l=0;return t.x<s.min.x?l|=1:t.x>s.max.x&&(l|=2),t.y<s.min.y?l|=4:t.y>s.max.y&&(l|=8),l}function kh(t,s){var l=s.x-t.x,c=s.y-t.y;return l*l+c*c}function Xn(t,s,l,c){var f=s.x,_=s.y,S=l.x-f,O=l.y-_,I=S*S+O*O,q;return I>0&&(q=((t.x-f)*S+(t.y-_)*O)/I,q>1?(f=l.x,_=l.y):q>0&&(f+=S*q,_+=O*q)),S=t.x-f,O=t.y-_,c?S*S+O*O:new te(f,_)}function Bt(t){return!M(t[0])||typeof t[0][0]!="object"&&typeof t[0][0]<"u"}function tl(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Bt(t)}function il(t,s){var l,c,f,_,S,O,I,q;if(!t||t.length===0)throw new Error("latlngs not passed");Bt(t)||(console.warn("latlngs are not flat! Only the first ring will be used"),t=t[0]);var ne=we([0,0]),ve=Ye(t),Ce=ve.getNorthWest().distanceTo(ve.getSouthWest())*ve.getNorthEast().distanceTo(ve.getNorthWest());Ce<1700&&(ne=so(t));var St=t.length,dt=[];for(l=0;l<St;l++){var Ft=we(t[l]);dt.push(s.project(we([Ft.lat-ne.lat,Ft.lng-ne.lng])))}for(l=0,c=0;l<St-1;l++)c+=dt[l].distanceTo(dt[l+1])/2;if(c===0)q=dt[0];else for(l=0,_=0;l<St-1;l++)if(S=dt[l],O=dt[l+1],f=S.distanceTo(O),_+=f,_>c){I=(_-c)/f,q=[O.x-I*(O.x-S.x),O.y-I*(O.y-S.y)];break}var Ot=s.unproject(pe(q));return we([Ot.lat+ne.lat,Ot.lng+ne.lng])}var Th={__proto__:null,simplify:Ya,pointToSegmentDistance:Xa,closestPointOnSegment:wh,clipSegment:el,_getEdgeIntersection:Ns,_getBitCode:Zi,_sqClosestPointOnSegment:Xn,isFlat:Bt,_flat:tl,polylineCenter:il},oo={project:function(t){return new te(t.lng,t.lat)},unproject:function(t){return new Me(t.y,t.x)},bounds:new $e([-180,-90],[180,90])},ao={R:6378137,R_MINOR:6356752314245179e-9,bounds:new $e([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(t){var s=Math.PI/180,l=this.R,c=t.lat*s,f=this.R_MINOR/l,_=Math.sqrt(1-f*f),S=_*Math.sin(c),O=Math.tan(Math.PI/4-c/2)/Math.pow((1-S)/(1+S),_/2);return c=-l*Math.log(Math.max(O,1e-10)),new te(t.lng*s*l,c)},unproject:function(t){for(var s=180/Math.PI,l=this.R,c=this.R_MINOR/l,f=Math.sqrt(1-c*c),_=Math.exp(-t.y/l),S=Math.PI/2-2*Math.atan(_),O=0,I=.1,q;O<15&&Math.abs(I)>1e-7;O++)q=f*Math.sin(S),q=Math.pow((1-q)/(1+q),f/2),I=Math.PI/2-2*Math.atan(_*q)-S,S+=I;return new Me(S*s,t.x*s/l)}},Ph={__proto__:null,LonLat:oo,Mercator:ao,SphericalMercator:Ht},xh=o({},Lt,{code:"EPSG:3395",projection:ao,transformation:function(){var t=.5/(Math.PI*ao.R);return b(t,.5,-t,.5)}()}),nl=o({},Lt,{code:"EPSG:4326",projection:oo,transformation:b(1/180,1,-1/180,.5)}),Eh=o({},pt,{projection:oo,transformation:b(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,s){var l=s.lng-t.lng,c=s.lat-t.lat;return Math.sqrt(l*l+c*c)},infinite:!0});pt.Earth=Lt,pt.EPSG3395=xh,pt.EPSG3857=T,pt.EPSG900913=$,pt.EPSG4326=nl,pt.Simple=Eh;var Kt=Ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[h(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[h(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var s=t.target;if(s.hasLayer(this)){if(this._map=s,this._zoomAnimated=s._zoomAnimated,this.getEvents){var l=this.getEvents();s.on(l,this),this.once("remove",function(){s.off(l,this)},this)}this.onAdd(s),this.fire("add"),s.fire("layeradd",{layer:this})}}});Re.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var s=h(t);return this._layers[s]?this:(this._layers[s]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var s=h(t);return this._layers[s]?(this._loaded&&t.onRemove(this),delete this._layers[s],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return h(t)in this._layers},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},_addLayers:function(t){t=t?M(t)?t:[t]:[];for(var s=0,l=t.length;s<l;s++)this.addLayer(t[s])},_addZoomLimit:function(t){(!isNaN(t.options.maxZoom)||!isNaN(t.options.minZoom))&&(this._zoomBoundLayers[h(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var s=h(t);this._zoomBoundLayers[s]&&(delete this._zoomBoundLayers[s],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,s=-1/0,l=this._getZoomSpan();for(var c in this._zoomBoundLayers){var f=this._zoomBoundLayers[c].options;t=f.minZoom===void 0?t:Math.min(t,f.minZoom),s=f.maxZoom===void 0?s:Math.max(s,f.maxZoom)}this._layersMaxZoom=s===-1/0?void 0:s,this._layersMinZoom=t===1/0?void 0:t,l!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var dn=Kt.extend({initialize:function(t,s){E(this,s),this._layers={};var l,c;if(t)for(l=0,c=t.length;l<c;l++)this.addLayer(t[l])},addLayer:function(t){var s=this.getLayerId(t);return this._layers[s]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var s=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[s]&&this._map.removeLayer(this._layers[s]),delete this._layers[s],this},hasLayer:function(t){var s=typeof t=="number"?t:this.getLayerId(t);return s in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var s=Array.prototype.slice.call(arguments,1),l,c;for(l in this._layers)c=this._layers[l],c[t]&&c[t].apply(c,s);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,s){for(var l in this._layers)t.call(s,this._layers[l]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return h(t)}}),Lh=function(t,s){return new dn(t,s)},hi=dn.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),dn.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),dn.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new lt;for(var s in this._layers){var l=this._layers[s];t.extend(l.getBounds?l.getBounds():l.getLatLng())}return t}}),Oh=function(t,s){return new hi(t,s)},hn=N.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(t){E(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,s){var l=this._getIconUrl(t);if(!l){if(t==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var c=this._createImg(l,s&&s.tagName==="IMG"?s:null);return this._setIconStyles(c,t),(this.options.crossOrigin||this.options.crossOrigin==="")&&(c.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),c},_setIconStyles:function(t,s){var l=this.options,c=l[s+"Size"];typeof c=="number"&&(c=[c,c]);var f=pe(c),_=pe(s==="shadow"&&l.shadowAnchor||l.iconAnchor||f&&f.divideBy(2,!0));t.className="leaflet-marker-"+s+" "+(l.className||""),_&&(t.style.marginLeft=-_.x+"px",t.style.marginTop=-_.y+"px"),f&&(t.style.width=f.x+"px",t.style.height=f.y+"px")},_createImg:function(t,s){return s=s||document.createElement("img"),s.src=t,s},_getIconUrl:function(t){return de.retina&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}});function Ch(t){return new hn(t)}var Qn=hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return typeof Qn.imagePath!="string"&&(Qn.imagePath=this._detectIconPath()),(this.options.imagePath||Qn.imagePath)+hn.prototype._getIconUrl.call(this,t)},_stripUrl:function(t){var s=function(l,c,f){var _=c.exec(l);return _&&_[f]};return t=s(t,/^url\((['"])?(.+)\1\)$/,2),t&&s(t,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var t=Ne("div","leaflet-default-icon-path",document.body),s=Zn(t,"background-image")||Zn(t,"backgroundImage");if(document.body.removeChild(t),s=this._stripUrl(s),s)return s;var l=document.querySelector('link[href$="leaflet.css"]');return l?l.href.substring(0,l.href.length-11-1):""}}),sl=si.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Ti(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),xe(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&tt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var s=this._marker,l=s._map,c=this._marker.options.autoPanSpeed,f=this._marker.options.autoPanPadding,_=qi(s._icon),S=l.getPixelBounds(),O=l.getPixelOrigin(),I=qe(S.min._subtract(O).add(f),S.max._subtract(O).subtract(f));if(!I.contains(_)){var q=pe((Math.max(I.max.x,_.x)-I.max.x)/(S.max.x-I.max.x)-(Math.min(I.min.x,_.x)-I.min.x)/(S.min.x-I.min.x),(Math.max(I.max.y,_.y)-I.max.y)/(S.max.y-I.max.y)-(Math.min(I.min.y,_.y)-I.min.y)/(S.min.y-I.min.y)).multiplyBy(c);l.panBy(q,{animate:!1}),this._draggable._newPos._add(q),this._draggable._startPos._add(q),nt(s._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=x(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(W(this._panRequest),this._panRequest=x(this._adjustPan.bind(this,t)))},_onDrag:function(t){var s=this._marker,l=s._shadow,c=qi(s._icon),f=s._map.layerPointToLatLng(c);l&&nt(l,c),s._latlng=f,t.latlng=f,t.oldLatLng=this._oldLatLng,s.fire("move",t).fire("drag",t)},_onDragEnd:function(t){W(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),Us=Kt.extend({options:{icon:new Qn,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(t,s){E(this,s),this._latlng=we(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var s=this._latlng;return this._latlng=we(t),this.update(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},getIcon:function(){return this.options.icon},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,s="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),l=t.icon.createIcon(this._icon),c=!1;l!==this._icon&&(this._icon&&this._removeIcon(),c=!0,t.title&&(l.title=t.title),l.tagName==="IMG"&&(l.alt=t.alt||"")),xe(l,s),t.keyboard&&(l.tabIndex="0",l.setAttribute("role","button")),this._icon=l,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Se(l,"focus",this._panOnFocus,this);var f=t.icon.createShadow(this._shadow),_=!1;f!==this._shadow&&(this._removeShadow(),_=!0),f&&(xe(f,s),f.alt=""),this._shadow=f,t.opacity<1&&this._updateOpacity(),c&&this.getPane().appendChild(this._icon),this._initInteraction(),f&&_&&this.getPane(t.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&He(this._icon,"focus",this._panOnFocus,this),Xe(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Xe(this._shadow),this._shadow=null},_setPos:function(t){this._icon&&nt(this._icon,t),this._shadow&&nt(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon&&(this._icon.style.zIndex=this._zIndex+t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(s)},_initInteraction:function(){if(this.options.interactive&&(xe(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),sl)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new sl(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;this._icon&&Ut(this._icon,t),this._shadow&&Ut(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var t=this._map;if(t){var s=this.options.icon.options,l=s.iconSize?pe(s.iconSize):pe(0,0),c=s.iconAnchor?pe(s.iconAnchor):pe(0,0);t.panInside(this._latlng,{paddingTopLeft:c,paddingBottomRight:l.subtract(c)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mh(t,s){return new Us(t,s)}var Pi=Kt.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return E(this,t),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&t&&Object.prototype.hasOwnProperty.call(t,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Bs=Pi.extend({options:{fill:!0,radius:10},initialize:function(t,s){E(this,s),this._latlng=we(t),this._radius=this.options.radius},setLatLng:function(t){var s=this._latlng;return this._latlng=we(t),this.redraw(),this.fire("move",{oldLatLng:s,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var s=t&&t.radius||this._radius;return Pi.prototype.setStyle.call(this,t),this.setRadius(s),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,s=this._radiusY||t,l=this._clickTolerance(),c=[t+l,s+l];this._pxBounds=new $e(this._point.subtract(c),this._point.add(c))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ih(t,s){return new Bs(t,s)}var lo=Bs.extend({initialize:function(t,s,l){if(typeof s=="number"&&(s=o({},l,{radius:s})),E(this,s),this._latlng=we(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new lt(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:Pi.prototype.setStyle,_project:function(){var t=this._latlng.lng,s=this._latlng.lat,l=this._map,c=l.options.crs;if(c.distance===Lt.distance){var f=Math.PI/180,_=this._mRadius/Lt.R/f,S=l.project([s+_,t]),O=l.project([s-_,t]),I=S.add(O).divideBy(2),q=l.unproject(I).lat,ne=Math.acos((Math.cos(_*f)-Math.sin(s*f)*Math.sin(q*f))/(Math.cos(s*f)*Math.cos(q*f)))/f;(isNaN(ne)||ne===0)&&(ne=_/Math.cos(Math.PI/180*s)),this._point=I.subtract(l.getPixelOrigin()),this._radius=isNaN(ne)?0:I.x-l.project([q,t-ne]).x,this._radiusY=I.y-S.y}else{var ve=c.unproject(c.project(this._latlng).subtract([this._mRadius,0]));this._point=l.latLngToLayerPoint(this._latlng),this._radius=this._point.x-l.latLngToLayerPoint(ve).x}this._updateBounds()}});function Dh(t,s,l){return new lo(t,s,l)}var fi=Pi.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,s){E(this,s),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var s=1/0,l=null,c=Xn,f,_,S=0,O=this._parts.length;S<O;S++)for(var I=this._parts[S],q=1,ne=I.length;q<ne;q++){f=I[q-1],_=I[q];var ve=c(t,f,_,!0);ve<s&&(s=ve,l=c(t,f,_))}return l&&(l.distance=Math.sqrt(s)),l},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return il(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(t,s){return s=s||this._defaultShape(),t=we(t),s.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new lt,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return Bt(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var s=[],l=Bt(t),c=0,f=t.length;c<f;c++)l?(s[c]=we(t[c]),this._bounds.extend(s[c])):s[c]=this._convertLatLngs(t[c]);return s},_project:function(){var t=new $e;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t),this._bounds.isValid()&&t.isValid()&&(this._rawPxBounds=t,this._updateBounds())},_updateBounds:function(){var t=this._clickTolerance(),s=new te(t,t);this._rawPxBounds&&(this._pxBounds=new $e([this._rawPxBounds.min.subtract(s),this._rawPxBounds.max.add(s)]))},_projectLatlngs:function(t,s,l){var c=t[0]instanceof Me,f=t.length,_,S;if(c){for(S=[],_=0;_<f;_++)S[_]=this._map.latLngToLayerPoint(t[_]),l.extend(S[_]);s.push(S)}else for(_=0;_<f;_++)this._projectLatlngs(t[_],s,l)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}var s=this._parts,l,c,f,_,S,O,I;for(l=0,f=0,_=this._rings.length;l<_;l++)for(I=this._rings[l],c=0,S=I.length;c<S-1;c++)O=el(I[c],I[c+1],t,c,!0),O&&(s[f]=s[f]||[],s[f].push(O[0]),(O[1]!==I[c+1]||c===S-2)&&(s[f].push(O[1]),f++))}},_simplifyPoints:function(){for(var t=this._parts,s=this.options.smoothFactor,l=0,c=t.length;l<c;l++)t[l]=Ya(t[l],s)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,s){var l,c,f,_,S,O,I=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(l=0,_=this._parts.length;l<_;l++)for(O=this._parts[l],c=0,S=O.length,f=S-1;c<S;f=c++)if(!(!s&&c===0)&&Xa(t,O[f],O[c])<=I)return!0;return!1}});function Rh(t,s){return new fi(t,s)}fi._flat=tl;var fn=fi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Ja(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(t){var s=fi.prototype._convertLatLngs.call(this,t),l=s.length;return l>=2&&s[0]instanceof Me&&s[0].equals(s[l-1])&&s.pop(),s},_setLatLngs:function(t){fi.prototype._setLatLngs.call(this,t),Bt(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Bt(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,s=this.options.weight,l=new te(s,s);if(t=new $e(t.min.subtract(l),t.max.add(l)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(t))){if(this.options.noClip){this._parts=this._rings;return}for(var c=0,f=this._rings.length,_;c<f;c++)_=Ga(this._rings[c],t,!0),_.length&&this._parts.push(_)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var s=!1,l,c,f,_,S,O,I,q;if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(_=0,I=this._parts.length;_<I;_++)for(l=this._parts[_],S=0,q=l.length,O=q-1;S<q;O=S++)c=l[S],f=l[O],c.y>t.y!=f.y>t.y&&t.x<(f.x-c.x)*(t.y-c.y)/(f.y-c.y)+c.x&&(s=!s);return s||fi.prototype._containsPoint.call(this,t,!0)}});function $h(t,s){return new fn(t,s)}var pi=hi.extend({initialize:function(t,s){E(this,s),this._layers={},t&&this.addData(t)},addData:function(t){var s=M(t)?t:t.features,l,c,f;if(s){for(l=0,c=s.length;l<c;l++)f=s[l],(f.geometries||f.geometry||f.features||f.coordinates)&&this.addData(f);return this}var _=this.options;if(_.filter&&!_.filter(t))return this;var S=Fs(t,_);return S?(S.feature=Vs(t),S.defaultOptions=S.options,this.resetStyle(S),_.onEachFeature&&_.onEachFeature(t,S),this.addLayer(S)):this},resetStyle:function(t){return t===void 0?this.eachLayer(this.resetStyle,this):(t.options=o({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this)},setStyle:function(t){return this.eachLayer(function(s){this._setLayerStyle(s,t)},this)},_setLayerStyle:function(t,s){t.setStyle&&(typeof s=="function"&&(s=s(t.feature)),t.setStyle(s))}});function Fs(t,s){var l=t.type==="Feature"?t.geometry:t,c=l?l.coordinates:null,f=[],_=s&&s.pointToLayer,S=s&&s.coordsToLatLng||uo,O,I,q,ne;if(!c&&!l)return null;switch(l.type){case"Point":return O=S(c),rl(_,t,O,s);case"MultiPoint":for(q=0,ne=c.length;q<ne;q++)O=S(c[q]),f.push(rl(_,t,O,s));return new hi(f);case"LineString":case"MultiLineString":return I=zs(c,l.type==="LineString"?0:1,S),new fi(I,s);case"Polygon":case"MultiPolygon":return I=zs(c,l.type==="Polygon"?1:2,S),new fn(I,s);case"GeometryCollection":for(q=0,ne=l.geometries.length;q<ne;q++){var ve=Fs({geometry:l.geometries[q],type:"Feature",properties:t.properties},s);ve&&f.push(ve)}return new hi(f);case"FeatureCollection":for(q=0,ne=l.features.length;q<ne;q++){var Ce=Fs(l.features[q],s);Ce&&f.push(Ce)}return new hi(f);default:throw new Error("Invalid GeoJSON object.")}}function rl(t,s,l,c){return t?t(s,l):new Us(l,c&&c.markersInheritOptions&&c)}function uo(t){return new Me(t[1],t[0],t[2])}function zs(t,s,l){for(var c=[],f=0,_=t.length,S;f<_;f++)S=s?zs(t[f],s-1,l):(l||uo)(t[f]),c.push(S);return c}function co(t,s){return t=we(t),t.alt!==void 0?[y(t.lng,s),y(t.lat,s),y(t.alt,s)]:[y(t.lng,s),y(t.lat,s)]}function qs(t,s,l,c){for(var f=[],_=0,S=t.length;_<S;_++)f.push(s?qs(t[_],Bt(t[_])?0:s-1,l,c):co(t[_],c));return!s&&l&&f.length>0&&f.push(f[0].slice()),f}function pn(t,s){return t.feature?o({},t.feature,{geometry:s}):Vs(s)}function Vs(t){return t.type==="Feature"||t.type==="FeatureCollection"?t:{type:"Feature",properties:{},geometry:t}}var ho={toGeoJSON:function(t){return pn(this,{type:"Point",coordinates:co(this.getLatLng(),t)})}};Us.include(ho),lo.include(ho),Bs.include(ho),fi.include({toGeoJSON:function(t){var s=!Bt(this._latlngs),l=qs(this._latlngs,s?1:0,!1,t);return pn(this,{type:(s?"Multi":"")+"LineString",coordinates:l})}}),fn.include({toGeoJSON:function(t){var s=!Bt(this._latlngs),l=s&&!Bt(this._latlngs[0]),c=qs(this._latlngs,l?2:s?1:0,!0,t);return s||(c=[c]),pn(this,{type:(l?"Multi":"")+"Polygon",coordinates:c})}}),dn.include({toMultiPoint:function(t){var s=[];return this.eachLayer(function(l){s.push(l.toGeoJSON(t).geometry.coordinates)}),pn(this,{type:"MultiPoint",coordinates:s})},toGeoJSON:function(t){var s=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(s==="MultiPoint")return this.toMultiPoint(t);var l=s==="GeometryCollection",c=[];return this.eachLayer(function(f){if(f.toGeoJSON){var _=f.toGeoJSON(t);if(l)c.push(_.geometry);else{var S=Vs(_);S.type==="FeatureCollection"?c.push.apply(c,S.features):c.push(S)}}}),l?pn(this,{geometries:c,type:"GeometryCollection"}):{type:"FeatureCollection",features:c}}});function ol(t,s){return new pi(t,s)}var jh=ol,Hs=Kt.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,s,l){this._url=t,this._bounds=Ye(s),E(this,l)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(xe(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Xe(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&un(this._image),this},bringToBack:function(){return this._map&&cn(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=Ye(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t=this._url.tagName==="IMG",s=this._image=t?this._url:Ne("img");if(xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onload=u(this.fire,this,"load"),s.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(s.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),t){this._url=s.src;return}s.src=this._url,s.alt=this.options.alt},_animateZoom:function(t){var s=this._map.getZoomScale(t.zoom),l=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;zi(this._image,l,s)},_reset:function(){var t=this._image,s=new $e(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),l=s.getSize();nt(t,s.min),t.style.width=l.x+"px",t.style.height=l.y+"px"},_updateOpacity:function(){Ut(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)},getCenter:function(){return this._bounds.getCenter()}}),Nh=function(t,s,l){return new Hs(t,s,l)},al=Hs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var t=this._url.tagName==="VIDEO",s=this._image=t?this._url:Ne("video");if(xe(s,"leaflet-image-layer"),this._zoomAnimated&&xe(s,"leaflet-zoom-animated"),this.options.className&&xe(s,this.options.className),s.onselectstart=g,s.onmousemove=g,s.onloadeddata=u(this.fire,this,"load"),t){for(var l=s.getElementsByTagName("source"),c=[],f=0;f<l.length;f++)c.push(l[f].src);this._url=l.length>0?c:[s.src];return}M(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(s.style,"objectFit")&&(s.style.objectFit="fill"),s.autoplay=!!this.options.autoplay,s.loop=!!this.options.loop,s.muted=!!this.options.muted,s.playsInline=!!this.options.playsInline;for(var _=0;_<this._url.length;_++){var S=Ne("source");S.src=this._url[_],s.appendChild(S)}}});function Uh(t,s,l){return new al(t,s,l)}var ll=Hs.extend({_initImage:function(){var t=this._image=this._url;xe(t,"leaflet-image-layer"),this._zoomAnimated&&xe(t,"leaflet-zoom-animated"),this.options.className&&xe(t,this.options.className),t.onselectstart=g,t.onmousemove=g}});function Bh(t,s,l){return new ll(t,s,l)}var ri=Kt.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(t,s){t&&(t instanceof Me||M(t))?(this._latlng=we(t),E(this,s)):(E(this,t),this._source=s),this.options.content&&(this._content=this.options.content)},openOn:function(t){return t=arguments.length?t:this._source._map,t.hasLayer(this)||t.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(t){return this._map?this.close():(arguments.length?this._source=t:t=this._source,this._prepareOpen(),this.openOn(t._map)),this},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&Ut(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&Ut(this._container,1),this.bringToFront(),this.options.interactive&&(xe(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(t){t._fadeAnimated?(Ut(this._container,0),this._removeTimeout=setTimeout(u(Xe,void 0,this._container),200)):Xe(this._container),this.options.interactive&&(tt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=we(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&un(this._container),this},bringToBack:function(){return this._map&&cn(this._container),this},_prepareOpen:function(t){var s=this._source;if(!s._map)return!1;if(s instanceof hi){s=null;var l=this._source._layers;for(var c in l)if(l[c]._map){s=l[c];break}if(!s)return!1;this._source=s}if(!t)if(s.getCenter)t=s.getCenter();else if(s.getLatLng)t=s.getLatLng();else if(s.getBounds)t=s.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(t),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var t=this._contentNode,s=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof s=="string")t.innerHTML=s;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(s)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),s=pe(this.options.offset),l=this._getAnchor();this._zoomAnimated?nt(this._container,t.add(l)):s=s.add(t).add(l);var c=this._containerBottom=-s.y,f=this._containerLeft=-Math.round(this._containerWidth/2)+s.x;this._container.style.bottom=c+"px",this._container.style.left=f+"px"}},_getAnchor:function(){return[0,0]}});Re.include({_initOverlay:function(t,s,l,c){var f=s;return f instanceof t||(f=new t(c).setContent(s)),l&&f.setLatLng(l),f}}),Kt.include({_initOverlay:function(t,s,l,c){var f=l;return f instanceof t?(E(f,c),f._source=this):(f=s&&!c?s:new t(c,this),f.setContent(l)),f}});var Zs=ri.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t=arguments.length?t:this._source._map,!t.hasLayer(this)&&t._popup&&t._popup.options.autoClose&&t.removeLayer(t._popup),t._popup=this,ri.prototype.openOn.call(this,t)},onAdd:function(t){ri.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Pi||this._source.on("preclick",Vi))},onRemove:function(t){ri.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Pi||this._source.off("preclick",Vi))},getEvents:function(){var t=ri.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this.close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_initLayout:function(){var t="leaflet-popup",s=this._container=Ne("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),l=this._wrapper=Ne("div",t+"-content-wrapper",s);if(this._contentNode=Ne("div",t+"-content",l),Jn(s),eo(this._contentNode),Se(s,"contextmenu",Vi),this._tipContainer=Ne("div",t+"-tip-container",s),this._tip=Ne("div",t+"-tip",this._tipContainer),this.options.closeButton){var c=this._closeButton=Ne("a",t+"-close-button",s);c.setAttribute("role","button"),c.setAttribute("aria-label","Close popup"),c.href="#close",c.innerHTML='<span aria-hidden="true">&#215;</span>',Se(c,"click",function(f){mt(f),this.close()},this)}},_updateLayout:function(){var t=this._contentNode,s=t.style;s.width="",s.whiteSpace="nowrap";var l=t.offsetWidth;l=Math.min(l,this.options.maxWidth),l=Math.max(l,this.options.minWidth),s.width=l+1+"px",s.whiteSpace="",s.height="";var c=t.offsetHeight,f=this.options.maxHeight,_="leaflet-popup-scrolled";f&&c>f?(s.height=f+"px",xe(t,_)):tt(t,_),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),l=this._getAnchor();nt(this._container,s.add(l))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var t=this._map,s=parseInt(Zn(this._container,"marginBottom"),10)||0,l=this._container.offsetHeight+s,c=this._containerWidth,f=new te(this._containerLeft,-l-this._containerBottom);f._add(qi(this._container));var _=t.layerPointToContainerPoint(f),S=pe(this.options.autoPanPadding),O=pe(this.options.autoPanPaddingTopLeft||S),I=pe(this.options.autoPanPaddingBottomRight||S),q=t.getSize(),ne=0,ve=0;_.x+c+I.x>q.x&&(ne=_.x+c-q.x+I.x),_.x-ne-O.x<0&&(ne=_.x-O.x),_.y+l+I.y>q.y&&(ve=_.y+l-q.y+I.y),_.y-ve-O.y<0&&(ve=_.y-O.y),(ne||ve)&&(this.options.keepInView&&(this._autopanning=!0),t.fire("autopanstart").panBy([ne,ve]))}},_getAnchor:function(){return pe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Fh=function(t,s){return new Zs(t,s)};Re.mergeOptions({closePopupOnClick:!0}),Re.include({openPopup:function(t,s,l){return this._initOverlay(Zs,t,s,l).openOn(this),this},closePopup:function(t){return t=arguments.length?t:this._popup,t&&t.close(),this}}),Kt.include({bindPopup:function(t,s){return this._popup=this._initOverlay(Zs,this._popup,t,s),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t){return this._popup&&(this instanceof hi||(this._popup._source=this),this._popup._prepareOpen(t||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){if(!(!this._popup||!this._map)){Hi(t);var s=t.layer||t.target;if(this._popup._source===s&&!(s instanceof Pi)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(t.latlng);return}this._popup._source=s,this.openPopup(t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){t.originalEvent.keyCode===13&&this._openPopup(t)}});var Ks=ri.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(t){ri.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(t){ri.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var t=ri.prototype.getEvents.call(this);return this.options.permanent||(t.preclick=this.close),t},_initLayout:function(){var t="leaflet-tooltip",s=t+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ne("div",s),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+h(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var s,l,c=this._map,f=this._container,_=c.latLngToContainerPoint(c.getCenter()),S=c.layerPointToContainerPoint(t),O=this.options.direction,I=f.offsetWidth,q=f.offsetHeight,ne=pe(this.options.offset),ve=this._getAnchor();O==="top"?(s=I/2,l=q):O==="bottom"?(s=I/2,l=0):O==="center"?(s=I/2,l=q/2):O==="right"?(s=0,l=q/2):O==="left"?(s=I,l=q/2):S.x<_.x?(O="right",s=0,l=q/2):(O="left",s=I+(ne.x+ve.x)*2,l=q/2),t=t.subtract(pe(s,l,!0)).add(ne).add(ve),tt(f,"leaflet-tooltip-right"),tt(f,"leaflet-tooltip-left"),tt(f,"leaflet-tooltip-top"),tt(f,"leaflet-tooltip-bottom"),xe(f,"leaflet-tooltip-"+O),nt(f,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&Ut(this._container,t)},_animateZoom:function(t){var s=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(s)},_getAnchor:function(){return pe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),zh=function(t,s){return new Ks(t,s)};Re.include({openTooltip:function(t,s,l){return this._initOverlay(Ks,t,s,l).openOn(this),this},closeTooltip:function(t){return t.close(),this}}),Kt.include({bindTooltip:function(t,s){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ks,this._tooltip,t,s),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(!(!t&&this._tooltipHandlersAdded)){var s=t?"off":"on",l={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?l.add=this._openTooltip:(l.mouseover=this._openTooltip,l.mouseout=this.closeTooltip,l.click=this._openTooltip,this._map?this._addFocusListeners():l.add=this._addFocusListeners),this._tooltip.options.sticky&&(l.mousemove=this._moveTooltip),this[s](l),this._tooltipHandlersAdded=!t}},openTooltip:function(t){return this._tooltip&&(this instanceof hi||(this._tooltip._source=this),this._tooltip._prepareOpen(t)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&(Se(s,"focus",function(){this._tooltip._source=t,this.openTooltip()},this),Se(s,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(t){var s=typeof t.getElement=="function"&&t.getElement();s&&s.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(t){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var s=this;this._map.once("moveend",function(){s._openOnceFlag=!1,s._openTooltip(t)});return}this._tooltip._source=t.layer||t.target,this.openTooltip(this._tooltip.options.sticky?t.latlng:void 0)}},_moveTooltip:function(t){var s=t.latlng,l,c;this._tooltip.options.sticky&&t.originalEvent&&(l=this._map.mouseEventToContainerPoint(t.originalEvent),c=this._map.containerPointToLayerPoint(l),s=this._map.layerPointToLatLng(c)),this._tooltip.setLatLng(s)}});var ul=hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var s=t&&t.tagName==="DIV"?t:document.createElement("div"),l=this.options;if(l.html instanceof Element?(Is(s),s.appendChild(l.html)):s.innerHTML=l.html!==!1?l.html:"",l.bgPos){var c=pe(l.bgPos);s.style.backgroundPosition=-c.x+"px "+-c.y+"px"}return this._setIconStyles(s,"icon"),s},createShadow:function(){return null}});function qh(t){return new ul(t)}hn.Default=Qn;var es=Kt.extend({options:{tileSize:256,opacity:1,updateWhenIdle:de.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){E(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),Xe(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(un(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(cn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var t=this._clampZoom(this._map.getZoom());t!==this._tileZoom&&(this._tileZoom=t,this._updateLevels()),this._update()}return this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=m(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof te?t:new te(t,t)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var s=this.getPane().children,l=-t(-1/0,1/0),c=0,f=s.length,_;c<f;c++)_=s[c].style.zIndex,s[c]!==this._container&&_&&(l=t(l,+_));isFinite(l)&&(this.options.zIndex=l+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!de.ielt9){Ut(this._container,this.options.opacity);var t=+new Date,s=!1,l=!1;for(var c in this._tiles){var f=this._tiles[c];if(!(!f.current||!f.loaded)){var _=Math.min(1,(t-f.loaded)/200);Ut(f.el,_),_<1?s=!0:(f.active?l=!0:this._onOpaqueTile(f),f.active=!0)}}l&&!this._noPrune&&this._pruneTiles(),s&&(W(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ne("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,s=this.options.maxZoom;if(t!==void 0){for(var l in this._levels)l=Number(l),this._levels[l].el.children.length||l===t?(this._levels[l].el.style.zIndex=s-Math.abs(t-l),this._onUpdateLevel(l)):(Xe(this._levels[l].el),this._removeTilesAtZoom(l),this._onRemoveLevel(l),delete this._levels[l]);var c=this._levels[t],f=this._map;return c||(c=this._levels[t]={},c.el=Ne("div","leaflet-tile-container leaflet-zoom-animated",this._container),c.el.style.zIndex=s,c.origin=f.project(f.unproject(f.getPixelOrigin()),t).round(),c.zoom=t,this._setZoomTransform(c,f.getCenter(),f.getZoom()),g(c.el.offsetWidth),this._onCreateLevel(c)),this._level=c,c}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var t,s,l=this._map.getZoom();if(l>this.options.maxZoom||l<this.options.minZoom){this._removeAllTiles();return}for(t in this._tiles)s=this._tiles[t],s.retain=s.current;for(t in this._tiles)if(s=this._tiles[t],s.current&&!s.active){var c=s.coords;this._retainParent(c.x,c.y,c.z,c.z-5)||this._retainChildren(c.x,c.y,c.z,c.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var s in this._tiles)this._tiles[s].coords.z===t&&this._removeTile(s)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)Xe(this._levels[t].el),this._onRemoveLevel(Number(t)),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,s,l,c){var f=Math.floor(t/2),_=Math.floor(s/2),S=l-1,O=new te(+f,+_);O.z=+S;var I=this._tileCoordsToKey(O),q=this._tiles[I];return q&&q.active?(q.retain=!0,!0):(q&&q.loaded&&(q.retain=!0),S>c?this._retainParent(f,_,S,c):!1)},_retainChildren:function(t,s,l,c){for(var f=2*t;f<2*t+2;f++)for(var _=2*s;_<2*s+2;_++){var S=new te(f,_);S.z=l+1;var O=this._tileCoordsToKey(S),I=this._tiles[O];if(I&&I.active){I.retain=!0;continue}else I&&I.loaded&&(I.retain=!0);l+1<c&&this._retainChildren(f,_,l+1,c)}},_resetView:function(t){var s=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),s,s)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var s=this.options;return s.minNativeZoom!==void 0&&t<s.minNativeZoom?s.minNativeZoom:s.maxNativeZoom!==void 0&&s.maxNativeZoom<t?s.maxNativeZoom:t},_setView:function(t,s,l,c){var f=Math.round(s);this.options.maxZoom!==void 0&&f>this.options.maxZoom||this.options.minZoom!==void 0&&f<this.options.minZoom?f=void 0:f=this._clampZoom(f);var _=this.options.updateWhenZooming&&f!==this._tileZoom;(!c||_)&&(this._tileZoom=f,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),f!==void 0&&this._update(t),l||this._pruneTiles(),this._noPrune=!!l),this._setZoomTransforms(t,s)},_setZoomTransforms:function(t,s){for(var l in this._levels)this._setZoomTransform(this._levels[l],t,s)},_setZoomTransform:function(t,s,l){var c=this._map.getZoomScale(l,t.zoom),f=t.origin.multiplyBy(c).subtract(this._map._getNewPixelOrigin(s,l)).round();de.any3d?zi(t.el,f,c):nt(t.el,f)},_resetGrid:function(){var t=this._map,s=t.options.crs,l=this._tileSize=this.getTileSize(),c=this._tileZoom,f=this._map.getPixelWorldBounds(this._tileZoom);f&&(this._globalTileRange=this._pxBoundsToTileRange(f)),this._wrapX=s.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,s.wrapLng[0]],c).x/l.x),Math.ceil(t.project([0,s.wrapLng[1]],c).x/l.y)],this._wrapY=s.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([s.wrapLat[0],0],c).y/l.x),Math.ceil(t.project([s.wrapLat[1],0],c).y/l.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(t){var s=this._map,l=s._animatingZoom?Math.max(s._animateToZoom,s.getZoom()):s.getZoom(),c=s.getZoomScale(l,this._tileZoom),f=s.project(t,this._tileZoom).floor(),_=s.getSize().divideBy(c*2);return new $e(f.subtract(_),f.add(_))},_update:function(t){var s=this._map;if(s){var l=this._clampZoom(s.getZoom());if(t===void 0&&(t=s.getCenter()),this._tileZoom!==void 0){var c=this._getTiledPixelBounds(t),f=this._pxBoundsToTileRange(c),_=f.getCenter(),S=[],O=this.options.keepBuffer,I=new $e(f.getBottomLeft().subtract([O,-O]),f.getTopRight().add([O,-O]));if(!(isFinite(f.min.x)&&isFinite(f.min.y)&&isFinite(f.max.x)&&isFinite(f.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var q in this._tiles){var ne=this._tiles[q].coords;(ne.z!==this._tileZoom||!I.contains(new te(ne.x,ne.y)))&&(this._tiles[q].current=!1)}if(Math.abs(l-this._tileZoom)>1){this._setView(t,l);return}for(var ve=f.min.y;ve<=f.max.y;ve++)for(var Ce=f.min.x;Ce<=f.max.x;Ce++){var St=new te(Ce,ve);if(St.z=this._tileZoom,!!this._isValidTile(St)){var dt=this._tiles[this._tileCoordsToKey(St)];dt?dt.current=!0:S.push(St)}}if(S.sort(function(Ot,vn){return Ot.distanceTo(_)-vn.distanceTo(_)}),S.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Ft=document.createDocumentFragment();for(Ce=0;Ce<S.length;Ce++)this._addTile(S[Ce],Ft);this._level.el.appendChild(Ft)}}}},_isValidTile:function(t){var s=this._map.options.crs;if(!s.infinite){var l=this._globalTileRange;if(!s.wrapLng&&(t.x<l.min.x||t.x>l.max.x)||!s.wrapLat&&(t.y<l.min.y||t.y>l.max.y))return!1}if(!this.options.bounds)return!0;var c=this._tileCoordsToBounds(t);return Ye(this.options.bounds).overlaps(c)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var s=this._map,l=this.getTileSize(),c=t.scaleBy(l),f=c.add(l),_=s.unproject(c,t.z),S=s.unproject(f,t.z);return[_,S]},_tileCoordsToBounds:function(t){var s=this._tileCoordsToNwSe(t),l=new lt(s[0],s[1]);return this.options.noWrap||(l=this._map.wrapLatLngBounds(l)),l},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var s=t.split(":"),l=new te(+s[0],+s[1]);return l.z=+s[2],l},_removeTile:function(t){var s=this._tiles[t];s&&(Xe(s.el),delete this._tiles[t],this.fire("tileunload",{tile:s.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){xe(t,"leaflet-tile");var s=this.getTileSize();t.style.width=s.x+"px",t.style.height=s.y+"px",t.onselectstart=g,t.onmousemove=g,de.ielt9&&this.options.opacity<1&&Ut(t,this.options.opacity)},_addTile:function(t,s){var l=this._getTilePos(t),c=this._tileCoordsToKey(t),f=this.createTile(this._wrapCoords(t),u(this._tileReady,this,t));this._initTile(f),this.createTile.length<2&&x(u(this._tileReady,this,t,null,f)),nt(f,l),this._tiles[c]={el:f,coords:t,current:!0},s.appendChild(f),this.fire("tileloadstart",{tile:f,coords:t})},_tileReady:function(t,s,l){s&&this.fire("tileerror",{error:s,tile:l,coords:t});var c=this._tileCoordsToKey(t);l=this._tiles[c],l&&(l.loaded=+new Date,this._map._fadeAnimated?(Ut(l.el,0),W(this._fadeFrame),this._fadeFrame=x(this._updateOpacity,this)):(l.active=!0,this._pruneTiles()),s||(xe(l.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:l.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),de.ielt9||!this._map._fadeAnimated?x(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var s=new te(this._wrapX?v(t.x,this._wrapX):t.x,this._wrapY?v(t.y,this._wrapY):t.y);return s.z=t.z,s},_pxBoundsToTileRange:function(t){var s=this.getTileSize();return new $e(t.min.unscaleBy(s).floor(),t.max.unscaleBy(s).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}});function Vh(t){return new es(t)}var mn=es.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(t,s){this._url=t,s=E(this,s),s.detectRetina&&de.retina&&s.maxZoom>0?(s.tileSize=Math.floor(s.tileSize/2),s.zoomReverse?(s.zoomOffset--,s.minZoom=Math.min(s.maxZoom,s.minZoom+1)):(s.zoomOffset++,s.maxZoom=Math.max(s.minZoom,s.maxZoom-1)),s.minZoom=Math.max(0,s.minZoom)):s.zoomReverse?s.minZoom=Math.min(s.maxZoom,s.minZoom):s.maxZoom=Math.max(s.minZoom,s.maxZoom),typeof s.subdomains=="string"&&(s.subdomains=s.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(t,s){return this._url===t&&s===void 0&&(s=!0),this._url=t,s||this.redraw(),this},createTile:function(t,s){var l=document.createElement("img");return Se(l,"load",u(this._tileOnLoad,this,s,l)),Se(l,"error",u(this._tileOnError,this,s,l)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(l.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(l.referrerPolicy=this.options.referrerPolicy),l.alt="",l.src=this.getTileUrl(t),l},getTileUrl:function(t){var s={r:de.retina?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var l=this._globalTileRange.max.y-t.y;this.options.tms&&(s.y=l),s["-y"]=l}return D(this._url,o(s,this.options))},_tileOnLoad:function(t,s){de.ielt9?setTimeout(u(t,this,null,s),0):t(null,s)},_tileOnError:function(t,s,l){var c=this.options.errorTileUrl;c&&s.getAttribute("src")!==c&&(s.src=c),t(l,s)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,s=this.options.maxZoom,l=this.options.zoomReverse,c=this.options.zoomOffset;return l&&(t=s-t),t+c},_getSubdomain:function(t){var s=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[s]},_abortLoading:function(){var t,s;for(t in this._tiles)if(this._tiles[t].coords.z!==this._tileZoom&&(s=this._tiles[t].el,s.onload=g,s.onerror=g,!s.complete)){s.src=ue;var l=this._tiles[t].coords;Xe(s),delete this._tiles[t],this.fire("tileabort",{tile:s,coords:l})}},_removeTile:function(t){var s=this._tiles[t];if(s)return s.el.setAttribute("src",ue),es.prototype._removeTile.call(this,t)},_tileReady:function(t,s,l){if(!(!this._map||l&&l.getAttribute("src")===ue))return es.prototype._tileReady.call(this,t,s,l)}});function cl(t,s){return new mn(t,s)}var dl=mn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,s){this._url=t;var l=o({},this.defaultWmsParams);for(var c in s)c in this.options||(l[c]=s[c]);s=E(this,s);var f=s.detectRetina&&de.retina?2:1,_=this.getTileSize();l.width=_.x*f,l.height=_.y*f,this.wmsParams=l},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var s=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[s]=this._crs.code,mn.prototype.onAdd.call(this,t)},getTileUrl:function(t){var s=this._tileCoordsToNwSe(t),l=this._crs,c=qe(l.project(s[0]),l.project(s[1])),f=c.min,_=c.max,S=(this._wmsVersion>=1.3&&this._crs===nl?[f.y,f.x,_.y,_.x]:[f.x,f.y,_.x,_.y]).join(","),O=mn.prototype.getTileUrl.call(this,t);return O+k(this.wmsParams,O,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+S},setParams:function(t,s){return o(this.wmsParams,t),s||this.redraw(),this}});function Hh(t,s){return new dl(t,s)}mn.WMS=dl,cl.wms=Hh;var mi=Kt.extend({options:{padding:.1},initialize:function(t){E(this,t),h(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),xe(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,s){var l=this._map.getZoomScale(s,this._zoom),c=this._map.getSize().multiplyBy(.5+this.options.padding),f=this._map.project(this._center,s),_=c.multiplyBy(-l).add(f).subtract(this._map._getNewPixelOrigin(t,s));de.any3d?zi(this._container,_,l):nt(this._container,_)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,s=this._map.getSize(),l=this._map.containerPointToLayerPoint(s.multiplyBy(-t)).round();this._bounds=new $e(l,l.add(s.multiplyBy(1+t*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),hl=mi.extend({options:{tolerance:0},getEvents:function(){var t=mi.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){mi.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");Se(t,"mousemove",this._onMouseMove,this),Se(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Se(t,"mouseout",this._handleMouseOut,this),t._leaflet_disable_events=!0,this._ctx=t.getContext("2d")},_destroyContainer:function(){W(this._redrawRequest),delete this._ctx,Xe(this._container),He(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var s in this._layers)t=this._layers[s],t._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var t=this._bounds,s=this._container,l=t.getSize(),c=de.retina?2:1;nt(s,t.min),s.width=c*l.x,s.height=c*l.y,s.style.width=l.x+"px",s.style.height=l.y+"px",de.retina&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){mi.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[h(t)]=t;var s=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=s),this._drawLast=s,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var s=t._order,l=s.next,c=s.prev;l?l.prev=c:this._drawLast=c,c?c.next=l:this._drawFirst=l,delete t._order,delete this._layers[h(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(typeof t.options.dashArray=="string"){var s=t.options.dashArray.split(/[, ]+/),l=[],c,f;for(f=0;f<s.length;f++){if(c=Number(s[f]),isNaN(c))return;l.push(c)}t.options._dashArray=l}else t.options._dashArray=t.options.dashArray},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||x(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var s=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new $e,this._redrawBounds.extend(t._pxBounds.min.subtract([s,s])),this._redrawBounds.extend(t._pxBounds.max.add([s,s]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var s=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,s.x,s.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var t,s=this._redrawBounds;if(this._ctx.save(),s){var l=s.getSize();this._ctx.beginPath(),this._ctx.rect(s.min.x,s.min.y,l.x,l.y),this._ctx.clip()}this._drawing=!0;for(var c=this._drawFirst;c;c=c.next)t=c.layer,(!s||t._pxBounds&&t._pxBounds.intersects(s))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,s){if(this._drawing){var l,c,f,_,S=t._parts,O=S.length,I=this._ctx;if(O){for(I.beginPath(),l=0;l<O;l++){for(c=0,f=S[l].length;c<f;c++)_=S[l][c],I[c?"lineTo":"moveTo"](_.x,_.y);s&&I.closePath()}this._fillStroke(I,t)}}},_updateCircle:function(t){if(!(!this._drawing||t._empty())){var s=t._point,l=this._ctx,c=Math.max(Math.round(t._radius),1),f=(Math.max(Math.round(t._radiusY),1)||c)/c;f!==1&&(l.save(),l.scale(1,f)),l.beginPath(),l.arc(s.x,s.y/f,c,0,Math.PI*2,!1),f!==1&&l.restore(),this._fillStroke(l,t)}},_fillStroke:function(t,s){var l=s.options;l.fill&&(t.globalAlpha=l.fillOpacity,t.fillStyle=l.fillColor||l.color,t.fill(l.fillRule||"evenodd")),l.stroke&&l.weight!==0&&(t.setLineDash&&t.setLineDash(s.options&&s.options._dashArray||[]),t.globalAlpha=l.opacity,t.lineWidth=l.weight,t.strokeStyle=l.color,t.lineCap=l.lineCap,t.lineJoin=l.lineJoin,t.stroke())},_onClick:function(t){for(var s=this._map.mouseEventToLayerPoint(t),l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(!(t.type==="click"||t.type==="preclick")||!this._map._draggableMoved(l))&&(c=l);this._fireEvent(c?[c]:!1,t)},_onMouseMove:function(t){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var s=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,s)}},_handleMouseOut:function(t){var s=this._hoveredLayer;s&&(tt(this._container,"leaflet-interactive"),this._fireEvent([s],t,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(t,s){if(!this._mouseHoverThrottled){for(var l,c,f=this._drawFirst;f;f=f.next)l=f.layer,l.options.interactive&&l._containsPoint(s)&&(c=l);c!==this._hoveredLayer&&(this._handleMouseOut(t),c&&(xe(this._container,"leaflet-interactive"),this._fireEvent([c],t,"mouseover"),this._hoveredLayer=c)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,t),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(t,s,l){this._map._fireDOMEvent(s,l||s.type,t)},_bringToFront:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(l)l.prev=c;else return;c?c.next=l:l&&(this._drawFirst=l),s.prev=this._drawLast,this._drawLast.next=s,s.next=null,this._drawLast=s,this._requestRedraw(t)}},_bringToBack:function(t){var s=t._order;if(s){var l=s.next,c=s.prev;if(c)c.next=l;else return;l?l.prev=c:c&&(this._drawLast=c),s.prev=null,s.next=this._drawFirst,this._drawFirst.prev=s,this._drawFirst=s,this._requestRedraw(t)}}});function fl(t){return de.canvas?new hl(t):null}var ts=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch{}return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Zh={_initContainer:function(){this._container=Ne("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(mi.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var s=t._container=ts("shape");xe(s,"leaflet-vml-shape "+(this.options.className||"")),s.coordsize="1 1",t._path=ts("path"),s.appendChild(t._path),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){var s=t._container;this._container.appendChild(s),t.options.interactive&&t.addInteractiveTarget(s)},_removePath:function(t){var s=t._container;Xe(s),t.removeInteractiveTarget(s),delete this._layers[h(t)]},_updateStyle:function(t){var s=t._stroke,l=t._fill,c=t.options,f=t._container;f.stroked=!!c.stroke,f.filled=!!c.fill,c.stroke?(s||(s=t._stroke=ts("stroke")),f.appendChild(s),s.weight=c.weight+"px",s.color=c.color,s.opacity=c.opacity,c.dashArray?s.dashStyle=M(c.dashArray)?c.dashArray.join(" "):c.dashArray.replace(/( *, *)/g," "):s.dashStyle="",s.endcap=c.lineCap.replace("butt","flat"),s.joinstyle=c.lineJoin):s&&(f.removeChild(s),t._stroke=null),c.fill?(l||(l=t._fill=ts("fill")),f.appendChild(l),l.color=c.fillColor||c.color,l.opacity=c.fillOpacity):l&&(f.removeChild(l),t._fill=null)},_updateCircle:function(t){var s=t._point.round(),l=Math.round(t._radius),c=Math.round(t._radiusY||l);this._setPath(t,t._empty()?"M0 0":"AL "+s.x+","+s.y+" "+l+","+c+" 0,"+65535*360)},_setPath:function(t,s){t._path.v=s},_bringToFront:function(t){un(t._container)},_bringToBack:function(t){cn(t._container)}},Ws=de.vml?ts:K,is=mi.extend({_initContainer:function(){this._container=Ws("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ws("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Xe(this._container),He(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){mi.prototype._update.call(this);var t=this._bounds,s=t.getSize(),l=this._container;(!this._svgSize||!this._svgSize.equals(s))&&(this._svgSize=s,l.setAttribute("width",s.x),l.setAttribute("height",s.y)),nt(l,t.min),l.setAttribute("viewBox",[t.min.x,t.min.y,s.x,s.y].join(" ")),this.fire("update")}},_initPath:function(t){var s=t._path=Ws("path");t.options.className&&xe(s,t.options.className),t.options.interactive&&xe(s,"leaflet-interactive"),this._updateStyle(t),this._layers[h(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){Xe(t._path),t.removeInteractiveTarget(t._path),delete this._layers[h(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var s=t._path,l=t.options;s&&(l.stroke?(s.setAttribute("stroke",l.color),s.setAttribute("stroke-opacity",l.opacity),s.setAttribute("stroke-width",l.weight),s.setAttribute("stroke-linecap",l.lineCap),s.setAttribute("stroke-linejoin",l.lineJoin),l.dashArray?s.setAttribute("stroke-dasharray",l.dashArray):s.removeAttribute("stroke-dasharray"),l.dashOffset?s.setAttribute("stroke-dashoffset",l.dashOffset):s.removeAttribute("stroke-dashoffset")):s.setAttribute("stroke","none"),l.fill?(s.setAttribute("fill",l.fillColor||l.color),s.setAttribute("fill-opacity",l.fillOpacity),s.setAttribute("fill-rule",l.fillRule||"evenodd")):s.setAttribute("fill","none"))},_updatePoly:function(t,s){this._setPath(t,F(t._parts,s))},_updateCircle:function(t){var s=t._point,l=Math.max(Math.round(t._radius),1),c=Math.max(Math.round(t._radiusY),1)||l,f="a"+l+","+c+" 0 1,0 ",_=t._empty()?"M0 0":"M"+(s.x-l)+","+s.y+f+l*2+",0 "+f+-l*2+",0 ";this._setPath(t,_)},_setPath:function(t,s){t._path.setAttribute("d",s)},_bringToFront:function(t){un(t._path)},_bringToBack:function(t){cn(t._path)}});de.vml&&is.include(Zh);function pl(t){return de.svg||de.vml?new is(t):null}Re.include({getRenderer:function(t){var s=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return s||(s=this._renderer=this._createRenderer()),this.hasLayer(s)||this.addLayer(s),s},_getPaneRenderer:function(t){if(t==="overlayPane"||t===void 0)return!1;var s=this._paneRenderers[t];return s===void 0&&(s=this._createRenderer({pane:t}),this._paneRenderers[t]=s),s},_createRenderer:function(t){return this.options.preferCanvas&&fl(t)||pl(t)}});var ml=fn.extend({initialize:function(t,s){fn.prototype.initialize.call(this,this._boundsToLatLngs(t),s)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=Ye(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});function Kh(t,s){return new ml(t,s)}is.create=Ws,is.pointsToPath=F,pi.geometryToLayer=Fs,pi.coordsToLatLng=uo,pi.coordsToLatLngs=zs,pi.latLngToCoords=co,pi.latLngsToCoords=qs,pi.getFeature=pn,pi.asFeature=Vs,Re.mergeOptions({boxZoom:!0});var vl=si.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){Se(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){He(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Xe(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||t.which!==1&&t.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Kn(),Zr(),this._startPoint=this._map.mouseEventToContainerPoint(t),Se(document,{contextmenu:Hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=Ne("div","leaflet-zoom-box",this._container),xe(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var s=new $e(this._point,this._startPoint),l=s.getSize();nt(this._box,s.min),this._box.style.width=l.x+"px",this._box.style.height=l.y+"px"},_finish:function(){this._moved&&(Xe(this._box),tt(this._container,"leaflet-crosshair")),Wn(),Kr(),He(document,{contextmenu:Hi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if(!(t.which!==1&&t.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var s=new lt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(s).fire("boxzoomend",{boxZoomBounds:s})}},_onKeyDown:function(t){t.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Re.addInitHook("addHandler","boxZoom",vl),Re.mergeOptions({doubleClickZoom:!0});var _l=si.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var s=this._map,l=s.getZoom(),c=s.options.zoomDelta,f=t.originalEvent.shiftKey?l-c:l+c;s.options.doubleClickZoom==="center"?s.setZoom(f):s.setZoomAround(t.containerPoint,f)}});Re.addInitHook("addHandler","doubleClickZoom",_l),Re.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var gl=si.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Ti(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}xe(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){tt(this._map._container,"leaflet-grab"),tt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var s=Ye(this._map.options.maxBounds);this._offsetLimit=qe(this._map.latLngToContainerPoint(s.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(s.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var s=this._lastTime=+new Date,l=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(l),this._times.push(s),this._prunePositions(s)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),s=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=s.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,s){return t-(t-s)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var t=this._draggable._newPos.subtract(this._draggable._startPos),s=this._offsetLimit;t.x<s.min.x&&(t.x=this._viscousLimit(t.x,s.min.x)),t.y<s.min.y&&(t.y=this._viscousLimit(t.y,s.min.y)),t.x>s.max.x&&(t.x=this._viscousLimit(t.x,s.max.x)),t.y>s.max.y&&(t.y=this._viscousLimit(t.y,s.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,s=Math.round(t/2),l=this._initialWorldOffset,c=this._draggable._newPos.x,f=(c-s+l)%t+s-l,_=(c+s+l)%t-s-l,S=Math.abs(f+l)<Math.abs(_+l)?f:_;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=S},_onDragEnd:function(t){var s=this._map,l=s.options,c=!l.inertia||t.noInertia||this._times.length<2;if(s.fire("dragend",t),c)s.fire("moveend");else{this._prunePositions(+new Date);var f=this._lastPos.subtract(this._positions[0]),_=(this._lastTime-this._times[0])/1e3,S=l.easeLinearity,O=f.multiplyBy(S/_),I=O.distanceTo([0,0]),q=Math.min(l.inertiaMaxSpeed,I),ne=O.multiplyBy(q/I),ve=q/(l.inertiaDeceleration*S),Ce=ne.multiplyBy(-ve/2).round();!Ce.x&&!Ce.y?s.fire("moveend"):(Ce=s._limitOffset(Ce,s.options.maxBounds),x(function(){s.panBy(Ce,{duration:ve,easeLinearity:S,noMoveStart:!0,animate:!0})}))}}});Re.addInitHook("addHandler","dragging",gl),Re.mergeOptions({keyboard:!0,keyboardPanDelta:80});var yl=si.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),Se(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),He(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,s=document.documentElement,l=t.scrollTop||s.scrollTop,c=t.scrollLeft||s.scrollLeft;this._map._container.focus(),window.scrollTo(c,l)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var s=this._panKeys={},l=this.keyCodes,c,f;for(c=0,f=l.left.length;c<f;c++)s[l.left[c]]=[-1*t,0];for(c=0,f=l.right.length;c<f;c++)s[l.right[c]]=[t,0];for(c=0,f=l.down.length;c<f;c++)s[l.down[c]]=[0,t];for(c=0,f=l.up.length;c<f;c++)s[l.up[c]]=[0,-1*t]},_setZoomDelta:function(t){var s=this._zoomKeys={},l=this.keyCodes,c,f;for(c=0,f=l.zoomIn.length;c<f;c++)s[l.zoomIn[c]]=t;for(c=0,f=l.zoomOut.length;c<f;c++)s[l.zoomOut[c]]=-t},_addHooks:function(){Se(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){He(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var s=t.keyCode,l=this._map,c;if(s in this._panKeys){if(!l._panAnim||!l._panAnim._inProgress)if(c=this._panKeys[s],t.shiftKey&&(c=pe(c).multiplyBy(3)),l.options.maxBounds&&(c=l._limitOffset(pe(c),l.options.maxBounds)),l.options.worldCopyJump){var f=l.wrapLatLng(l.unproject(l.project(l.getCenter()).add(c)));l.panTo(f)}else l.panBy(c)}else if(s in this._zoomKeys)l.setZoom(l.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[s]);else if(s===27&&l._popup&&l._popup.options.closeOnEscapeKey)l.closePopup();else return;Hi(t)}}});Re.addInitHook("addHandler","keyboard",yl),Re.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bl=si.extend({addHooks:function(){Se(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){He(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var s=Va(t),l=this._map.options.wheelDebounceTime;this._delta+=s,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var c=Math.max(l-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),c),Hi(t)},_performZoom:function(){var t=this._map,s=t.getZoom(),l=this._map.options.zoomSnap||0;t._stop();var c=this._delta/(this._map.options.wheelPxPerZoomLevel*4),f=4*Math.log(2/(1+Math.exp(-Math.abs(c))))/Math.LN2,_=l?Math.ceil(f/l)*l:f,S=t._limitZoom(s+(this._delta>0?_:-_))-s;this._delta=0,this._startTime=null,S&&(t.options.scrollWheelZoom==="center"?t.setZoom(s+S):t.setZoomAround(this._lastMousePos,s+S))}});Re.addInitHook("addHandler","scrollWheelZoom",bl);var Wh=600;Re.mergeOptions({tapHold:de.touchNative&&de.safari&&de.mobile,tapTolerance:15});var wl=si.extend({addHooks:function(){Se(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){He(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(clearTimeout(this._holdTimeout),t.touches.length===1){var s=t.touches[0];this._startPos=this._newPos=new te(s.clientX,s.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Se(document,"touchend",mt),Se(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",s))},this),Wh),Se(document,"touchend touchcancel contextmenu",this._cancel,this),Se(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function t(){He(document,"touchend",mt),He(document,"touchend touchcancel",t)},_cancel:function(){clearTimeout(this._holdTimeout),He(document,"touchend touchcancel contextmenu",this._cancel,this),He(document,"touchmove",this._onMove,this)},_onMove:function(t){var s=t.touches[0];this._newPos=new te(s.clientX,s.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(t,s){var l=new MouseEvent(t,{bubbles:!0,cancelable:!0,view:window,screenX:s.screenX,screenY:s.screenY,clientX:s.clientX,clientY:s.clientY});l._simulated=!0,s.target.dispatchEvent(l)}});Re.addInitHook("addHandler","tapHold",wl),Re.mergeOptions({touchZoom:de.touch,bounceAtZoomLimits:!0});var Sl=si.extend({addHooks:function(){xe(this._map._container,"leaflet-touch-zoom"),Se(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){tt(this._map._container,"leaflet-touch-zoom"),He(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var s=this._map;if(!(!t.touches||t.touches.length!==2||s._animatingZoom||this._zooming)){var l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=s.getSize()._divideBy(2),this._startLatLng=s.containerPointToLatLng(this._centerPoint),s.options.touchZoom!=="center"&&(this._pinchStartLatLng=s.containerPointToLatLng(l.add(c)._divideBy(2))),this._startDist=l.distanceTo(c),this._startZoom=s.getZoom(),this._moved=!1,this._zooming=!0,s._stop(),Se(document,"touchmove",this._onTouchMove,this),Se(document,"touchend touchcancel",this._onTouchEnd,this),mt(t)}},_onTouchMove:function(t){if(!(!t.touches||t.touches.length!==2||!this._zooming)){var s=this._map,l=s.mouseEventToContainerPoint(t.touches[0]),c=s.mouseEventToContainerPoint(t.touches[1]),f=l.distanceTo(c)/this._startDist;if(this._zoom=s.getScaleZoom(f,this._startZoom),!s.options.bounceAtZoomLimits&&(this._zoom<s.getMinZoom()&&f<1||this._zoom>s.getMaxZoom()&&f>1)&&(this._zoom=s._limitZoom(this._zoom)),s.options.touchZoom==="center"){if(this._center=this._startLatLng,f===1)return}else{var _=l._add(c)._divideBy(2)._subtract(this._centerPoint);if(f===1&&_.x===0&&_.y===0)return;this._center=s.unproject(s.project(this._pinchStartLatLng,this._zoom).subtract(_),this._zoom)}this._moved||(s._moveStart(!0,!1),this._moved=!0),W(this._animRequest);var S=u(s._move,s,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=x(S,this,!0),mt(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,W(this._animRequest),He(document,"touchmove",this._onTouchMove,this),He(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Re.addInitHook("addHandler","touchZoom",Sl),Re.BoxZoom=vl,Re.DoubleClickZoom=_l,Re.Drag=gl,Re.Keyboard=yl,Re.ScrollWheelZoom=bl,Re.TapHold=wl,Re.TouchZoom=Sl,n.Bounds=$e,n.Browser=de,n.CRS=pt,n.Canvas=hl,n.Circle=lo,n.CircleMarker=Bs,n.Class=N,n.Control=Zt,n.DivIcon=ul,n.DivOverlay=ri,n.DomEvent=hh,n.DomUtil=ch,n.Draggable=Ti,n.Evented=Ae,n.FeatureGroup=hi,n.GeoJSON=pi,n.GridLayer=es,n.Handler=si,n.Icon=hn,n.ImageOverlay=Hs,n.LatLng=Me,n.LatLngBounds=lt,n.Layer=Kt,n.LayerGroup=dn,n.LineUtil=Th,n.Map=Re,n.Marker=Us,n.Mixin=yh,n.Path=Pi,n.Point=te,n.PolyUtil=bh,n.Polygon=fn,n.Polyline=fi,n.Popup=Zs,n.PosAnimation=Ha,n.Projection=Ph,n.Rectangle=ml,n.Renderer=mi,n.SVG=is,n.SVGOverlay=ll,n.TileLayer=mn,n.Tooltip=Ks,n.Transformation=an,n.Util=re,n.VideoOverlay=al,n.bind=u,n.bounds=qe,n.canvas=fl,n.circle=Dh,n.circleMarker=Ih,n.control=Yn,n.divIcon=qh,n.extend=o,n.featureGroup=Oh,n.geoJSON=ol,n.geoJson=jh,n.gridLayer=Vh,n.icon=Ch,n.imageOverlay=Nh,n.latLng=we,n.latLngBounds=Ye,n.layerGroup=Lh,n.map=fh,n.marker=Mh,n.point=pe,n.polygon=$h,n.polyline=Rh,n.popup=Fh,n.rectangle=Kh,n.setOptions=E,n.stamp=h,n.svg=pl,n.svgOverlay=Bh,n.tileLayer=cl,n.tooltip=zh,n.transformation=b,n.version=r,n.videoOverlay=Uh;var Gh=window.L;n.noConflict=function(){return window.L=Gh,this},window.L=n})})(na,na.exports);var Ag=na.exports;const Wt=Fm(Ag),zd=[{id:"station-151",name:"DIRHAMI SADAM",location:"Lne maakond",coordinates:[59.21003692279346,23.49896192760152],hasStation:!0,stationType:"Olerex",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1401",name:"VARBLA SADAM",location:"Prnu maakond",coordinates:[58.43484598380541,23.684324121426343],hasStation:!0,stationType:"Olerex",fuelLevel:20,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-326",name:"NAISSAARE SADAM",location:"Harju maakond",coordinates:[59.55759484273108,24.55348856209784],hasStation:!0,stationType:"Alexela",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-250",name:"KUIVASTU SADAM",location:"Saare maakond",coordinates:[58.57294897894946,23.392649978026128],hasStation:!0,stationType:"Other",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-207",name:"KELNASE SADAM",location:"Harju maakond",coordinates:[59.636951026768706,25.011867300486617],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-348",name:"PATAREISADAM",location:"Harju maakond",coordinates:[59.448366521516434,24.752465507475613],hasStation:!0,stationType:"Other",fuelLevel:84,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-201",name:"KALLASTE SADAM",location:"Tartu maakond",coordinates:[58.668860481142566,27.165702769947824],hasStation:!0,stationType:"Alexela",fuelLevel:21,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-370",name:"PRNU SADAM",location:"Prnu maakond",coordinates:[58.38634198599385,24.481508870106325],hasStation:!0,stationType:"Other",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-313",name:"LEPPNEEME SADAM",location:"Harju maakond",coordinates:[59.5509187722641,24.868294011100197],hasStation:!0,stationType:"Other",fuelLevel:78,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-390",name:"VENE-BALTI SADAM",location:"Harju maakond",coordinates:[59.4593728708958,24.660111697149414],hasStation:!0,stationType:"Other",fuelLevel:50,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-302",name:"KURESSAARE SADAM",location:"Saare maakond",coordinates:[58.24504241378111,22.470592197513312],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-347",name:"PALDISKI PHJASADAM",location:"Harju maakond",coordinates:[59.34843151798162,24.051153538315592],hasStation:!0,stationType:"Other",fuelLevel:29,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-357",name:"ROOMASSAARE SADAM",location:"Saare maakond",coordinates:[58.216442900827786,22.505283815589987],hasStation:!0,stationType:"Other",fuelLevel:98,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-371",name:"SOELA SADAM",location:"Saare maakond",coordinates:[58.61757022248619,22.592246484257174],hasStation:!0,stationType:"Alexela",fuelLevel:98,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-374",name:"SUURSADAM",location:"Hiiu maakond",coordinates:[58.97588001930916,22.90780230864535],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1403",name:"KARLOVA PAADISADAM",location:"Tartu maakond",coordinates:[58.36924669964509,26.745325133140085],hasStation:!0,stationType:"Other",fuelLevel:58,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-373",name:"SUUR-HOLMI SADAM",location:"Lne maakond",coordinates:[58.958300072379465,23.526310476455595],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-382",name:"TOILA SADAM",location:"Ida-Viru maakond",coordinates:[59.427786464737984,27.5348288564074],hasStation:!0,stationType:"Other",fuelLevel:24,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1600",name:"VSU SADAM",location:"Lne-Viru maakond",coordinates:[59.585700818310315,25.970719810712986],hasStation:!0,stationType:"Olerex",fuelLevel:99,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-318",name:"LOHUSALU SADAM",location:"Harju maakond",coordinates:[59.402582381641324,24.20638965593215],hasStation:!0,stationType:"Other",fuelLevel:85,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-6600",name:"VRSKA SADAM",location:"Vru maakond",coordinates:[57.958099398442535,27.628566145050225],hasStation:!0,stationType:"Other",fuelLevel:65,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1907",name:"SUARU SADAM",location:"Prnu maakond",coordinates:[58.14100107258266,24.01825909036016],hasStation:!0,stationType:"Alexela",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-51",name:"KOLJUNUKI SADAM",location:"Harju maakond",coordinates:[59.50503122798446,25.089844423357498],hasStation:!0,stationType:"Other",fuelLevel:99,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1452",name:"KOLKJA SADAM",location:"Tartu maakond",coordinates:[58.55530338233313,27.21829548241359],hasStation:!0,stationType:"Other",fuelLevel:48,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-324",name:"LUNARANNA SADAM",location:"Saare maakond",coordinates:[58.5410841962558,23.318508199317954],hasStation:!0,stationType:"Alexela",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-368",name:"SILLAME SADAM",location:"Ida-Viru maakond",coordinates:[59.418699435561486,27.737863067827544],hasStation:!0,stationType:"Other",fuelLevel:30,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-168",name:"PIRITA SADAM",location:"Harju maakond",coordinates:[59.466849255484284,24.822584053315577],hasStation:!0,stationType:"Other",fuelLevel:87,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-330",name:"MNTU SADAM",location:"Saare maakond",coordinates:[57.948558221449865,22.12621804490712],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-154",name:"HELTERMAA SADAM",location:"Hiiu maakond",coordinates:[58.86586149705953,23.045427562456016],hasStation:!0,stationType:"Other",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-344",name:"RUHNU SADAM",location:"Saare maakond",coordinates:[57.78123357568677,23.27055552095325],hasStation:!0,stationType:"Alexela",fuelLevel:94,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2101",name:"MNTU VIKELAEVADE SADAM",location:"Saare maakond",coordinates:[57.949315460072754,22.122961869349453],hasStation:!0,stationType:"Other",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-402",name:"VRATI SADAM",location:"Prnu maakond",coordinates:[58.30904639720103,23.98906592639463],hasStation:!0,stationType:"Olerex",fuelLevel:95,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-360",name:"RPINA SADAM",location:"Plva maakond",coordinates:[58.12528842065397,27.529742753356434],hasStation:!0,stationType:"Other",fuelLevel:75,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-389",name:"VASKNARVA PAADISADAM",location:"Ida-Viru maakond",coordinates:[58.99686410270323,27.741337017336683],hasStation:!0,stationType:"Other",fuelLevel:96,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-804",name:"NEEME SADAM",location:"Harju maakond",coordinates:[59.531374963563266,25.160386352856108],hasStation:!0,stationType:"Other",fuelLevel:0,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1201",name:"PRNU JAHTKLUBI JAHISADAM",location:"Prnu maakond",coordinates:[58.386999980487374,24.49066001630294],hasStation:!0,stationType:"Other",fuelLevel:70,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2115",name:"NARVA-JESUU SADAM",location:"Ida-Viru maakond",coordinates:[59.46474251606081,28.04529010935306],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-452",name:"KRDLA SADAM",location:"Hiiu maakond",coordinates:[59.00878218744771,22.75255657459167],hasStation:!0,stationType:"Other",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-3934",name:"LUUNJA JESADAM",location:"Tartu maakond",coordinates:[58.35422312635373,26.881983927553723],hasStation:!0,stationType:"Other",fuelLevel:80,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1210",name:"KABERNEEME SADAM",location:"Harju maakond",coordinates:[59.520062821619156,25.278242581356942],hasStation:!0,stationType:"Olerex",fuelLevel:48,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-163",name:"KAKUME SADAM",location:"Harju maakond",coordinates:[59.45097870670802,24.603946567184025],hasStation:!0,stationType:"Alexela",fuelLevel:57,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-1207",name:"KIGUSTE SADAM",location:"Saare maakond",coordinates:[58.370242604922666,22.97454178228539],hasStation:!0,stationType:"Alexela",fuelLevel:100,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr","app"],hours:"24/7"},{id:"station-2266",name:"MEHIKOORMA SADAM",location:"Plva maakond",coordinates:[58.23711955631759,27.474515950329753],hasStation:!0,stationType:"Other",fuelLevel:26,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-450",name:"EISMA SADAM",location:"Lne-Viru maakond",coordinates:[59.56978286768515,26.303200688222102],hasStation:!0,stationType:"Olerex",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-332",name:"OIU SADAM",location:"Viljandi maakond",coordinates:[58.398338614687276,25.97592285103282],hasStation:!0,stationType:"Other",fuelLevel:83,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-2114",name:"HARA SADAM",location:"Harju maakond",coordinates:[59.58873686885067,25.613293788125322],hasStation:!0,stationType:"Other",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-376",name:"SRU SADAM",location:"Hiiu maakond",coordinates:[58.69156723910896,22.522160411928486],hasStation:!0,stationType:"Other",fuelLevel:37,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-1966",name:"SAAGA SADAM",location:"Tartu maakond",coordinates:[58.381139460562494,26.99149335204067],hasStation:!0,stationType:"Other",fuelLevel:59,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"station-404",name:"WESTMERI JAHISADAM",location:"Lne maakond",coordinates:[58.95912661614998,23.52535516470745],hasStation:!0,stationType:"Other",fuelLevel:2,capacity:8e3,fuels:{diesel:{available:!0,price:1.54},e95:{available:!0,price:1.69},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-362",name:"SAASTNA VANASADAM",location:"Prnu maakond",coordinates:[58.73073039790515,23.566114437338317],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9184",name:"VAALA SADAM",location:"Prnu maakond",coordinates:[58.363177821976116,24.56847690319154],hasStation:!0,stationType:"FuelDock",fuelLevel:59,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3989",name:"KIIDEVA SADAM",location:"Lne maakond",coordinates:[58.77161284265908,23.547805120308286],hasStation:!0,stationType:"FuelDock",fuelLevel:2,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-384",name:"VASKNARVA",location:"Ida-Viru maakond",coordinates:[59.007928664881895,27.736718062775935],hasStation:!0,stationType:"FuelDock",fuelLevel:22,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-200",name:"KALLASTE SADAM",location:"Saare maakond",coordinates:[58.6681380168726,23.253271458237467],hasStation:!0,stationType:"FuelDock",fuelLevel:85,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2659",name:"ALLIKLEPA SADAM",location:"Harju maakond",coordinates:[59.28493976831885,23.79287842078223],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-310",name:"LAO SADAM",location:"Prnu maakond",coordinates:[58.23406118749257,24.12211430721333],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6155",name:"NARVA-JESUU KALURISADAM",location:"Ida-Viru maakond",coordinates:[59.45928564119241,28.065444184945235],hasStation:!0,stationType:"FuelDock",fuelLevel:62,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2200",name:"NASVA JESADAM",location:"Saare maakond",coordinates:[58.22927401448976,22.3815052413029],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-710",name:"ADMIRALI VIKESADAM",location:"Prnu maakond",coordinates:[58.52980831241627,23.67822960415182],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-355",name:"ROOGRAHU SADAM",location:"Hiiu maakond",coordinates:[58.99972382472675,22.819022156007403],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-397",name:"VIDU SADAM",location:"Prnu maakond",coordinates:[58.30861522084546,24.020126188552936],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-164",name:"KALANA SADAM",location:"Hiiu maakond",coordinates:[58.9199467123978,22.057586566782323],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-352",name:"ROHUNEEME SADAM",location:"Harju maakond",coordinates:[59.558595051987844,24.7929295975825],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-212",name:"KOGUVA SADAM",location:"Saare maakond",coordinates:[58.5960754,23.075541],hasStation:!0,stationType:"FuelDock",fuelLevel:6,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-399",name:"VRKAIA SADAM",location:"Saare maakond",coordinates:[58.68247571496831,23.198758797370793],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-354",name:"ROHUNEEME VIKESADAM",location:"Harju maakond",coordinates:[59.559144067264775,24.793449784823064],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-52",name:"MIIDURANNA SADAM",location:"Harju maakond",coordinates:[59.49981500907193,24.814816485991393],hasStation:!0,stationType:"FuelDock",fuelLevel:7,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-708",name:"HALDI SADAM",location:"Hiiu maakond",coordinates:[58.806952076597874,22.446811851797356],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-162",name:"JEKRU SADAM",location:"Ida-Viru maakond",coordinates:[58.982702907194515,27.18212296967626],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-319",name:"MUNALAIU SADAM",location:"Prnu maakond",coordinates:[58.22911019419104,24.118643304592368],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-331",name:"MNNI VIKESADAM",location:"Prnu maakond",coordinates:[58.517979719027004,23.66405820378694],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-329",name:"NURME SADAM",location:"Harju maakond",coordinates:[59.51790225516271,24.80058976342078],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-349",name:"RISTNA LUNASADAM",location:"Hiiu maakond",coordinates:[58.92166086743255,22.06255289395695],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-358",name:"ROOPA SADAM",location:"Saare maakond",coordinates:[58.26326730006585,21.873827533691543],hasStation:!0,stationType:"FuelDock",fuelLevel:89,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1650",name:"SALINMME PAADISADAM",location:"Hiiu maakond",coordinates:[58.84468620000001,22.9373696],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2139",name:"NAISTLAIU SADAM",location:"Hiiu maakond",coordinates:[58.82473230000001,23.0324017],hasStation:!0,stationType:"FuelDock",fuelLevel:57,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-7101",name:"VAINU SADAM",location:"Harju maakond",coordinates:[59.501530243091835,25.458218586290347],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-333",name:"PALDISKI LUNASADAM",location:"Harju maakond",coordinates:[59.3349842563559,24.07896335384912],hasStation:!0,stationType:"FuelDock",fuelLevel:53,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-150",name:"BEKKERI SADAM",location:"Harju maakond",coordinates:[59.455599980566376,24.666024192915636],hasStation:!0,stationType:"FuelDock",fuelLevel:55,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3703",name:"ASERI VIKESADAM (EHITAMISEL)",location:"Lne-Viru maakond",coordinates:[59.45894762396577,26.88345739849666],hasStation:!0,stationType:"FuelDock",fuelLevel:34,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-315",name:"LINDI SADAM",location:"Prnu maakond",coordinates:[58.32955079426123,24.2899292277986],hasStation:!0,stationType:"FuelDock",fuelLevel:88,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3956",name:"RANNAAUGU SADAM",location:"Saare maakond",coordinates:[58.54532536434771,22.219043842318335],hasStation:!0,stationType:"FuelDock",fuelLevel:99,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-160",name:"JUHETA VIKESADAM",location:"Prnu maakond",coordinates:[58.36906383262766,24.294891453787876],hasStation:!0,stationType:"FuelDock",fuelLevel:51,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1202",name:"PRANGLI LUNASADAM",location:"Harju maakond",coordinates:[59.61477372687315,25.015589776094654],hasStation:!0,stationType:"FuelDock",fuelLevel:82,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2670",name:"SUARU KALASADAM",location:"Prnu maakond",coordinates:[58.14107752311868,24.015984614824013],hasStation:!0,stationType:"FuelDock",fuelLevel:52,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2059",name:"RLBY SADAM",location:"Lne maakond",coordinates:[59.025715675105985,23.277143300727463],hasStation:!0,stationType:"FuelDock",fuelLevel:4,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-383",name:"TREIMANI SADAM",location:"Prnu maakond",coordinates:[57.918494898835526,24.384048374730778],hasStation:!0,stationType:"FuelDock",fuelLevel:39,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-159",name:"JAAGUPI SADAM",location:"Prnu maakond",coordinates:[58.03645036928897,24.458270931851438],hasStation:!0,stationType:"FuelDock",fuelLevel:68,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-361",name:"SAAREPERA SADAM",location:"Plva maakond",coordinates:[58.1742387352723,27.496037095724574],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-210",name:"MUUGA SADAM",location:"Harju maakond",coordinates:[59.49536860774204,24.968909471408764],hasStation:!0,stationType:"FuelDock",fuelLevel:77,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2201",name:"MURATSI SADAM",location:"Saare maakond",coordinates:[58.230389667099594,22.575831463546947],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2665",name:"TORI JESADAM",location:"Saare maakond",coordinates:[58.245886548353305,22.467679256723216],hasStation:!0,stationType:"FuelDock",fuelLevel:5,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2158",name:"VARNJA SADAM",location:"Tartu maakond",coordinates:[58.48841461385842,27.24307947289049],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9354",name:"KASSARIOTSA SADAM",location:"Hiiu maakond",coordinates:[58.78134285116765,22.84932573879327],hasStation:!0,stationType:"FuelDock",fuelLevel:90,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2058",name:"TAALIKU SADAM",location:"Saare maakond",coordinates:[58.60419234080926,22.97888690013703],hasStation:!0,stationType:"FuelDock",fuelLevel:24,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-401",name:"VPSU SADAM",location:"Plva maakond",coordinates:[58.08184717841632,27.544961574835792],hasStation:!0,stationType:"FuelDock",fuelLevel:81,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2152",name:"NVA SADAM",location:"Lne maakond",coordinates:[59.24743622790684,23.664776411518794],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1212",name:"VARESE SADAM",location:"Saare maakond",coordinates:[58.57447335160411,22.399202350590063],hasStation:!0,stationType:"FuelDock",fuelLevel:17,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2674",name:"ABAJA SADAM",location:"Saare maakond",coordinates:[58.36938736593679,22.01689148827335],hasStation:!0,stationType:"FuelDock",fuelLevel:76,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-203",name:"PALJASSAARE SADAM",location:"Harju maakond",coordinates:[59.46336338912072,24.714709799050695],hasStation:!0,stationType:"FuelDock",fuelLevel:20,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2640",name:"KAAVI PAADISADAM",location:"Saare maakond",coordinates:[57.9815627,22.2023884],hasStation:!0,stationType:"FuelDock",fuelLevel:21,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-300",name:"KUNDA SADAM",location:"Lne-Viru maakond",coordinates:[59.52789303465741,26.546938436101357],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1962",name:"VALMERANNA SADAM",location:"Saare maakond",coordinates:[58.49668772855224,23.233283609424635],hasStation:!0,stationType:"FuelDock",fuelLevel:19,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9000",name:"MEREME SADAM",location:"Hiiu maakond",coordinates:[58.827722406684835,22.94929157869701],hasStation:!0,stationType:"FuelDock",fuelLevel:49,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2662",name:"AHOI JESADAM",location:"Saare maakond",coordinates:[58.225771484720006,22.382422628013053],hasStation:!0,stationType:"FuelDock",fuelLevel:80,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-398",name:"VISTE SADAM",location:"Prnu maakond",coordinates:[58.21498208590553,24.468800907359537],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-386",name:"TULETORNI KAI",location:"Hiiu maakond",coordinates:[58.789374519254764,22.771203367080076],hasStation:!0,stationType:"FuelDock",fuelLevel:96,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1939",name:"JE PAADISADAM",location:"Tartu maakond",coordinates:[58.3719368,26.7402542],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-339",name:"RANNAMETSA SADAM",location:"Prnu maakond",coordinates:[58.1228266725876,24.478076514051146],hasStation:!0,stationType:"FuelDock",fuelLevel:67,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-320",name:"LOHUSUU SADAM",location:"Jgeva maakond",coordinates:[58.9420857161942,27.052084407598997],hasStation:!0,stationType:"FuelDock",fuelLevel:79,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-323",name:"MUSTVEE SADAM",location:"Jgeva maakond",coordinates:[58.84657657518838,26.950010156582593],hasStation:!0,stationType:"FuelDock",fuelLevel:33,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9006",name:"VESTSILLA SADAM",location:"Lne maakond",coordinates:[58.94112537132108,23.45780081404875],hasStation:!0,stationType:"FuelDock",fuelLevel:71,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9119",name:"MNNIKU SADAM",location:"Hiiu maakond",coordinates:[58.78608590230018,22.77686859474286],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2257",name:"PAPISSAARE SADAM",location:"Saare maakond",coordinates:[58.359950228367275,21.985874150886424],hasStation:!0,stationType:"FuelDock",fuelLevel:1,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-854",name:"KESSE-JAANI SADAM",location:"Saare maakond",coordinates:[58.63182538532375,23.443455985247624],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-369",name:"PUSI VIKESADAM",location:"Tartu maakond",coordinates:[58.64599657833848,27.169645630816664],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-312",name:"LENNUSADAM",location:"Harju maakond",coordinates:[59.45306994544707,24.73578212131489],hasStation:!0,stationType:"FuelDock",fuelLevel:13,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-101",name:"AEGNA SADAM",location:"Harju maakond",coordinates:[59.57139401986587,24.757647451495856],hasStation:!0,stationType:"FuelDock",fuelLevel:45,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-378",name:"UNGUMA SADAM",location:"Saare maakond",coordinates:[58.460365166683424,23.146986403026737],hasStation:!0,stationType:"FuelDock",fuelLevel:27,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-375",name:"SVIBY SADAM",location:"Lne maakond",coordinates:[58.971306711840775,23.31288092166234],hasStation:!0,stationType:"FuelDock",fuelLevel:16,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2132",name:"PASLEPA-VIIGI SADAM",location:"Lne maakond",coordinates:[59.0242330852399,23.44388008955642],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-305",name:"SAAREMAA SADAM",location:"Saare maakond",coordinates:[58.53618451842988,22.238451896147108],hasStation:!0,stationType:"FuelDock",fuelLevel:15,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-6967",name:"HAAPSALU VANASADAM",location:"Lne maakond",coordinates:[58.956072724190506,23.530434591097862],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-336",name:"ORJAKU SADAM",location:"Hiiu maakond",coordinates:[58.78875184646206,22.771536453302517],hasStation:!0,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-709",name:"TALVESADAM",location:"Prnu maakond",coordinates:[58.385433708468824,24.492859909525208],hasStation:!0,stationType:"FuelDock",fuelLevel:74,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1943",name:"TARVASTU SADAM",location:"Viljandi maakond",coordinates:[58.25279979063932,25.96429932088659],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9003",name:"RAHUSTE SADAM (EHITAMISEL)",location:"Saare maakond",coordinates:[58.07108782421003,22.133503437845288],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-396",name:"VIRTSU VANASADAM",location:"Prnu maakond",coordinates:[58.579062850862094,23.519255379601553],hasStation:!0,stationType:"FuelDock",fuelLevel:58,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-341",name:"RAJA VIKESADAM",location:"Jgeva maakond",coordinates:[58.82887193850611,26.946083113486765],hasStation:!0,stationType:"FuelDock",fuelLevel:0,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9169",name:"JESUU SADAM",location:"Viljandi maakond",coordinates:[58.38486567162639,26.133840792200246],hasStation:!0,stationType:"FuelDock",fuelLevel:46,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-317",name:"LIU VIKESADAM",location:"Prnu maakond",coordinates:[58.27911366655924,24.266310835893727],hasStation:!0,stationType:"FuelDock",fuelLevel:41,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2103",name:"PURTSE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.43414866191135,26.99094676902478],hasStation:!0,stationType:"FuelDock",fuelLevel:60,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1968",name:"PAE SADAM",location:"Saare maakond",coordinates:[58.49131925700116,23.268490170781323],hasStation:!0,stationType:"FuelDock",fuelLevel:42,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9009",name:"PRNU VANASADAM",location:"Prnu maakond",coordinates:[58.387767625213726,24.493385561739647],hasStation:!0,stationType:"FuelDock",fuelLevel:12,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-400",name:"VIKE-TURU SADAM",location:"Tartu maakond",coordinates:[58.378014764316596,26.736441846472427],hasStation:!0,stationType:"FuelDock",fuelLevel:36,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-322",name:"LMALA SADAM",location:"Saare maakond",coordinates:[58.17286388235762,22.119335565707047],hasStation:!0,stationType:"FuelDock",fuelLevel:66,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-301",name:"KUNGLA SADAM",location:"Saare maakond",coordinates:[58.363062455363405,22.95448957721547],hasStation:!0,stationType:"FuelDock",fuelLevel:86,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-359",name:"PURTSE SADAM",location:"Ida-Viru maakond",coordinates:[59.43496703955746,26.991858205788642],hasStation:!0,stationType:"FuelDock",fuelLevel:31,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1203",name:"RUHVE SADAM",location:"Saare maakond",coordinates:[58.37778694035379,23.039960672663877],hasStation:!0,stationType:"FuelDock",fuelLevel:100,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-167",name:"KALEVI JAHTKLUBI SADAM",location:"Harju maakond",coordinates:[59.46737523850052,24.826854488297457],hasStation:!0,stationType:"FuelDock",fuelLevel:50,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-9011",name:"UUS SADAM",location:"Lne maakond",coordinates:[58.95942544291826,23.50942821303493],hasStation:!0,stationType:"FuelDock",fuelLevel:94,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-343",name:"REMNIKU VANASADAM",location:"Ida-Viru maakond",coordinates:[59.010867566160115,27.54307865153787],hasStation:!0,stationType:"FuelDock",fuelLevel:18,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-303",name:"KURKSE SADAM",location:"Harju maakond",coordinates:[59.28832895232838,24.02159065267846],hasStation:!0,stationType:"FuelDock",fuelLevel:48,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-385",name:"TRIIGI SADAM",location:"Saare maakond",coordinates:[58.59162845433841,22.717430403041075],hasStation:!0,stationType:"FuelDock",fuelLevel:87,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-1400",name:"SRU JAHISADAM",location:"Hiiu maakond",coordinates:[58.69425158708312,22.523211766635303],hasStation:!0,stationType:"FuelDock",fuelLevel:8,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-2456",name:"OSMUSSAARE SADAM",location:"Lne maakond",coordinates:[59.27636803821998,23.411967874777897],hasStation:!0,stationType:"FuelDock",fuelLevel:9,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-805",name:"LAUTRI SADAM",location:"Hiiu maakond",coordinates:[58.8032955665529,22.74449914957879],hasStation:!0,stationType:"FuelDock",fuelLevel:64,capacity:5e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-3921",name:"UISUSADAM",location:"Saare maakond",coordinates:[58.560141628008886,23.088235290479798],hasStation:!0,stationType:"FuelDock",fuelLevel:95,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"fueldock-206",name:"KAVARU SADAM",location:"Prnu maakond",coordinates:[58.26959033387641,24.1929459655635],hasStation:!1,stationType:"FuelDock",fuelLevel:73,capacity:3e3,fuels:{diesel:{available:!0,price:1.54},e98:{available:!0,price:1.79}},payment:["card","qr"],hours:"24/7"},{id:"no-fuel-53",name:"ABRUKA SADAM",location:"Saare maakond",coordinates:[58.16249579999999,22.5253685],hasStation:!1},{id:"no-fuel-156",name:"ALAJE KALASADAM",location:"Ida-Viru maakond",coordinates:[59.00760824317872,27.43315649366905],hasStation:!1},{id:"no-fuel-161",name:"ATLA SADAM",location:"Saare maakond",coordinates:[58.30182561400056,21.89417462777699],hasStation:!1},{id:"no-fuel-8403",name:"BERESJE SADAM",location:"Vru maakond",coordinates:[58.08933965040894,27.581745397645683],hasStation:!1},{id:"no-fuel-9173",name:"BRGERMEISTRI SADAM",location:"Lne maakond",coordinates:[58.962750098622465,23.51982933938877],hasStation:!1},{id:"no-fuel-152",name:"HAAPSALU VESKIVIIGI SADAM",location:"Lne maakond",coordinates:[58.957906797945306,23.527560438372888],hasStation:!1},{id:"no-fuel-2259",name:"HARA SADAM",location:"Lne maakond",coordinates:[59.089547144334546,23.528659333244907],hasStation:!1},{id:"no-fuel-157",name:"HIIESSAARE SADAM",location:"Hiiu maakond",coordinates:[59.00219377023878,22.84236244766205],hasStation:!1},{id:"no-fuel-158",name:"HUNDIPEA SADAM",location:"Harju maakond",coordinates:[59.457312008996055,24.717993325664104],hasStation:!1},{id:"no-fuel-3677",name:"JAPSI KALASADAM",location:"Prnu maakond",coordinates:[58.3892241359425,24.487270069670497],hasStation:!1},{id:"no-fuel-9010",name:"JERE PAADISADAM",location:"Tartu maakond",coordinates:[58.33761913210218,26.786921028512324],hasStation:!1},{id:"no-fuel-7151",name:"KADARIKU SADAM",location:"Prnu maakond",coordinates:[58.45423618866158,23.685171323438134],hasStation:!1},{id:"no-fuel-8350",name:"KAKRI KALASADAM",location:"Hiiu maakond",coordinates:[58.97625603209905,22.906171653353994],hasStation:!1},{id:"no-fuel-346",name:"KALANA JAHISADAM",location:"Hiiu maakond",coordinates:[58.921752249722424,22.05812188152198],hasStation:!1},{id:"no-fuel-165",name:"KALASADAM",location:"Harju maakond",coordinates:[59.44572413728157,24.748646112018033],hasStation:!1},{id:"no-fuel-8909",name:"KALDASILLA SADAM",location:"Jgeva maakond",coordinates:[58.77706910196583,26.98008280857649],hasStation:!1},{id:"no-fuel-1960",name:"KALDU SADAM",location:"Saare maakond",coordinates:[58.45409024759508,23.268570985854836],hasStation:!1},{id:"no-fuel-2134",name:"KALMAKLA SADAM",location:"Jgeva maakond",coordinates:[58.89112288008285,26.969858407974247],hasStation:!1},{id:"no-fuel-2354",name:"KAREPA SADAM ",location:"Lne-Viru maakond",coordinates:[59.547455175281335,26.423717795855435],hasStation:!1},{id:"no-fuel-2611",name:"KASSARI SADAM",location:"Hiiu maakond",coordinates:[58.78206296922745,22.8497978117697],hasStation:!1},{id:"no-fuel-204",name:"KASTNA VIKESADAM",location:"Prnu maakond",coordinates:[58.350374,23.9130336],hasStation:!1},{id:"no-fuel-205",name:"KAUNISPE SADAM",location:"Saare maakond",coordinates:[58.04186264452349,22.059860388705594],hasStation:!1},{id:"no-fuel-208",name:"KELVINGI SADAM",location:"Harju maakond",coordinates:[59.55546929940867,24.839830324190146],hasStation:!1},{id:"no-fuel-211",name:"KIHNU SADAM",location:"Prnu maakond",coordinates:[58.14123325518436,24.02088792334366],hasStation:!1},{id:"no-fuel-9005",name:"KIRDERANNA SADAM",location:"Saare maakond",coordinates:[58.62095579164729,22.864040247367672],hasStation:!1},{id:"no-fuel-304",name:"KRGESSAARE SADAM",location:"Hiiu maakond",coordinates:[58.990071656325064,22.466397377637612],hasStation:!1},{id:"no-fuel-306",name:"KRSA SADAM",location:"Saare maakond",coordinates:[58.2286732,22.7280573],hasStation:!1},{id:"no-fuel-8351",name:"KSMU MAJAKA SADAM",location:"Lne-Viru maakond",coordinates:[59.60446942979059,25.92349111405371],hasStation:!1},{id:"no-fuel-9179",name:"KTIOJA SADAM",location:"Prnu maakond",coordinates:[58.5212122,23.7241667],hasStation:!1},{id:"no-fuel-307",name:"LAAKSAARE SADAM",location:"Plva maakond",coordinates:[58.338430088258725,27.417041637358558],hasStation:!1},{id:"no-fuel-308",name:"LAHESUU SADAM",location:"Harju maakond",coordinates:[59.45833700363406,24.702973080875516],hasStation:!1},{id:"no-fuel-8392",name:"LEESIKALDA SADAM",location:"Harju maakond",coordinates:[59.594514926928966,25.50226025510831],hasStation:!1},{id:"no-fuel-2123",name:"LEHTMA KALURISADAM",location:"Hiiu maakond",coordinates:[59.06882085554219,22.696219278375228],hasStation:!1},{id:"no-fuel-311",name:"LEHTMA SADAM",location:"Hiiu maakond",coordinates:[59.06761035561787,22.701143728235156],hasStation:!1},{id:"no-fuel-314",name:"LEPPNEEME KALASADAM",location:"Harju maakond",coordinates:[59.55167179919739,24.867263868960684],hasStation:!1},{id:"no-fuel-321",name:"LOKSA SADAM",location:"Harju maakond",coordinates:[59.58444612705517,25.70408193417594],hasStation:!1},{id:"no-fuel-801",name:"LUIGE VIKESADAM",location:"Lne maakond",coordinates:[58.871280759575235,23.477649072772582],hasStation:!1},{id:"no-fuel-1964",name:"LPESUU SADAM",location:"Saare maakond",coordinates:[58.48967911640937,23.273795518412854],hasStation:!1},{id:"no-fuel-707",name:"LNE SADAM",location:"Prnu maakond",coordinates:[58.5271617204529,23.676867501805706],hasStation:!1},{id:"no-fuel-325",name:"LTSA PAADISADAM",location:"Saare maakond",coordinates:[58.14659002353162,22.253064692365207],hasStation:!1},{id:"no-fuel-2501",name:"MAHU SADAM",location:"Lne-Viru maakond",coordinates:[59.521069587424115,26.72726843815698],hasStation:!1},{id:"no-fuel-309",name:"MANILAIU SADAM",location:"Prnu maakond",coordinates:[58.22227849999999,24.1247841],hasStation:!1},{id:"no-fuel-9008",name:"MEERAPALU SADAM",location:"Plva maakond",coordinates:[58.387508933619536,27.37374460137659],hasStation:!1},{id:"no-fuel-327",name:"MEERUSE SADAM",location:"Harju maakond",coordinates:[59.45045246851013,24.6697146192323],hasStation:!1},{id:"no-fuel-316",name:"MERELAIU VIKESADAM",location:"Prnu maakond",coordinates:[58.30465547982153,24.022958257706886],hasStation:!1},{id:"no-fuel-2314",name:"MIHKLI SADAM",location:"Jgeva maakond",coordinates:[58.77751123834221,26.99003963770032],hasStation:!1},{id:"no-fuel-9001",name:"NARVA-JESUU JAHTKLUBI SADAM",location:"Ida-Viru maakond",coordinates:[59.45970543207499,28.057687381023182],hasStation:!1},{id:"no-fuel-1553",name:"NARVA KULGU SADAM",location:"Ida-Viru maakond",coordinates:[59.3442578564839,28.173097424427883],hasStation:!1},{id:"no-fuel-1552",name:"NARVA LINNASADAM",location:"Ida-Viru maakond",coordinates:[59.38395796610147,28.20554144247878],hasStation:!1},{id:"no-fuel-328",name:"NASVA SADAM",location:"Saare maakond",coordinates:[58.2269312,22.3783734],hasStation:!1},{id:"no-fuel-353",name:"NOBLESSNERI SADAM",location:"Harju maakond",coordinates:[59.452183843127564,24.729565371485567],hasStation:!1},{id:"no-fuel-334",name:"OMEDU RAND",location:"Jgeva maakond",coordinates:[58.77780043141777,26.98858028346087],hasStation:!1},{id:"no-fuel-335",name:"ORISSAARE SADAM",location:"Saare maakond",coordinates:[58.562676613132034,23.092617941450893],hasStation:!1},{id:"no-fuel-337",name:"OTI SADAM",location:"Harju maakond",coordinates:[59.56629675506538,24.79439948373618],hasStation:!1},{id:"no-fuel-338",name:"OTSA VIKESADAM",location:"Tartu maakond",coordinates:[58.6489774918986,27.169001881798852],hasStation:!1},{id:"no-fuel-705",name:"PAATSALU SADAM",location:"Prnu maakond",coordinates:[58.524444905111146,23.67949722512728],hasStation:!1},{id:"no-fuel-8457",name:"PAKRINEEME SADAM",location:"Harju maakond",coordinates:[59.38888889999999,24.0369444],hasStation:!1},{id:"no-fuel-350",name:"PEERNI SADAM",location:"Prnu maakond",coordinates:[58.246312842792065,24.134033920475662],hasStation:!1},{id:"no-fuel-1659",name:"PIHELGALAIU SADAM",location:"Prnu maakond",coordinates:[58.44586885868282,23.66907840453489],hasStation:!1},{id:"no-fuel-1930",name:"PIIRISSAARE SADAM",location:"Tartu maakond",coordinates:[58.375722394408996,27.511417843756576],hasStation:!1},{id:"no-fuel-356",name:"PIIRIVALVESADAM",location:"Harju maakond",coordinates:[59.457268391513615,24.66181822941108],hasStation:!1},{id:"no-fuel-377",name:"PUISE KALASADAM",location:"Lne maakond",coordinates:[58.7835441,23.4985324],hasStation:!1},{id:"no-fuel-808",name:"PURTSE JAHTSADAM",location:"Ida-Viru maakond",coordinates:[59.435106161788916,26.99108540802319],hasStation:!1},{id:"no-fuel-342",name:"REBASE PAADISADAM",location:"Tartu maakond",coordinates:[58.36787658063787,26.749016207832376],hasStation:!1},{id:"no-fuel-345",name:"RISTNA SADAM",location:"Harju maakond",coordinates:[59.27073824103223,23.744625264828233],hasStation:!1},{id:"no-fuel-351",name:"ROHUKLA SADAM",location:"Lne maakond",coordinates:[58.905958908457656,23.420534724676656],hasStation:!1},{id:"no-fuel-363",name:"SALINMME SADAM",location:"Hiiu maakond",coordinates:[58.8270809846774,22.95055220122218],hasStation:!1},{id:"no-fuel-365",name:"SALME JESADAM",location:"Saare maakond",coordinates:[58.1654474887975,22.252818894890837],hasStation:!1},{id:"no-fuel-366",name:"SALMISTU SADAM",location:"Harju maakond",coordinates:[59.49659394520264,25.366337433421357],hasStation:!1},{id:"no-fuel-367",name:"SASSUKVERE SADAM",location:"Tartu maakond",coordinates:[58.71493614828406,27.126172656299634],hasStation:!1},{id:"no-fuel-1936",name:"SIGATSUARU VIKESADAM",location:"Prnu maakond",coordinates:[58.15445383926815,24.002310626327155],hasStation:!1},{id:"no-fuel-7401",name:"SITME SADAM",location:"Saare maakond",coordinates:[58.51088849396052,23.199316307192024],hasStation:!1},{id:"no-fuel-372",name:"SOO SADAM",location:"Tartu maakond",coordinates:[58.72244286155842,27.12023931143356],hasStation:!1},{id:"no-fuel-1251",name:"SUUR-LOOTSI SADAM",location:"Ida-Viru maakond",coordinates:[59.4678736,28.0420528],hasStation:!1},{id:"no-fuel-1154",name:"SUURPEA SADAM",location:"Harju maakond",coordinates:[59.6281046477358,25.682983138624618],hasStation:!1},{id:"no-fuel-2680",name:"TAMMNEEME SADAM",location:"Harju maakond",coordinates:[59.529013819775024,24.893335103988647],hasStation:!1},{id:"no-fuel-380",name:"TAPURLA SADAM",location:"Harju maakond",coordinates:[59.61120815173785,25.573854563726297],hasStation:!1},{id:"no-fuel-381",name:"TILGU SADAM",location:"Harju maakond",coordinates:[59.45518286496472,24.487001945135006],hasStation:!1},{id:"no-fuel-9007",name:"TOOMINGA VIKESADAM",location:"Harju maakond",coordinates:[59.56256026313831,24.79553650363329],hasStation:!1},{id:"no-fuel-704",name:"TOPU SADAM",location:"Lne maakond",coordinates:[58.84439243775599,23.50073748712197],hasStation:!1},{id:"no-fuel-2122",name:"TURJA SADAM",location:"Saare maakond",coordinates:[58.3327473718112,22.93243528887582],hasStation:!1},{id:"no-fuel-2133",name:"TURUSADAM",location:"Tartu maakond",coordinates:[58.3795223030903,26.735905398384677],hasStation:!1},{id:"no-fuel-387",name:"TRKMA SADAM",location:"Hiiu maakond",coordinates:[58.69332616544748,22.609981401097386],hasStation:!1},{id:"no-fuel-9168",name:"ULGE SADAM",location:"Viljandi maakond",coordinates:[58.40635470910224,26.013124772690055],hasStation:!1},{id:"no-fuel-3826",name:"VAHTREPA SADAM",location:"Hiiu maakond",coordinates:[58.88560138747144,23.02869308620697],hasStation:!1},{id:"no-fuel-4651",name:"VAINUPEA SADAM",location:"Lne-Viru maakond",coordinates:[59.583802468572706,26.273932825674926],hasStation:!1},{id:"no-fuel-166",name:"VANASADAM",location:"Harju maakond",coordinates:[59.44304063799767,24.75930008714019],hasStation:!1},{id:"no-fuel-2147",name:"VANA-SAUGA SADAM",location:"Prnu maakond",coordinates:[58.38997205050698,24.475392484556682],hasStation:!1},{id:"no-fuel-8977",name:"VANASAUNA SADAM",location:"Viljandi maakond",coordinates:[58.36875436320875,25.9668093112776],hasStation:!1},{id:"no-fuel-393",name:"VASKNARVA UUSSADAM",location:"Ida-Viru maakond",coordinates:[58.99790578740703,27.739502189448658],hasStation:!1},{id:"no-fuel-388",name:"VEERE SADAM",location:"Saare maakond",coordinates:[58.4616643503602,22.05045075745465],hasStation:!1},{id:"no-fuel-901",name:"VEERE VANASADAM",location:"Saare maakond",coordinates:[58.460906732883764,22.04877742773411],hasStation:!1},{id:"no-fuel-3870",name:"VEIBRI SADAM",location:"Tartu maakond",coordinates:[58.33766136986146,26.792575007800597],hasStation:!1},{id:"no-fuel-1150",name:"VERGI SADAM",location:"Lne-Viru maakond",coordinates:[59.59942875325675,26.101439794239237],hasStation:!1},{id:"no-fuel-2645",name:"VIINISTU SADAM",location:"Harju maakond",coordinates:[59.646704192089956,25.75353627355206],hasStation:!1},{id:"no-fuel-2551",name:"VIKATI SADAM",location:"Saare maakond",coordinates:[58.37183486965951,21.86242812338169],hasStation:!1},{id:"no-fuel-395",name:"VIRTSU KALASADAM",location:"Prnu maakond",coordinates:[58.58872092778278,23.525488549491424],hasStation:!1},{id:"no-fuel-394",name:"VIRTSU SADAM",location:"Prnu maakond",coordinates:[58.574979596464345,23.503157983475997],hasStation:!1},{id:"no-fuel-3811",name:"VPSU KLASADAM",location:"Vru maakond",coordinates:[58.07978519644125,27.544044310678082],hasStation:!1},{id:"no-fuel-1056",name:"VRSSU SADAM",location:"Hiiu maakond",coordinates:[58.933159290586694,22.955026035777763],hasStation:!1},{id:"no-fuel-403",name:"WESTMERI SADAM",location:"Lne maakond",coordinates:[58.95979075002165,23.524604057955777],hasStation:!1},{id:"no-fuel-405",name:"STERBY SADAM",location:"Lne maakond",coordinates:[58.9756951,23.518072],hasStation:!1},{id:"no-fuel-2669",name:"RGORU PAADISADAM",location:"Tartu maakond",coordinates:[58.37948574041217,26.989706925419874],hasStation:!1}],kg={class:"map-container"},Tg={key:0,class:"search-container"},Pg={class:"search-bar"},xg={key:0,class:"search-dropdown"},Eg=["onMousedown"],Lg={class:"dropdown-item-content"},Og={class:"station-name"},Cg={class:"station-meta"},Mg={class:"station-location"},Ig={key:1,class:"no-fuel-indicator"},Dg={key:1,class:"active-filters"},Rg=["onClick"],$g={key:2,class:"results-counter"},jg={class:"filter-header"},Ng={class:"filter-content"},Ug={class:"filter-section"},Bg={class:"radio-group"},Fg={class:"filter-section"},zg={class:"checkbox-group"},qg={class:"filter-section"},Vg={class:"price-range"},Hg={class:"price-display"},Zg={class:"filter-section"},Kg={class:"checkbox-group"},Wg={class:"filter-section"},Gg={class:"checkbox-group"},Jg={class:"filter-section"},Yg={class:"checkbox-group"},Xg={class:"filter-actions"},Qg={class:"filter-header"},ey={class:"map-type-content"},ty={class:"map-type-options"},iy={key:0,class:"active-indicator"},ny={key:0,class:"active-indicator"},sy={key:0,class:"active-indicator"},ry={key:0,class:"active-indicator"},oy={key:0,class:"active-indicator"},ay={key:0,class:"sea-marks-toggle"},ly={class:"toggle-label"},uy={key:5,class:"edit-buttons"},cy=["disabled"],dy=["disabled"],hy={key:6,class:"legend"},fy={key:7,class:"save-notification"},py={__name:"MapView",props:{guestMode:{type:Boolean,default:!1},isAdmin:{type:Boolean,default:!1},showFiltersFromParent:{type:Boolean,default:!1},showMapTypeFromParent:{type:Boolean,default:!1}},emits:["station-click","close-filters","close-map-type"],setup(i,{expose:e,emit:n}){const{user:r}=Os(),o=i,a=n,u=se(null),d=se(null),h=se(""),m=se(!1),v=se(null),g=se(""),y=se(null),A=se([]),P=se([]),E=se([]),k=se({distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1}),U=se("street"),D=se(!1);let M=null,B=[],ue=null,le=null,ge={},Ee=null,Le=null,V=JSON.parse(JSON.stringify(zd)),x={center:null,zoom:null,focusedStation:null};const W=bt(()=>{if(!h.value)return[];const C=h.value.toLowerCase();return V.filter(w=>w.name.toLowerCase().includes(C)||w.location.toLowerCase().includes(C)).slice(0,8)}),re=se(null),N=bt(()=>{let C=0;return k.value.distance!=="any"&&C++,k.value.fuelTypes.length>0&&(C+=k.value.fuelTypes.length),k.value.maxPrice<3&&C++,k.value.fuelLevels.length>0&&(C+=k.value.fuelLevels.length),k.value.providers.length>0&&(C+=k.value.providers.length),k.value.hasStation&&C++,C}),R=bt(()=>{const C=[];return k.value.distance!=="any"&&C.push({label:`Distance <${k.value.distance}km`,type:"distance",value:"any"}),k.value.fuelTypes.forEach(w=>{C.push({label:w.toUpperCase(),type:"fuelTypes",value:w})}),k.value.maxPrice<3&&C.push({label:`Price ${k.value.maxPrice}`,type:"maxPrice",value:3}),k.value.fuelLevels.forEach(w=>{const j={available:"Available >20%",low:"Low <20%",empty:"Empty"};C.push({label:j[w],type:"fuelLevels",value:w})}),k.value.providers.forEach(w=>{C.push({label:w,type:"providers",value:w})}),k.value.hasStation&&C.push({label:"Active stations only",type:"hasStation",value:!1}),C}),J=bt(()=>Y().length),Ae=bt(()=>V.length);Un(async()=>{Ye(),pt(),te(),await ft(),window.exportStationCoordinates=()=>(console.log("=== UPDATED STATION COORDINATES ==="),console.log(JSON.stringify(V,null,2)),console.log("=== Copy the above JSON to update stations.json ==="),V),console.log("%c EDIT MODE ENABLED","color: red; font-size: 16px; font-weight: bold"),console.log("Drag markers to update positions."),console.log('Click "Save Coordinates" button or run exportStationCoordinates() in console.')});function te(){navigator.geolocation?navigator.geolocation.getCurrentPosition(C=>{re.value={lat:C.coords.latitude,lng:C.coords.longitude}},C=>{console.log("Location access denied:",C),re.value={lat:58.5953,lng:25.0136}}):re.value={lat:58.5953,lng:25.0136}}async function ft(){if(!(!r.value||o.guestMode))try{const{data:C,error:w}=await yt.from("favorites").select("station_id").eq("user_id",r.value.id);if(w){console.error("Error loading favorites:",w);return}A.value=C.map(j=>j.station_id)}catch(C){console.error("Error loading favorites:",C)}}function pe(C){return A.value.includes(C)}function $e(){M&&x.center&&x.zoom&&M.setView(x.center,x.zoom,{animate:!1})}function qe(){M&&(M.flyTo([58.5953,25.0136],7,{duration:1.5}),x.center=[58.5953,25.0136],x.zoom=7)}function lt(){M&&M.invalidateSize()}e({restoreMapView:$e,invalidateMapSize:lt,resetToDefaultView:qe,refreshFavorites:async()=>{await ft(),pt()}});function Ye(){const C=x.center&&x.zoom?[x.center,x.zoom]:[[58.5953,25.0136],7];M=Wt.map(u.value).setView(C[0],C[1]),ge={street:Wt.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:" OpenStreetMap contributors",maxZoom:19}),satellite:Wt.tileLayer("https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",{attribution:" Esri",maxZoom:19}),terrain:Wt.tileLayer("https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png",{attribution:" OpenTopoMap",maxZoom:17}),cartoVoyager:Wt.tileLayer("https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png",{attribution:" OpenStreetMap,  CARTO",maxZoom:19})},Le=Wt.tileLayer("https://t1.openseamap.org/seamark/{z}/{x}/{y}.png",{attribution:" OpenSeaMap contributors",maxZoom:18,transparent:!0}),Ee=ge.street,Ee.addTo(M),ue=Wt.layerGroup().addTo(M),o.guestMode||(o.isAdmin&&(u.value.style.border="4px solid red"),le=Wt.control({position:"bottomleft"}),le.onAdd=function(){const w=Wt.DomUtil.create("div","coordinate-display");return w.style.cssText=`
        background: rgba(255, 255, 255, 0.95);
        padding: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        font-family: monospace;
        font-size: 14px;
        display: none;
      `,w.innerHTML="Drag a marker to see coordinates",w},le.addTo(M))}function Me(C){if(M){if(M.hasLayer(Le)&&M.removeLayer(Le),Ee&&M.removeLayer(Ee),C==="nautical")Ee=ge.street,Ee.addTo(M),Le.addTo(M),D.value=!0;else if(C==="nautical-dark")Ee=ge.cartoVoyager,Ee.addTo(M),Le.addTo(M),D.value=!0;else{if(!ge[C])return;Ee=ge[C],Ee.addTo(M),D.value=!1}U.value=C,a("close-map-type")}}function we(){D.value=!D.value,D.value?M.hasLayer(Le)||Le.addTo(M):M.hasLayer(Le)&&M.removeLayer(Le)}function pt(){Ht(),V.forEach(C=>{const w=Lt(C);B.push({marker:w,station:C}),ue.addLayer(w)})}function Lt(C){const w=me(C),j=pe(C.id),et={icon:Te(w,C===v.value,j),draggable:o.isAdmin&&!o.guestMode};o.isAdmin&&!o.guestMode&&(et.autoPan=!0,et.autoPanPadding=[50,50]);const De=Wt.marker(C.coordinates,et).on("click",()=>Bi(C));return o.isAdmin&&!o.guestMode&&(De.on("dragstart",function(je){const Oe=document.querySelector(".coordinate-display");if(Oe){Oe.style.display="block",Oe.style.background="rgba(255, 255, 100, 0.95)";const ze=V.find(ct=>ct.id===C.id);Oe.innerHTML=`
          <strong>Dragging: ${ze?ze.name:C.name}</strong><br>
          Original: [${C.coordinates[0].toFixed(6)}, ${C.coordinates[1].toFixed(6)}]
        `}}),De.on("drag",function(je){const Oe=je.target.getLatLng(),ze=document.querySelector(".coordinate-display");if(ze){const ct=V.find(It=>It.id===C.id);ze.innerHTML=`
          <strong>${ct?ct.name:C.name}</strong><br>
          Lat: ${Oe.lat.toFixed(6)}<br>
          Lng: ${Oe.lng.toFixed(6)}
        `}}),De.on("dragend",function(je){const Oe=je.target.getLatLng(),ze=V.findIndex(It=>It.id===C.id);if(ze!==-1){const It=[...V[ze].coordinates],Fi=[Oe.lat,Oe.lng];P.value.push({id:C.id,name:V[ze].name,previousCoordinates:It,newCoordinates:Fi}),E.value=[],y.value={id:C.id,previousCoordinates:It,newCoordinates:Fi},V[ze].coordinates=Fi;const Vn=B.find(Cs=>Cs.station.id===C.id);Vn&&(Vn.station.coordinates=Fi)}const ct=document.querySelector(".coordinate-display");if(ct){const It=V[ze];ct.style.background="rgba(16, 185, 129, 0.95)",ct.innerHTML=`
          <strong>${It?It.name:C.name}</strong><br>
           Updated: [${Oe.lat.toFixed(6)}, ${Oe.lng.toFixed(6)}]<br>
          <small>Click "Save Coordinates" button</small>
        `,setTimeout(()=>{ct.style.display="none",ct.style.background="rgba(255, 255, 255, 0.95)"},5e3)}}),De.on("mouseover",function(je){u.value.style.cursor="grab"}),De.on("mouseout",function(je){u.value.style.cursor=""})),o.guestMode||(De.on("mouseover",function(je){const Oe=je.target.getLatLng(),ze=document.querySelector(".coordinate-display");if(ze){const ct=V.find(It=>It.id===C.id);ze.style.display="block",ze.style.background="rgba(255, 255, 255, 0.95)",ze.innerHTML=`
          <strong>${ct?ct.name:C.name}</strong><br>
          Lat: ${Oe.lat.toFixed(6)}<br>
          Lng: ${Oe.lng.toFixed(6)}
        `}}),De.on("mouseout",function(je){const Oe=document.querySelector(".coordinate-display");Oe&&(Oe.style.display="none")})),De}async function Bi(C){var w;if(M.flyTo(C.coordinates,14,{animate:!0,duration:2}),await new Promise(j=>setTimeout(j,2e3)),x.center=M.getCenter(),x.zoom=M.getZoom(),x.focusedStation=C,C.hasStation)a("station-click",C);else{const j=(w=B.find(Pe=>Pe.station.id===C.id))==null?void 0:w.marker;j&&j.bindPopup(`
        <div style="text-align: center;">
          <b>${C.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup()}}function Ht(){ue&&ue.clearLayers(),B=[]}function an(){if(P.value.length===0)return;const C=P.value.pop(),w=V.findIndex(j=>j.id===C.id);if(w!==-1){E.value.push(C),V[w].coordinates=[...C.previousCoordinates];const j=B.find(Pe=>Pe.station.id===C.id);j&&(j.station.coordinates=[...C.previousCoordinates],j.marker.setLatLng(C.previousCoordinates)),P.value.length>0?y.value=P.value[P.value.length-1]:y.value=null,g.value=` Undone: ${C.name}`,setTimeout(()=>{g.value=""},2e3)}}function b(){if(E.value.length===0)return;const C=E.value.pop(),w=V.findIndex(j=>j.id===C.id);if(w!==-1){P.value.push(C),V[w].coordinates=[...C.newCoordinates];const j=B.find(Pe=>Pe.station.id===C.id);j&&(j.station.coordinates=[...C.newCoordinates],j.marker.setLatLng(C.newCoordinates)),y.value=C,g.value=` Redone: ${C.name}`,setTimeout(()=>{g.value=""},2e3)}}async function T(){try{const w=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(V)})).json();if(w.success)g.value=" Saved! stations.json updated successfully",setTimeout(()=>{g.value=""},4e3);else throw new Error(w.message)}catch(C){console.error("Save error:",C),g.value=" Error saving file. Is the save server running?",setTimeout(()=>{g.value=""},5e3)}}function $(){m.value=!0,h.value?X():B.forEach(({marker:C})=>{C.setOpacity(1)})}function K(){setTimeout(()=>{m.value=!1},200)}async function F(C){h.value=C.name,m.value=!1,v.value=C,M.flyTo(C.coordinates,14,{animate:!0,duration:2}),X(),await new Promise(j=>setTimeout(j,3e3)),x.center=M.getCenter(),x.zoom=M.getZoom(),x.focusedStation=C;const w=B.find(j=>j.station.id===C.id);w&&(C.hasStation?a("station-click",C):w.marker.bindPopup(`
        <div style="text-align: center;">
          <b>${C.name}</b><br>
          <span style="color: #ef4444;">No fuel station available</span>
        </div>
      `).openPopup())}function z(){h.value="",v.value=null,m.value=!1,B.forEach(({marker:C})=>{C.setOpacity(1)}),x.focusedStation||M.setView([58.5953,25.0136],7,{animate:!0,duration:.5})}function X(){const C=Y(),w=new Set(C.map(Pe=>Pe.id)),j=h.value.toLowerCase();B.forEach(({marker:Pe,station:et})=>{const De=V.find(ze=>ze.id===et.id),je=!j||De&&(De.name.toLowerCase().includes(j)||De.location.toLowerCase().includes(j)),Oe=w.has(et.id);Pe.setOpacity(je&&Oe?1:.3)})}function Q(C,w,j,Pe){const De=(j-C)*Math.PI/180,je=(Pe-w)*Math.PI/180,Oe=Math.sin(De/2)*Math.sin(De/2)+Math.cos(C*Math.PI/180)*Math.cos(j*Math.PI/180)*Math.sin(je/2)*Math.sin(je/2);return 6371*(2*Math.atan2(Math.sqrt(Oe),Math.sqrt(1-Oe)))}function Y(){let C=[...V];if(k.value.hasStation&&(C=C.filter(w=>w.hasStation)),k.value.providers.length>0&&(C=C.filter(w=>w.stationType?k.value.providers.includes(w.stationType):k.value.providers.includes("Other"))),k.value.fuelLevels.length>0&&(C=C.filter(w=>!!(k.value.fuelLevels.includes("available")&&w.fuelLevel>=20||k.value.fuelLevels.includes("low")&&w.fuelLevel<20&&w.fuelLevel>0||k.value.fuelLevels.includes("empty")&&w.fuelLevel===0))),k.value.fuelTypes.length>0&&(C=C.filter(w=>w.fuels?k.value.fuelTypes.some(j=>{var Pe;return(Pe=w.fuels[j])==null?void 0:Pe.available}):!1)),k.value.maxPrice<3&&(C=C.filter(w=>{if(!w.fuels)return!1;const j=Object.values(w.fuels).map(Pe=>Pe.price).filter(Pe=>Pe>0);return j.length>0&&Math.min(...j)<=k.value.maxPrice})),k.value.distance!=="any"&&re.value){const w=parseFloat(k.value.distance);C=C.filter(j=>Q(re.value.lat,re.value.lng,j.coordinates[0],j.coordinates[1])<=w)}return re.value&&C.sort((w,j)=>{const Pe=Q(re.value.lat,re.value.lng,w.coordinates[0],w.coordinates[1]),et=Q(re.value.lat,re.value.lng,j.coordinates[0],j.coordinates[1]);return Pe-et}),C}function Z(){return Y().length}function fe(){a("close-filters"),X()}function ie(){k.value={distance:"any",fuelTypes:[],maxPrice:3,fuelLevels:[],providers:[],hasStation:!1},X()}function ce(C,w){if(C==="distance")k.value.distance=w;else if(C==="maxPrice")k.value.maxPrice=w;else if(C==="hasStation")k.value.hasStation=w;else if(Array.isArray(k.value[C])){const j=k.value[C].indexOf(w);j>-1&&k.value[C].splice(j,1)}X()}function me(C){return o.guestMode?"purple":C.hasStation?C.fuelLevel===0?"gray":C.fuelLevel<20?"yellow":"green":"red"}function Te(C,w=!1,j=!1){const Pe={green:"#10b981",yellow:"#fbbf24",gray:"#9ca3af",red:"#ef4444",purple:"#a855f7"},et=o.guestMode||C==="red"?10:15,De=w?et+40:et,je=w?4:2,Oe=j&&!o.guestMode?`
    <div style="
      position: absolute;
      top: -4px;
      right: -4px;
      background: #fbbf24;
      color: white;
      width: ${Math.max(12,De*.5)}px;
      height: ${Math.max(12,De*.5)}px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: ${Math.max(8,De*.4)}px;
      border: 1px solid white;
      box-shadow: 0 1px 3px rgba(0,0,0,0.4);
      z-index: 10;
    "></div>
  `:"";return Wt.divIcon({className:"custom-marker",html:`
      <div style="position: relative; width: ${De}px; height: ${De}px;">
        <div style="
          background: ${Pe[C]};
          width: ${De}px;
          height: ${De}px;
          border-radius: 50%;
          border: ${je}px solid ${w?"#1e40af":"white"};
          box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        "></div>
        ${Oe}
      </div>
    `,iconSize:[De,De],iconAnchor:[De/2,De/2]})}function Ue(C){return C.fuelLevel===0?"fuel-empty":C.fuelLevel<20?"fuel-low":"fuel-good"}function Ie(C){return C.fuelLevel===0?"Empty":C.fuelLevel<20?`${C.fuelLevel}% Low`:`${C.fuelLevel}%`}return(C,w)=>(H(),G("div",kg,[i.guestMode?oe("",!0):(H(),G("div",Tg,[p("div",Pg,[be(p("input",{ref_key:"searchInput",ref:d,"onUpdate:modelValue":w[0]||(w[0]=j=>h.value=j),onInput:$,onFocus:w[1]||(w[1]=j=>m.value=!0),onBlur:K,placeholder:" Search marina...",class:"search-input"},null,544),[[ot,h.value]]),m.value&&W.value.length>0?(H(),G("div",xg,[(H(!0),G(it,null,ei(W.value,j=>(H(),G("div",{key:j.id,onMousedown:Pe=>F(j),class:Je(["dropdown-item",{"has-fuel":j.hasStation}])},[p("div",Lg,[p("div",Og,ee(j.name),1),p("div",Cg,[p("span",Mg,ee(j.location),1),j.hasStation?(H(),G("span",{key:0,class:Je(["fuel-indicator",Ue(j)])},ee(Ie(j)),3)):(H(),G("span",Ig,"No fuel"))])])],42,Eg))),128))])):oe("",!0)]),h.value?(H(),G("button",{key:0,onClick:z,class:"clear-button",title:"Clear search"},"  ")):oe("",!0)])),!i.guestMode&&N.value>0?(H(),G("div",Dg,[w[30]||(w[30]=p("span",{class:"active-filters-label"},"Active:",-1)),(H(!0),G(it,null,ei(R.value,(j,Pe)=>(H(),G("span",{key:Pe,class:"filter-chip"},[Ke(ee(j.label)+" ",1),p("button",{onClick:et=>ce(j.type,j.value),class:"chip-remove"},"",8,Rg)]))),128)),p("button",{onClick:ie,class:"clear-all-btn"},"Clear all")])):oe("",!0),!i.guestMode&&N.value>0?(H(),G("div",$g," Showing "+ee(J.value)+" of "+ee(Ae.value)+" stations ",1)):oe("",!0),i.showFiltersFromParent?(H(),G("div",{key:3,class:"filter-overlay",onClick:w[20]||(w[20]=j=>a("close-filters"))},[p("div",{class:"filter-panel",onClick:w[19]||(w[19]=Mt(()=>{},["stop"]))},[p("div",jg,[w[31]||(w[31]=p("h3",null," Filters",-1)),p("button",{onClick:w[2]||(w[2]=j=>a("close-filters")),class:"close-panel-btn"},"")]),p("div",Ng,[p("div",Ug,[w[36]||(w[36]=p("h4",null," Distance",-1)),p("div",Bg,[p("label",null,[be(p("input",{type:"radio","onUpdate:modelValue":w[3]||(w[3]=j=>k.value.distance=j),value:"any"},null,512),[[Ci,k.value.distance]]),w[32]||(w[32]=Ke(" Any distance ",-1))]),p("label",null,[be(p("input",{type:"radio","onUpdate:modelValue":w[4]||(w[4]=j=>k.value.distance=j),value:"10"},null,512),[[Ci,k.value.distance]]),w[33]||(w[33]=Ke(" Within 10 km ",-1))]),p("label",null,[be(p("input",{type:"radio","onUpdate:modelValue":w[5]||(w[5]=j=>k.value.distance=j),value:"25"},null,512),[[Ci,k.value.distance]]),w[34]||(w[34]=Ke(" Within 25 km ",-1))]),p("label",null,[be(p("input",{type:"radio","onUpdate:modelValue":w[6]||(w[6]=j=>k.value.distance=j),value:"50"},null,512),[[Ci,k.value.distance]]),w[35]||(w[35]=Ke(" Within 50 km ",-1))])])]),p("div",Fg,[w[40]||(w[40]=p("h4",null," Fuel Type",-1)),p("div",zg,[p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[7]||(w[7]=j=>k.value.fuelTypes=j),value:"diesel"},null,512),[[Dt,k.value.fuelTypes]]),w[37]||(w[37]=Ke(" Diesel ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[8]||(w[8]=j=>k.value.fuelTypes=j),value:"e95"},null,512),[[Dt,k.value.fuelTypes]]),w[38]||(w[38]=Ke(" E95 ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[9]||(w[9]=j=>k.value.fuelTypes=j),value:"e98"},null,512),[[Dt,k.value.fuelTypes]]),w[39]||(w[39]=Ke(" E98 ",-1))])])]),p("div",qg,[w[41]||(w[41]=p("h4",null," Price Range",-1)),p("div",Vg,[be(p("input",{type:"range","onUpdate:modelValue":w[10]||(w[10]=j=>k.value.maxPrice=j),min:"1.0",max:"3.0",step:"0.1",class:"price-slider"},null,512),[[ot,k.value.maxPrice]]),p("div",Hg," Max: "+ee(k.value.maxPrice)+"/L ",1)])]),p("div",Zg,[w[45]||(w[45]=p("h4",null," Fuel Level",-1)),p("div",Kg,[p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[11]||(w[11]=j=>k.value.fuelLevels=j),value:"available"},null,512),[[Dt,k.value.fuelLevels]]),w[42]||(w[42]=Ke(" Available (>20%) ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[12]||(w[12]=j=>k.value.fuelLevels=j),value:"low"},null,512),[[Dt,k.value.fuelLevels]]),w[43]||(w[43]=Ke(" Low (<20%) ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[13]||(w[13]=j=>k.value.fuelLevels=j),value:"empty"},null,512),[[Dt,k.value.fuelLevels]]),w[44]||(w[44]=Ke(" Empty (0%) ",-1))])])]),p("div",Wg,[w[50]||(w[50]=p("h4",null," Provider",-1)),p("div",Gg,[p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[14]||(w[14]=j=>k.value.providers=j),value:"Olerex"},null,512),[[Dt,k.value.providers]]),w[46]||(w[46]=Ke(" Olerex ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[15]||(w[15]=j=>k.value.providers=j),value:"Circle K"},null,512),[[Dt,k.value.providers]]),w[47]||(w[47]=Ke(" Circle K ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[16]||(w[16]=j=>k.value.providers=j),value:"Alexela"},null,512),[[Dt,k.value.providers]]),w[48]||(w[48]=Ke(" Alexela ",-1))]),p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[17]||(w[17]=j=>k.value.providers=j),value:"Other"},null,512),[[Dt,k.value.providers]]),w[49]||(w[49]=Ke(" Other ",-1))])])]),p("div",Jg,[w[52]||(w[52]=p("h4",null," Station Status",-1)),p("div",Yg,[p("label",null,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[18]||(w[18]=j=>k.value.hasStation=j)},null,512),[[Dt,k.value.hasStation]]),w[51]||(w[51]=Ke(" Only show active fuel stations ",-1))])])])]),p("div",Xg,[p("button",{onClick:ie,class:"clear-filters-btn"},"Clear All"),p("button",{onClick:fe,class:"apply-filters-btn"}," Apply ("+ee(Z())+") ",1)])])])):oe("",!0),i.showMapTypeFromParent?(H(),G("div",{key:4,class:"filter-overlay",onClick:w[29]||(w[29]=j=>a("close-map-type"))},[p("div",{class:"map-type-panel",onClick:w[28]||(w[28]=Mt(()=>{},["stop"]))},[p("div",Qg,[w[53]||(w[53]=p("h3",null," Map Type",-1)),p("button",{onClick:w[21]||(w[21]=j=>a("close-map-type")),class:"close-panel-btn"},"")]),p("div",ey,[p("div",ty,[p("div",{onClick:w[22]||(w[22]=j=>Me("street")),class:Je(["map-type-option",{active:U.value==="street"}])},[w[54]||(w[54]=p("div",{class:"map-type-icon"},"",-1)),w[55]||(w[55]=p("div",{class:"map-type-info"},[p("h4",null,"Street Map"),p("p",null,"Standard OpenStreetMap view")],-1)),U.value==="street"?(H(),G("div",iy,"")):oe("",!0)],2),p("div",{onClick:w[23]||(w[23]=j=>Me("satellite")),class:Je(["map-type-option",{active:U.value==="satellite"}])},[w[56]||(w[56]=p("div",{class:"map-type-icon"},"",-1)),w[57]||(w[57]=p("div",{class:"map-type-info"},[p("h4",null,"Satellite"),p("p",null,"Aerial imagery view")],-1)),U.value==="satellite"?(H(),G("div",ny,"")):oe("",!0)],2),p("div",{onClick:w[24]||(w[24]=j=>Me("nautical")),class:Je(["map-type-option",{active:U.value==="nautical"}])},[w[58]||(w[58]=p("div",{class:"map-type-icon"},"",-1)),w[59]||(w[59]=p("div",{class:"map-type-info"},[p("h4",null,"Nautical"),p("p",null,"Light nautical chart with sea marks")],-1)),U.value==="nautical"?(H(),G("div",sy,"")):oe("",!0)],2),p("div",{onClick:w[25]||(w[25]=j=>Me("nautical-dark")),class:Je(["map-type-option",{active:U.value==="nautical-dark"}])},[w[60]||(w[60]=p("div",{class:"map-type-icon"},"",-1)),w[61]||(w[61]=p("div",{class:"map-type-info"},[p("h4",null,"Nautical+"),p("p",null,"Enhanced nautical with better contrast")],-1)),U.value==="nautical-dark"?(H(),G("div",ry,"")):oe("",!0)],2),p("div",{onClick:w[26]||(w[26]=j=>Me("terrain")),class:Je(["map-type-option",{active:U.value==="terrain"}])},[w[62]||(w[62]=p("div",{class:"map-type-icon"},"",-1)),w[63]||(w[63]=p("div",{class:"map-type-info"},[p("h4",null,"Terrain"),p("p",null,"Topographic map with elevation")],-1)),U.value==="terrain"?(H(),G("div",oy,"")):oe("",!0)],2)]),U.value!=="nautical"&&U.value!=="nautical-dark"?(H(),G("div",ay,[p("label",ly,[be(p("input",{type:"checkbox","onUpdate:modelValue":w[27]||(w[27]=j=>D.value=j),onChange:we},null,544),[[Dt,D.value]]),w[64]||(w[64]=p("span",null,"Show Nautical Markers",-1)),w[65]||(w[65]=p("small",null,"Overlay sea marks on current map",-1))])])):oe("",!0)])])])):oe("",!0),i.isAdmin&&!i.guestMode?(H(),G("div",uy,[p("button",{onClick:an,disabled:P.value.length===0,class:"undo-btn",title:"Undo last marker move"},"  ",8,cy),p("button",{onClick:b,disabled:E.value.length===0,class:"redo-btn",title:"Redo last undone move"},"  ",8,dy),p("button",{onClick:T,class:"save-coordinates-btn",title:"Save updated coordinates"},"  Save Coordinates ")])):oe("",!0),p("div",{ref_key:"mapRef",ref:u,class:"map"},null,512),i.guestMode?oe("",!0):(H(),G("div",hy,[...w[66]||(w[66]=[p("div",null,[p("span",{class:"dot green"}),Ke(" Fuel >20%")],-1),p("div",null,[p("span",{class:"dot yellow"}),Ke(" Fuel <20%")],-1),p("div",null,[p("span",{class:"dot red"}),Ke(" No station")],-1)])])),g.value?(H(),G("div",fy,ee(g.value),1)):oe("",!0)]))}},my=Ui(py,[["__scopeId","data-v-d79d0b81"]]),vy={class:"header"},_y={class:"header-actions"},gy=["disabled","title"],yy={class:"content"},by={class:"info-card"},wy={class:"info-row"},Sy={class:"value"},Ay={class:"info-row"},ky={class:"value"},Ty={class:"info-row"},Py={class:"value coordinates"},xy={class:"info-row"},Ey={class:"info-row"},Ly={class:"value"},Oy={class:"prices-card"},Cy={class:"fuel-type"},My={class:"price"},Iy={class:"info-card"},Dy={class:"info-row"},Ry={class:"value"},$y={class:"info-row"},jy={class:"value"},Ny={__name:"StationDetail",props:{station:{type:Object,required:!0}},emits:["back","pay"],setup(i){const e=i,{user:n}=Os(),r=se(!1),o=se(null),a=se(!1),u=se(null),d=bt(()=>Math.round(e.station.capacity*e.station.fuelLevel/100)),h=bt(()=>{const[A,P]=e.station.coordinates;return`${A.toFixed(6)}, ${P.toFixed(6)}`}),m=bt(()=>e.station.fuelLevel===0?" OUT OF FUEL":e.station.fuelLevel<20?" LOW FUEL":" AVAILABLE"),v=bt(()=>e.station.fuelLevel===0?"text-red-600":e.station.fuelLevel<20?"text-yellow-600":"text-green-600");Un(async()=>{if(n.value)try{const{data:A,error:P}=await yt.from("favorites").select("id").eq("user_id",n.value.id).eq("station_id",e.station.id).maybeSingle();if(P&&P.code!=="PGRST116"){console.error("Error checking favorite:",P);return}A&&(r.value=!0,o.value=A.id)}catch(A){console.error("Error checking favorite:",A)}});async function g(){if(!(!n.value||a.value)){a.value=!0;try{if(r.value){const{error:A}=await yt.from("favorites").delete().eq("id",o.value).eq("user_id",n.value.id);if(A)throw A;r.value=!1,o.value=null,y("Removed from favorites")}else{const{data:A,error:P}=await yt.from("favorites").insert({user_id:n.value.id,station_id:e.station.id,name:e.station.name,location:e.station.location,coordinates:e.station.coordinates,station_type:e.station.stationType,fuel_level:e.station.fuelLevel,capacity:e.station.capacity,fuels:e.station.fuels}).select().single();if(P)throw P;r.value=!0,o.value=A.id,y("Added to favorites!")}}catch(A){console.error("Error toggling favorite:",A),y("Error updating favorites",!0)}finally{a.value=!1}}}function y(A,P=!1){u.value={message:A,isError:P},setTimeout(()=>{u.value=null},3e3)}return(A,P)=>(H(),G("div",{class:"modal-overlay",onClick:P[3]||(P[3]=E=>A.$emit("back"))},[p("div",{class:"modal-content",onClick:P[2]||(P[2]=Mt(()=>{},["stop"]))},[p("header",vy,[p("h2",null,ee(i.station.name),1),p("div",_y,[ht(n)?(H(),G("button",{key:0,onClick:g,disabled:a.value,class:Je(["favorite-btn",{"is-favorite":r.value}]),title:r.value?"Remove from favorites":"Add to favorites"},ee(r.value?"":""),11,gy)):oe("",!0),p("button",{onClick:P[0]||(P[0]=E=>A.$emit("back")),class:"close-btn"},"")])]),p("div",yy,[p("div",by,[p("div",wy,[P[4]||(P[4]=p("span",{class:"label"},"Provider:",-1)),p("span",Sy," "+ee(i.station.stationType),1)]),p("div",Ay,[P[5]||(P[5]=p("span",{class:"label"},"Location:",-1)),p("span",ky," "+ee(i.station.location),1)]),p("div",Ty,[P[6]||(P[6]=p("span",{class:"label"},"Coordinates:",-1)),p("span",Py,ee(h.value),1)]),p("div",xy,[P[7]||(P[7]=p("span",{class:"label"},"Status:",-1)),p("span",{class:Je(["value",v.value])},ee(m.value),3)]),p("div",Ey,[P[8]||(P[8]=p("span",{class:"label"},"Fuel Level:",-1)),p("span",Ly,ee(d.value)+"L / "+ee(i.station.capacity)+"L",1)])]),p("div",Oy,[P[9]||(P[9]=p("h3",null,"Fuel Prices",-1)),(H(!0),G(it,null,ei(i.station.fuels,(E,k)=>(H(),G("div",{key:k,class:"price-row"},[p("span",Cy,ee(k.toUpperCase()),1),p("span",My,ee(E.price.toFixed(2))+"/L",1)]))),128))]),p("div",Iy,[p("div",Dy,[P[10]||(P[10]=p("span",{class:"label"},"Hours:",-1)),p("span",Ry," "+ee(i.station.hours),1)]),p("div",$y,[P[11]||(P[11]=p("span",{class:"label"},"Payment:",-1)),p("span",jy," "+ee(i.station.payment.join(", ")),1)])]),p("button",{onClick:P[1]||(P[1]=E=>A.$emit("pay",i.station)),class:"fuel-btn"}," START FUELING ")])]),u.value?(H(),G("div",{key:0,class:Je(["notification",{error:u.value.isError}])},ee(u.value.message),3)):oe("",!0)]))}},Uy=Ui(Ny,[["__scopeId","data-v-008fa4dc"]]),By={class:"payment-page"},Fy={class:"header"},zy={class:"content"},qy={key:0},Vy={class:"card station-info"},Hy={class:"station-location"},Zy={class:"card"},Ky={class:"fuel-options"},Wy=["value"],Gy={class:"fuel-details"},Jy={class:"fuel-name"},Yy={class:"fuel-price"},Xy={class:"card"},Qy={class:"preset-buttons"},e0=["onClick"],t0={class:"price-breakdown"},i0={class:"price-row"},n0={class:"price-row total"},s0={key:0,class:"error-message"},r0={class:"card"},o0={class:"payment-methods"},a0={class:"payment-method-card"},l0={class:"payment-method-card"},u0={class:"payment-method-card"},c0={key:1,class:"processing-screen"},d0={class:"processing-animation"},h0={key:2,class:"refueling-screen"},f0={class:"refueling-animation"},p0={class:"progress-bar"},m0={class:"progress-text"},v0={class:"liters-dispensed"},_0={key:3,class:"receipt-screen"},g0={class:"receipt-card"},y0={class:"receipt-header"},b0={class:"transaction-id"},w0={class:"timestamp"},S0={class:"receipt-details"},A0={class:"receipt-row"},k0={class:"receipt-row"},T0={class:"receipt-row"},P0={class:"receipt-row"},x0={class:"receipt-row"},E0={class:"receipt-total"},L0={__name:"PaymentScreen",props:{station:{type:Object,required:!0}},emits:["back","complete"],setup(i,{emit:e}){const n=i,r=e,o=se("selection"),a=se(Object.keys(n.station.fuels)[0]),u=se(50),d=se("card"),h=se(""),m=se({});Object.keys(n.station.fuels).forEach(V=>{m.value[V]=Math.floor(Math.random()*400)+100});const v=se("Connecting to payment gateway..."),g=se(0),y=se(0),A=se(""),P=se(""),E=bt(()=>{var V;return((V=n.station.fuels[a.value])==null?void 0:V.price)||0}),k=bt(()=>E.value*u.value);function U(V){return m.value[V]||0}function D(){switch(o.value){case"selection":return"Payment";case"processing":return"Processing Payment";case"refueling":return"Refueling";case"receipt":return"Receipt";default:return"Payment"}}function M(){return{card:"Credit Card",mobile:"Mobile Pay",qr:"QR Code"}[d.value]||d.value}function B(){o.value==="selection"?r("back"):o.value==="receipt"&&Le()}function ue(){if(h.value="",!u.value||u.value<=0){h.value="Please enter a valid amount";return}const V=U(a.value);if(u.value>V){h.value=`Only ${V}L of ${a.value.toUpperCase()} available`;return}if(u.value<5){h.value="Minimum fuel amount is 5L";return}o.value="processing",le()}async function le(){const V=["Connecting to payment gateway...","Verifying payment method...","Authorizing transaction...","Payment confirmed!"];for(let x=0;x<V.length;x++)v.value=V[x],await new Promise(W=>setTimeout(W,800));A.value="FD"+Date.now().toString().slice(-8),P.value=new Date().toLocaleString("et-EE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}),o.value="refueling",ge()}async function ge(){for(let re=0;re<=60;re++)g.value=Math.round(re/60*100),y.value=u.value*re/60,await new Promise(N=>setTimeout(N,50));m.value[a.value]-=u.value,o.value="receipt"}function Ee(){const V=`
=================================
      FUELDOCK ESTONIA
=================================

Transaction #${A.value}
${P.value}

---------------------------------
Station: ${n.station.name}
Fuel Type: ${a.value.toUpperCase()}
Amount: ${u.value}L
Price/L: ${E.value.toFixed(2)}
Payment: ${M()}
---------------------------------
TOTAL: ${k.value.toFixed(2)}
=================================

Thank you for using FuelDock!
  `.trim(),x=new Blob([V],{type:"text/plain"}),W=URL.createObjectURL(x),re=document.createElement("a");re.href=W,re.download=`receipt-${A.value}.txt`,re.click(),URL.revokeObjectURL(W)}function Le(){r("complete",{station:n.station.name,fuelType:a.value.toUpperCase(),liters:u.value,cost:k.value,transactionId:A.value,timestamp:P.value,paymentMethod:M(),date:new Date().toISOString()})}return(V,x)=>(H(),G("div",By,[p("header",Fy,[p("button",{onClick:B,class:"back-btn"}," Back"),p("h2",null,ee(D()),1)]),p("div",zy,[o.value==="selection"?(H(),G("div",qy,[p("div",Vy,[p("h3",null,ee(i.station.name),1),p("p",Hy,ee(i.station.location),1)]),p("div",Zy,[x[5]||(x[5]=p("h3",null,"Select Fuel Type",-1)),p("div",Ky,[(H(!0),G(it,null,ei(i.station.fuels,(W,re)=>(H(),G("label",{key:re,class:Je(["fuel-option",{"low-stock":U(re)<100}])},[be(p("input",{type:"radio",value:re,"onUpdate:modelValue":x[0]||(x[0]=N=>a.value=N)},null,8,Wy),[[Ci,a.value]]),p("div",Gy,[p("span",Jy,ee(re.toUpperCase()),1),p("span",Yy,ee(W.price.toFixed(2))+"/L",1),p("span",{class:Je(["fuel-stock",{warning:U(re)<100}])},ee(U(re))+"L available ",3)])],2))),128))])]),p("div",Xy,[x[8]||(x[8]=p("h3",null,"Fuel Amount",-1)),p("div",Qy,[(H(),G(it,null,ei([25,50,75,100],W=>p("button",{key:W,onClick:re=>u.value=W,class:Je(["preset-btn",{active:u.value===W}])},ee(W)+"L ",11,e0)),64))]),be(p("input",{type:"number","onUpdate:modelValue":x[1]||(x[1]=W=>u.value=W),placeholder:"50",class:"input",min:"1"},null,512),[[ot,u.value,void 0,{number:!0}]]),p("div",t0,[p("div",i0,[x[6]||(x[6]=p("span",null,"Price per liter:",-1)),p("span",null,ee(E.value.toFixed(2))+"",1)]),p("div",n0,[x[7]||(x[7]=p("span",null,"Total Cost:",-1)),p("strong",null,ee(k.value.toFixed(2))+"",1)])]),h.value?(H(),G("div",s0,"  "+ee(h.value),1)):oe("",!0)]),p("div",r0,[x[12]||(x[12]=p("h3",null,"Payment Method",-1)),p("div",o0,[p("label",a0,[be(p("input",{type:"radio",value:"card","onUpdate:modelValue":x[2]||(x[2]=W=>d.value=W)},null,512),[[Ci,d.value]]),x[9]||(x[9]=p("div",{class:"method-content"},[p("span",{class:"method-icon"},""),p("span",{class:"method-name"},"Credit Card")],-1))]),p("label",l0,[be(p("input",{type:"radio",value:"mobile","onUpdate:modelValue":x[3]||(x[3]=W=>d.value=W)},null,512),[[Ci,d.value]]),x[10]||(x[10]=p("div",{class:"method-content"},[p("span",{class:"method-icon"},""),p("span",{class:"method-name"},"Mobile Pay")],-1))]),p("label",u0,[be(p("input",{type:"radio",value:"qr","onUpdate:modelValue":x[4]||(x[4]=W=>d.value=W)},null,512),[[Ci,d.value]]),x[11]||(x[11]=Vp('<div class="method-content" data-v-5ebfec41><div class="method-icon qr-icon" data-v-5ebfec41><svg viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" data-v-5ebfec41><rect x="5" y="5" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="12" y="12" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="5" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="67" y="12" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="5" y="60" width="35" height="35" fill="none" stroke="currentColor" stroke-width="3" data-v-5ebfec41></rect><rect x="12" y="67" width="21" height="21" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="84" y="48" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="60" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="60" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="60" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="84" y="72" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="48" y="84" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect><rect x="72" y="84" width="7" height="7" fill="currentColor" data-v-5ebfec41></rect></svg></div><span class="method-name" data-v-5ebfec41>QR Code</span></div>',1))])])]),p("button",{onClick:ue,class:"confirm-btn"},"PROCEED TO PAYMENT")])):oe("",!0),o.value==="processing"?(H(),G("div",c0,[p("div",d0,[x[13]||(x[13]=p("div",{class:"spinner"},null,-1)),p("h3",null,ee(v.value),1),x[14]||(x[14]=p("p",null,"Please wait...",-1))])])):oe("",!0),o.value==="refueling"?(H(),G("div",h0,[p("div",f0,[x[15]||(x[15]=p("div",{class:"fuel-pump-icon"},"",-1)),x[16]||(x[16]=p("h3",null,"Refueling in Progress",-1)),p("div",p0,[p("div",{class:"progress-fill",style:Nn({width:g.value+"%"})},null,4)]),p("p",m0,ee(g.value)+"%",1),p("p",v0,ee(y.value.toFixed(1))+"L / "+ee(u.value)+"L",1)])])):oe("",!0),o.value==="receipt"?(H(),G("div",_0,[x[26]||(x[26]=p("div",{class:"success-animation"},[p("div",{class:"checkmark"},""),p("h3",null,"Payment Successful!")],-1)),p("div",g0,[p("div",y0,[x[17]||(x[17]=p("h3",null,"Receipt",-1)),p("p",b0,"Transaction #"+ee(A.value),1),p("p",w0,ee(P.value),1)]),x[24]||(x[24]=p("div",{class:"receipt-divider"},null,-1)),p("div",S0,[p("div",A0,[x[18]||(x[18]=p("span",null,"Station:",-1)),p("span",null,ee(i.station.name),1)]),p("div",k0,[x[19]||(x[19]=p("span",null,"Fuel Type:",-1)),p("span",null,ee(a.value.toUpperCase()),1)]),p("div",T0,[x[20]||(x[20]=p("span",null,"Amount:",-1)),p("span",null,ee(u.value)+"L",1)]),p("div",P0,[x[21]||(x[21]=p("span",null,"Price per liter:",-1)),p("span",null,ee(E.value.toFixed(2))+"",1)]),p("div",x0,[x[22]||(x[22]=p("span",null,"Payment Method:",-1)),p("span",null,ee(M()),1)])]),x[25]||(x[25]=p("div",{class:"receipt-divider"},null,-1)),p("div",E0,[x[23]||(x[23]=p("span",null,"Total Paid:",-1)),p("strong",null,ee(k.value.toFixed(2))+"",1)])]),p("div",{class:"receipt-actions"},[p("button",{onClick:Ee,class:"download-btn"},"  Download Receipt "),p("button",{onClick:Le,class:"finish-btn"}," Done ")])])):oe("",!0)])]))}},O0=Ui(L0,[["__scopeId","data-v-5ebfec41"]]),C0={class:"history-page"},M0={class:"header"},I0={class:"content"},D0={key:0,class:"empty"},R0={key:1,class:"history-list"},$0={class:"item-header"},j0={class:"date"},N0={class:"cost"},U0={class:"item-details"},B0={key:2,class:"summary"},F0={class:"total-spent"},z0={class:"modal-actions"},q0={__name:"HistoryScreen",emits:["back"],setup(i){const e=se([]),n=se(!1);Un(()=>{e.value=JSON.parse(localStorage.getItem("fuelHistory")||"[]")});const r=bt(()=>e.value.reduce((d,h)=>d+h.cost,0));function o(d){return new Date(d).toLocaleDateString("et-EE",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function a(){n.value=!0}function u(){localStorage.removeItem("fuelHistory"),e.value=[],n.value=!1}return(d,h)=>(H(),G("div",C0,[p("header",M0,[p("button",{onClick:h[0]||(h[0]=m=>d.$emit("back")),class:"back-btn"}," Back"),h[4]||(h[4]=p("h2",null,"Fuel History",-1))]),p("div",I0,[e.value.length===0?(H(),G("div",D0,[...h[5]||(h[5]=[p("p",null,"No transactions yet",-1)])])):(H(),G("div",R0,[(H(!0),G(it,null,ei(e.value,(m,v)=>(H(),G("div",{key:v,class:"history-item"},[p("div",$0,[p("span",j0,ee(o(m.date)),1),p("span",N0,ee(m.cost.toFixed(2))+"",1)]),p("div",U0,[p("p",null,[p("strong",null,ee(m.station),1)]),p("p",null,ee(m.liters)+"L "+ee(m.fuelType),1)])]))),128))])),e.value.length>0?(H(),G("div",B0,[p("button",{onClick:a,class:"reset-btn"},"  Clear History "),p("div",F0,[p("p",null,[h[6]||(h[6]=Ke("Total spent: ",-1)),p("strong",null,ee(r.value.toFixed(2))+"",1)])])])):oe("",!0),n.value?(H(),G("div",{key:3,class:"modal-overlay",onClick:h[3]||(h[3]=m=>n.value=!1)},[p("div",{class:"confirm-modal",onClick:h[2]||(h[2]=Mt(()=>{},["stop"]))},[h[7]||(h[7]=p("div",{class:"modal-icon"},"",-1)),h[8]||(h[8]=p("h3",null,"Clear History?",-1)),h[9]||(h[9]=p("p",null,"This will permanently delete all fuel history records.",-1)),p("div",z0,[p("button",{onClick:h[1]||(h[1]=m=>n.value=!1),class:"cancel-btn"},"Cancel"),p("button",{onClick:u,class:"confirm-btn"},"Clear All")])])])):oe("",!0)])]))}},V0=Ui(q0,[["__scopeId","data-v-1dd5308e"]]),H0={class:"favorites-container"},Z0={class:"favorites-header"},K0={class:"favorites-content"},W0={key:0,class:"empty-state"},G0={key:1,class:"favorites-list"},J0={class:"favorites-actions"},Y0={class:"sort-options"},X0={class:"favorite-cards"},Q0={class:"card-header"},eb={class:"card-badges"},tb={class:"card-body"},ib={class:"info-row"},nb={class:"info-row"},sb={key:0,class:"info-row"},rb={class:"info-row"},ob={key:0,class:"card-notes"},ab={class:"notes-text"},lb={key:1,class:"card-tags"},ub={class:"card-actions"},cb=["onClick"],db=["onClick"],hb=["onClick"],fb={class:"modal-subtitle"},pb={class:"form-group"},mb={class:"form-group"},vb={class:"tags-input"},_b={key:0,class:"current-tags"},gb=["onClick"],yb={class:"modal-actions"},bb={__name:"FavoritesScreen",emits:["back","view-station","show-on-map"],setup(i,{emit:e}){const{user:n}=Os(),r=e,o=se([]),a=se("distance"),u=se(null),d=se(""),h=se([]),m=se(""),v=se(null);Un(async()=>{await P(),g()});function g(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(V=>{v.value={lat:V.coords.latitude,lng:V.coords.longitude},A()},()=>{v.value={lat:58.5953,lng:25.0136},A()})}function y(V,x,W,re){const R=(W-V)*Math.PI/180,J=(re-x)*Math.PI/180,Ae=Math.sin(R/2)*Math.sin(R/2)+Math.cos(V*Math.PI/180)*Math.cos(W*Math.PI/180)*Math.sin(J/2)*Math.sin(J/2);return(6371*(2*Math.atan2(Math.sqrt(Ae),Math.sqrt(1-Ae)))).toFixed(1)}function A(){v.value&&o.value.forEach(V=>{V.distance=y(v.value.lat,v.value.lng,V.coordinates[0],V.coordinates[1])})}async function P(){if(!n.value)return;const{data:V,error:x}=await yt.from("favorites").select("*").eq("user_id",n.value.id);x?console.error("Error loading favorites:",x):o.value=V||[]}const E=bt(()=>{const V=[...o.value];return a.value==="distance"?V.sort((x,W)=>parseFloat(x.distance||999)-parseFloat(W.distance||999)):a.value==="name"?V.sort((x,W)=>x.name.localeCompare(W.name)):a.value==="fuelLevel"?V.sort((x,W)=>W.fuelLevel-x.fuelLevel):a.value==="dateAdded"&&V.sort((x,W)=>new Date(W.created_at)-new Date(x.created_at)),V});function k(V){return V.fuelLevel===0?"fuel-empty":V.fuelLevel<20?"fuel-low":"fuel-good"}function U(V){return V.fuelLevel===0?"Empty":V.fuelLevel<20?`${V.fuelLevel}% Low`:`${V.fuelLevel}%`}function D(V){if(!V.fuels)return"N/A";const x=Object.values(V.fuels).map(W=>W.price).filter(W=>W>0);return x.length===0?"N/A":`From ${Math.min(...x).toFixed(2)}/L`}function M(V){r("view-station",V)}function B(){r("show-on-map",o.value)}function ue(V){u.value=V,d.value=V.notes||"",h.value=V.tags||[]}function le(){m.value.trim()&&!h.value.includes(m.value.trim())&&(h.value.push(m.value.trim()),m.value="")}function ge(V){h.value.splice(V,1)}async function Ee(){const{error:V}=await yt.from("favorites").update({notes:d.value,tags:h.value}).eq("id",u.value.id).eq("user_id",n.value.id);if(V)console.error("Error saving notes:",V);else{const x=o.value.findIndex(W=>W.id===u.value.id);x!==-1&&(o.value[x].notes=d.value,o.value[x].tags=h.value),u.value=null}}async function Le(V){if(!confirm(`Remove ${V.name} from favorites?`))return;const{error:x}=await yt.from("favorites").delete().eq("id",V.id).eq("user_id",n.value.id);x?console.error("Error removing favorite:",x):o.value=o.value.filter(W=>W.id!==V.id)}return(V,x)=>(H(),G("div",H0,[p("header",Z0,[p("button",{onClick:x[0]||(x[0]=W=>V.$emit("back")),class:"back-btn"}," Back to Map"),x[8]||(x[8]=p("h2",null," My Favorites",-1))]),p("div",K0,[o.value.length===0?(H(),G("div",W0,[x[9]||(x[9]=p("div",{class:"empty-icon"},"",-1)),x[10]||(x[10]=p("h3",null,"No Favorites Yet",-1)),x[11]||(x[11]=p("p",null,"Start adding marinas to your favorites from the map!",-1)),p("button",{onClick:x[1]||(x[1]=W=>V.$emit("back")),class:"browse-btn"}," Browse Marinas ")])):(H(),G("div",G0,[p("div",J0,[p("button",{onClick:B,class:"show-all-btn"},"  Show All on Map "),p("div",Y0,[x[13]||(x[13]=p("label",null,"Sort by:",-1)),be(p("select",{"onUpdate:modelValue":x[2]||(x[2]=W=>a.value=W),class:"sort-select"},[...x[12]||(x[12]=[p("option",{value:"distance"},"Distance",-1),p("option",{value:"name"},"Name",-1),p("option",{value:"fuelLevel"},"Fuel Level",-1),p("option",{value:"dateAdded"},"Recently Added",-1)])],512),[[Sm,a.value]])])]),p("div",X0,[(H(!0),G(it,null,ei(E.value,W=>(H(),G("div",{key:W.id,class:"favorite-card"},[p("div",Q0,[p("h3",null,ee(W.name),1),p("div",eb,[p("span",{class:Je(["fuel-badge",k(W)])},ee(U(W)),3)])]),p("div",tb,[p("div",ib,[x[14]||(x[14]=p("span",{class:"icon"},"",-1)),p("span",null,ee(W.location),1)]),p("div",nb,[x[15]||(x[15]=p("span",{class:"icon"},"",-1)),p("span",null,ee(W.stationType),1)]),W.distance?(H(),G("div",sb,[x[16]||(x[16]=p("span",{class:"icon"},"",-1)),p("span",null,ee(W.distance)+" km away",1)])):oe("",!0),p("div",rb,[x[17]||(x[17]=p("span",{class:"icon"},"",-1)),p("span",null,ee(D(W)),1)])]),W.notes?(H(),G("div",ob,[x[18]||(x[18]=p("div",{class:"notes-label"}," My Notes:",-1)),p("div",ab,ee(W.notes),1)])):oe("",!0),W.tags&&W.tags.length>0?(H(),G("div",lb,[(H(!0),G(it,null,ei(W.tags,re=>(H(),G("span",{key:re,class:"tag"},ee(re),1))),128))])):oe("",!0),p("div",ub,[p("button",{onClick:re=>M(W),class:"action-btn view-btn"},"  View ",8,cb),p("button",{onClick:re=>ue(W),class:"action-btn edit-btn"},"  Edit Notes ",8,db),p("button",{onClick:re=>Le(W),class:"action-btn remove-btn"},"  Remove ",8,hb)])]))),128))])]))]),u.value?(H(),G("div",{key:0,class:"modal-overlay",onClick:x[7]||(x[7]=W=>u.value=null)},[p("div",{class:"modal-content",onClick:x[6]||(x[6]=Mt(()=>{},["stop"]))},[x[21]||(x[21]=p("h3",null," Edit Notes",-1)),p("p",fb,ee(u.value.name),1),p("div",pb,[x[19]||(x[19]=p("label",null," Personal Notes",-1)),be(p("textarea",{"onUpdate:modelValue":x[3]||(x[3]=W=>d.value=W),placeholder:"Add your personal notes about this marina...",rows:"4",class:"notes-textarea"},null,512),[[ot,d.value]])]),p("div",mb,[x[20]||(x[20]=p("label",null," Tags",-1)),p("div",vb,[be(p("input",{"onUpdate:modelValue":x[4]||(x[4]=W=>m.value=W),onKeyup:Pm(le,["enter"]),placeholder:"Add a tag and press Enter",class:"tag-input"},null,544),[[ot,m.value]])]),h.value.length>0?(H(),G("div",_b,[(H(!0),G(it,null,ei(h.value,(W,re)=>(H(),G("span",{key:re,class:"edit-tag"},[Ke(ee(W)+" ",1),p("button",{onClick:N=>ge(re),class:"remove-tag-btn"},"",8,gb)]))),128))])):oe("",!0)]),p("div",yb,[p("button",{onClick:x[5]||(x[5]=W=>u.value=null),class:"cancel-btn"},"Cancel"),p("button",{onClick:Ee,class:"save-btn"},"Save")])])])):oe("",!0)]))}},wb=Ui(bb,[["__scopeId","data-v-f33f546b"]]),Sb={class:"admin-container"},Ab={class:"admin-header"},kb={class:"tabs"},Tb={key:0,class:"tab-content"},Pb={class:"toolbar"},xb={class:"table-container"},Eb={class:"data-table"},Lb={class:"fuel-indicator"},Ob={class:"fuel-bar"},Cb={class:"action-buttons"},Mb=["onClick"],Ib=["onClick"],Db={key:1,class:"tab-content"},Rb={class:"toolbar"},$b={class:"table-container"},jb={class:"data-table"},Nb={class:"action-buttons"},Ub=["onClick","title"],Bb=["onClick"],Fb={class:"form-row"},zb={class:"form-group"},qb={class:"form-group"},Vb={class:"form-row"},Hb={class:"form-group"},Zb={class:"form-group"},Kb={class:"form-row"},Wb={class:"form-group"},Gb={class:"form-group"},Jb={class:"form-row"},Yb={class:"form-group"},Xb={class:"form-group"},Qb={class:"form-actions"},ew={type:"submit",class:"save-btn"},tw={class:"modal-actions"},iw={key:4,class:"loading-overlay"},nw={__name:"AdminPanel",emits:["back"],setup(i,{emit:e}){const n=se("marinas"),r=se(""),o=se(""),a=se(!1),u=se(null),d=se(!1),h=se(null),m=se(null),v=se([...zd]),g=se([]),y=se({id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}),A=bt(()=>{if(!r.value)return v.value;const N=r.value.toLowerCase();return v.value.filter(R=>{var J;return R.name.toLowerCase().includes(N)||R.location.toLowerCase().includes(N)||((J=R.stationType)==null?void 0:J.toLowerCase().includes(N))})}),P=bt(()=>{if(!o.value)return g.value;const N=o.value.toLowerCase();return g.value.filter(R=>R.email.toLowerCase().includes(N))});dr(n,async N=>{N==="users"&&g.value.length===0&&await E()});async function E(){d.value=!0;try{const{data:N,error:R}=await yt.auth.admin.listUsers();if(R)throw R;g.value=N.users||[]}catch(N){re("Failed to load users: "+N.message,"error")}finally{d.value=!1}}function k(N){u.value=N,y.value={...N}}function U(N){N.target.classList.contains("modal-overlay")&&D()}function D(){a.value=!1,u.value=null,m.value=null,M()}function M(){y.value={id:"",name:"",location:"",coordinates:[0,0],hasStation:!0,stationType:"",fuelLevel:0,capacity:0,fuels:{diesel:{available:!0,price:0},e95:{available:!0,price:0},e98:{available:!0,price:0}},payment:["card"],hours:"24/7"}}async function B(){if(u.value){const N=v.value.findIndex(R=>R.id===u.value.id);N!==-1&&(v.value[N]={...y.value})}else y.value.id=`station-${Date.now()}`,v.value.push({...y.value});await V(),D()}function ue(N){m.value={type:"marina",item:N}}async function le(){if(m.value){if(m.value.type==="marina"){const N=m.value.item;v.value=v.value.filter(R=>R.id!==N.id),re("Marina deleted successfully","success"),await V()}m.value=null}}async function ge(N){if(confirm(`Delete user ${N.email}?`)){d.value=!0;try{const{error:R}=await yt.auth.admin.deleteUser(N.id);if(R)throw R;g.value=g.value.filter(J=>J.id!==N.id),re("User deleted successfully","success")}catch(R){re("Failed to delete user: "+R.message,"error")}finally{d.value=!1}}}async function Ee(N){var Ae;const J=((Ae=N.user_metadata)==null?void 0:Ae.role)==="admin"?"user":"admin";d.value=!0;try{const{error:te}=await yt.auth.admin.updateUserById(N.id,{user_metadata:{role:J}});if(te)throw te;const ft=g.value.findIndex(pe=>pe.id===N.id);ft!==-1&&(g.value[ft].user_metadata={...g.value[ft].user_metadata,role:J}),re(`User ${J==="admin"?"promoted to":"removed from"} admin`,"success")}catch(te){re("Failed to update role: "+te.message,"error")}finally{d.value=!1}}function Le(N){var R;return((R=N.user_metadata)==null?void 0:R.role)==="admin"||N.email==="admin@fueldock.ee"}async function V(){d.value=!0;try{const R=await(await fetch("http://localhost:3001/api/save-stations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v.value)})).json();if(R.success)re(" Marinas saved successfully!","success");else throw new Error(R.message)}catch(N){console.error("Save error:",N),re(" Error saving marinas. Is the save server running?","error")}finally{d.value=!1}}function x(N){return N===0?"empty":N<20?"low":"good"}function W(N){return N?new Date(N).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"Never"}function re(N,R="success"){h.value={message:N,type:R},setTimeout(()=>{h.value=null},3e3)}return(N,R)=>(H(),G("div",Sb,[p("header",Ab,[p("button",{onClick:R[0]||(R[0]=J=>N.$emit("back")),class:"back-btn"}," Back to Map"),R[19]||(R[19]=p("h2",null,"Admin Panel",-1))]),p("div",kb,[p("button",{class:Je({active:n.value==="marinas"}),onClick:R[1]||(R[1]=J=>n.value="marinas")}," Marina Management ",2),p("button",{class:Je({active:n.value==="users"}),onClick:R[2]||(R[2]=J=>n.value="users")}," User Management ",2)]),n.value==="marinas"?(H(),G("div",Tb,[p("div",Pb,[be(p("input",{"onUpdate:modelValue":R[3]||(R[3]=J=>r.value=J),placeholder:" Search marinas...",class:"search-input"},null,512),[[ot,r.value]]),p("button",{onClick:R[4]||(R[4]=J=>a.value=!0),class:"add-btn"}," + Add Marina ")]),p("div",xb,[p("table",Eb,[R[20]||(R[20]=p("thead",null,[p("tr",null,[p("th",null,"Name"),p("th",null,"Location"),p("th",null,"Provider"),p("th",null,"Fuel Level"),p("th",null,"Capacity"),p("th",null,"Status"),p("th",null,"Actions")])],-1)),p("tbody",null,[(H(!0),G(it,null,ei(A.value,J=>(H(),G("tr",{key:J.id},[p("td",null,ee(J.name),1),p("td",null,ee(J.location),1),p("td",null,ee(J.stationType),1),p("td",null,[p("div",Lb,[p("div",Ob,[p("div",{class:Je(["fuel-fill",x(J.fuelLevel)]),style:Nn({width:J.fuelLevel+"%"})},null,6)]),p("span",null,ee(J.fuelLevel)+"%",1)])]),p("td",null,ee(J.capacity)+"L",1),p("td",null,[p("span",{class:Je(["status-badge",J.hasStation?"active":"inactive"])},ee(J.hasStation?"Active":"Inactive"),3)]),p("td",null,[p("div",Cb,[p("button",{onClick:Ae=>k(J),class:"edit-btn",title:"Edit"},"  ",8,Mb),p("button",{onClick:Ae=>ue(J),class:"delete-btn",title:"Delete"},"  ",8,Ib)])])]))),128))])])])])):oe("",!0),n.value==="users"?(H(),G("div",Db,[p("div",Rb,[be(p("input",{"onUpdate:modelValue":R[5]||(R[5]=J=>o.value=J),placeholder:" Search users...",class:"search-input"},null,512),[[ot,o.value]])]),p("div",$b,[p("table",jb,[R[21]||(R[21]=p("thead",null,[p("tr",null,[p("th",null,"Email"),p("th",null,"Created"),p("th",null,"Last Sign In"),p("th",null,"Status"),p("th",null,"Actions")])],-1)),p("tbody",null,[(H(!0),G(it,null,ei(P.value,J=>(H(),G("tr",{key:J.id},[p("td",null,ee(J.email),1),p("td",null,ee(W(J.created_at)),1),p("td",null,ee(W(J.last_sign_in_at)),1),p("td",null,[p("span",{class:Je(["status-badge",J.email_confirmed_at?"active":"pending"])},ee(J.email_confirmed_at?"Verified":"Pending"),3)]),p("td",null,[p("div",Nb,[p("button",{onClick:Ae=>Ee(J),class:"role-btn",title:Le(J)?"Remove Admin":"Make Admin"},ee(Le(J)?"":""),9,Ub),p("button",{onClick:Ae=>ge(J),class:"delete-btn",title:"Delete User"},"  ",8,Bb)])])]))),128))])])])])):oe("",!0),a.value||u.value?(H(),G("div",{key:2,class:"modal-overlay",onMousedown:U},[p("div",{class:"modal-content",onClick:R[14]||(R[14]=Mt(()=>{},["stop"])),onMousedown:R[15]||(R[15]=Mt(()=>{},["stop"]))},[p("h3",null,ee(u.value?"Edit Marina":"Add New Marina"),1),p("form",{onSubmit:Mt(B,["prevent"]),class:"marina-form"},[p("div",Fb,[p("div",zb,[R[22]||(R[22]=p("label",null,"Marina Name *",-1)),be(p("input",{"onUpdate:modelValue":R[6]||(R[6]=J=>y.value.name=J),type:"text",required:"",placeholder:"e.g., DIRHAMI SADAM"},null,512),[[ot,y.value.name]])]),p("div",qb,[R[23]||(R[23]=p("label",null,"Location *",-1)),be(p("input",{"onUpdate:modelValue":R[7]||(R[7]=J=>y.value.location=J),type:"text",required:"",placeholder:"e.g., Lne maakond"},null,512),[[ot,y.value.location]])])]),p("div",Vb,[p("div",Hb,[R[24]||(R[24]=p("label",null,"Latitude *",-1)),be(p("input",{"onUpdate:modelValue":R[8]||(R[8]=J=>y.value.coordinates[0]=J),type:"number",step:"any",required:""},null,512),[[ot,y.value.coordinates[0],void 0,{number:!0}]])]),p("div",Zb,[R[25]||(R[25]=p("label",null,"Longitude *",-1)),be(p("input",{"onUpdate:modelValue":R[9]||(R[9]=J=>y.value.coordinates[1]=J),type:"number",step:"any",required:""},null,512),[[ot,y.value.coordinates[1],void 0,{number:!0}]])])]),p("div",Kb,[p("div",Wb,[R[26]||(R[26]=p("label",null,"Station Type",-1)),be(p("input",{"onUpdate:modelValue":R[10]||(R[10]=J=>y.value.stationType=J),type:"text",placeholder:"e.g., Olerex"},null,512),[[ot,y.value.stationType]])]),p("div",Gb,[p("label",null,[be(p("input",{"onUpdate:modelValue":R[11]||(R[11]=J=>y.value.hasStation=J),type:"checkbox"},null,512),[[Dt,y.value.hasStation]]),R[27]||(R[27]=Ke(" Has Fuel Station ",-1))])])]),p("div",Jb,[p("div",Yb,[R[28]||(R[28]=p("label",null,"Fuel Level (%)",-1)),be(p("input",{"onUpdate:modelValue":R[12]||(R[12]=J=>y.value.fuelLevel=J),type:"number",min:"0",max:"100"},null,512),[[ot,y.value.fuelLevel,void 0,{number:!0}]])]),p("div",Xb,[R[29]||(R[29]=p("label",null,"Capacity (L)",-1)),be(p("input",{"onUpdate:modelValue":R[13]||(R[13]=J=>y.value.capacity=J),type:"number",min:"0"},null,512),[[ot,y.value.capacity,void 0,{number:!0}]])])]),p("div",Qb,[p("button",{type:"button",onClick:D,class:"cancel-btn"}," Cancel "),p("button",ew,ee(u.value?"Update":"Add")+" Marina ",1)])],32)],32)],32)):oe("",!0),m.value?(H(),G("div",{key:3,class:"modal-overlay",onClick:R[18]||(R[18]=J=>m.value=null)},[p("div",{class:"login-prompt-modal",onClick:R[17]||(R[17]=Mt(()=>{},["stop"]))},[R[35]||(R[35]=p("div",{class:"modal-icon"},"",-1)),R[36]||(R[36]=p("h3",null,"Confirm Delete",-1)),p("p",null,[R[30]||(R[30]=Ke(" Are you sure you want to delete",-1)),R[31]||(R[31]=p("br",null,null,-1)),p("strong",null,ee(m.value.item.name||m.value.item.email),1),R[32]||(R[32]=Ke("? ",-1)),R[33]||(R[33]=p("br",null,null,-1)),R[34]||(R[34]=Ke("This action cannot be undone. ",-1))]),p("div",tw,[p("button",{onClick:le,class:"delete-confirm-btn"}," Delete "),p("button",{onClick:R[16]||(R[16]=J=>m.value=null),class:"cancel-btn"}," Cancel ")])])])):oe("",!0),d.value?(H(),G("div",iw,[...R[37]||(R[37]=[p("div",{class:"spinner"},null,-1)])])):oe("",!0),h.value?(H(),G("div",{key:5,class:Je(["notification",h.value.type])},ee(h.value.message),3)):oe("",!0)]))}},sw=Ui(nw,[["__scopeId","data-v-e78266fb"]]),rw={key:1,class:"app"},ow={class:"header-fixed"},aw={class:"flex justify-between items-center w-full"},lw={class:"text-2xl font-bold flex items-center gap-2"},uw={key:0,class:"guest-badge"},cw={class:"header-actions desktop-actions"},dw={class:"h-[calc(100vh-80px)]"},hw={class:"modal-actions"},fw={key:3,class:"loading-screen"},pw={class:"progress-bar"},mw={__name:"App",setup(i){const{user:e,loading:n,isAdmin:r,checkUser:o,signOut:a,initAuthListener:u}=Os(),d=se(0),h=se("map"),m=se(null),v=se(null),g=se(null),y=se(!1),A=se(!1),P=se(!1),E=se(!1),k=se(!1);Un(async()=>{const re=setInterval(()=>{d.value+=5,d.value>=100&&clearInterval(re)},100);await o(),u()});function U(){y.value=!0}async function D(){try{await a(),y.value=!1,h.value="map",m.value=null}catch(re){console.error("Logout error:",re)}}function M(re){if(y.value){A.value=!0;return}re.hasStation&&(m.value=re)}function B(){y.value=!1,A.value=!1}function ue(re){v.value=re,h.value="payment",m.value=null}function le(){h.value="map",m.value=null,v.value=null,g.value&&setTimeout(()=>{g.value.invalidateMapSize()},50)}async function ge(){m.value=null,g.value&&setTimeout(async()=>{g.value.restoreMapView(),await g.value.refreshFavorites()},50)}function Ee(re){const N=JSON.parse(localStorage.getItem("fuelHistory")||"[]");N.unshift({...re,date:new Date().toISOString()}),localStorage.setItem("fuelHistory",JSON.stringify(N)),le()}async function Le(re){h.value="map",g.value&&setTimeout(async()=>{await g.value.refreshFavorites()},50)}function V(){P.value=!P.value}function x(){E.value=!E.value}function W(){h.value="map",m.value=null,g.value&&setTimeout(()=>{g.value.resetToDefaultView()},100)}return(re,N)=>(H(),G(it,null,[!ht(e)&&!y.value&&!ht(n)?(H(),Xi(Sg,{key:0,onGuestMode:U})):(H(),G("div",rw,[p("header",ow,[p("div",aw,[p("h1",lw,[p("img",{src:qo,alt:"Logo",class:"w-16 h-16 logo-clickable",onClick:W,title:"Go to Map"}),N[18]||(N[18]=p("span",{class:"app-title"},"FuelDock Estonia",-1)),y.value?(H(),G("span",uw,"Guest")):oe("",!0)]),p("div",cw,[!y.value&&ht(e)?(H(),G("button",{key:0,onClick:N[0]||(N[0]=R=>h.value="favorites"),class:"favorites-btn",title:"My Favorites"},"  ")):oe("",!0),!y.value&&ht(e)?(H(),G("button",{key:1,onClick:N[1]||(N[1]=R=>h.value="history"),class:"history-btn",title:"Fuel History"},"  ")):oe("",!0),!y.value&&ht(e)&&h.value==="map"?(H(),G("button",{key:2,onClick:V,class:"filters-btn",title:"Filters"},"  ")):oe("",!0),!y.value&&ht(e)&&h.value==="map"?(H(),G("button",{key:3,onClick:x,class:"map-type-btn-header",title:"Map Type"},"  ")):oe("",!0),ht(r)&&!y.value?(H(),G("button",{key:4,onClick:N[2]||(N[2]=R=>h.value="admin"),class:"admin-btn",title:"Admin Panel"},"  ")):oe("",!0),y.value?(H(),G("button",{key:5,onClick:B,class:"guest-login-btn",title:"Login"},"  Login ")):oe("",!0),ht(e)?(H(),G("button",{key:6,onClick:D,class:"logout-btn",title:"Logout"},"  Logout ")):oe("",!0)]),p("button",{onClick:N[3]||(N[3]=R=>k.value=!k.value),class:"hamburger-btn mobile-only"},"  ")])]),k.value?(H(),G("div",{key:0,class:"mobile-menu-overlay",onClick:N[12]||(N[12]=R=>k.value=!1)},[p("div",{class:"mobile-menu",onClick:N[11]||(N[11]=Mt(()=>{},["stop"]))},[!y.value&&ht(e)?(H(),G("button",{key:0,onClick:N[4]||(N[4]=R=>{h.value="favorites",k.value=!1}),class:"mobile-menu-item",title:"Favorites"},"  ")):oe("",!0),!y.value&&ht(e)?(H(),G("button",{key:1,onClick:N[5]||(N[5]=R=>{h.value="history",k.value=!1}),class:"mobile-menu-item",title:"History"},"  ")):oe("",!0),!y.value&&ht(e)&&h.value==="map"?(H(),G("button",{key:2,onClick:N[6]||(N[6]=R=>{V(),k.value=!1}),class:"mobile-menu-item",title:"Filters"},"  ")):oe("",!0),!y.value&&ht(e)&&h.value==="map"?(H(),G("button",{key:3,onClick:N[7]||(N[7]=R=>{x(),k.value=!1}),class:"mobile-menu-item",title:"Map Type"},"  ")):oe("",!0),ht(r)&&!y.value?(H(),G("button",{key:4,onClick:N[8]||(N[8]=R=>{h.value="admin",k.value=!1}),class:"mobile-menu-item",title:"Admin"},"  ")):oe("",!0),y.value?(H(),G("button",{key:5,onClick:N[9]||(N[9]=R=>{B(),k.value=!1}),class:"mobile-menu-item login-item",title:"Login"},"  ")):oe("",!0),ht(e)?(H(),G("button",{key:6,onClick:N[10]||(N[10]=R=>{D(),k.value=!1}),class:"mobile-menu-item logout-item",title:"Logout"},"  ")):oe("",!0)])])):oe("",!0),p("main",dw,[h.value==="favorites"?(H(),Xi(wb,{key:0,onBack:le,onViewStation:M,onShowOnMap:Le})):h.value==="history"?(H(),Xi(V0,{key:1,onBack:le})):h.value==="payment"?(H(),Xi(O0,{key:2,station:v.value,onBack:le,onComplete:Ee},null,8,["station"])):h.value==="admin"?(H(),Xi(sw,{key:3,onBack:le})):oe("",!0),be(ti(my,{ref_key:"mapViewRef",ref:g,"guest-mode":y.value,"is-admin":ht(r),"show-filters-from-parent":P.value,"show-map-type-from-parent":E.value,onStationClick:M,onCloseFilters:N[13]||(N[13]=R=>P.value=!1),onCloseMapType:N[14]||(N[14]=R=>E.value=!1)},null,8,["guest-mode","is-admin","show-filters-from-parent","show-map-type-from-parent"]),[[am,h.value==="map"]])]),m.value?(H(),Xi(Uy,{key:1,station:m.value,onBack:ge,onPay:ue},null,8,["station"])):oe("",!0)])),A.value?(H(),G("div",{key:2,class:"modal-overlay",onClick:N[17]||(N[17]=R=>A.value=!1)},[p("div",{class:"login-prompt-modal",onClick:N[16]||(N[16]=Mt(()=>{},["stop"]))},[N[19]||(N[19]=p("div",{class:"modal-icon"},"",-1)),N[20]||(N[20]=p("h3",null,"Login Required",-1)),N[21]||(N[21]=p("p",null,"Please login to see marina details and fuel information",-1)),p("div",hw,[p("button",{onClick:B,class:"login-btn"}," Login / Sign Up "),p("button",{onClick:N[15]||(N[15]=R=>A.value=!1),class:"cancel-btn"}," Continue Browsing ")])])])):oe("",!0),ht(n)?(H(),G("div",fw,[N[22]||(N[22]=p("img",{src:qo,alt:"FuelDock",class:"loading-logo"},null,-1)),p("div",pw,[p("div",{class:"progress-fill",style:Nn({width:d.value+"%"})},null,4)])])):oe("",!0)],64))}},vw=Ui(mw,[["__scopeId","data-v-270e792d"]]);Lm(vw).mount("#app");
